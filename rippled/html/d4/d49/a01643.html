<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: beast::TemporaryFile Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/d49/a01643.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d8/d3c/a06333.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">beast::TemporaryFile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for beast::TemporaryFile:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/de8/a06334.png" border="0" usemap="#beast_1_1_temporary_file_inherit__map" alt="Inheritance graph"/></div>
<map name="beast_1_1_temporary_file_inherit__map" id="beast_1_1_temporary_file_inherit__map">
<area shape="rect" id="node4" href="../../d1/d04/a01744.html" title="beast::Uncopyable" alt="" coords="227,15,357,44"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for beast::TemporaryFile:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/db3/a06335.png" border="0" usemap="#beast_1_1_temporary_file_coll__map" alt="Collaboration graph"/></div>
<map name="beast_1_1_temporary_file_coll__map" id="beast_1_1_temporary_file_coll__map">
<area shape="rect" id="node4" href="../../d1/d04/a01744.html" title="beast::Uncopyable" alt="" coords="227,223,357,252"/><area shape="rect" id="node6" href="../../d4/d33/a00536.html" title="beast::File" alt="" coords="381,223,464,252"/><area shape="rect" id="node8" href="../../d1/d88/a01578.html" title="beast::String" alt="" coords="375,101,471,131"/><area shape="rect" id="node10" href="../../d5/d42/a00269.html" title="beast::CharPointer_UTF8" alt="" coords="337,5,508,35"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a0f758a509f24817a6975617e59c2bdd3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a0f758a509f24817a6975617e59c2bdd3">OptionFlags</a> { <a class="el" href="../../d4/d49/a01643.html#a0f758a509f24817a6975617e59c2bdd3ae212ab6850953a109974ab3a3ed50c48">useHiddenFile</a> = 1, 
<a class="el" href="../../d4/d49/a01643.html#a0f758a509f24817a6975617e59c2bdd3a8cac0b11079b7ea3b36dc82ac3c33ffe">putNumbersInBrackets</a> = 2
 }</td></tr>
<tr class="separator:a0f758a509f24817a6975617e59c2bdd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a96b779b37ccf2d9ac4773e777e2af1e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a96b779b37ccf2d9ac4773e777e2af1e1">TemporaryFile</a> (const <a class="el" href="../../d1/d88/a01578.html">String</a> &amp;suffix=<a class="el" href="../../d1/d88/a01578.html#a3902dfc5998297bbf2c0a6c5f9dbd813">String::empty</a>, int optionFlags=0)</td></tr>
<tr class="separator:a96b779b37ccf2d9ac4773e777e2af1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05909abd0cea04da215f12c695622ab5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a05909abd0cea04da215f12c695622ab5">TemporaryFile</a> (const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;<a class="el" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a>, int optionFlags=0)</td></tr>
<tr class="separator:a05909abd0cea04da215f12c695622ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a882900de3695d574c5b88ddc6f6d0a2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a882900de3695d574c5b88ddc6f6d0a2c">TemporaryFile</a> (const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;<a class="el" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a>, const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;<a class="el" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a>)</td></tr>
<tr class="separator:a882900de3695d574c5b88ddc6f6d0a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3fd2076e62834a49541ce334880ad8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a5a3fd2076e62834a49541ce334880ad8">~TemporaryFile</a> ()</td></tr>
<tr class="separator:a5a3fd2076e62834a49541ce334880ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159edb594111713a8647ae4d4337f682"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a159edb594111713a8647ae4d4337f682">getFile</a> () const noexcept</td></tr>
<tr class="separator:a159edb594111713a8647ae4d4337f682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5806aa6ff6e078a2b033b45a6ee2d260"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a5806aa6ff6e078a2b033b45a6ee2d260">getTargetFile</a> () const noexcept</td></tr>
<tr class="separator:a5806aa6ff6e078a2b033b45a6ee2d260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa751b12e6e0e453cd39c78a5603cd1a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#aa751b12e6e0e453cd39c78a5603cd1a4">overwriteTargetFileWithTemporary</a> () const </td></tr>
<tr class="separator:aa751b12e6e0e453cd39c78a5603cd1a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e90d8e7c925fc8325fa5d672ea71f7c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a8e90d8e7c925fc8325fa5d672ea71f7c">deleteTemporaryFile</a> () const </td></tr>
<tr class="separator:a8e90d8e7c925fc8325fa5d672ea71f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3eedd281de685bb0689ff2fa7e35fec4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d4/d33/a00536.html">File</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a></td></tr>
<tr class="separator:a3eedd281de685bb0689ff2fa7e35fec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff136706d1367e8420777d95750be34"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d4/d33/a00536.html">File</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a></td></tr>
<tr class="separator:aeff136706d1367e8420777d95750be34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_a01744"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_a01744')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../d1/d04/a01744.html">beast::Uncopyable</a></td></tr>
<tr class="memitem:a4661bf5ef8d2cf3887b4fab72247d77b inherit pro_methods_a01744"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d04/a01744.html#a4661bf5ef8d2cf3887b4fab72247d77b">Uncopyable</a> ()</td></tr>
<tr class="separator:a4661bf5ef8d2cf3887b4fab72247d77b inherit pro_methods_a01744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ae4991f36ebcd34f47281cc2fdf689 inherit pro_methods_a01744"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d04/a01744.html#a94ae4991f36ebcd34f47281cc2fdf689">~Uncopyable</a> ()</td></tr>
<tr class="separator:a94ae4991f36ebcd34f47281cc2fdf689 inherit pro_methods_a01744"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages a temporary file, which will be deleted when this object is deleted.</p>
<p>This object is intended to be used as a stack based object, using its scope to make sure the temporary file isn't left lying around.</p>
<p>For example:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    File myTargetFile (<span class="stringliteral">&quot;~/myfile.txt&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// this will choose a file called something like &quot;~/myfile_temp239348.txt&quot;</span></div>
<div class="line">    <span class="comment">// which definitely doesn&#39;t exist at the time the constructor is called.</span></div>
<div class="line">    <a class="code" href="../../d4/d49/a01643.html#a96b779b37ccf2d9ac4773e777e2af1e1">TemporaryFile</a> temp (myTargetFile);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// create a stream to the temporary file, and write some data to it...</span></div>
<div class="line">    ScopedPointer &lt;FileOutputStream&gt; out (temp.getFile().createOutputStream());</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (out != <span class="keyword">nullptr</span>)</div>
<div class="line">    {</div>
<div class="line">        out-&gt;write ( ...etc )</div>
<div class="line">        out = <span class="keyword">nullptr</span>; <span class="comment">// (deletes the stream)</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// ..now we&#39;ve finished writing, this will rename the temp file to</span></div>
<div class="line">        <span class="comment">// make it replace the target file we specified above.</span></div>
<div class="line">        <span class="keywordtype">bool</span> succeeded = temp.overwriteTargetFileWithTemporary();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ..and even if something went wrong and our overwrite failed,</span></div>
<div class="line">    <span class="comment">// as the TemporaryFile object goes out of scope here, it&#39;ll make sure</span></div>
<div class="line">    <span class="comment">// that the temp file gets deleted.</span></div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d4/d33/a00536.html">File</a>, <a class="el" href="../../d2/ddf/a00544.html">FileOutputStream</a> </dd></dl>

<p>Definition at line <a class="el" href="../../de/db2/a02246_source.html#l00068">68</a> of file <a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a0f758a509f24817a6975617e59c2bdd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d4/d49/a01643.html#a0f758a509f24817a6975617e59c2bdd3">beast::TemporaryFile::OptionFlags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a0f758a509f24817a6975617e59c2bdd3ae212ab6850953a109974ab3a3ed50c48"></a>useHiddenFile</em>&nbsp;</td><td class="fielddoc">
<p>Indicates that the temporary file should be hidden - i.e. its name should start with a dot. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a0f758a509f24817a6975617e59c2bdd3a8cac0b11079b7ea3b36dc82ac3c33ffe"></a>putNumbersInBrackets</em>&nbsp;</td><td class="fielddoc">
<p>Indicates that when numbers are appended to make sure the file is unique, they should go in brackets rather than just being appended (see <a class="el" href="../../d4/d33/a00536.html#a9db2d7b49a700abfab3825a8f9383fed">File::getNonexistentSibling()</a> ) </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../de/db2/a02246_source.html#l00072">72</a> of file <a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="../../d4/d49/a01643.html#a0f758a509f24817a6975617e59c2bdd3ae212ab6850953a109974ab3a3ed50c48">useHiddenFile</a> = 1,          </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="../../d4/d49/a01643.html#a0f758a509f24817a6975617e59c2bdd3a8cac0b11079b7ea3b36dc82ac3c33ffe">putNumbersInBrackets</a> = 2    </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a96b779b37ccf2d9ac4773e777e2af1e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">beast::TemporaryFile::TemporaryFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d88/a01578.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>suffix</em> = <code><a class="el" href="../../d1/d88/a01578.html#a3902dfc5998297bbf2c0a6c5f9dbd813">String::empty</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optionFlags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a randomly-named temporary file in the default temp directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">suffix</td><td>a file suffix to use for the file </td></tr>
    <tr><td class="paramname">optionFlags</td><td>a combination of the values listed in the OptionFlags enum The file will not be created until you write to it. And remember that when this object is deleted, the file will also be deleted! </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d14/a02245_source.html#l00036">36</a> of file <a class="el" href="../../da/d14/a02245_source.html">TemporaryFile.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    : <a class="code" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a> (<a class="code" href="../../d5/d83/a03337.html#a63a32d080d7c9c77e469250c1425813d">createTempFile</a> (<a class="code" href="../../d4/d33/a00536.html#afb9bae1309483dee8e67ac8d64aeeb7c">File::getSpecialLocation</a> (<a class="code" href="../../d4/d33/a00536.html#ada2531c8b733039e5fb97ff0228fb45eacf887d136a3996cfc3cc211bba6774a1">File::tempDirectory</a>),</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                                     <span class="stringliteral">&quot;temp_&quot;</span> + <a class="code" href="../../d1/d88/a01578.html#ae1eb947c6ec77531fd2cd789b82b78dd">String::toHexString</a> (<a class="code" href="../../d9/d42/a01156.html#a24f40d59f5c639a57035d777dca23cf6">Random::getSystemRandom</a>().nextInt()),</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                                     suffix, optionFlags))</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a05909abd0cea04da215f12c695622ab5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">beast::TemporaryFile::TemporaryFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;&#160;</td>
          <td class="paramname"><em>targetFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optionFlags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a temporary file in the same directory as a specified file.</p>
<p>This is useful if you have a file that you want to overwrite, but don't want to harm the original file if the write operation fails. You can use this to create a temporary file next to the target file, then write to the temporary file, and finally use <a class="el" href="../../d4/d49/a01643.html#aa751b12e6e0e453cd39c78a5603cd1a4">overwriteTargetFileWithTemporary()</a> to replace the target file with the one you've just written.</p>
<p>This class won't create any files until you actually write to them. And remember that when this object is deleted, the temporary file will also be deleted!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">targetFile</td><td>the file that you intend to overwrite - the temporary file will be created in the same directory as this </td></tr>
    <tr><td class="paramname">optionFlags</td><td>a combination of the values listed in the OptionFlags enum </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d14/a02245_source.html#l00043">43</a> of file <a class="el" href="../../da/d14/a02245_source.html">TemporaryFile.cpp</a>.</p>

<p>References <a class="el" href="../../d5/d31/a01931_source.html#l00146">bassert</a>, <a class="el" href="../../d5/d5b/a02235_source.html#l00042">beast::File::nonexistent()</a>, and <a class="el" href="../../de/db2/a02246_source.html#l00161">targetFile</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    : <a class="code" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a> (<a class="code" href="../../d5/d83/a03337.html#a63a32d080d7c9c77e469250c1425813d">createTempFile</a> (target.getParentDirectory(),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                     target.getFileNameWithoutExtension()</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                       + <span class="stringliteral">&quot;_temp&quot;</span> + <a class="code" href="../../d1/d88/a01578.html#ae1eb947c6ec77531fd2cd789b82b78dd">String::toHexString</a> (<a class="code" href="../../d9/d42/a01156.html#a24f40d59f5c639a57035d777dca23cf6">Random::getSystemRandom</a>().nextInt()),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                     target.getFileExtension(), optionFlags)),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <a class="code" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a> (target)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// If you use this constructor, you need to give it a valid target file!</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="../../d5/d31/a01931.html#a745b5a866910287229bef6cd436e6440">bassert</a> (<a class="code" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a> != <a class="code" href="../../d4/d33/a00536.html#a6239d45b521fe72b5d691456cf72b69c">File::nonexistent</a> ());</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d49/a01643_a05909abd0cea04da215f12c695622ab5_cgraph.png" border="0" usemap="#d4/d49/a01643_a05909abd0cea04da215f12c695622ab5_cgraph" alt=""/></div>
<map name="d4/d49/a01643_a05909abd0cea04da215f12c695622ab5_cgraph" id="d4/d49/a01643_a05909abd0cea04da215f12c695622ab5_cgraph">
<area shape="rect" id="node3" href="../../d4/d33/a00536.html#a6239d45b521fe72b5d691456cf72b69c" title="beast::File::nonexistent" alt="" coords="201,13,359,43"/><area shape="rect" id="node5" href="../../d0/daa/a01029.html#a910b7576fa5b93a3608915e883a1271c" title="beast::NonexistentHolder\l::getInstance" alt="" coords="408,5,579,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a882900de3695d574c5b88ddc6f6d0a2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">beast::TemporaryFile::TemporaryFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;&#160;</td>
          <td class="paramname"><em>targetFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d33/a00536.html">File</a> &amp;&#160;</td>
          <td class="paramname"><em>temporaryFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a temporary file using an explicit filename. The other constructors are a better choice than this one, unless for some reason you need to explicitly specify the temporary file you want to use.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">targetFile</td><td>the file that you intend to overwrite </td></tr>
    <tr><td class="paramname">temporaryFile</td><td>the temporary file to be used </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d14/a02245_source.html#l00054">54</a> of file <a class="el" href="../../da/d14/a02245_source.html">TemporaryFile.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    : <a class="code" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a> (temporary), <a class="code" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a> (target)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5a3fd2076e62834a49541ce334880ad8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">beast::TemporaryFile::~TemporaryFile </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor.</p>
<p>When this object is deleted it will make sure that its temporary file is also deleted! If the operation fails, it'll throw an assertion in debug mode. </p>

<p>Definition at line <a class="el" href="../../da/d14/a02245_source.html#l00059">59</a> of file <a class="el" href="../../da/d14/a02245_source.html">TemporaryFile.cpp</a>.</p>

<p>References <a class="el" href="../../d5/d31/a01931_source.html#l00141">bassertfalse</a>, and <a class="el" href="../../da/d14/a02245_source.html#l00103">deleteTemporaryFile()</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span> (! <a class="code" href="../../d4/d49/a01643.html#a8e90d8e7c925fc8325fa5d672ea71f7c">deleteTemporaryFile</a>())</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="comment">/* Failed to delete our temporary file! The most likely reason for this would be</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">           that you&#39;ve not closed an output stream that was being used to write to file.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">           If you find that something beyond your control is changing permissions on</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">           your temporary files and preventing them from being deleted, you may want to</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">           call TemporaryFile::deleteTemporaryFile() to detect those error cases and</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">           handle them appropriately.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="../../d5/d31/a01931.html#a9a6d0fa666b51bfc896fa2a4088c7831">bassertfalse</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d49/a01643_a5a3fd2076e62834a49541ce334880ad8_cgraph.png" border="0" usemap="#d4/d49/a01643_a5a3fd2076e62834a49541ce334880ad8_cgraph" alt=""/></div>
<map name="d4/d49/a01643_a5a3fd2076e62834a49541ce334880ad8_cgraph" id="d4/d49/a01643_a5a3fd2076e62834a49541ce334880ad8_cgraph">
<area shape="rect" id="node3" href="../../d4/d49/a01643.html#a8e90d8e7c925fc8325fa5d672ea71f7c" title="beast::TemporaryFile\l::deleteTemporaryFile" alt="" coords="201,78,348,125"/><area shape="rect" id="node5" href="../../d4/d33/a00536.html#a5cd8ce5409d6975129a235e84c053a26" title="beast::File::deleteFile" alt="" coords="397,60,544,89"/><area shape="rect" id="node18" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d" title="beast::Thread::sleep" alt="" coords="400,113,541,143"/><area shape="rect" id="node7" href="../../d4/d33/a00536.html#add6f39f75f82fd84d132a70e668e32a3" title="beast::File::exists" alt="" coords="607,8,732,37"/><area shape="rect" id="node11" href="../../d1/d88/a01578.html#a83751c1169fd80c2b8d9c07ca391c63c" title="beast::String::toUTF8" alt="" coords="808,59,955,88"/><area shape="rect" id="node13" href="../../d4/d33/a00536.html#a087e5760e6671f26e708dcae6674f872" title="beast::File::isDirectory" alt="" coords="592,112,747,141"/><area shape="rect" id="node9" href="../../d1/d88/a01578.html#a5f9e864d7e0850599b8ecf514c6f4359" title="beast::String::isNotEmpty" alt="" coords="795,5,968,35"/><area shape="rect" id="node15" href="../../d1/d88/a01578.html#adac6dac4898ce30d950e6e253fa47162" title="beast::String::isEmpty" alt="" coords="805,112,957,141"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8e90d8e7c925fc8325fa5d672ea71f7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool beast::TemporaryFile::deleteTemporaryFile </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to delete the temporary file, if it exists. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the file is successfully deleted (or if it didn't exist). </dd></dl>

<p>Definition at line <a class="el" href="../../da/d14/a02245_source.html#l00103">103</a> of file <a class="el" href="../../da/d14/a02245_source.html">TemporaryFile.cpp</a>.</p>

<p>References <a class="el" href="../../d5/dc0/a02272_source.html#l00248">beast::File::deleteFile()</a>, <a class="el" href="../../d7/db5/a02088_source.html#l00465">beast::Thread::sleep()</a>, and <a class="el" href="../../de/db2/a02246_source.html#l00161">temporaryFile</a>.</p>

<p>Referenced by <a class="el" href="../../da/d14/a02245_source.html#l00059">~TemporaryFile()</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// Have a few attempts at deleting the file before giving up..</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 5; --i &gt;= 0;)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a>.<a class="code" href="../../d4/d33/a00536.html#a5cd8ce5409d6975129a235e84c053a26">deleteFile</a>())</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d">Thread::sleep</a> (50);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_cgraph.png" border="0" usemap="#d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_cgraph" alt=""/></div>
<map name="d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_cgraph" id="d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_cgraph">
<area shape="rect" id="node3" href="../../d4/d33/a00536.html#a5cd8ce5409d6975129a235e84c053a26" title="beast::File::deleteFile" alt="" coords="203,60,349,89"/><area shape="rect" id="node16" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d" title="beast::Thread::sleep" alt="" coords="205,113,347,143"/><area shape="rect" id="node5" href="../../d4/d33/a00536.html#add6f39f75f82fd84d132a70e668e32a3" title="beast::File::exists" alt="" coords="412,8,537,37"/><area shape="rect" id="node9" href="../../d1/d88/a01578.html#a83751c1169fd80c2b8d9c07ca391c63c" title="beast::String::toUTF8" alt="" coords="613,59,760,88"/><area shape="rect" id="node11" href="../../d4/d33/a00536.html#a087e5760e6671f26e708dcae6674f872" title="beast::File::isDirectory" alt="" coords="397,112,552,141"/><area shape="rect" id="node7" href="../../d1/d88/a01578.html#a5f9e864d7e0850599b8ecf514c6f4359" title="beast::String::isNotEmpty" alt="" coords="600,5,773,35"/><area shape="rect" id="node13" href="../../d1/d88/a01578.html#adac6dac4898ce30d950e6e253fa47162" title="beast::String::isEmpty" alt="" coords="611,112,763,141"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_icgraph.png" border="0" usemap="#d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_icgraph" alt=""/></div>
<map name="d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_icgraph" id="d4/d49/a01643_a8e90d8e7c925fc8325fa5d672ea71f7c_icgraph">
<area shape="rect" id="node3" href="../../d4/d49/a01643.html#a5a3fd2076e62834a49541ce334880ad8" title="beast::TemporaryFile\l::~TemporaryFile" alt="" coords="204,5,348,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a159edb594111713a8647ae4d4337f682"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d4/d33/a00536.html">File</a>&amp; beast::TemporaryFile::getFile </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the temporary file. </p>

<p>Definition at line <a class="el" href="../../de/db2/a02246_source.html#l00130">130</a> of file <a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a>.</p>

<p>References <a class="el" href="../../de/db2/a02246_source.html#l00161">temporaryFile</a>.</p>

<p>Referenced by <a class="el" href="../../d5/d5b/a02235_source.html#l00706">beast::File::replaceWithData()</a>, and <a class="el" href="../../d5/d5b/a02235_source.html#l00730">beast::File::replaceWithText()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a>; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d49/a01643_a159edb594111713a8647ae4d4337f682_icgraph.png" border="0" usemap="#d4/d49/a01643_a159edb594111713a8647ae4d4337f682_icgraph" alt=""/></div>
<map name="d4/d49/a01643_a159edb594111713a8647ae4d4337f682_icgraph" id="d4/d49/a01643_a159edb594111713a8647ae4d4337f682_icgraph">
<area shape="rect" id="node3" href="../../d4/d33/a00536.html#a05a70c6e6570aec32842e76c6d08a677" title="beast::File::replaceWithData" alt="" coords="201,5,388,35"/><area shape="rect" id="node5" href="../../d4/d33/a00536.html#ae29d14b6f84ab267d820d2001db82d8f" title="beast::File::replaceWithText" alt="" coords="201,59,388,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5806aa6ff6e078a2b033b45a6ee2d260"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d4/d33/a00536.html">File</a>&amp; beast::TemporaryFile::getTargetFile </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the target file that was specified in the constructor. </p>

<p>Definition at line <a class="el" href="../../de/db2/a02246_source.html#l00133">133</a> of file <a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a>.</p>

<p>References <a class="el" href="../../de/db2/a02246_source.html#l00161">targetFile</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa751b12e6e0e453cd39c78a5603cd1a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool beast::TemporaryFile::overwriteTargetFileWithTemporary </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tries to move the temporary file to overwrite the target file that was specified in the constructor.</p>
<p>If you used the constructor that specified a target file, this will attempt to replace that file with the temporary one.</p>
<p>Before calling this, make sure:</p>
<ul>
<li>that you've actually written to the temporary file</li>
<li>that you've closed any open streams that you were using to write to it</li>
<li>and that you don't have any streams open to the target file, which would prevent it being overwritten</li>
</ul>
<p>If the file move succeeds, this returns false, and the temporary file will have disappeared. If it fails, the temporary file will probably still exist, but will be deleted when this object is destroyed. </p>

<p>Definition at line <a class="el" href="../../da/d14/a02245_source.html#l00076">76</a> of file <a class="el" href="../../da/d14/a02245_source.html">TemporaryFile.cpp</a>.</p>

<p>References <a class="el" href="../../d5/d31/a01931_source.html#l00146">bassert</a>, <a class="el" href="../../d5/d31/a01931_source.html#l00141">bassertfalse</a>, <a class="el" href="../../d5/dc0/a02272_source.html#l00171">beast::File::exists()</a>, <a class="el" href="../../d5/d5b/a02235_source.html#l00255">beast::File::moveFileTo()</a>, <a class="el" href="../../d5/d5b/a02235_source.html#l00042">beast::File::nonexistent()</a>, <a class="el" href="../../d7/db5/a02088_source.html#l00465">beast::Thread::sleep()</a>, <a class="el" href="../../de/db2/a02246_source.html#l00161">targetFile</a>, and <a class="el" href="../../de/db2/a02246_source.html#l00161">temporaryFile</a>.</p>

<p>Referenced by <a class="el" href="../../d5/d5b/a02235_source.html#l00706">beast::File::replaceWithData()</a>, and <a class="el" href="../../d5/d5b/a02235_source.html#l00730">beast::File::replaceWithText()</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// This method only works if you created this object with the constructor</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// that takes a target file!</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../d5/d31/a01931.html#a745b5a866910287229bef6cd436e6440">bassert</a> (<a class="code" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a> != <a class="code" href="../../d4/d33/a00536.html#a6239d45b521fe72b5d691456cf72b69c">File::nonexistent</a> ());</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a>.<a class="code" href="../../d4/d33/a00536.html#add6f39f75f82fd84d132a70e668e32a3">exists</a>())</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// Have a few attempts at overwriting the file before giving up..</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 5; --i &gt;= 0;)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/d49/a01643.html#a3eedd281de685bb0689ff2fa7e35fec4">temporaryFile</a>.<a class="code" href="../../d4/d33/a00536.html#a1189ca4bcc58e94cf6d3dbda3bf3136a">moveFileTo</a> (<a class="code" href="../../d4/d49/a01643.html#aeff136706d1367e8420777d95750be34">targetFile</a>))</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d">Thread::sleep</a> (100);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// There&#39;s no temporary file to use. If your write failed, you should</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">// probably check, and not bother calling this method.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="../../d5/d31/a01931.html#a9a6d0fa666b51bfc896fa2a4088c7831">bassertfalse</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_cgraph.png" border="0" usemap="#d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_cgraph" alt=""/></div>
<map name="d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_cgraph" id="d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_cgraph">
<area shape="rect" id="node3" href="../../d4/d33/a00536.html#add6f39f75f82fd84d132a70e668e32a3" title="beast::File::exists" alt="" coords="1224,41,1349,71"/><area shape="rect" id="node9" href="../../d4/d33/a00536.html#a1189ca4bcc58e94cf6d3dbda3bf3136a" title="beast::File::moveFileTo" alt="" coords="287,93,444,123"/><area shape="rect" id="node69" href="../../d4/d33/a00536.html#a6239d45b521fe72b5d691456cf72b69c" title="beast::File::nonexistent" alt="" coords="287,147,444,176"/><area shape="rect" id="node73" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d" title="beast::Thread::sleep" alt="" coords="295,200,436,229"/><area shape="rect" id="node5" href="../../d1/d88/a01578.html#a5f9e864d7e0850599b8ecf514c6f4359" title="beast::String::isNotEmpty" alt="" coords="1435,68,1608,97"/><area shape="rect" id="node7" href="../../d1/d88/a01578.html#a83751c1169fd80c2b8d9c07ca391c63c" title="beast::String::toUTF8" alt="" coords="1448,172,1595,201"/><area shape="rect" id="node11" href="../../d4/d33/a00536.html#a5cd8ce5409d6975129a235e84c053a26" title="beast::File::deleteFile" alt="" coords="972,93,1119,123"/><area shape="rect" id="node20" href="../../d4/d33/a00536.html#afdc3dee4b13ce720b9d56f712a7da9f3" title="beast::File::moveInternal" alt="" coords="496,240,661,269"/><area shape="rect" id="node14" href="../../d4/d33/a00536.html#a087e5760e6671f26e708dcae6674f872" title="beast::File::isDirectory" alt="" coords="1209,249,1364,279"/><area shape="rect" id="node16" href="../../d1/d88/a01578.html#adac6dac4898ce30d950e6e253fa47162" title="beast::String::isEmpty" alt="" coords="1445,249,1597,279"/><area shape="rect" id="node22" href="../../d4/d33/a00536.html#aef49f67624d359bde93859684e35da7b" title="beast::File::copyInternal" alt="" coords="727,293,889,323"/><area shape="rect" id="node45" href="../../d4/d33/a00536.html#a3a1b6608cad33bede2b440a5acf6f0f2" title="beast::File::getFullPathName" alt="" coords="712,451,904,480"/><area shape="rect" id="node47" href="../../d4/d33/a00536.html#a853208a795413bea5fa6d3dfa9e5e210" title="beast::File::hasWriteAccess" alt="" coords="952,240,1139,269"/><area shape="rect" id="node25" href="../../d2/ddf/a00544.html#a743a8066bd7093d727a3e7b225ee1f01" title="beast::FileOutputStream\l::failedToOpen" alt="" coords="964,146,1127,193"/><area shape="rect" id="node30" href="../../d4/d33/a00536.html#ae55350fe97ce93ee0adffdf48abcc2e7" title="beast::File::getSize" alt="" coords="979,293,1112,323"/><area shape="rect" id="node32" href="../../d2/dd6/a03414.html#a7378f09d8f10ef3ccbb2aeefe7ff41d3" title="Json::in" alt="" coords="1012,347,1079,376"/><area shape="rect" id="node34" href="../../d4/d8a/a01062.html#ac5cf6473eb4927f0469b95a18eb1c9b8" title="beast::OutputStream\l::writeFromInputStream" alt="" coords="967,557,1124,603"/><area shape="rect" id="node27" href="../../d9/de7/a01257.html#a0bca10ed2b5416e33dfd027869c849ce" title="beast::Result::failed" alt="" coords="1217,95,1356,124"/><area shape="rect" id="node36" href="../../d9/d9d/a03417.html#a975c0f5f2493f00dbf15e444b085d785" title="ripple::max" alt="" coords="1244,504,1329,533"/><area shape="rect" id="node38" href="../../df/d96/a00714.html#ad7da4644c542ada52519049105cd12f4" title="beast::InputStream\l::read" alt="" coords="1220,557,1353,603"/><area shape="rect" id="node40" href="../../d5/d83/a03337.html#a9747ec397aa1236065057d64c2364e20" title="beast::bmin" alt="" coords="1241,627,1332,656"/><area shape="rect" id="node42" href="../../d4/d8a/a01062.html#a1d16f6512dbe0117be4c64107f73ade6" title="beast::OutputStream\l::write" alt="" coords="1216,679,1357,726"/><area shape="rect" id="node49" href="../../d1/d88/a01578.html#a25ceb53b40eb960b0c46948f73052c40" title="beast::String::containsChar" alt="" coords="1196,303,1377,332"/><area shape="rect" id="node52" href="../../d4/d33/a00536.html#ac8e291a9a7c6cd2a05c3e47e5841c495" title="beast::File::getParentDirectory" alt="" coords="1187,451,1387,480"/><area shape="rect" id="node54" href="../../d4/d33/a00536.html#abfc034e18fa47721091bcaf1e79f75f8" title="beast::File::getPathUpTo\lLastSlash" alt="" coords="1437,442,1605,489"/><area shape="rect" id="node56" href="../../d1/d88/a01578.html#ac964e99361851027f5df041e2ff21084" title="beast::String::lastIndex\lOfChar" alt="" coords="1656,411,1813,458"/><area shape="rect" id="node62" href="../../d1/d88/a01578.html#a51b6c08a63652de5e8c66517483fa2b9" title="beast::String::substring" alt="" coords="1656,481,1813,511"/><area shape="rect" id="node58" href="../../d5/d42/a00269.html#a665d6b2f54c42bdf3c05f99661d68d58" title="beast::CharPointer\l_UTF8::getAndAdvance" alt="" coords="1861,403,2024,450"/><area shape="rect" id="node60" href="../../d5/d42/a00269.html#a2779ed9a31d09e471aebdd29de54fec8" title="beast::CharPointer\l_UTF8::isEmpty" alt="" coords="1877,473,2008,519"/><area shape="rect" id="node71" href="../../d0/daa/a01029.html#a910b7576fa5b93a3608915e883a1271c" title="beast::NonexistentHolder\l::getInstance" alt="" coords="493,293,664,339"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_icgraph.png" border="0" usemap="#d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_icgraph" alt=""/></div>
<map name="d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_icgraph" id="d4/d49/a01643_aa751b12e6e0e453cd39c78a5603cd1a4_icgraph">
<area shape="rect" id="node3" href="../../d4/d33/a00536.html#a05a70c6e6570aec32842e76c6d08a677" title="beast::File::replaceWithData" alt="" coords="287,5,473,35"/><area shape="rect" id="node5" href="../../d4/d33/a00536.html#ae29d14b6f84ab267d820d2001db82d8f" title="beast::File::replaceWithText" alt="" coords="287,59,473,88"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aeff136706d1367e8420777d95750be34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d4/d33/a00536.html">File</a> beast::TemporaryFile::targetFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/db2/a02246_source.html#l00161">161</a> of file <a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/db2/a02246_source.html#l00133">getTargetFile()</a>, <a class="el" href="../../da/d14/a02245_source.html#l00076">overwriteTargetFileWithTemporary()</a>, and <a class="el" href="../../da/d14/a02245_source.html#l00043">TemporaryFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a3eedd281de685bb0689ff2fa7e35fec4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d4/d33/a00536.html">File</a> beast::TemporaryFile::temporaryFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/db2/a02246_source.html#l00161">161</a> of file <a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a>.</p>

<p>Referenced by <a class="el" href="../../da/d14/a02245_source.html#l00103">deleteTemporaryFile()</a>, <a class="el" href="../../de/db2/a02246_source.html#l00130">getFile()</a>, and <a class="el" href="../../da/d14/a02245_source.html#l00076">overwriteTargetFileWithTemporary()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rippled/src/beast/modules/beast_core/files/<a class="el" href="../../de/db2/a02246_source.html">TemporaryFile.h</a></li>
<li>rippled/src/beast/modules/beast_core/files/<a class="el" href="../../da/d14/a02245_source.html">TemporaryFile.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d5/d83/a03337.html">beast</a></li><li class="navelem"><a class="el" href="../../d4/d49/a01643.html">TemporaryFile</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:05 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
