<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: ripple::LedgerMasterImp Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/dc7/a00838.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../dc/dea/a07360.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::LedgerMasterImp Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for ripple::LedgerMasterImp:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d5d/a07361.png" border="0" usemap="#ripple_1_1_ledger_master_imp_inherit__map" alt="Inheritance graph"/></div>
<map name="ripple_1_1_ledger_master_imp_inherit__map" id="ripple_1_1_ledger_master_imp_inherit__map">
<area shape="rect" id="node2" href="../../d1/de6/a00837.html" title="ripple::LedgerMaster" alt="" coords="5,92,144,121"/><area shape="rect" id="node4" href="../../d2/d49/a01561.html" title="beast::Stoppable" alt="" coords="15,5,135,35"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ripple::LedgerMasterImp:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d99/a07362.png" border="0" usemap="#ripple_1_1_ledger_master_imp_coll__map" alt="Collaboration graph"/></div>
<map name="ripple_1_1_ledger_master_imp_coll__map" id="ripple_1_1_ledger_master_imp_coll__map">
<area shape="rect" id="node2" href="../../d1/de6/a00837.html" title="ripple::LedgerMaster" alt="" coords="2020,193,2159,223"/><area shape="rect" id="node4" href="../../d2/d49/a01561.html" title="beast::Stoppable" alt="" coords="1343,119,1463,148"/><area shape="rect" id="node12" href="../../dd/d56/a00274.html" title="beast::Stoppable::Child" alt="" coords="1784,207,1941,236"/><area shape="rect" id="node17" href="../../d9/dda/a01289.html" title="beast::RootStoppable" alt="" coords="1789,92,1936,121"/><area shape="rect" id="node84" href="../../d8/d64/a00828.html" title="ripple::LedgerCleaner" alt="" coords="1791,317,1935,347"/><area shape="rect" id="node6" href="../../d7/d06/a00131.html" title="beast::Atomic\&lt; int \&gt;" alt="" coords="928,32,1069,61"/><area shape="rect" id="node8" href="../../d7/d02/a01808.html" title="beast::WaitableEvent" alt="" coords="373,231,520,260"/><area shape="rect" id="node10" href="../../d1/d04/a01744.html" title="beast::Uncopyable" alt="" coords="5,205,136,235"/><area shape="rect" id="node21" href="../../d2/d79/a00898.html" title="beast::LockFreeStack\l\&lt; Child \&gt;" alt="" coords="924,110,1073,157"/><area shape="rect" id="node24" href="../../d3/d08/a01018.html" title="beast::LockFreeStack\l\&lt; Element, Tag \&gt;::Node" alt="" coords="187,89,349,135"/><area shape="rect" id="node87" href="../../d9/db0/a01437.html" title="beast::PropertyStream\l::Source" alt="" coords="1327,307,1479,354"/><area shape="rect" id="node27" href="../../d7/d06/a00131.html" title="beast::Atomic\&lt; beast\l::LockFreeStack::Node * \&gt;" alt="" coords="544,46,723,93"/><area shape="rect" id="node33" href="../../d3/d13/a00836.html" title="ripple::LedgerHolder" alt="" coords="2213,1107,2352,1136"/><area shape="rect" id="node35" href="../../d3/d32/a01176.html" title="ripple::RangeSet" alt="" coords="2224,1160,2341,1189"/><area shape="rect" id="node39" href="../../d0/d3e/a00253.html" title="ripple::CanonicalTXSet" alt="" coords="2205,764,2360,793"/><area shape="rect" id="node45" href="../../da/db8/a00797.html" title="ripple::CanonicalTXSet::Key" alt="" coords="1309,692,1496,721"/><area shape="rect" id="node47" href="../../d0/d4e/a01741.html" title="ripple::uint256" alt="" coords="948,721,1049,751"/><area shape="rect" id="node70" href="../../d1/da7/a01709.html" title="ripple::TransactionMetaSet" alt="" coords="1313,447,1492,476"/><area shape="rect" id="node49" href="../../d7/d9a/a00152.html" title="base_uint256" alt="" coords="584,721,683,751"/><area shape="rect" id="node54" href="../../d9/dc5/a01705.html" title="ripple::TransactionEngine" alt="" coords="2199,575,2367,604"/><area shape="rect" id="node56" href="../../d7/dfc/a00349.html" title="ripple::CountedObject\l\&lt; TransactionEngine \&gt;" alt="" coords="1785,534,1940,581"/><area shape="rect" id="node60" href="../../df/d2e/a01737.html" title="ripple::uint160" alt="" coords="1812,604,1913,633"/><area shape="rect" id="node62" href="../../d7/d9a/a00152.html" title="base_uint160" alt="" coords="1353,639,1452,668"/><area shape="rect" id="node64" href="../../d0/d08/a00832.html" title="ripple::LedgerEntrySet" alt="" coords="1788,463,1937,492"/><area shape="rect" id="node66" href="../../d7/dfc/a00349.html" title="ripple::CountedObject\l\&lt; LedgerEntrySet \&gt;" alt="" coords="1329,377,1476,423"/><area shape="rect" id="node74" href="../../db/d1e/a01497.html" title="ripple::STArray" alt="" coords="944,403,1053,432"/><area shape="rect" id="node79" href="../../dc/d6e/a00833.html" title="ripple::LedgerEntrySetEntry" alt="" coords="908,533,1089,563"/><area shape="rect" id="node90" title="STL class. " alt="" coords="959,871,1039,900"/><area shape="rect" id="node107" href="../../dd/d55/a01638.html" title="ripple::TaggedCache\l\&lt; LedgerIndex, std::\lpair\&lt; LedgerHash, LedgerHash \&gt; \&gt;" alt="" coords="1289,1055,1516,1119"/><area shape="rect" id="node115" href="../../dd/d55/a01638.html" title="ripple::TaggedCache\l\&lt; LedgerHash, Ledger \&gt;" alt="" coords="1321,985,1484,1031"/><area shape="rect" id="node92" href="../../df/d0c/a00788.html" title="beast::Journal" alt="" coords="947,1207,1051,1236"/><area shape="rect" id="node94" href="../../df/d84/a01408.html" title="beast::Journal::Sink" alt="" coords="199,1184,337,1213"/><area shape="rect" id="node96" href="../../d4/d2c/a01575.html" title="beast::Journal::Stream" alt="" coords="556,1247,711,1276"/><area shape="rect" id="node100" href="../../dd/d70/a00835.html" title="ripple::LedgerHistory" alt="" coords="1792,931,1933,960"/><area shape="rect" id="node109" href="../../d2/dee/a00049.html" title="beast::abstract_clock\l\&lt; Duration \&gt;" alt="" coords="925,949,1072,995"/><area shape="rect" id="node112" href="../../d5/dc8/a01541.html" title="ripple::TaggedCache\l\&lt; Key, T, Hash, KeyEqual,\l Mutex \&gt;::Stats" alt="" coords="909,1068,1088,1132"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ac77311b87d5a70b3dc39e94990787e5e"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d1/d58/a02731.html#a3af771e282b88e6dca0215c6c890ae75">std::function</a>&lt; void(<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ac77311b87d5a70b3dc39e94990787e5e">callback</a></td></tr>
<tr class="separator:ac77311b87d5a70b3dc39e94990787e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90fec862507188a8f8a8630e288efd4"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d9/d9d/a03417.html#abf55a274ab90a3ca5b8dc903a401ad93">RippleRecursiveMutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a></td></tr>
<tr class="separator:aa90fec862507188a8f8a8630e288efd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2029911c2cd2ed209f4cbe0746c16740"><td class="memItemLeft" align="right" valign="top">typedef std::lock_guard&lt; <a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a></td></tr>
<tr class="separator:a2029911c2cd2ed209f4cbe0746c16740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15f1be3effcd9e309ea6a0a3f70f3d36"><td class="memItemLeft" align="right" valign="top">typedef <br class="typebreak"/>
<a class="el" href="../../d6/d92/a00586.html">beast::GenericScopedUnlock</a><br class="typebreak"/>
&lt; <a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a15f1be3effcd9e309ea6a0a3f70f3d36">ScopedUnlockType</a></td></tr>
<tr class="separator:a15f1be3effcd9e309ea6a0a3f70f3d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_a00837"><td colspan="2" onclick="javascript:toggleInherit('pub_types_a00837')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../d1/de6/a00837.html">ripple::LedgerMaster</a></td></tr>
<tr class="memitem:ad6c5dc1158fa188ea634249875675c91 inherit pub_types_a00837"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d1/d58/a02731.html#a3af771e282b88e6dca0215c6c890ae75">std::function</a>&lt; void(<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#ad6c5dc1158fa188ea634249875675c91">callback</a></td></tr>
<tr class="separator:ad6c5dc1158fa188ea634249875675c91 inherit pub_types_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ae09b0abc7bd8933ed2d0c75b6f2ffa inherit pub_types_a00837"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d9/d9d/a03417.html#abf55a274ab90a3ca5b8dc903a401ad93">RippleRecursiveMutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#a4ae09b0abc7bd8933ed2d0c75b6f2ffa">LockType</a></td></tr>
<tr class="separator:a4ae09b0abc7bd8933ed2d0c75b6f2ffa inherit pub_types_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732b418eecabfc65b00077787a3ce958 inherit pub_types_a00837"><td class="memItemLeft" align="right" valign="top">typedef std::unique_lock<br class="typebreak"/>
&lt; <a class="el" href="../../d1/de6/a00837.html#a4ae09b0abc7bd8933ed2d0c75b6f2ffa">LockType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#a732b418eecabfc65b00077787a3ce958">ScopedLockType</a></td></tr>
<tr class="separator:a732b418eecabfc65b00077787a3ce958 inherit pub_types_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c63ef7c868924e5507c28bfdabd3e43 inherit pub_types_a00837"><td class="memItemLeft" align="right" valign="top">typedef <br class="typebreak"/>
<a class="el" href="../../d6/d92/a00586.html">beast::GenericScopedUnlock</a><br class="typebreak"/>
&lt; <a class="el" href="../../d1/de6/a00837.html#a4ae09b0abc7bd8933ed2d0c75b6f2ffa">LockType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#a5c63ef7c868924e5507c28bfdabd3e43">ScopedUnlockType</a></td></tr>
<tr class="separator:a5c63ef7c868924e5507c28bfdabd3e43 inherit pub_types_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2c51ac6e12c22e585e33669c785f3fbc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a2c51ac6e12c22e585e33669c785f3fbc">LedgerMasterImp</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;parent, <a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> journal)</td></tr>
<tr class="separator:a2c51ac6e12c22e585e33669c785f3fbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee6b9ef8546435843c0627818ff8fde"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a3ee6b9ef8546435843c0627818ff8fde">~LedgerMasterImp</a> ()</td></tr>
<tr class="separator:a3ee6b9ef8546435843c0627818ff8fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39f3843e9b092fa8c4bc2c859f38026"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ad39f3843e9b092fa8c4bc2c859f38026">getCurrentLedgerIndex</a> ()</td></tr>
<tr class="separator:ad39f3843e9b092fa8c4bc2c859f38026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa033d4db6bb19101350d50fe39d794c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#afa033d4db6bb19101350d50fe39d794c">getValidLedgerIndex</a> ()</td></tr>
<tr class="separator:afa033d4db6bb19101350d50fe39d794c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8732f9e53cb69c4d4595a8e6eb437008"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a8732f9e53cb69c4d4595a8e6eb437008">getPublishedLedgerAge</a> ()</td></tr>
<tr class="separator:a8732f9e53cb69c4d4595a8e6eb437008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f90e22e1119286d2fd1c049e6e55ec2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a1f90e22e1119286d2fd1c049e6e55ec2">getValidatedLedgerAge</a> ()</td></tr>
<tr class="separator:a1f90e22e1119286d2fd1c049e6e55ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca26d28ef7d6b1f57bf8aa83d58f0eb1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aca26d28ef7d6b1f57bf8aa83d58f0eb1">isCaughtUp</a> (std::string &amp;reason)</td></tr>
<tr class="separator:aca26d28ef7d6b1f57bf8aa83d58f0eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61f4dc0d3e0e57071acbfcf4e55b3dc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6">setValidLedger</a> (<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> l)</td></tr>
<tr class="separator:a61f4dc0d3e0e57071acbfcf4e55b3dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22bac5ee027533eae5515893c8e15f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9">setPubLedger</a> (<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> l)</td></tr>
<tr class="separator:ae22bac5ee027533eae5515893c8e15f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d05cfcb7de4193fb16199623c02c8a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a6d05cfcb7de4193fb16199623c02c8a9">addHeldTransaction</a> (<a class="el" href="../../de/d05/a01702.html#aee6c2c42c0fac409f288bb915574ff4e">Transaction::ref</a> transaction)</td></tr>
<tr class="separator:a6d05cfcb7de4193fb16199623c02c8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a340c1c668d233c98f5ac0e3a62533b6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c">pushLedger</a> (<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> newLedger)</td></tr>
<tr class="separator:a340c1c668d233c98f5ac0e3a62533b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c20f545f0d78eb9103597914b33687"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a36c20f545f0d78eb9103597914b33687">pushLedger</a> (<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> newLCL, <a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> newOL)</td></tr>
<tr class="separator:a36c20f545f0d78eb9103597914b33687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fde97247627301874e756267c2b7abf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a6fde97247627301874e756267c2b7abf">switchLedgers</a> (<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> lastClosed, <a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> current)</td></tr>
<tr class="separator:a6fde97247627301874e756267c2b7abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8e42a3359f2089fbc7dbfa120117e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a4b8e42a3359f2089fbc7dbfa120117e9">fixIndex</a> (<a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> ledgerIndex, <a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> const &amp;ledgerHash)</td></tr>
<tr class="separator:a4b8e42a3359f2089fbc7dbfa120117e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23ef205fdd961805a7d177922601b44"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ac23ef205fdd961805a7d177922601b44">storeLedger</a> (<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger)</td></tr>
<tr class="separator:ac23ef205fdd961805a7d177922601b44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c612521c3c403ac534fed26bc4d2eb3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3">forceValid</a> (<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger)</td></tr>
<tr class="separator:a1c612521c3c403ac534fed26bc4d2eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a739076ea26b960435bbc86ade3a10db6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a739076ea26b960435bbc86ade3a10db6">closeLedger</a> (bool recover)</td></tr>
<tr class="separator:a739076ea26b960435bbc86ade3a10db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad940805c3f5d55b081cdc41a2538cae5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ad940805c3f5d55b081cdc41a2538cae5">getBuildingLedger</a> ()</td></tr>
<tr class="separator:ad940805c3f5d55b081cdc41a2538cae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac95124a3e83c81db53de4b68cdf8f71e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ac95124a3e83c81db53de4b68cdf8f71e">setBuildingLedger</a> (<a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> i)</td></tr>
<tr class="separator:ac95124a3e83c81db53de4b68cdf8f71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6729570b88f82b20c29ae00271073d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9d/a03417.html#ac6c7d57554e8bab72ad93e40ceb3f6c0">TER</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ae6729570b88f82b20c29ae00271073d0">doTransaction</a> (<a class="el" href="../../d9/de4/a01346.html#a24c9aa93fed382b9abfa1ed699ff26d6">SerializedTransaction::ref</a> txn, <a class="el" href="../../d9/d9d/a03417.html#ae2a321a3f2099e098fdcc670a60c7a09">TransactionEngineParams</a> params, bool &amp;didApply)</td></tr>
<tr class="separator:ae6729570b88f82b20c29ae00271073d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee90e13899c16e5f426742b65482230"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a0ee90e13899c16e5f426742b65482230">haveLedgerRange</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> from, <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> to)</td></tr>
<tr class="separator:a0ee90e13899c16e5f426742b65482230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24e067a552cb3b6d0409fdadc4cf7f3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3">haveLedger</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq)</td></tr>
<tr class="separator:ac24e067a552cb3b6d0409fdadc4cf7f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c839d3083da43e7f837cfa14b09b609"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609">clearLedger</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq)</td></tr>
<tr class="separator:a0c839d3083da43e7f837cfa14b09b609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a248a0cb23763154d759e141959fb8cbd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a248a0cb23763154d759e141959fb8cbd">getFullValidatedRange</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;minVal, <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;maxVal)</td></tr>
<tr class="separator:a248a0cb23763154d759e141959fb8cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23cd329d9d5a2a789fcbc4b466a6f059"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a23cd329d9d5a2a789fcbc4b466a6f059">getValidatedRange</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;minVal, <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;maxVal)</td></tr>
<tr class="separator:a23cd329d9d5a2a789fcbc4b466a6f059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83dd7c0aea451394bea74a1ec2608f1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a83dd7c0aea451394bea74a1ec2608f1f">getEarliestFetch</a> ()</td></tr>
<tr class="separator:a83dd7c0aea451394bea74a1ec2608f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96778e6d7821b274d410a6cc1f9e0dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd">tryFill</a> (<a class="el" href="../../da/d96/a00782.html">Job</a> &amp;job, <a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger)</td></tr>
<tr class="separator:ab96778e6d7821b274d410a6cc1f9e0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a489d89a5a5dc4086f03a891a5d85a56b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a489d89a5a5dc4086f03a891a5d85a56b">getFetchPack</a> (<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> nextLedger)</td></tr>
<tr class="separator:a489d89a5a5dc4086f03a891a5d85a56b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec967cf69ab1d294efab1dd1128b163c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c">fixMismatch</a> (<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> ledger)</td></tr>
<tr class="separator:aec967cf69ab1d294efab1dd1128b163c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1492db26502ab92492928444756b69d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d">setFullLedger</a> (<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger, bool isSynchronous, bool isCurrent)</td></tr>
<tr class="separator:aa1492db26502ab92492928444756b69d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd8691d084b7f903081176a0127c20e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a8bd8691d084b7f903081176a0127c20e">failedSave</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq, <a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;<a class="el" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>)</td></tr>
<tr class="separator:a8bd8691d084b7f903081176a0127c20e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35095334931758d1ce432130aa8b743f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f">checkAccept</a> (<a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;<a class="el" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>, <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq)</td></tr>
<tr class="separator:a35095334931758d1ce432130aa8b743f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f5cc7afe62b8844d2036e89a485996"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a25f5cc7afe62b8844d2036e89a485996">getNeededValidations</a> ()</td></tr>
<tr class="separator:a25f5cc7afe62b8844d2036e89a485996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef5d9e765e612499355e2b1caa27a91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91">checkAccept</a> (<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> ledger)</td></tr>
<tr class="separator:afef5d9e765e612499355e2b1caa27a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054ed0eb590140ee5d25d8efc609a6a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a054ed0eb590140ee5d25d8efc609a6a1">consensusBuilt</a> (<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> ledger) override</td></tr>
<tr class="separator:a054ed0eb590140ee5d25d8efc609a6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c3001914f0eb02e756c5f132d764f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7">advanceThread</a> ()</td></tr>
<tr class="separator:a70c3001914f0eb02e756c5f132d764f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1137d82f75868275f3380ffe9673d95f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f">doAdvance</a> ()</td></tr>
<tr class="separator:a1137d82f75868275f3380ffe9673d95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a811affe449990c43b8e4ea1eb80411"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411">findNewLedgersToPublish</a> ()</td></tr>
<tr class="separator:a1a811affe449990c43b8e4ea1eb80411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db2f2d92f5bf50222003030c0bac415"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415">tryAdvance</a> ()</td></tr>
<tr class="separator:a0db2f2d92f5bf50222003030c0bac415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3588de6d09767b38e69c01de23e61c7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a3588de6d09767b38e69c01de23e61c7d">getLedgerHash</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> desiredSeq, <a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> knownGoodLedger)</td></tr>
<tr class="separator:a3588de6d09767b38e69c01de23e61c7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b6c134c1aa3633426a413ee99c6e6cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a0b6c134c1aa3633426a413ee99c6e6cf">updatePaths</a> (<a class="el" href="../../da/d96/a00782.html">Job</a> &amp;job)</td></tr>
<tr class="separator:a0b6c134c1aa3633426a413ee99c6e6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80899acf017a1d4adc39aab8fddb6d2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a80899acf017a1d4adc39aab8fddb6d2a">newPathRequest</a> ()</td></tr>
<tr class="separator:a80899acf017a1d4adc39aab8fddb6d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af396a0cc297766725644453f879a4e8f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#af396a0cc297766725644453f879a4e8f">isNewPathRequest</a> ()</td></tr>
<tr class="separator:af396a0cc297766725644453f879a4e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace7bc6f1e79ecec3295256ba3000c8fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ace7bc6f1e79ecec3295256ba3000c8fb">newOrderBookDB</a> ()</td></tr>
<tr class="separator:ace7bc6f1e79ecec3295256ba3000c8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad047aff1c1ccfe1d8ebd0da6b78f8e2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f">newPFWork</a> (const char *<a class="el" href="../../dc/d40/a02767.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:ad047aff1c1ccfe1d8ebd0da6b78f8e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d24a938e48239dfd0d2b652ac54888"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a01d24a938e48239dfd0d2b652ac54888">peekMutex</a> ()</td></tr>
<tr class="separator:a01d24a938e48239dfd0d2b652ac54888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f69129cae359eadd7b15baee37a233"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ad5f69129cae359eadd7b15baee37a233">getCurrentLedger</a> ()</td></tr>
<tr class="separator:ad5f69129cae359eadd7b15baee37a233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a817b5ab306e769ce54b83da8805b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#af1a817b5ab306e769ce54b83da8805b4">getClosedLedger</a> ()</td></tr>
<tr class="separator:af1a817b5ab306e769ce54b83da8805b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae93d94638412437c64a62cbede6caca3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ae93d94638412437c64a62cbede6caca3">getValidatedLedger</a> ()</td></tr>
<tr class="separator:ae93d94638412437c64a62cbede6caca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af840842996620f91efc2302aceef6b49"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#af840842996620f91efc2302aceef6b49">getPublishedLedger</a> ()</td></tr>
<tr class="separator:af840842996620f91efc2302aceef6b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accf85d84faf3c89fc70b36c8309e3bb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#accf85d84faf3c89fc70b36c8309e3bb5">getMinValidations</a> ()</td></tr>
<tr class="separator:accf85d84faf3c89fc70b36c8309e3bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18e6e33330f8bd07505f3215a8d6bb3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ad18e6e33330f8bd07505f3215a8d6bb3">setMinValidations</a> (int v)</td></tr>
<tr class="separator:ad18e6e33330f8bd07505f3215a8d6bb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a525774ca001bb889c8c4780dc35730d2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a525774ca001bb889c8c4780dc35730d2">getCompleteLedgers</a> ()</td></tr>
<tr class="separator:a525774ca001bb889c8c4780dc35730d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb97ab084032f9ba66f1b1dc6b57d1c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aeb97ab084032f9ba66f1b1dc6b57d1c6">findAcquireLedger</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> index, <a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;<a class="el" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>)</td></tr>
<tr class="separator:aeb97ab084032f9ba66f1b1dc6b57d1c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d52ad7dd214c009f42fc7c4652ffa0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a17d52ad7dd214c009f42fc7c4652ffa0">getHashBySeq</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> index)</td></tr>
<tr class="separator:a17d52ad7dd214c009f42fc7c4652ffa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389a31d85ac8bba591f60c9b8390a43e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a389a31d85ac8bba591f60c9b8390a43e">walkHashBySeq</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> index)</td></tr>
<tr class="separator:a389a31d85ac8bba591f60c9b8390a43e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e5d20e873fd1ff626ca7e4d7e726f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a12e5d20e873fd1ff626ca7e4d7e726f9">walkHashBySeq</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> index, <a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> referenceLedger)</td></tr>
<tr class="separator:a12e5d20e873fd1ff626ca7e4d7e726f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24bd2159ae9b3932a055a8e6cb73e18f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f">getLedgerBySeq</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> index)</td></tr>
<tr class="separator:a24bd2159ae9b3932a055a8e6cb73e18f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1387013f4ac247a4ebd14bee004fa7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7">getLedgerByHash</a> (<a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;<a class="el" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>)</td></tr>
<tr class="separator:ada1387013f4ac247a4ebd14bee004fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae909d178e11ccdeb05fcba5f1d4429bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ae909d178e11ccdeb05fcba5f1d4429bf">doLedgerCleaner</a> (const <a class="el" href="../../d6/d27/a01781.html">Json::Value</a> &amp;parameters)</td></tr>
<tr class="separator:ae909d178e11ccdeb05fcba5f1d4429bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee257c2fb2e816fc7d87b6f558849bcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aee257c2fb2e816fc7d87b6f558849bcc">setLedgerRangePresent</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> minV, <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> maxV)</td></tr>
<tr class="separator:aee257c2fb2e816fc7d87b6f558849bcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c6c7ec9fca47d5b807dd68635027e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a98c6c7ec9fca47d5b807dd68635027e8">tune</a> (int size, int age)</td></tr>
<tr class="separator:a98c6c7ec9fca47d5b807dd68635027e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1fa5a5eaa9fcfea335f54f13d21308"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a4f1fa5a5eaa9fcfea335f54f13d21308">sweep</a> ()</td></tr>
<tr class="separator:a4f1fa5a5eaa9fcfea335f54f13d21308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa87c9516f32431e1baf62c82359276"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a7aa87c9516f32431e1baf62c82359276">getCacheHitRate</a> ()</td></tr>
<tr class="separator:a7aa87c9516f32431e1baf62c82359276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a203bc38e7baa3bc2389881b3940a2546"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a203bc38e7baa3bc2389881b3940a2546">addValidateCallback</a> (<a class="el" href="../../d2/dc7/a00838.html#ac77311b87d5a70b3dc39e94990787e5e">callback</a> &amp;c)</td></tr>
<tr class="separator:a203bc38e7baa3bc2389881b3940a2546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de9873967f30e4a1a2eefdbaa9392a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html">beast::PropertyStream::Source</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a0de9873967f30e4a1a2eefdbaa9392a8">getPropertySource</a> ()</td></tr>
<tr class="separator:a0de9873967f30e4a1a2eefdbaa9392a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a00837"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00837')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d1/de6/a00837.html">ripple::LedgerMaster</a></td></tr>
<tr class="memitem:a0e3e9d2616504f264820196067725433 inherit pub_methods_a00837"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#a0e3e9d2616504f264820196067725433">~LedgerMaster</a> ()=0</td></tr>
<tr class="separator:a0e3e9d2616504f264820196067725433 inherit pub_methods_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01561"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01561')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d2/d49/a01561.html">beast::Stoppable</a></td></tr>
<tr class="memitem:a956c39a8c26ed410c10285e5a1ebf87f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a956c39a8c26ed410c10285e5a1ebf87f">Stoppable</a> (char const *<a class="el" href="../../dc/d40/a02767.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="el" href="../../d2/d49/a01561.html">Stoppable</a> &amp;parent)</td></tr>
<tr class="separator:a956c39a8c26ed410c10285e5a1ebf87f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae075b508fc6cf725795061ae8431d10f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#ae075b508fc6cf725795061ae8431d10f">~Stoppable</a> ()</td></tr>
<tr class="separator:ae075b508fc6cf725795061ae8431d10f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca78fcebed5c6b8c9cd96bacb588785 inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7ca78fcebed5c6b8c9cd96bacb588785">isStopping</a> () const </td></tr>
<tr class="separator:a7ca78fcebed5c6b8c9cd96bacb588785 inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b437c5eddc1f6e6108a112e58517fce inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7b437c5eddc1f6e6108a112e58517fce">isStopped</a> () const </td></tr>
<tr class="separator:a7b437c5eddc1f6e6108a112e58517fce inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e8f8db88a0ec9c9f616e55a220cc30 inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30">areChildrenStopped</a> () const </td></tr>
<tr class="separator:ac9e8f8db88a0ec9c9f616e55a220cc30 inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a3f86c14a870b4c8eefa77f9989a5e inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e">stopped</a> ()</td></tr>
<tr class="separator:a32a3f86c14a870b4c8eefa77f9989a5e inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ef9cbd5742a977aa6d6e13f534ca55 inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a89ef9cbd5742a977aa6d6e13f534ca55">onPrepare</a> ()</td></tr>
<tr class="separator:a89ef9cbd5742a977aa6d6e13f534ca55 inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91389d18e9eb5e26847533b57be650cd inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a91389d18e9eb5e26847533b57be650cd">onStart</a> ()</td></tr>
<tr class="separator:a91389d18e9eb5e26847533b57be650cd inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb5a464db59bc5313a39bb868c9f18da inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#aeb5a464db59bc5313a39bb868c9f18da">onStop</a> ()</td></tr>
<tr class="separator:aeb5a464db59bc5313a39bb868c9f18da inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5dbf359315d75eacb3386140b32e0f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a2b5dbf359315d75eacb3386140b32e0f">onChildrenStopped</a> ()</td></tr>
<tr class="separator:a2b5dbf359315d75eacb3386140b32e0f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2db881f4033e9addca4142a95992d872"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a2db881f4033e9addca4142a95992d872">m_journal</a></td></tr>
<tr class="separator:a2db881f4033e9addca4142a95992d872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0b2af2d9d75a761814d35b46fffee50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a></td></tr>
<tr class="separator:ad0b2af2d9d75a761814d35b46fffee50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aae0b5a4e5ea0d26af6e28cceea359e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc5/a01705.html">TransactionEngine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a></td></tr>
<tr class="separator:a1aae0b5a4e5ea0d26af6e28cceea359e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af470efe211c7a2c4fb9b7591da41f240"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d13/a00836.html">LedgerHolder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a></td></tr>
<tr class="separator:af470efe211c7a2c4fb9b7591da41f240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafddd7a3f3c8da90a1f8c374f05b1dca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d13/a00836.html">LedgerHolder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aafddd7a3f3c8da90a1f8c374f05b1dca">mClosedLedger</a></td></tr>
<tr class="separator:aafddd7a3f3c8da90a1f8c374f05b1dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ff9ad643a573106cc5e9d1aab768b5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d13/a00836.html">LedgerHolder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a></td></tr>
<tr class="separator:a9ff9ad643a573106cc5e9d1aab768b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10ba0f0e5e469d2ed19227006bba59e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#af10ba0f0e5e469d2ed19227006bba59e">mPubLedger</a></td></tr>
<tr class="separator:af10ba0f0e5e469d2ed19227006bba59e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c17ca4f7adc29acb6f4f54d44b7e41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aa3c17ca4f7adc29acb6f4f54d44b7e41">mPathLedger</a></td></tr>
<tr class="separator:aa3c17ca4f7adc29acb6f4f54d44b7e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef3110d1d629f45f527dab691daf3375"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d70/a00835.html">LedgerHistory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a></td></tr>
<tr class="separator:aef3110d1d629f45f527dab691daf3375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af129fb8d47bf0d34aab2696258e440e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d3e/a00253.html">CanonicalTXSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#af129fb8d47bf0d34aab2696258e440e8">mHeldTransactions</a></td></tr>
<tr class="separator:af129fb8d47bf0d34aab2696258e440e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96707096d2bede3f4ef8308ff724611b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a></td></tr>
<tr class="separator:a96707096d2bede3f4ef8308ff724611b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d42865d1c905dd9bc86fede85c43cbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d32/a01176.html">RangeSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a></td></tr>
<tr class="separator:a7d42865d1c905dd9bc86fede85c43cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7f9c5ede45fa7447912bd1357ce370e"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="../../d8/d64/a00828.html">LedgerCleaner</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ae7f9c5ede45fa7447912bd1357ce370e">mLedgerCleaner</a></td></tr>
<tr class="separator:ae7f9c5ede45fa7447912bd1357ce370e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7bb998185ae6768a22a49fc064b871"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a4a7bb998185ae6768a22a49fc064b871">mMinValidations</a></td></tr>
<tr class="separator:a4a7bb998185ae6768a22a49fc064b871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a7548c63624f1afe9014aeca724359d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a9a7548c63624f1afe9014aeca724359d">mLastValidateHash</a></td></tr>
<tr class="separator:a9a7548c63624f1afe9014aeca724359d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3a9be961735746d6b5946b24ac0588"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a2b3a9be961735746d6b5946b24ac0588">mLastValidateSeq</a></td></tr>
<tr class="separator:a2b3a9be961735746d6b5946b24ac0588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5cc1c117a362d9d17b5343f1856037c"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d2/dc7/a00838.html#ac77311b87d5a70b3dc39e94990787e5e">callback</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ac5cc1c117a362d9d17b5343f1856037c">mOnValidate</a></td></tr>
<tr class="separator:ac5cc1c117a362d9d17b5343f1856037c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6f081f81dfd2020496d9d10659b3e2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#aba6f081f81dfd2020496d9d10659b3e2">mAdvanceThread</a></td></tr>
<tr class="separator:aba6f081f81dfd2020496d9d10659b3e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77c7fd65a7fe8c0e3bd50eb6e0a62f83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a77c7fd65a7fe8c0e3bd50eb6e0a62f83">mAdvanceWork</a></td></tr>
<tr class="separator:a77c7fd65a7fe8c0e3bd50eb6e0a62f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222e2eaaaf1e2ed988284efe27848edc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a222e2eaaaf1e2ed988284efe27848edc">mFillInProgress</a></td></tr>
<tr class="separator:a222e2eaaaf1e2ed988284efe27848edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf34ea2e71eef3806948648a302cc357"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#acf34ea2e71eef3806948648a302cc357">mPathFindThread</a></td></tr>
<tr class="separator:acf34ea2e71eef3806948648a302cc357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a992b39b3307006235fd368a74acfe4f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a992b39b3307006235fd368a74acfe4f6">mPathFindNewLedger</a></td></tr>
<tr class="separator:a992b39b3307006235fd368a74acfe4f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ccb481e67e01950bdf802a7a2e90192"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a2ccb481e67e01950bdf802a7a2e90192">mPathFindNewRequest</a></td></tr>
<tr class="separator:a2ccb481e67e01950bdf802a7a2e90192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace4219926da351849a60608ae264ecaa"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#ace4219926da351849a60608ae264ecaa">mPubLedgerClose</a></td></tr>
<tr class="separator:ace4219926da351849a60608ae264ecaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a4023248dca4e413091717af04160a"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a></td></tr>
<tr class="separator:a07a4023248dca4e413091717af04160a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a669452386a0abf5655393ca6f7f4f9b5"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a669452386a0abf5655393ca6f7f4f9b5">mValidLedgerClose</a></td></tr>
<tr class="separator:a669452386a0abf5655393ca6f7f4f9b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a072102635fb385fea58b847052530ba3"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a></td></tr>
<tr class="separator:a072102635fb385fea58b847052530ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e835d27948cd9eb737c05d30cdd55a"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc7/a00838.html#a89e835d27948cd9eb737c05d30cdd55a">mBuildingLedgerSeq</a></td></tr>
<tr class="separator:a89e835d27948cd9eb737c05d30cdd55a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_a00837"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_a00837')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../d1/de6/a00837.html">ripple::LedgerMaster</a></td></tr>
<tr class="memitem:aba061a243235c1dd67187a8ba7a6caf3 inherit pub_static_methods_a00837"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/de6/a00837.html">LedgerMaster</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#aba061a243235c1dd67187a8ba7a6caf3">New</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;parent, <a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> journal)</td></tr>
<tr class="separator:aba061a243235c1dd67187a8ba7a6caf3 inherit pub_static_methods_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5a8da329a1f130f91f2a9d26b28310 inherit pub_static_methods_a00837"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#a9e5a8da329a1f130f91f2a9d26b28310">shouldAcquire</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> currentLedgerID, <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> ledgerHistory, <a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> targetLedger)</td></tr>
<tr class="separator:a9e5a8da329a1f130f91f2a9d26b28310 inherit pub_static_methods_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_a00837"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_a00837')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../d1/de6/a00837.html">ripple::LedgerMaster</a></td></tr>
<tr class="memitem:aef424e9dd4c80d8e29a3d96739dd8f9d inherit pro_methods_a00837"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;parent)</td></tr>
<tr class="separator:aef424e9dd4c80d8e29a3d96739dd8f9d inherit pro_methods_a00837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_a01561"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_a01561')"><img src="../../closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="../../d2/d49/a01561.html">beast::Stoppable</a></td></tr>
<tr class="memitem:af4e7ab358a26f9e77609119f56b6324d inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">char const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#af4e7ab358a26f9e77609119f56b6324d">m_name</a></td></tr>
<tr class="separator:af4e7ab358a26f9e77609119f56b6324d inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa65f6d0b79ef60e895f49ff1e3e572e inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dda/a01289.html">RootStoppable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#afa65f6d0b79ef60e895f49ff1e3e572e">m_root</a></td></tr>
<tr class="separator:afa65f6d0b79ef60e895f49ff1e3e572e inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bf935d3fb8d634a65993d18951e5c8c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d56/a00274.html">Child</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a8bf935d3fb8d634a65993d18951e5c8c">m_child</a></td></tr>
<tr class="separator:a8bf935d3fb8d634a65993d18951e5c8c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d15d9b53bec924ba390e76fb775b45c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d06/a00131.html">Atomic</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a4d15d9b53bec924ba390e76fb775b45c">m_started</a></td></tr>
<tr class="separator:a4d15d9b53bec924ba390e76fb775b45c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8958b95e49ca71456dc06ce6117bd7 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">bool volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a4d8958b95e49ca71456dc06ce6117bd7">m_stopped</a></td></tr>
<tr class="separator:a4d8958b95e49ca71456dc06ce6117bd7 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a456aaf3dae4f448e8a6ad889deb19e85 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">bool volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a456aaf3dae4f448e8a6ad889deb19e85">m_childrenStopped</a></td></tr>
<tr class="separator:a456aaf3dae4f448e8a6ad889deb19e85 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58b644e5741df3061537d39c9a1022c8 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d49/a01561.html#a229376a5eb68401604f3c83112b65ea6">Children</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a58b644e5741df3061537d39c9a1022c8">m_children</a></td></tr>
<tr class="separator:a58b644e5741df3061537d39c9a1022c8 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e94f76b666ad08e057a8b6a7c7dbe0c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d02/a01808.html">WaitableEvent</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7e94f76b666ad08e057a8b6a7c7dbe0c">m_stoppedEvent</a></td></tr>
<tr class="separator:a7e94f76b666ad08e057a8b6a7c7dbe0c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00032">32</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ac77311b87d5a70b3dc39e94990787e5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d1/d58/a02731.html#a3af771e282b88e6dca0215c6c890ae75">std::function</a>&lt;void (<a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>)&gt; <a class="el" href="../../d2/dc7/a00838.html#ac77311b87d5a70b3dc39e94990787e5e">ripple::LedgerMasterImp::callback</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00037">37</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa90fec862507188a8f8a8630e288efd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d9/d9d/a03417.html#abf55a274ab90a3ca5b8dc903a401ad93">RippleRecursiveMutex</a> <a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">ripple::LedgerMasterImp::LockType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00039">39</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2029911c2cd2ed209f4cbe0746c16740"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::lock_guard&lt;<a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a>&gt; <a class="el" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ripple::LedgerMasterImp::ScopedLockType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00040">40</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a15f1be3effcd9e309ea6a0a3f70f3d36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d6/d92/a00586.html">beast::GenericScopedUnlock</a>&lt;<a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a>&gt; <a class="el" href="../../d2/dc7/a00838.html#a15f1be3effcd9e309ea6a0a3f70f3d36">ripple::LedgerMasterImp::ScopedUnlockType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00041">41</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2c51ac6e12c22e585e33669c785f3fbc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ripple::LedgerMasterImp::LedgerMasterImp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td>
          <td class="paramname"><em>journal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00085">85</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        : <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a> (parent)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a2db881f4033e9addca4142a95992d872">m_journal</a> (journal)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#af129fb8d47bf0d34aab2696258e440e8">mHeldTransactions</a> (uint256 ())</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#ae7f9c5ede45fa7447912bd1357ce370e">mLedgerCleaner</a> (<a class="code" href="../../d8/d64/a00828.html#a2ae45cd240a11d3a7f7a8b21e7d9a4ed">LedgerCleaner::New</a>(*<span class="keyword">this</span>, LogPartition::getJournal&lt;LedgerCleanerLog&gt;()))</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a4a7bb998185ae6768a22a49fc064b871">mMinValidations</a> (0)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a2b3a9be961735746d6b5946b24ac0588">mLastValidateSeq</a> (0)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#aba6f081f81dfd2020496d9d10659b3e2">mAdvanceThread</a> (<span class="keyword">false</span>)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a77c7fd65a7fe8c0e3bd50eb6e0a62f83">mAdvanceWork</a> (<span class="keyword">false</span>)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a222e2eaaaf1e2ed988284efe27848edc">mFillInProgress</a> (0)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#acf34ea2e71eef3806948648a302cc357">mPathFindThread</a> (0)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a2ccb481e67e01950bdf802a7a2e90192">mPathFindNewRequest</a> (<span class="keyword">false</span>)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#ace4219926da351849a60608ae264ecaa">mPubLedgerClose</a> (0)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a> (0)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a669452386a0abf5655393ca6f7f4f9b5">mValidLedgerClose</a> (0)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a> (0)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        , <a class="code" href="../../d2/dc7/a00838.html#a89e835d27948cd9eb737c05d30cdd55a">mBuildingLedgerSeq</a> (0)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ee6b9ef8546435843c0627818ff8fde"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ripple::LedgerMasterImp::~LedgerMasterImp </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00105">105</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6d05cfcb7de4193fb16199623c02c8a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::addHeldTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d05/a01702.html#aee6c2c42c0fac409f288bb915574ff4e">Transaction::ref</a>&#160;</td>
          <td class="paramname"><em>transaction</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a30dd64cff90f268bf02dab1bc1eaf89e">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00190">190</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00057">mHeldTransactions</a>, and <a class="el" href="../../da/df1/a02961_source.html#l00074">ripple::CanonicalTXSet::push_back()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// returns true if transaction was added</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#af129fb8d47bf0d34aab2696258e440e8">mHeldTransactions</a>.<a class="code" href="../../d0/d3e/a00253.html#a3822f691438100a89c20b5ab308bfbb9">push_back</a> (transaction-&gt;getSTransaction ());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a6d05cfcb7de4193fb16199623c02c8a9_cgraph.png" border="0" usemap="#d2/dc7/a00838_a6d05cfcb7de4193fb16199623c02c8a9_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a6d05cfcb7de4193fb16199623c02c8a9_cgraph" id="d2/dc7/a00838_a6d05cfcb7de4193fb16199623c02c8a9_cgraph">
<area shape="rect" id="node3" href="../../d0/d3e/a00253.html#a3822f691438100a89c20b5ab308bfbb9" title="ripple::CanonicalTXSet\l::push_back" alt="" coords="217,5,372,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a203bc38e7baa3bc2389881b3940a2546"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::addValidateCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dc7/a00838.html#ac77311b87d5a70b3dc39e94990787e5e">callback</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a4e18323b888e9de1d3d8a6c732191969">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01431">1431</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00067">mOnValidate</a>.</p>
<div class="fragment"><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#ac5cc1c117a362d9d17b5343f1856037c">mOnValidate</a>.push_back (c);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a70c3001914f0eb02e756c5f132d764f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::advanceThread </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00856">856</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00065">ripple::LedgerHolder::empty()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00033">ripple::lsFATAL</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00069">mAdvanceThread</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00051">mValidLedger</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        assert (!<a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c">empty</a> () &amp;&amp; <a class="code" href="../../d2/dc7/a00838.html#aba6f081f81dfd2020496d9d10659b3e2">mAdvanceThread</a>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;advanceThread&lt;&quot;</span>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f">doAdvance</a>();</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244acb980b97f93585b5b1f20725a2256c23">lsFATAL</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;doAdvance throws an exception&quot;</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#aba6f081f81dfd2020496d9d10659b3e2">mAdvanceThread</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;advanceThread&gt;&quot;</span>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_cgraph.png" border="0" usemap="#d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_cgraph" id="d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="216,1346,379,1393"/><area shape="rect" id="node130" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="228,1415,367,1462"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411" title="ripple::LedgerMasterImp\l::findNewLedgersToPublish" alt="" coords="428,557,609,603"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="676,755,839,802"/><area shape="rect" id="node11" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="956,924,1057,953"/><area shape="rect" id="node19" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="948,1088,1065,1117"/><area shape="rect" id="node22" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="944,1245,1069,1291"/><area shape="rect" id="node24" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="921,1315,1092,1344"/><area shape="rect" id="node32" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="688,427,827,474"/><area shape="rect" id="node34" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="681,617,833,663"/><area shape="rect" id="node40" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb" title="ripple::Application\l::getFeeTrack" alt="" coords="456,1577,581,1623"/><area shape="rect" id="node42" href="../../dd/d94/a00888.html#aad042032160b77a02227571a8a111fcf" title="ripple::LoadFeeTrack\l::isLoadedLocal" alt="" coords="447,1646,591,1693"/><area shape="rect" id="node45" href="../../dc/d0c/a00783.html#a5c2111a6134d3f9eae89261066018ade" title="ripple::JobQueue::getJob\lCount" alt="" coords="436,1715,601,1762"/><area shape="rect" id="node47" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61" title="ripple::RangeSet::prevMissing" alt="" coords="659,1668,856,1697"/><area shape="rect" id="node56" href="../../d1/de6/a00837.html#a9e5a8da329a1f130f91f2a9d26b28310" title="ripple::LedgerMaster\l::shouldAcquire" alt="" coords="449,1785,588,1831"/><area shape="rect" id="node58" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="448,73,589,119"/><area shape="rect" id="node67" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="437,247,600,294"/><area shape="rect" id="node73" href="../../d8/d86/a00703.html#abfa7313dd062dc0f416dfa71d8dad546" title="ripple::InboundLedgers\l::isFailure" alt="" coords="443,1854,595,1901"/><area shape="rect" id="node76" href="../../d2/dc7/a00838.html#a489d89a5a5dc4086f03a891a5d85a56b" title="ripple::LedgerMasterImp\l::getFetchPack" alt="" coords="437,1406,600,1453"/><area shape="rect" id="node83" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="437,922,600,969"/><area shape="rect" id="node95" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="944,1441,1069,1487"/><area shape="rect" id="node101" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459" title="ripple::Ledger::getHashBy\lIndex" alt="" coords="671,945,844,991"/><area shape="rect" id="node105" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="437,317,600,363"/><area shape="rect" id="node108" href="../../d3/db8/a00316.html#a072203ed975dafbf825044b054ff5a0a" title="ripple::Config::getSize" alt="" coords="444,1924,593,1953"/><area shape="rect" id="node110" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="456,178,581,225"/><area shape="rect" id="node113" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="456,1977,581,2023"/><area shape="rect" id="node115" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076" title="ripple::LedgerMaster\l::getCompleteLedgers" alt="" coords="444,2046,593,2093"/><area shape="rect" id="node117" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="437,2115,600,2162"/><area shape="rect" id="node120" href="../../dd/dac/a01008.html#a024e36c725c9ebef73c42d943ffacc43" title="ripple::NetworkOPs\l::pubLedger" alt="" coords="451,2185,587,2231"/><area shape="rect" id="node123" href="../../dd/dac/a01008.html#a7ebeb2a8f947b729b0a8a1aba97d3b54" title="ripple::NetworkOPs\l::clearNeedNetworkLedger" alt="" coords="431,2254,607,2301"/><area shape="rect" id="node125" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f" title="ripple::LedgerMasterImp\l::newPFWork" alt="" coords="676,1305,839,1351"/><area shape="rect" id="node7" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="676,273,839,303"/><area shape="rect" id="node15" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="693,686,821,733"/><area shape="rect" id="node17" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="687,1014,828,1061"/><area shape="rect" id="node26" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="695,203,820,250"/><area shape="rect" id="node28" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="687,134,828,181"/><area shape="rect" id="node36" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="681,497,833,543"/><area shape="rect" id="node13" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1159,915,1335,962"/><area shape="rect" id="node30" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="936,134,1077,181"/><area shape="rect" id="node49" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="904,1689,1109,1735"/><area shape="rect" id="node51" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="1159,1611,1335,1640"/><area shape="rect" id="node53" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="916,1585,1097,1615"/><area shape="rect" id="node62" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="668,81,847,111"/><area shape="rect" id="node65" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="936,514,1077,561"/><area shape="rect" id="node79" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee" title="ripple::Application\l::overlay" alt="" coords="695,1547,820,1594"/><area shape="rect" id="node81" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90" title="ripple::Overlay::getActive\lPeers" alt="" coords="673,1478,841,1525"/><area shape="rect" id="node85" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b" title="ripple::LedgerHistory\l::addLedger" alt="" coords="687,825,828,871"/><area shape="rect" id="node89" href="../../d3/d32/a01176.html#a597108aeb4003727e9d2bb91960cf980" title="ripple::RangeSet::setValue" alt="" coords="668,1425,847,1455"/><area shape="rect" id="node92" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6" title="ripple::LedgerMasterImp\l::setValidLedger" alt="" coords="676,1083,839,1130"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_icgraph.png" border="0" usemap="#d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_icgraph" id="d2/dc7/a00838_a70c3001914f0eb02e756c5f132d764f7_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="216,109,379,155"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="427,5,589,51"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="427,74,589,121"/><area shape="rect" id="node12" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="427,143,589,190"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="637,139,800,186"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a35095334931758d1ce432130aa8b743f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::checkAccept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>seq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ace2989941bbc8b30e0a6989d907e27e9">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00659">659</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/d86/a02909_source.html#l00042">ripple::InboundLedger::fcGENERIC</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00316">ripple::base_uint&lt; BITS &gt;::GetHex()</a>, <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>, <a class="el" href="../../d1/d77/a02920_source.html#l00099">ripple::LedgerHistory::getLedgerByHash()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00081">mBuildingLedgerSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00767">consensusBuilt()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00197">pushLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00252">switchLedgers()</a>.</p>
<div class="fragment"><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">if</span> (seq != 0)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="comment">// Ledger is too old</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordflow">if</span> (seq &lt;= <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="comment">// Ledger could match the ledger we&#39;re already building</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">if</span> (seq == <a class="code" href="../../d2/dc7/a00838.html#a89e835d27948cd9eb737c05d30cdd55a">mBuildingLedgerSeq</a>)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger = <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4">getLedgerByHash</a> (<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">if</span> (!ledger)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="comment">// FIXME: We should really only fetch if the ledger</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="comment">//has sufficient validations to accept it</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <a class="code" href="../../dd/d85/a00702.html#af0d96e0cff791d52c85cbe4b8a16a71b">InboundLedger::pointer</a> l =</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a>(<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>, 0, <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <span class="keywordflow">if</span> (l &amp;&amp; l-&gt;isComplete() &amp;&amp; !l-&gt;isFailed())</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                ledger = l-&gt;getLedger();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;checkAccept triggers acquire &quot;</span> &lt;&lt; <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>.GetHex();</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> (ledger)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f">checkAccept</a> (ledger);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_cgraph.png" border="0" usemap="#d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_cgraph" id="d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_cgraph">
<area shape="rect" id="node3" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="217,5,369,51"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="915,208,1016,237"/><area shape="rect" id="node9" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="680,55,805,102"/><area shape="rect" id="node21" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="224,283,363,330"/><area shape="rect" id="node23" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="223,214,364,261"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1092,199,1268,246"/><area shape="rect" id="node11" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1117,46,1243,93"/><area shape="rect" id="node15" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="891,84,1040,113"/><area shape="rect" id="node17" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="916,137,1015,167"/><area shape="rect" id="node13" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1319,267,1468,296"/><area shape="rect" id="node19" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1125,137,1235,167"/><area shape="rect" id="node25" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="437,357,579,403"/><area shape="rect" id="node27" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="437,214,579,261"/><area shape="rect" id="node29" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="419,304,597,333"/><area shape="rect" id="node31" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="665,175,820,222"/><area shape="rect" id="node34" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="672,245,813,291"/><area shape="rect" id="node37" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="680,314,805,361"/><area shape="rect" id="node39" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="664,488,821,517"/><area shape="rect" id="node60" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="664,435,821,464"/><area shape="rect" id="node63" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="645,541,840,571"/><area shape="rect" id="node41" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="888,746,1043,793"/><area shape="rect" id="node43" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="888,261,1043,307"/><area shape="rect" id="node45" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="888,330,1043,377"/><area shape="rect" id="node47" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="888,399,1043,446"/><area shape="rect" id="node49" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="888,469,1043,515"/><area shape="rect" id="node51" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="888,538,1043,585"/><area shape="rect" id="node53" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="903,677,1028,723"/><area shape="rect" id="node58" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="888,607,1043,654"/><area shape="rect" id="node55" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1107,477,1253,507"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_icgraph.png" border="0" usemap="#d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_icgraph" id="d2/dc7/a00838_a35095334931758d1ce432130aa8b743f_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a054ed0eb590140ee5d25d8efc609a6a1" title="ripple::LedgerMasterImp\l::consensusBuilt" alt="" coords="216,5,379,51"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="216,74,379,121"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a6fde97247627301874e756267c2b7abf" title="ripple::LedgerMasterImp\l::switchLedgers" alt="" coords="216,143,379,190"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afef5d9e765e612499355e2b1caa27a91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::checkAccept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>ledger</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a07188a21ab02f9fd85914c40b10f4d67">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00719">719</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d3/dac/a01777.html#a5c7c49fe84ec9e9306525d64890d5e01">ripple::Validations::getFeeAverage()</a>, <a class="el" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb">ripple::Application::getFeeTrack()</a>, <a class="el" href="../../dd/d94/a00888.html#a9dc0eefbc4ef848a1d8cb3e58aebcab0">ripple::LoadFeeTrack::getLoadBase()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00699">getNeededValidations()</a>, <a class="el" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed">ripple::Application::getOrderBookDB()</a>, <a class="el" href="../../d3/dac/a01777.html#af2c2a17a862003e98972450c4d4c8e05">ripple::Validations::getTrustedValidationCount()</a>, <a class="el" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">ripple::Application::getValidations()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00065">mLastValidateHash</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00066">mLastValidateSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00052">mPubLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00183">setPubLedger()</a>, <a class="el" href="../../dd/d94/a00888.html#a4672a09e74aba20f8972c793e3acee0c">ripple::LoadFeeTrack::setRemoteFee()</a>, <a class="el" href="../../dd/d0d/a02929_source.html#l00037">ripple::OrderBookDB::setup()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00175">setValidLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>
<div class="fragment"><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">if</span> (ledger-&gt;getLedgerSeq() &lt;= <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="comment">// Can we advance the last fully-validated ledger? If so, can we publish?</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">if</span> (ledger-&gt;getLedgerSeq() &lt;= <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordtype">int</span> minVal = <a class="code" href="../../d2/dc7/a00838.html#a25f5cc7afe62b8844d2036e89a485996">getNeededValidations</a>();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordtype">int</span> tvc = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">getValidations</a>().<a class="code" href="../../d3/dac/a01777.html#af2c2a17a862003e98972450c4d4c8e05">getTrustedValidationCount</a>(ledger-&gt;getHash());</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">if</span> (tvc &lt; minVal) <span class="comment">// nothing we can do</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Only &quot;</span> &lt;&lt; tvc &lt;&lt; <span class="stringliteral">&quot; validations for &quot;</span> &lt;&lt; ledger-&gt;getHash();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Advancing accepted ledger to &quot;</span> &lt;&lt; ledger-&gt;getLedgerSeq() &lt;&lt; <span class="stringliteral">&quot; with &gt;= &quot;</span> &lt;&lt; minVal &lt;&lt; <span class="stringliteral">&quot; validations&quot;</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a9a7548c63624f1afe9014aeca724359d">mLastValidateHash</a> = ledger-&gt;getHash();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2b3a9be961735746d6b5946b24ac0588">mLastValidateSeq</a> = ledger-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        ledger-&gt;setValidated();</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        ledger-&gt;setFull();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6">setValidLedger</a>(ledger);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc7/a00838.html#af10ba0f0e5e469d2ed19227006bba59e">mPubLedger</a>)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            ledger-&gt;pendSaveValidated(<span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9">setPubLedger</a>(ledger);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed">getOrderBookDB</a>().<a class="code" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210">setup</a>(ledger);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <a class="code" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">std::uint64_t</a> fee, fee2, ref;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        ref = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb">getFeeTrack</a>().<a class="code" href="../../dd/d94/a00888.html#a9dc0eefbc4ef848a1d8cb3e58aebcab0">getLoadBase</a>();</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordtype">int</span> count = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">getValidations</a>().<a class="code" href="../../d3/dac/a01777.html#a5c7c49fe84ec9e9306525d64890d5e01">getFeeAverage</a>(ledger-&gt;getHash(), ref, fee);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordtype">int</span> count2 = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">getValidations</a>().<a class="code" href="../../d3/dac/a01777.html#a5c7c49fe84ec9e9306525d64890d5e01">getFeeAverage</a>(ledger-&gt;getParentHash(), ref, fee2);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">if</span> ((count + count2) == 0)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb">getFeeTrack</a>().<a class="code" href="../../dd/d94/a00888.html#a4672a09e74aba20f8972c793e3acee0c">setRemoteFee</a>(ref);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb">getFeeTrack</a>().<a class="code" href="../../dd/d94/a00888.html#a4672a09e74aba20f8972c793e3acee0c">setRemoteFee</a>(((fee * count) + (fee2 * count2)) / (count + count2));</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415">tryAdvance</a> ();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_afef5d9e765e612499355e2b1caa27a91_cgraph.png" border="0" usemap="#d2/dc7/a00838_afef5d9e765e612499355e2b1caa27a91_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_afef5d9e765e612499355e2b1caa27a91_cgraph" id="d2/dc7/a00838_afef5d9e765e612499355e2b1caa27a91_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1585,840,1687,869"/><area shape="rect" id="node7" href="../../d3/dac/a01777.html#a5c7c49fe84ec9e9306525d64890d5e01" title="ripple::Validations\l::getFeeAverage" alt="" coords="235,2238,360,2284"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb" title="ripple::Application\l::getFeeTrack" alt="" coords="905,1846,1031,1892"/><area shape="rect" id="node11" href="../../dd/d94/a00888.html#a9dc0eefbc4ef848a1d8cb3e58aebcab0" title="ripple::LoadFeeTrack\l::getLoadBase" alt="" coords="225,2307,369,2354"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a25f5cc7afe62b8844d2036e89a485996" title="ripple::LedgerMasterImp\l::getNeededValidations" alt="" coords="216,2067,379,2114"/><area shape="rect" id="node22" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4" title="ripple::Application\l::getValidations" alt="" coords="456,2219,581,2266"/><area shape="rect" id="node24" href="../../d3/dac/a01777.html#af2c2a17a862003e98972450c4d4c8e05" title="ripple::Validations\l::getTrustedValidationCount" alt="" coords="427,2288,611,2335"/><area shape="rect" id="node26" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="1137,627,1265,674"/><area shape="rect" id="node30" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="1120,507,1283,554"/><area shape="rect" id="node32" href="../../dd/d94/a00888.html#a4672a09e74aba20f8972c793e3acee0c" title="ripple::LoadFeeTrack\l::setRemoteFee" alt="" coords="225,2376,369,2423"/><area shape="rect" id="node34" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="1131,892,1272,939"/><area shape="rect" id="node54" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6" title="ripple::LedgerMasterImp\l::setValidLedger" alt="" coords="1120,180,1283,227"/><area shape="rect" id="node63" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="216,571,379,618"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1771,831,1947,878"/><area shape="rect" id="node15" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="1363,1676,1480,1705"/><area shape="rect" id="node17" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="905,2168,1031,2215"/><area shape="rect" id="node19" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="1796,1292,1921,1339"/><area shape="rect" id="node37" href="../../d5/d4c/a01058.html#a342daa95f79e50e5faee7c6e6409343f" title="ripple::OrderBookDB\l::update" alt="" coords="1351,918,1492,964"/><area shape="rect" id="node50" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="1359,380,1484,427"/><area shape="rect" id="node52" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="1336,1622,1507,1652"/><area shape="rect" id="node39" href="../../d9/d9d/a03417.html#af8a920635395c30b9a35ef301cb6d5bc" title="ripple::updateHelper" alt="" coords="1567,985,1705,1014"/><area shape="rect" id="node45" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="1573,399,1699,446"/><area shape="rect" id="node47" href="../../d1/de6/a00837.html#a76e6c9a98c9e32b787878c5b6ad810c3" title="ripple::LedgerMaster\l::newOrderBookDB" alt="" coords="1567,915,1705,962"/><area shape="rect" id="node41" href="../../dd/d5f/a00825.html#a75205d48fe6ecf924cfed352ce21fa0a" title="ripple::Ledger::getBookBase" alt="" coords="1765,985,1952,1014"/><area shape="rect" id="node56" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="1340,189,1503,218"/><area shape="rect" id="node59" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="1359,311,1484,358"/><area shape="rect" id="node61" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5" title="ripple::NetworkOPs\l::updateLocalTx" alt="" coords="1353,242,1489,288"/><area shape="rect" id="node65" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="671,540,809,587"/><area shape="rect" id="node70" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="437,571,600,618"/><area shape="rect" id="node72" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="659,1043,821,1090"/><area shape="rect" id="node74" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411" title="ripple::LedgerMasterImp\l::findNewLedgersToPublish" alt="" coords="877,792,1059,839"/><area shape="rect" id="node81" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="1132,747,1271,794"/><area shape="rect" id="node83" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="1125,1088,1277,1135"/><area shape="rect" id="node88" href="../../dd/d94/a00888.html#aad042032160b77a02227571a8a111fcf" title="ripple::LoadFeeTrack\l::isLoadedLocal" alt="" coords="896,912,1040,959"/><area shape="rect" id="node91" href="../../dc/d0c/a00783.html#a5c2111a6134d3f9eae89261066018ade" title="ripple::JobQueue::getJob\lCount" alt="" coords="885,982,1051,1028"/><area shape="rect" id="node93" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61" title="ripple::RangeSet::prevMissing" alt="" coords="869,1052,1067,1081"/><area shape="rect" id="node95" href="../../d1/de6/a00837.html#a9e5a8da329a1f130f91f2a9d26b28310" title="ripple::LedgerMaster\l::shouldAcquire" alt="" coords="899,1104,1037,1151"/><area shape="rect" id="node97" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="897,1174,1039,1220"/><area shape="rect" id="node99" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="1555,1547,1717,1594"/><area shape="rect" id="node103" href="../../d8/d86/a00703.html#abfa7313dd062dc0f416dfa71d8dad546" title="ripple::InboundLedgers\l::isFailure" alt="" coords="892,1243,1044,1290"/><area shape="rect" id="node106" href="../../d2/dc7/a00838.html#a489d89a5a5dc4086f03a891a5d85a56b" title="ripple::LedgerMasterImp\l::getFetchPack" alt="" coords="1120,1158,1283,1204"/><area shape="rect" id="node109" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="887,571,1049,618"/><area shape="rect" id="node116" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459" title="ripple::Ledger::getHashBy\lIndex" alt="" coords="1115,438,1288,484"/><area shape="rect" id="node120" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="887,1726,1049,1772"/><area shape="rect" id="node124" href="../../d3/db8/a00316.html#a072203ed975dafbf825044b054ff5a0a" title="ripple::Config::getSize" alt="" coords="893,1313,1043,1342"/><area shape="rect" id="node128" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076" title="ripple::LedgerMaster\l::getCompleteLedgers" alt="" coords="893,1366,1043,1412"/><area shape="rect" id="node130" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="887,1435,1049,1482"/><area shape="rect" id="node133" href="../../dd/dac/a01008.html#a024e36c725c9ebef73c42d943ffacc43" title="ripple::NetworkOPs\l::pubLedger" alt="" coords="900,1504,1036,1551"/><area shape="rect" id="node136" href="../../dd/dac/a01008.html#a7ebeb2a8f947b729b0a8a1aba97d3b54" title="ripple::NetworkOPs\l::clearNeedNetworkLedger" alt="" coords="880,350,1056,396"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0c839d3083da43e7f837cfa14b09b609"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::clearLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>seq</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a66c835da56b2cb9ab229f6b2125c03d3">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00376">376</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d5/dd8/a03083_source.html#l00151">ripple::RangeSet::clearValue()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00652">failedSave()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00559">fixMismatch()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01368">getLedgerBySeq()</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a">clearValue</a> (seq);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_cgraph.png" border="0" usemap="#d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_cgraph" id="d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_cgraph">
<area shape="rect" id="node3" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="217,36,404,65"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="468,5,644,35"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="453,58,659,105"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_icgraph.png" border="0" usemap="#d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_icgraph" id="d2/dc7/a00838_a0c839d3083da43e7f837cfa14b09b609_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="848,13,1011,60"/><area shape="rect" id="node16" href="../../d2/dc7/a00838.html#a8bd8691d084b7f903081176a0127c20e" title="ripple::LedgerMasterImp\l::failedSave" alt="" coords="216,50,379,97"/><area shape="rect" id="node18" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c" title="ripple::LedgerMasterImp\l::fixMismatch" alt="" coords="427,110,589,157"/><area shape="rect" id="node26" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f" title="ripple::LedgerMasterImp\l::getLedgerBySeq" alt="" coords="216,170,379,217"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="1059,77,1221,124"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="1269,77,1432,124"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="1480,146,1643,193"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="1480,8,1643,54"/><area shape="rect" id="node14" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="1480,77,1643,124"/><area shape="rect" id="node20" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="637,110,800,157"/><area shape="rect" id="node23" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3" title="ripple::LedgerMasterImp\l::forceValid" alt="" coords="848,86,1011,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a739076ea26b960435bbc86ade3a10db6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::closeLedger </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recover</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a719c8f28d77bb4f314b4527e90299f85">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00288">288</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d0/d15/a00700.html#a64eb706518200f3ac6dd4c2ebcea65a2">ripple::IHashRouter::addSuppressionFlags()</a>, <a class="el" href="../../da/de2/a03067_source.html#l00075">ripple::TransactionEngine::applyTransaction()</a>, <a class="el" href="../../d6/d0c/a02962_source.html#l00092">ripple::CanonicalTXSet::begin()</a>, <a class="el" href="../../dc/dc0/a03087_source.html#l00079">CondLog</a>, <a class="el" href="../../d6/d0c/a02962_source.html#l00096">ripple::CanonicalTXSet::end()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#abc0db550376596fa61a678f5d9ce82f4">ripple::Application::getHashRouter()</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00058">ripple::LedgerHolder::getMutable()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00047">mEngine</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00057">mHeldTransactions</a>, <a class="el" href="../../d6/d0c/a02962_source.html#l00083">ripple::CanonicalTXSet::reset()</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00036">ripple::LedgerHolder::set()</a>, <a class="el" href="../../da/d5d/a03068_source.html#l00081">ripple::TransactionEngine::setLedger()</a>, <a class="el" href="../../d0/d7b/a02968_source.html#l00030">SF_SIGGOOD</a>, <a class="el" href="../../db/da5/a02919_source.html#l00029">ripple::tapNO_CHECK_SIGN</a>, <a class="el" href="../../db/da5/a02919_source.html#l00031">ripple::tapOPEN_LEDGER</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> closingLedger = <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#ad761b492c02d0a787bcfd5ee9b102ded">getMutable</a> ();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (recover)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordtype">int</span> recovers = 0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d0/d3e/a00253.html#a6167550e6d9c3094b0c4d89c92dafc64">CanonicalTXSet::iterator</a> it = <a class="code" href="../../d2/dc7/a00838.html#af129fb8d47bf0d34aab2696258e440e8">mHeldTransactions</a>.<a class="code" href="../../d0/d3e/a00253.html#ad713adc58ead09106403894c7e10e444">begin</a> (), end = <a class="code" href="../../d2/dc7/a00838.html#af129fb8d47bf0d34aab2696258e440e8">mHeldTransactions</a>.<a class="code" href="../../d0/d3e/a00253.html#a11fb64e7bfc50c26c19ed9cc243ea33c">end</a> (); it != end; ++it)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    <a class="code" href="../../d9/d9d/a03417.html#ae2a321a3f2099e098fdcc670a60c7a09">TransactionEngineParams</a> tepFlags = <a class="code" href="../../d9/d9d/a03417.html#ae2a321a3f2099e098fdcc670a60c7a09ab3ffb3bd2975db520632d6f5f42606e1">tapOPEN_LEDGER</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#abc0db550376596fa61a678f5d9ce82f4">getHashRouter</a> ().<a class="code" href="../../d0/d15/a00700.html#a64eb706518200f3ac6dd4c2ebcea65a2">addSuppressionFlags</a> (it-&gt;first.getTXID (), <a class="code" href="../../d0/d7b/a02968.html#ac4c1ab5f431528c3ea66a575b47247b6">SF_SIGGOOD</a>))</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        tepFlags = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d9d/a03417.html#ae2a321a3f2099e098fdcc670a60c7a09">TransactionEngineParams</a><span class="keyword">&gt;</span> (tepFlags | <a class="code" href="../../d9/d9d/a03417.html#ae2a321a3f2099e098fdcc670a60c7a09ab6877d4b605c5749356755d7915cfab6">tapNO_CHECK_SIGN</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    <span class="keywordtype">bool</span> didApply;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    <a class="code" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a>.<a class="code" href="../../d9/dc5/a01705.html#ab9fec10cf88fcd1212cff4c5b4c29d60">applyTransaction</a> (*it-&gt;second, tepFlags, didApply);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    <span class="keywordflow">if</span> (didApply)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                        ++recovers;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    <span class="comment">// If a transaction is recovered but hasn&#39;t been relayed,</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    <span class="comment">// it will become disputed in the consensus process, which</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    <span class="comment">// will cause it to be relayed.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                    <span class="comment">// CHECKME: We got a few of these</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Held transaction throws&quot;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a22f88ba407917e2f7d6353efcb3e5920">CondLog</a> (recovers != 0, <a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Recovered &quot;</span> &lt;&lt; recovers &lt;&lt; <span class="stringliteral">&quot; held transactions&quot;</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="comment">// VFALCO TODO recreate the CanonicalTxSet object instead of resetting it</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#af129fb8d47bf0d34aab2696258e440e8">mHeldTransactions</a>.<a class="code" href="../../d0/d3e/a00253.html#acdf8f9aae6631945cdb3cd48b5e4d059">reset</a> (closingLedger-&gt;getHash ());</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (closingLedger);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a>.<a class="code" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a">setLedger</a> (<a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#ad761b492c02d0a787bcfd5ee9b102ded">getMutable</a> ());</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a739076ea26b960435bbc86ade3a10db6_cgraph.png" border="0" usemap="#d2/dc7/a00838_a739076ea26b960435bbc86ade3a10db6_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a739076ea26b960435bbc86ade3a10db6_cgraph" id="d2/dc7/a00838_a739076ea26b960435bbc86ade3a10db6_cgraph">
<area shape="rect" id="node3" href="../../d0/d15/a00700.html#a64eb706518200f3ac6dd4c2ebcea65a2" title="ripple::IHashRouter\l::addSuppressionFlags" alt="" coords="232,693,387,739"/><area shape="rect" id="node5" href="../../d9/dc5/a01705.html#ab9fec10cf88fcd1212cff4c5b4c29d60" title="ripple::TransactionEngine\l::applyTransaction" alt="" coords="225,762,393,809"/><area shape="rect" id="node88" href="../../d0/d3e/a00253.html#ad713adc58ead09106403894c7e10e444" title="ripple::CanonicalTXSet\l::begin" alt="" coords="232,831,387,878"/><area shape="rect" id="node90" href="../../d0/d3e/a00253.html#a11fb64e7bfc50c26c19ed9cc243ea33c" title="ripple::CanonicalTXSet::end" alt="" coords="217,901,401,931"/><area shape="rect" id="node92" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="259,955,360,984"/><area shape="rect" id="node96" href="../../da/d74/a00099.html#abc0db550376596fa61a678f5d9ce82f4" title="ripple::Application\l::getHashRouter" alt="" coords="247,1007,372,1054"/><area shape="rect" id="node98" href="../../d3/d13/a00836.html#ad761b492c02d0a787bcfd5ee9b102ded" title="ripple::LedgerHolder\l::getMutable" alt="" coords="240,1077,379,1123"/><area shape="rect" id="node100" href="../../d0/d3e/a00253.html#acdf8f9aae6631945cdb3cd48b5e4d059" title="ripple::CanonicalTXSet\l::reset" alt="" coords="232,1146,387,1193"/><area shape="rect" id="node102" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="228,1216,391,1245"/><area shape="rect" id="node104" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a" title="ripple::TransactionEngine\l::setLedger" alt="" coords="225,1269,393,1315"/><area shape="rect" id="node7" href="../../d0/d08/a00832.html#af8d66b30b3965d9288c5d8eb4e520871" title="ripple::LedgerEntrySet\l::init" alt="" coords="473,58,623,105"/><area shape="rect" id="node11" href="../../d9/de4/a01346.html#a501700305bfe6b71f1b8de263bdde43e" title="ripple::SerializedTransaction\l::getTransactionID" alt="" coords="697,231,884,278"/><area shape="rect" id="node15" href="../../de/d1a/a01559.html#a85c374b955de23e00242029cb0bd4f74" title="ripple::STObject::add" alt="" coords="1159,209,1303,239"/><area shape="rect" id="node20" href="../../de/d1a/a01559.html#ad363d403a5067a41b38f4aab0b2b8fc8" title="ripple::STObject::isEquivalent" alt="" coords="451,183,645,212"/><area shape="rect" id="node24" href="../../d9/de4/a01346.html#a436d1b0b2d422540cd39c117f5f6816d" title="ripple::SerializedTransaction\l::getJson" alt="" coords="455,301,641,347"/><area shape="rect" id="node31" href="../../d8/df7/a01711.html#a520fdd34ff865b5de78aac3c40d78630" title="ripple::Transactor\l::makeTransactor" alt="" coords="487,397,609,443"/><area shape="rect" id="node35" href="../../d9/d9d/a03417.html#a8ebf8214ccd67d515e6dd26b832854a9" title="ripple::transResultInfo" alt="" coords="716,1181,865,1211"/><area shape="rect" id="node37" href="../../d9/d9d/a03417.html#a31cb07ee73687ab40f31634269f9f43c" title="ripple::is_bit_set" alt="" coords="489,536,607,565"/><area shape="rect" id="node39" href="../../d0/d08/a00832.html#a95c6ccf68549ef1d88dc47cf3e71a7ea" title="ripple::LedgerEntrySet\l::clear" alt="" coords="473,466,623,513"/><area shape="rect" id="node43" href="../../d9/dc5/a01705.html#a5766d606e55b9ede4b004ff170f967cc" title="ripple::TransactionEngine\l::entryCache" alt="" coords="464,589,632,635"/><area shape="rect" id="node47" href="../../dd/d5f/a00825.html#ab0ca75e1c5fa67568377f9962687cf90" title="ripple::Ledger::getAccount\lRootIndex" alt="" coords="461,658,635,705"/><area shape="rect" id="node54" href="../../d9/de4/a01346.html#ac1425afebd8e387f017bdf9cb0204498" title="ripple::SerializedTransaction\l::getSourceAccount" alt="" coords="455,727,641,774"/><area shape="rect" id="node58" href="../../d9/de4/a01346.html#aaff9c0480235e2b982777311a9e5f7fd" title="ripple::SerializedTransaction\l::getSequence" alt="" coords="455,797,641,843"/><area shape="rect" id="node62" href="../../d9/de4/a01346.html#a5dba24ce8a82d0513d25b3843bae8c43" title="ripple::SerializedTransaction\l::getTransactionFee" alt="" coords="455,866,641,913"/><area shape="rect" id="node66" href="../../da/d6b/a02352.html#a173f7c872fb68ccd3a20440d640b66c7" title="balance" alt="" coords="515,936,581,965"/><area shape="rect" id="node70" href="../../d9/dc5/a01705.html#a6a68406aec8713a4b3543b5c1a299d4b" title="ripple::TransactionEngine\l::entryModify" alt="" coords="464,1042,632,1089"/><area shape="rect" id="node72" href="../../d9/dc5/a01705.html#a8ecd39e5899f292d284405ec57eb4dbc" title="ripple::TransactionEngine\l::checkInvariants" alt="" coords="464,1111,632,1158"/><area shape="rect" id="node74" href="../../d9/d9d/a03417.html#a14963d35eeab76c974e033beb7fdddb0" title="ripple::transToken" alt="" coords="485,1181,611,1211"/><area shape="rect" id="node77" href="../../d9/d9d/a03417.html#af67d027ed1da5fcdbb6f7675d0151d0b" title="ripple::transHuman" alt="" coords="483,989,613,1019"/><area shape="rect" id="node80" href="../../d0/d08/a00832.html#a9a4e268d98bb70b5d8a41035164c890e" title="ripple::LedgerEntrySet\l::getJson" alt="" coords="473,1285,623,1331"/><area shape="rect" id="node82" href="../../d0/d08/a00832.html#a1c980eea2da42b3f99d55d303c02db63" title="ripple::LedgerEntrySet\l::calcRawMeta" alt="" coords="473,1354,623,1401"/><area shape="rect" id="node84" href="../../d9/dc5/a01705.html#a73282ab8c8ce2a070ee756cc9c336416" title="ripple::TransactionEngine\l::txnWrite" alt="" coords="464,1423,632,1470"/><area shape="rect" id="node86" href="../../d2/d41/a01493.html#ae3870bf43687a085235279f483e0e731" title="ripple::STAmount::getNValue" alt="" coords="452,5,644,35"/><area shape="rect" id="node9" href="../../d1/da7/a01709.html#a3d1af2f9f921832bb2ce89c7f5afea91" title="ripple::TransactionMetaSet\l::init" alt="" coords="701,58,880,105"/><area shape="rect" id="node13" href="../../de/d1a/a01559.html#a7a9cbb8d5e1266c782de1bb94998289e" title="ripple::STObject::getHash" alt="" coords="936,240,1109,269"/><area shape="rect" id="node17" href="../../da/d61/a01350.html#afc7187fd3c9e185d29a0ecf5500d0cdf" title="ripple::Serializer\l::getSHA512Half" alt="" coords="1171,511,1291,558"/><area shape="rect" id="node22" href="../../de/d1a/a01559.html#ab150c202aa51c574869599a2a3d475ff" title="ripple::STObject::getFullText" alt="" coords="696,179,885,208"/><area shape="rect" id="node26" href="../../de/d1a/a01559.html#a20e386b11943fda5fe9c67542e8f0e50" title="ripple::STObject::getJson" alt="" coords="705,371,876,400"/><area shape="rect" id="node29" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="728,301,853,347"/><area shape="rect" id="node33" href="../../d9/de4/a01346.html#ad22d8a774bf0fdcac7aeb08fece39c17" title="ripple::SerializedTransaction\l::getTxnType" alt="" coords="697,423,884,470"/><area shape="rect" id="node41" href="../../d1/da7/a01709.html#afcac71040a014d74bf063ce83ca95bb2" title="ripple::TransactionMetaSet\l::clear" alt="" coords="701,493,880,539"/><area shape="rect" id="node45" href="../../d0/d08/a00832.html#ad13594cf847a6c56ef479ee44ae3c329" title="ripple::LedgerEntrySet\l::entryCache" alt="" coords="716,562,865,609"/><area shape="rect" id="node49" href="../../da/d61/a01350.html#a10b908daaabf22ae052bfc7fd221157c" title="ripple::Serializer\l::add16" alt="" coords="733,631,848,678"/><area shape="rect" id="node51" href="../../da/d61/a01350.html#a509771bf1109949d4bee7b71aecc3757" title="ripple::Serializer\l::add160" alt="" coords="733,701,848,747"/><area shape="rect" id="node56" href="../../de/d1a/a01559.html#ac853c6963065dd80fa4a58543ab4ac39" title="ripple::STObject::getField\lAccount" alt="" coords="705,821,876,867"/><area shape="rect" id="node60" href="../../de/d1a/a01559.html#ab3e8074cfab6e1c525b2d9a474c60f23" title="ripple::STObject::getFieldU32" alt="" coords="693,891,888,920"/><area shape="rect" id="node64" href="../../de/d1a/a01559.html#aad5f49acb4c7b95cabee5d8463d4ce4a" title="ripple::STObject::getField\lAmount" alt="" coords="705,943,876,990"/><area shape="rect" id="node68" href="../../da/d6b/a02352.html#af8eafba12a6ebc987cf6ae89f4cce1a8" title="balance_deeper" alt="" coords="735,1013,847,1043"/><area shape="rect" id="node94" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="460,1493,636,1539"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a054ed0eb590140ee5d25d8efc609a6a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::consensusBuilt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>ledger</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Report that the consensus process built a particular ledger </p>

<p>Implements <a class="el" href="../../d1/de6/a00837.html#afb1bee3a8be355c893d6eec64ea041cf">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00767">767</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00659">checkAccept()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d3/dac/a01777.html#a9deedf47b09e1ff5b3ff59cd3afd92f0">ripple::Validations::getCurrentTrustedValidations()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01386">getLedgerByHash()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00699">getNeededValidations()</a>, <a class="el" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">ripple::Application::getValidations()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00340">setBuildingLedger()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>
<div class="fragment"><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">// Because we just built a ledger, we are no longer building one</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#ac95124a3e83c81db53de4b68cdf8f71e">setBuildingLedger</a> (0);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">if</span> (ledger-&gt;getLedgerSeq() &lt;= <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>,  LedgerConsensus)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;Consensus built old ledger: &quot;</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;               &lt;&lt; ledger-&gt;getLedgerSeq() &lt;&lt; <span class="stringliteral">&quot; &lt;= &quot;</span> &lt;&lt; <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">// See if this ledger can be the new fully-validated ledger</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f">checkAccept</a> (ledger);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">if</span> (ledger-&gt;getLedgerSeq() &lt;= <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, LedgerConsensus)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;Consensus ledger fully validated&quot;</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="comment">// This ledger cannot be the new fully-validated ledger, but</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="comment">// maybe we saved up validations for some other ledger that can be</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> val = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">getValidations</a>().<a class="code" href="../../d3/dac/a01777.html#a9deedf47b09e1ff5b3ff59cd3afd92f0">getCurrentTrustedValidations</a>();</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="comment">// Track validation counts with sequence numbers</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keyword">class </span>valSeq</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keyword">public</span>:</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            valSeq () : valCount_ (0), ledgerSeq_ (0) { ; }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="keywordtype">void</span> mergeValidation (<a class="code" href="../../d9/d9d/a03417.html#a1fd8edaf055ef4371c6a048d6eec0059">LedgerSeq</a> seq)</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                valCount_++;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                <span class="comment">// If we didn&#39;t already know the sequence, now we do</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                <span class="keywordflow">if</span> (ledgerSeq_ == 0)</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                    ledgerSeq_ = seq;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordtype">int</span> valCount_;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a1fd8edaf055ef4371c6a048d6eec0059">LedgerSeq</a> ledgerSeq_;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        };</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="comment">// Count the number of current, trusted validations</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a1382c24eaaf3ee6a51a5b64d8ad5706c">ripple::unordered_map &lt;uint256, valSeq&gt;</a> count;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; v : val)</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            valSeq&amp; vs = count[v-&gt;getLedgerHash()];</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            vs.mergeValidation (v-&gt;getFieldU32 (sfLedgerSequence));</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="keywordtype">int</span> neededValidations = <a class="code" href="../../d2/dc7/a00838.html#a25f5cc7afe62b8844d2036e89a485996">getNeededValidations</a> ();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a1fd8edaf055ef4371c6a048d6eec0059">LedgerSeq</a> maxSeq = <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        uint256 maxLedger = ledger-&gt;getHash();</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment">// Of the ledgers with sufficient validations,</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="comment">// find the one with the highest sequence</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; v : count)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="keywordflow">if</span> (v.second.valCount_ &gt; neededValidations)</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                <span class="comment">// If we still don&#39;t know the sequence, get it</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                <span class="keywordflow">if</span> (v.second.ledgerSeq_ == 0)</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger = <a class="code" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7">getLedgerByHash</a> (v.first);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                    <span class="keywordflow">if</span> (ledger)</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        v.second.ledgerSeq_ = ledger-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                <span class="keywordflow">if</span> (v.second.ledgerSeq_ &gt; maxSeq)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                    maxSeq = v.second.ledgerSeq_;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    maxLedger = v.first;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">if</span> (maxSeq &gt; <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, LedgerConsensus)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;Consensus triggered check of ledger&quot;</span>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f">checkAccept</a> (maxLedger, maxSeq);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a054ed0eb590140ee5d25d8efc609a6a1_cgraph.png" border="0" usemap="#d2/dc7/a00838_a054ed0eb590140ee5d25d8efc609a6a1_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a054ed0eb590140ee5d25d8efc609a6a1_cgraph" id="d2/dc7/a00838_a054ed0eb590140ee5d25d8efc609a6a1_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="235,441,397,487"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1192,775,1293,804"/><area shape="rect" id="node68" href="../../d3/dac/a01777.html#a9deedf47b09e1ff5b3ff59cd3afd92f0" title="ripple::Validations\l::getCurrentTrustedValidations" alt="" coords="217,1081,415,1127"/><area shape="rect" id="node70" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="235,633,397,679"/><area shape="rect" id="node77" href="../../d2/dc7/a00838.html#a25f5cc7afe62b8844d2036e89a485996" title="ripple::LedgerMasterImp\l::getNeededValidations" alt="" coords="235,870,397,917"/><area shape="rect" id="node85" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4" title="ripple::Application\l::getValidations" alt="" coords="493,961,619,1007"/><area shape="rect" id="node90" href="../../d2/dc7/a00838.html#ac95124a3e83c81db53de4b68cdf8f71e" title="ripple::LedgerMasterImp\l::setBuildingLedger" alt="" coords="235,1150,397,1197"/><area shape="rect" id="node5" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="480,475,632,522"/><area shape="rect" id="node11" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="957,87,1083,134"/><area shape="rect" id="node23" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="487,406,625,453"/><area shape="rect" id="node25" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="485,545,627,591"/><area shape="rect" id="node9" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1369,766,1545,813"/><area shape="rect" id="node13" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1395,5,1520,51"/><area shape="rect" id="node17" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1168,43,1317,72"/><area shape="rect" id="node19" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1193,96,1292,125"/><area shape="rect" id="node15" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1596,153,1745,183"/><area shape="rect" id="node21" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1403,96,1512,125"/><area shape="rect" id="node27" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="715,514,856,561"/><area shape="rect" id="node29" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="715,445,856,491"/><area shape="rect" id="node31" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="696,584,875,613"/><area shape="rect" id="node33" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="943,515,1097,562"/><area shape="rect" id="node36" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="949,635,1091,682"/><area shape="rect" id="node39" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="957,705,1083,751"/><area shape="rect" id="node41" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="941,331,1099,360"/><area shape="rect" id="node62" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="941,775,1099,804"/><area shape="rect" id="node65" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="923,463,1117,492"/><area shape="rect" id="node43" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1165,634,1320,681"/><area shape="rect" id="node45" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1165,149,1320,195"/><area shape="rect" id="node47" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1165,218,1320,265"/><area shape="rect" id="node49" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1165,287,1320,334"/><area shape="rect" id="node51" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1165,357,1320,403"/><area shape="rect" id="node53" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1165,426,1320,473"/><area shape="rect" id="node55" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1180,565,1305,611"/><area shape="rect" id="node60" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1165,495,1320,542"/><area shape="rect" id="node57" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1384,433,1531,463"/><area shape="rect" id="node72" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="723,689,848,735"/><area shape="rect" id="node74" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="475,615,637,644"/><area shape="rect" id="node79" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="497,788,615,817"/><area shape="rect" id="node81" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="493,718,619,765"/><area shape="rect" id="node87" href="../../d3/dac/a01777.html#af2c2a17a862003e98972450c4d4c8e05" title="ripple::Validations\l::getTrustedValidationCount" alt="" coords="464,841,648,887"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1137d82f75868275f3380ffe9673d95f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::doAdvance </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00877">877</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/de6/a03084_source.html#l00030">ripple::RangeSet::absent</a>, <a class="el" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">ripple::JobQueue::addJob()</a>, <a class="el" href="../../d0/d75/a03105_source.html#l00028">BIND_TYPE</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00376">clearLedger()</a>, <a class="el" href="../../dd/dac/a01008.html#a7ebeb2a8f947b729b0a8a1aba97d3b54">ripple::NetworkOPs::clearNeedNetworkLedger()</a>, <a class="el" href="../../dc/d86/a02909_source.html#l00041">ripple::InboundLedger::fcHISTORY</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076">ripple::LedgerMaster::getCompleteLedgers()</a>, <a class="el" href="../../d0/dc2/a02477_source.html#l00647">ripple::getConfig()</a>, <a class="el" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb">ripple::Application::getFeeTrack()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00527">getFetchPack()</a>, <a class="el" href="../../dd/d3f/a02912_source.html#l00882">ripple::Ledger::getHashByIndex()</a>, <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>, <a class="el" href="../../dc/d0c/a00783.html#a5c2111a6134d3f9eae89261066018ade">ripple::JobQueue::getJobCount()</a>, <a class="el" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">ripple::Application::getJobQueue()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01386">getLedgerByHash()</a>, <a class="el" href="../../d1/d77/a02920_source.html#l00067">ripple::LedgerHistory::getLedgerBySeq()</a>, <a class="el" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">ripple::Application::getLedgerMaster()</a>, <a class="el" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">ripple::Application::getOPs()</a>, <a class="el" href="../../d0/dc2/a02477_source.html#l00603">ripple::Config::getSize()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../d8/d86/a00703.html#abfa7313dd062dc0f416dfa71d8dad546">ripple::InboundLedgers::isFailure()</a>, <a class="el" href="../../dd/d94/a00888.html#aad042032160b77a02227571a8a111fcf">ripple::LoadFeeTrack::isLoadedLocal()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00147">ripple::base_uint&lt; BITS &gt;::isNonZero()</a>, <a class="el" href="../../d8/d96/a03116_source.html#l00049">ripple::jtADVANCE</a>, <a class="el" href="../../d8/d96/a03116_source.html#l00038">ripple::jtPUBOLDLEDGER</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00033">ripple::lsFATAL</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00070">mAdvanceWork</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00071">mFillInProgress</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00052">mPubLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00078">mPubLedgerSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01238">newPFWork()</a>, <a class="el" href="../../d0/d75/a03105_source.html#l00029">P_1</a>, <a class="el" href="../../d5/dd8/a03083_source.html#l00098">ripple::RangeSet::prevMissing()</a>, <a class="el" href="../../dd/dac/a01008.html#a024e36c725c9ebef73c42d943ffacc43">ripple::NetworkOPs::pubLedger()</a>, <a class="el" href="../../d2/db9/a01926_source.html#l00392">ripple::Config::RUN_STANDALONE</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00183">setPubLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01453">ripple::LedgerMaster::shouldAcquire()</a>, <a class="el" href="../../d2/db9/a01926_source.html#l00074">ripple::siLedgerFetch</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00468">tryFill()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00856">advanceThread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a77c7fd65a7fe8c0e3bd50eb6e0a62f83">mAdvanceWork</a> = <span class="keyword">false</span>; <span class="comment">// If there&#39;s work to do, we&#39;ll make progress</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keywordtype">bool</span> progress = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            std::list&lt;Ledger::pointer&gt; pubLedgers = <a class="code" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411">findNewLedgersToPublish</a> ();</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            <span class="keywordflow">if</span> (pubLedgers.empty())</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().<a class="code" href="../../d3/db8/a00316.html#a9e6ee7c4f8367f7007f92d07d3268996">RUN_STANDALONE</a> &amp;&amp; !<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb">getFeeTrack</a>().<a class="code" href="../../dd/d94/a00888.html#aad042032160b77a02227571a8a111fcf">isLoadedLocal</a>() &amp;&amp;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                    (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">getJobQueue</a>().<a class="code" href="../../dc/d0c/a00783.html#a5c2111a6134d3f9eae89261066018ade">getJobCount</a>(<a class="code" href="../../d9/d9d/a03417.html#ae0f54f8ce649d639bf3e2b295347e17aaa4e32e16425bc63db04ed98f3b3f4259">jtPUBOLDLEDGER</a>) &lt; 10) &amp;&amp;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                    (<a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a> == <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a>))</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                { <span class="comment">// We are in sync, so can acquire</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                    <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> missing;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                    {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                        missing = <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61">prevMissing</a>(<a class="code" href="../../d2/dc7/a00838.html#af10ba0f0e5e469d2ed19227006bba59e">mPubLedger</a>-&gt;getLedgerSeq());</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                    }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance discovered missing &quot;</span> &lt;&lt; missing;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                    <span class="keywordflow">if</span> ((missing != <a class="code" href="../../d3/d32/a01176.html#afeee191309ce12263254e17d3d7bdf68">RangeSet::absent</a>) &amp;&amp; (missing &gt; 0) &amp;&amp;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                        <a class="code" href="../../d1/de6/a00837.html#a9e5a8da329a1f130f91f2a9d26b28310">shouldAcquire</a>(<a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>, <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().LEDGER_HISTORY, missing) &amp;&amp;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                        ((<a class="code" href="../../d2/dc7/a00838.html#a222e2eaaaf1e2ed988284efe27848edc">mFillInProgress</a> == 0) || (missing &gt; <a class="code" href="../../d2/dc7/a00838.html#a222e2eaaaf1e2ed988284efe27848edc">mFillInProgress</a>)))</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;advanceThread should acquire&quot;</span>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                        {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                            <a class="code" href="../../d2/dc7/a00838.html#a15f1be3effcd9e309ea6a0a3f70f3d36">ScopedUnlockType</a> sl(<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                            <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> nextLedger = <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6">getLedgerBySeq</a>(missing + 1);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                            <span class="keywordflow">if</span> (nextLedger)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                            {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                                assert (nextLedger-&gt;getLedgerSeq() == (missing + 1));</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                                <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger = <a class="code" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7">getLedgerByHash</a>(nextLedger-&gt;getParentHash());</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                <span class="keywordflow">if</span> (!ledger)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                                {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                                    <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#abfa7313dd062dc0f416dfa71d8dad546">isFailure</a>(nextLedger-&gt;getParentHash()))</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                    {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                                        <a class="code" href="../../dd/d85/a00702.html#af0d96e0cff791d52c85cbe4b8a16a71b">InboundLedger::pointer</a> acq =</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                                            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a>(nextLedger-&gt;getParentHash(),</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                                                                                    nextLedger-&gt;getLedgerSeq() - 1,</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                                                                                    <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54affa7e7b5d3af39f9022239cf21b734b9">InboundLedger::fcHISTORY</a>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                                        <span class="keywordflow">if</span> (acq-&gt;isComplete() &amp;&amp; !acq-&gt;isFailed())</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                                            ledger = acq-&gt;getLedger();</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((missing &gt; 40000) &amp;&amp; <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getOPs().shouldFetchPack(missing))</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                                        {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                                            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance want fetch pack &quot;</span> &lt;&lt; missing;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                                            <a class="code" href="../../d2/dc7/a00838.html#a489d89a5a5dc4086f03a891a5d85a56b">getFetchPack</a>(nextLedger);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                                        }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                                            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance no fetch pack for &quot;</span> &lt;&lt; missing;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                                    }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                                        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance found failed acquire&quot;</span>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                                }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                                <span class="keywordflow">if</span> (ledger)</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                                {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                                    assert(ledger-&gt;getLedgerSeq() == missing);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance acquired &quot;</span> &lt;&lt; ledger-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                    <a class="code" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d">setFullLedger</a>(ledger, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                    <span class="keywordflow">if</span> ((<a class="code" href="../../d2/dc7/a00838.html#a222e2eaaaf1e2ed988284efe27848edc">mFillInProgress</a> == 0) &amp;&amp; (<a class="code" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459">Ledger::getHashByIndex</a>(ledger-&gt;getLedgerSeq() - 1) == ledger-&gt;getParentHash()))</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                                    { <span class="comment">// Previous ledger is in DB</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                                        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl(<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                                        <a class="code" href="../../d2/dc7/a00838.html#a222e2eaaaf1e2ed988284efe27848edc">mFillInProgress</a> = ledger-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                                        <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">getJobQueue</a>().<a class="code" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">addJob</a>(<a class="code" href="../../d9/d9d/a03417.html#ae0f54f8ce649d639bf3e2b295347e17aac6876ad6800d8cd0a4c9a306baf35204">jtADVANCE</a>, <span class="stringliteral">&quot;tryFill&quot;</span>, <a class="code" href="../../d0/d75/a03105.html#a6c0c867ff5909fab21adb4d253d4bcc5">BIND_TYPE</a> (</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                                            &amp;<a class="code" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd">LedgerMasterImp::tryFill</a>, <span class="keyword">this</span>, <a class="code" href="../../d0/d75/a03105.html#af188598d0d6f186e4b5b0ec4b8da5be1">P_1</a>, ledger));</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                                    }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                                    progress = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                                }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                                    {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().<a class="code" href="../../d3/db8/a00316.html#a072203ed975dafbf825044b054ff5a0a">getSize</a>(<a class="code" href="../../d9/d9d/a03417.html#ac42038d6d7ec344c45d0289b2e80120fa14ea70966e07e71507945f82711f2f8b">siLedgerFetch</a>); ++i)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                        {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                            <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq = missing - i;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                            uint256 <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a> = nextLedger-&gt;getLedgerHash(seq);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                                            <span class="keywordflow">if</span> (hash.isNonZero())</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                                                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a>(hash,</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                                                     seq, <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54affa7e7b5d3af39f9022239cf21b734b9">InboundLedger::fcHISTORY</a>);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                                        }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                                    }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                                    <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                                    {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                                        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Threw while prefecthing&quot;</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                    }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                            }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                            {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244acb980b97f93585b5b1f20725a2256c23">lsFATAL</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Unable to find ledger following prevMissing &quot;</span> &lt;&lt; missing;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244acb980b97f93585b5b1f20725a2256c23">lsFATAL</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Pub:&quot;</span> &lt;&lt; <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a> &lt;&lt; <span class="stringliteral">&quot; Val:&quot;</span> &lt;&lt; <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244acb980b97f93585b5b1f20725a2256c23">lsFATAL</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Ledgers: &quot;</span> &lt;&lt; <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">getLedgerMaster</a>().<a class="code" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076">getCompleteLedgers</a>();</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                                <a class="code" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609">clearLedger</a> (missing + 1);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                progress = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                            }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                        }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        <span class="keywordflow">if</span> (mValidLedgerSeq != <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a>)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                        {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance found last valid changed&quot;</span>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                            progress = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                    }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance not fetching history&quot;</span>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance found &quot;</span> &lt;&lt; pubLedgers.size() &lt;&lt; <span class="stringliteral">&quot; ledgers to publish&quot;</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                BOOST_FOREACH(<a class="code" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> ledger, pubLedgers)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                        <a class="code" href="../../d2/dc7/a00838.html#a15f1be3effcd9e309ea6a0a3f70f3d36">ScopedUnlockType</a> sul (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a>(<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;tryAdvance publishing seq &quot;</span> &lt;&lt; ledger-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                        <a class="code" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d">setFullLedger</a>(ledger, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">getOPs</a>().<a class="code" href="../../dd/dac/a01008.html#a024e36c725c9ebef73c42d943ffacc43">pubLedger</a>(ledger);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                    <a class="code" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9">setPubLedger</a>(ledger);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                    progress = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">getOPs</a>().<a class="code" href="../../dd/dac/a01008.html#a7ebeb2a8f947b729b0a8a1aba97d3b54">clearNeedNetworkLedger</a>();</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f">newPFWork</a> (<span class="stringliteral">&quot;pf:newLedger&quot;</span>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span> (progress)</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a77c7fd65a7fe8c0e3bd50eb6e0a62f83">mAdvanceWork</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        } <span class="keywordflow">while</span> (<a class="code" href="../../d2/dc7/a00838.html#a77c7fd65a7fe8c0e3bd50eb6e0a62f83">mAdvanceWork</a>);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_cgraph.png" border="0" usemap="#d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_cgraph" id="d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_cgraph">
<area shape="rect" id="node3" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="716,1692,887,1721"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="233,247,396,294"/><area shape="rect" id="node9" href="../../dd/dac/a01008.html#a7ebeb2a8f947b729b0a8a1aba97d3b54" title="ripple::NetworkOPs\l::clearNeedNetworkLedger" alt="" coords="227,330,403,377"/><area shape="rect" id="node11" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="480,711,632,758"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411" title="ripple::LedgerMasterImp\l::findNewLedgersToPublish" alt="" coords="224,821,405,867"/><area shape="rect" id="node17" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="475,1159,637,1206"/><area shape="rect" id="node19" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="751,1108,852,1137"/><area shape="rect" id="node27" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="743,796,860,825"/><area shape="rect" id="node30" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="739,1745,864,1791"/><area shape="rect" id="node39" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="487,781,625,827"/><area shape="rect" id="node45" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076" title="ripple::LedgerMaster\l::getCompleteLedgers" alt="" coords="240,890,389,937"/><area shape="rect" id="node48" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb" title="ripple::Application\l::getFeeTrack" alt="" coords="252,959,377,1006"/><area shape="rect" id="node50" href="../../d2/dc7/a00838.html#a489d89a5a5dc4086f03a891a5d85a56b" title="ripple::LedgerMasterImp\l::getFetchPack" alt="" coords="233,1650,396,1697"/><area shape="rect" id="node57" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459" title="ripple::Ledger::getHashBy\lIndex" alt="" coords="469,173,643,219"/><area shape="rect" id="node75" href="../../dc/d0c/a00783.html#a5c2111a6134d3f9eae89261066018ade" title="ripple::JobQueue::getJob\lCount" alt="" coords="232,1149,397,1195"/><area shape="rect" id="node78" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="233,650,396,697"/><area shape="rect" id="node83" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="244,399,385,446"/><area shape="rect" id="node94" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="252,1319,377,1366"/><area shape="rect" id="node96" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="252,1389,377,1435"/><area shape="rect" id="node98" href="../../d3/db8/a00316.html#a072203ed975dafbf825044b054ff5a0a" title="ripple::Config::getSize" alt="" coords="240,1459,389,1488"/><area shape="rect" id="node100" href="../../d8/d86/a00703.html#abfa7313dd062dc0f416dfa71d8dad546" title="ripple::InboundLedgers\l::isFailure" alt="" coords="239,1511,391,1558"/><area shape="rect" id="node102" href="../../dd/d94/a00888.html#aad042032160b77a02227571a8a111fcf" title="ripple::LoadFeeTrack\l::isLoadedLocal" alt="" coords="243,1581,387,1627"/><area shape="rect" id="node104" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="252,581,377,627"/><area shape="rect" id="node107" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f" title="ripple::LedgerMasterImp\l::newPFWork" alt="" coords="475,1714,637,1761"/><area shape="rect" id="node112" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61" title="ripple::RangeSet::prevMissing" alt="" coords="216,1771,413,1800"/><area shape="rect" id="node114" href="../../dd/dac/a01008.html#a024e36c725c9ebef73c42d943ffacc43" title="ripple::NetworkOPs\l::pubLedger" alt="" coords="247,1823,383,1870"/><area shape="rect" id="node116" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="233,1029,396,1075"/><area shape="rect" id="node123" href="../../d1/de6/a00837.html#a9e5a8da329a1f130f91f2a9d26b28310" title="ripple::LedgerMaster\l::shouldAcquire" alt="" coords="245,1943,384,1990"/><area shape="rect" id="node125" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="475,1229,637,1275"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="463,243,649,272"/><area shape="rect" id="node15" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="475,659,637,688"/><area shape="rect" id="node23" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="492,970,620,1017"/><area shape="rect" id="node25" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="485,1039,627,1086"/><area shape="rect" id="node33" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="493,589,619,635"/><area shape="rect" id="node35" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="485,519,627,566"/><area shape="rect" id="node42" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="480,901,632,947"/><area shape="rect" id="node21" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="953,1099,1129,1146"/><area shape="rect" id="node37" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="731,473,872,519"/><area shape="rect" id="node53" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee" title="ripple::Application\l::overlay" alt="" coords="493,1645,619,1691"/><area shape="rect" id="node55" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90" title="ripple::Overlay::getActive\lPeers" alt="" coords="472,1525,640,1571"/><area shape="rect" id="node59" href="../../d5/db5/a00374.html#a2d9feb6cec0521fbfdfb40b49b861282" title="ripple::Database::endIterRows" alt="" coords="703,5,900,35"/><area shape="rect" id="node61" href="../../d5/db5/a00374.html#ae13874bae245fcea24edd3945ff16723" title="ripple::Database::executeSQL" alt="" coords="703,59,900,88"/><area shape="rect" id="node64" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="731,357,872,403"/><area shape="rect" id="node66" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="739,287,864,334"/><area shape="rect" id="node68" href="../../d5/db5/a00374.html#a5695e1a1b8e65383924a03d29c81a4f2" title="ripple::Database::getStr" alt="" coords="721,112,881,141"/><area shape="rect" id="node70" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="739,165,864,211"/><area shape="rect" id="node72" href="../../d5/db5/a00374.html#ab79c6f2e2ea71a94c02da740740ee934" title="ripple::Database::startIterRows" alt="" coords="700,235,903,264"/><area shape="rect" id="node87" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="467,296,645,325"/><area shape="rect" id="node92" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="485,399,627,446"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_icgraph.png" border="0" usemap="#d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_icgraph" id="d2/dc7/a00838_a1137d82f75868275f3380ffe9673d95f_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="216,78,379,125"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="427,75,589,122"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="637,5,800,51"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="637,143,800,190"/><area shape="rect" id="node12" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="637,74,800,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae909d178e11ccdeb05fcba5f1d4429bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::doLedgerCleaner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d27/a01781.html">Json::Value</a> &amp;&#160;</td>
          <td class="paramname"><em>parameters</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a5db10c17658972b1d7cd9e88346c054f">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01406">1406</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00062">mLedgerCleaner</a>.</p>
<div class="fragment"><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#ae7f9c5ede45fa7447912bd1357ce370e">mLedgerCleaner</a>-&gt;doClean (parameters);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae6729570b88f82b20c29ae00271073d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d9d/a03417.html#ac6c7d57554e8bab72ad93e40ceb3f6c0">TER</a> ripple::LedgerMasterImp::doTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/de4/a01346.html#a24c9aa93fed382b9abfa1ed699ff26d6">SerializedTransaction::ref</a>&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#ae2a321a3f2099e098fdcc670a60c7a09">TransactionEngineParams</a>&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>didApply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ae4c4e9d9cb43bcb3ddd8e1574fff1bb4">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00345">345</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../da/de2/a03067_source.html#l00075">ripple::TransactionEngine::applyTransaction()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d5d/a03068_source.html#l00077">ripple::TransactionEngine::getLedger()</a>, <a class="el" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">ripple::Application::getOPs()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00047">mEngine</a>, <a class="el" href="../../dd/dac/a01008.html#a20b572e7a03f30747f90a44b90e5739b">ripple::NetworkOPs::pubProposedTransaction()</a>, and <a class="el" href="../../d7/dfc/a02922_source.html#l00036">ripple::LedgerHolder::set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#ac6c7d57554e8bab72ad93e40ceb3f6c0">TER</a> result;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            result = <a class="code" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a>.<a class="code" href="../../d9/dc5/a01705.html#ab9fec10cf88fcd1212cff4c5b4c29d60">applyTransaction</a> (*txn, params, didApply);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            ledger = <a class="code" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a>.<a class="code" href="../../d9/dc5/a01705.html#ad9f745c60450a463895760958fb240e1">getLedger</a> ();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">if</span> (didApply)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;           <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (ledger);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;           <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">getOPs</a> ().<a class="code" href="../../dd/dac/a01008.html#a20b572e7a03f30747f90a44b90e5739b">pubProposedTransaction</a> (ledger, txn, result);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ae6729570b88f82b20c29ae00271073d0_cgraph.png" border="0" usemap="#d2/dc7/a00838_ae6729570b88f82b20c29ae00271073d0_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ae6729570b88f82b20c29ae00271073d0_cgraph" id="d2/dc7/a00838_ae6729570b88f82b20c29ae00271073d0_cgraph">
<area shape="rect" id="node3" href="../../d9/dc5/a01705.html#ab9fec10cf88fcd1212cff4c5b4c29d60" title="ripple::TransactionEngine\l::applyTransaction" alt="" coords="220,806,388,853"/><area shape="rect" id="node97" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="253,1193,355,1223"/><area shape="rect" id="node101" href="../../d9/dc5/a01705.html#ad9f745c60450a463895760958fb240e1" title="ripple::TransactionEngine\l::getLedger" alt="" coords="220,1246,388,1293"/><area shape="rect" id="node103" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="241,1315,367,1362"/><area shape="rect" id="node105" href="../../dd/dac/a01008.html#a20b572e7a03f30747f90a44b90e5739b" title="ripple::NetworkOPs\l::pubProposedTransaction" alt="" coords="217,1385,391,1431"/><area shape="rect" id="node107" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="223,1455,385,1484"/><area shape="rect" id="node5" href="../../d0/d08/a00832.html#af8d66b30b3965d9288c5d8eb4e520871" title="ripple::LedgerEntrySet\l::init" alt="" coords="463,58,612,105"/><area shape="rect" id="node9" href="../../d9/de4/a01346.html#a501700305bfe6b71f1b8de263bdde43e" title="ripple::SerializedTransaction\l::getTransactionID" alt="" coords="687,231,873,278"/><area shape="rect" id="node13" href="../../de/d1a/a01559.html#a85c374b955de23e00242029cb0bd4f74" title="ripple::STObject::add" alt="" coords="1148,184,1292,213"/><area shape="rect" id="node18" href="../../de/d1a/a01559.html#ad363d403a5067a41b38f4aab0b2b8fc8" title="ripple::STObject::isEquivalent" alt="" coords="440,183,635,212"/><area shape="rect" id="node22" href="../../d9/de4/a01346.html#a436d1b0b2d422540cd39c117f5f6816d" title="ripple::SerializedTransaction\l::getJson" alt="" coords="444,329,631,375"/><area shape="rect" id="node29" href="../../d8/df7/a01711.html#a520fdd34ff865b5de78aac3c40d78630" title="ripple::Transactor\l::makeTransactor" alt="" coords="476,427,599,474"/><area shape="rect" id="node33" href="../../d9/d9d/a03417.html#a8ebf8214ccd67d515e6dd26b832854a9" title="ripple::transResultInfo" alt="" coords="705,1277,855,1307"/><area shape="rect" id="node35" href="../../d9/d9d/a03417.html#a31cb07ee73687ab40f31634269f9f43c" title="ripple::is_bit_set" alt="" coords="479,580,596,609"/><area shape="rect" id="node37" href="../../d0/d08/a00832.html#a95c6ccf68549ef1d88dc47cf3e71a7ea" title="ripple::LedgerEntrySet\l::clear" alt="" coords="463,501,612,547"/><area shape="rect" id="node41" href="../../d9/dc5/a01705.html#a5766d606e55b9ede4b004ff170f967cc" title="ripple::TransactionEngine\l::entryCache" alt="" coords="453,633,621,679"/><area shape="rect" id="node45" href="../../dd/d5f/a00825.html#ab0ca75e1c5fa67568377f9962687cf90" title="ripple::Ledger::getAccount\lRootIndex" alt="" coords="451,702,624,749"/><area shape="rect" id="node52" href="../../d9/de4/a01346.html#ac1425afebd8e387f017bdf9cb0204498" title="ripple::SerializedTransaction\l::getSourceAccount" alt="" coords="444,771,631,818"/><area shape="rect" id="node56" href="../../d9/de4/a01346.html#aaff9c0480235e2b982777311a9e5f7fd" title="ripple::SerializedTransaction\l::getSequence" alt="" coords="444,841,631,887"/><area shape="rect" id="node60" href="../../d9/de4/a01346.html#a5dba24ce8a82d0513d25b3843bae8c43" title="ripple::SerializedTransaction\l::getTransactionFee" alt="" coords="444,910,631,957"/><area shape="rect" id="node64" href="../../da/d6b/a02352.html#a173f7c872fb68ccd3a20440d640b66c7" title="balance" alt="" coords="504,980,571,1009"/><area shape="rect" id="node79" href="../../d9/dc5/a01705.html#a6a68406aec8713a4b3543b5c1a299d4b" title="ripple::TransactionEngine\l::entryModify" alt="" coords="453,1086,621,1133"/><area shape="rect" id="node81" href="../../d9/dc5/a01705.html#a8ecd39e5899f292d284405ec57eb4dbc" title="ripple::TransactionEngine\l::checkInvariants" alt="" coords="453,1155,621,1202"/><area shape="rect" id="node83" href="../../d9/d9d/a03417.html#a14963d35eeab76c974e033beb7fdddb0" title="ripple::transToken" alt="" coords="475,1225,600,1255"/><area shape="rect" id="node86" href="../../d9/d9d/a03417.html#af67d027ed1da5fcdbb6f7675d0151d0b" title="ripple::transHuman" alt="" coords="472,1033,603,1063"/><area shape="rect" id="node89" href="../../d0/d08/a00832.html#a9a4e268d98bb70b5d8a41035164c890e" title="ripple::LedgerEntrySet\l::getJson" alt="" coords="463,1329,612,1375"/><area shape="rect" id="node91" href="../../d0/d08/a00832.html#a1c980eea2da42b3f99d55d303c02db63" title="ripple::LedgerEntrySet\l::calcRawMeta" alt="" coords="463,1398,612,1445"/><area shape="rect" id="node93" href="../../d9/dc5/a01705.html#a73282ab8c8ce2a070ee756cc9c336416" title="ripple::TransactionEngine\l::txnWrite" alt="" coords="453,1467,621,1514"/><area shape="rect" id="node95" href="../../d2/d41/a01493.html#ae3870bf43687a085235279f483e0e731" title="ripple::STAmount::getNValue" alt="" coords="441,5,633,35"/><area shape="rect" id="node7" href="../../d1/da7/a01709.html#a3d1af2f9f921832bb2ce89c7f5afea91" title="ripple::TransactionMetaSet\l::init" alt="" coords="691,58,869,105"/><area shape="rect" id="node11" href="../../de/d1a/a01559.html#a7a9cbb8d5e1266c782de1bb94998289e" title="ripple::STObject::getHash" alt="" coords="925,240,1099,269"/><area shape="rect" id="node15" href="../../da/d61/a01350.html#afc7187fd3c9e185d29a0ecf5500d0cdf" title="ripple::Serializer\l::getSHA512Half" alt="" coords="1160,430,1280,477"/><area shape="rect" id="node20" href="../../de/d1a/a01559.html#ab150c202aa51c574869599a2a3d475ff" title="ripple::STObject::getFullText" alt="" coords="685,179,875,208"/><area shape="rect" id="node24" href="../../de/d1a/a01559.html#a20e386b11943fda5fe9c67542e8f0e50" title="ripple::STObject::getJson" alt="" coords="695,371,865,400"/><area shape="rect" id="node27" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="717,301,843,347"/><area shape="rect" id="node31" href="../../d9/de4/a01346.html#ad22d8a774bf0fdcac7aeb08fece39c17" title="ripple::SerializedTransaction\l::getTxnType" alt="" coords="687,423,873,470"/><area shape="rect" id="node39" href="../../d1/da7/a01709.html#afcac71040a014d74bf063ce83ca95bb2" title="ripple::TransactionMetaSet\l::clear" alt="" coords="691,493,869,539"/><area shape="rect" id="node43" href="../../d0/d08/a00832.html#ad13594cf847a6c56ef479ee44ae3c329" title="ripple::LedgerEntrySet\l::entryCache" alt="" coords="705,562,855,609"/><area shape="rect" id="node47" href="../../da/d61/a01350.html#a10b908daaabf22ae052bfc7fd221157c" title="ripple::Serializer\l::add16" alt="" coords="723,682,837,729"/><area shape="rect" id="node49" href="../../da/d61/a01350.html#a509771bf1109949d4bee7b71aecc3757" title="ripple::Serializer\l::add160" alt="" coords="723,751,837,798"/><area shape="rect" id="node54" href="../../de/d1a/a01559.html#ac853c6963065dd80fa4a58543ab4ac39" title="ripple::STObject::getField\lAccount" alt="" coords="695,821,865,867"/><area shape="rect" id="node58" href="../../de/d1a/a01559.html#ab3e8074cfab6e1c525b2d9a474c60f23" title="ripple::STObject::getFieldU32" alt="" coords="683,891,877,920"/><area shape="rect" id="node62" href="../../de/d1a/a01559.html#aad5f49acb4c7b95cabee5d8463d4ce4a" title="ripple::STObject::getField\lAmount" alt="" coords="695,943,865,990"/><area shape="rect" id="node66" href="../../da/d6b/a02352.html#af8eafba12a6ebc987cf6ae89f4cce1a8" title="balance_deeper" alt="" coords="724,1120,836,1149"/><area shape="rect" id="node68" href="../../da/d6b/a02352.html#a92c6fb14f9bcf117440c35116c26d6c4" title="releasePage" alt="" coords="965,1147,1059,1176"/><area shape="rect" id="node70" href="../../da/d6b/a02352.html#a513ba5c0beb3462a4b60064469f1539d" title="balance_nonroot" alt="" coords="721,1224,839,1253"/><area shape="rect" id="node73" href="../../da/d6b/a02352.html#a92f1869a02b8b9196e5ea7ed2e61c328" title="balance_quick" alt="" coords="728,1067,832,1096"/><area shape="rect" id="node77" href="../../da/d6b/a02352.html#a7c85b1d9d633386e0ecb5d56594fe03f" title="sqlite3PageFree" alt="" coords="723,1013,837,1043"/><area shape="rect" id="node99" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="449,1537,625,1583"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8bd8691d084b7f903081176a0127c20e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::failedSave </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;&#160;</td>
          <td class="paramname"><em>hash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a8dfb35bf1e7a3770e823af990c25d3f0">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00652">652</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00376">clearLedger()</a>, <a class="el" href="../../dc/d86/a02909_source.html#l00042">ripple::InboundLedger::fcGENERIC</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, and <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>.</p>
<div class="fragment"><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609">clearLedger</a>(seq);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a>(<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>, seq, <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a8bd8691d084b7f903081176a0127c20e_cgraph.png" border="0" usemap="#d2/dc7/a00838_a8bd8691d084b7f903081176a0127c20e_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a8bd8691d084b7f903081176a0127c20e_cgraph" id="d2/dc7/a00838_a8bd8691d084b7f903081176a0127c20e_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="216,27,379,74"/><area shape="rect" id="node11" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="221,97,373,143"/><area shape="rect" id="node13" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="247,167,348,196"/><area shape="rect" id="node17" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="228,219,367,266"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="428,36,615,65"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="679,5,855,35"/><area shape="rect" id="node9" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="664,58,869,105"/><area shape="rect" id="node15" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="433,158,609,205"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeb97ab084032f9ba66f1b1dc6b57d1c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::findAcquireLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;&#160;</td>
          <td class="paramname"><em>hash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find or acquire the ledger with the specified index and the specified hash Return a pointer to that ledger if it is immediately available </p>

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01296">1296</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/d86/a02909_source.html#l00042">ripple::InboundLedger::fcGENERIC</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01386">getLedgerByHash()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01337">walkHashBySeq()</a>.</p>
<div class="fragment"><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger (<a class="code" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7">getLedgerByHash</a> (<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>));</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">if</span> (!ledger)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <a class="code" href="../../dd/d85/a00702.html#af0d96e0cff791d52c85cbe4b8a16a71b">InboundLedger::pointer</a> inboundLedger =</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a> (<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>, index, <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <span class="keywordflow">if</span> (inboundLedger &amp;&amp; inboundLedger-&gt;isComplete() &amp;&amp; !inboundLedger-&gt;isFailed())</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                ledger = inboundLedger-&gt;getLedger();</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keywordflow">return</span> ledger;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_cgraph.png" border="0" usemap="#d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_cgraph" id="d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_cgraph">
<area shape="rect" id="node3" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="221,5,373,51"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1136,177,1237,207"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="228,125,367,171"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="216,363,379,410"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1313,169,1489,215"/><area shape="rect" id="node13" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="447,398,572,445"/><area shape="rect" id="node15" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="428,468,591,497"/><area shape="rect" id="node17" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="439,329,580,375"/><area shape="rect" id="node19" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="659,359,800,406"/><area shape="rect" id="node21" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="659,429,800,475"/><area shape="rect" id="node23" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="640,307,819,336"/><area shape="rect" id="node25" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="887,229,1041,275"/><area shape="rect" id="node28" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="893,298,1035,345"/><area shape="rect" id="node30" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="901,490,1027,537"/><area shape="rect" id="node42" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="901,421,1027,467"/><area shape="rect" id="node44" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="885,795,1043,824"/><area shape="rect" id="node65" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="885,368,1043,397"/><area shape="rect" id="node68" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="867,125,1061,155"/><area shape="rect" id="node32" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1339,433,1464,479"/><area shape="rect" id="node36" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1112,472,1261,501"/><area shape="rect" id="node38" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1137,525,1236,555"/><area shape="rect" id="node34" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1540,547,1689,576"/><area shape="rect" id="node40" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1347,525,1456,555"/><area shape="rect" id="node46" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1109,855,1264,902"/><area shape="rect" id="node48" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1109,925,1264,971"/><area shape="rect" id="node50" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1109,994,1264,1041"/><area shape="rect" id="node52" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1109,1063,1264,1110"/><area shape="rect" id="node54" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1109,578,1264,625"/><area shape="rect" id="node56" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1109,647,1264,694"/><area shape="rect" id="node58" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1124,717,1249,763"/><area shape="rect" id="node63" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1109,786,1264,833"/><area shape="rect" id="node60" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1328,652,1475,681"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_icgraph.png" border="0" usemap="#d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_icgraph" id="d2/dc7/a00838_aeb97ab084032f9ba66f1b1dc6b57d1c6_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a12e5d20e873fd1ff626ca7e4d7e726f9" title="ripple::LedgerMasterImp\l::walkHashBySeq" alt="" coords="216,5,379,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1a811affe449990c43b8e4ea1eb80411"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&gt; ripple::LedgerMasterImp::findNewLedgersToPublish </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01007">1007</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd">ripple::InboundLedgers::dropLedger()</a>, <a class="el" href="../../dc/d86/a02909_source.html#l00042">ripple::InboundLedger::fcGENERIC</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>, <a class="el" href="../../d1/d77/a02920_source.html#l00099">ripple::LedgerHistory::getLedgerByHash()</a>, <a class="el" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed">ripple::Application::getOrderBookDB()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00138">ripple::base_uint&lt; BITS &gt;::isZero()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00032">ripple::lsERROR</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00033">ripple::lsFATAL</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00025">MAX_LEDGER_GAP</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00052">mPubLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00078">mPubLedgerSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00051">mValidLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, <a class="el" href="../../d0/d75/a03105_source.html#l00047">nothing</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00183">setPubLedger()</a>, <a class="el" href="../../dd/d0d/a02929_source.html#l00037">ripple::OrderBookDB::setup()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>.</p>
<div class="fragment"><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        std::list&lt;Ledger::pointer&gt; ret;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;findNewLedgersToPublish&lt;&quot;</span>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc7/a00838.html#af10ba0f0e5e469d2ed19227006bba59e">mPubLedger</a>)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;First published ledger will be &quot;</span> &lt;&lt; <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            ret.push_back (<a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ());</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a> &gt; (<a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a> + <a class="code" href="../../d6/df9/a02923.html#a4cf83413933dccaeb4b2eb99bf2c5663">MAX_LEDGER_GAP</a>))</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Gap in validated ledger stream &quot;</span> &lt;&lt; <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a> &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                                               <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a> - 1;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> valLedger = <a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            ret.push_back (valLedger);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9">setPubLedger</a> (valLedger);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed">getOrderBookDB</a>().<a class="code" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210">setup</a>(valLedger);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mValidLedgerSeq &gt; <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a>)</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordtype">int</span> acqCount = 0;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> pubSeq = <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a> + 1; <span class="comment">// Next sequence to publish</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> valLedger = <a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> valSeq = valLedger-&gt;getLedgerSeq ();</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a15f1be3effcd9e309ea6a0a3f70f3d36">ScopedUnlockType</a> sul(<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq = pubSeq; seq &lt;= valSeq; ++seq)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Trying to fetch/publish valid ledger &quot;</span> &lt;&lt; seq;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                    <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                    uint256 <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a> = valLedger-&gt;getLedgerHash (seq); <span class="comment">// This can throw</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    <span class="keywordflow">if</span> (seq == valSeq)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                    { <span class="comment">// We need to publish the ledger we just fully validated</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                        ledger = valLedger;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                    {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                        <span class="keywordflow">if</span> (hash.isZero ())</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                        {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244acb980b97f93585b5b1f20725a2256c23">lsFATAL</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Ledger: &quot;</span> &lt;&lt; valSeq &lt;&lt; <span class="stringliteral">&quot; does not have hash for &quot;</span> &lt;&lt; seq;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                            assert (<span class="keyword">false</span>);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                        }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                        ledger = <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4">getLedgerByHash</a> (hash);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                    }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                    <span class="keywordflow">if</span> (!ledger &amp;&amp; (++acqCount &lt; 4))</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                    { <span class="comment">// We can try to acquire the ledger we need</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                        <a class="code" href="../../dd/d85/a00702.html#af0d96e0cff791d52c85cbe4b8a16a71b">InboundLedger::pointer</a> acq =</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a> ().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a> (hash, seq, <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                        <span class="keywordflow">if</span> (!acq-&gt;isDone ())</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                        {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                            <a class="code" href="../../d0/d75/a03105.html#afc5c6ba8fe8a6402e1f14c610c2bf146">nothing</a> ();</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                        }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (acq-&gt;isComplete () &amp;&amp; !acq-&gt;isFailed ())</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                        {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                            ledger = acq-&gt;getLedger();</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                        }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                        {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to acquire a published ledger&quot;</span>;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd">dropLedger</a>(hash);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                            acq = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a>(hash, seq, <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                            <span class="keywordflow">if</span> (acq-&gt;isComplete())</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                            {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                                <span class="keywordflow">if</span> (acq-&gt;isFailed())</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                                    <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd">dropLedger</a>(hash);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                                    ledger = acq-&gt;getLedger();</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                            }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                        }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                    }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                    <span class="keywordflow">if</span> (ledger &amp;&amp; (ledger-&gt;getLedgerSeq() == pubSeq))</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    { <span class="comment">// We acquired the next ledger we need to publish</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                        ledger-&gt;setValidated();</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                        ret.push_back (ledger);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                        ++pubSeq;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a2aa4cf81dadaf26c72546ae13129feea">lsERROR</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;findNewLedgersToPublish catches an exception&quot;</span>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;findNewLedgersToPublish&gt; &quot;</span> &lt;&lt; ret.size();</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_cgraph.png" border="0" usemap="#d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_cgraph" id="d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_cgraph">
<area shape="rect" id="node3" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="244,5,396,51"/><area shape="rect" id="node5" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="244,74,396,121"/><area shape="rect" id="node7" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="239,144,401,173"/><area shape="rect" id="node9" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="963,531,1064,560"/><area shape="rect" id="node13" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="251,606,389,653"/><area shape="rect" id="node15" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="249,537,391,583"/><area shape="rect" id="node68" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="256,675,384,722"/><area shape="rect" id="node70" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="1403,127,1528,174"/><area shape="rect" id="node72" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="239,745,401,791"/><area shape="rect" id="node74" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="249,330,391,377"/><area shape="rect" id="node11" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1156,566,1332,613"/><area shape="rect" id="node17" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="469,537,611,583"/><area shape="rect" id="node19" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="469,755,611,802"/><area shape="rect" id="node21" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="451,703,629,732"/><area shape="rect" id="node23" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="697,659,852,706"/><area shape="rect" id="node26" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="704,729,845,775"/><area shape="rect" id="node28" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="1403,606,1528,653"/><area shape="rect" id="node40" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="712,537,837,583"/><area shape="rect" id="node42" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="696,903,853,932"/><area shape="rect" id="node63" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="696,607,853,636"/><area shape="rect" id="node66" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="677,799,872,828"/><area shape="rect" id="node30" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1609,529,1735,575"/><area shape="rect" id="node34" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1597,607,1747,636"/><area shape="rect" id="node36" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1623,660,1721,689"/><area shape="rect" id="node32" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1796,507,1945,536"/><area shape="rect" id="node38" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1816,660,1925,689"/><area shape="rect" id="node44" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="936,1033,1091,1079"/><area shape="rect" id="node46" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="936,1102,1091,1149"/><area shape="rect" id="node48" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="936,686,1091,733"/><area shape="rect" id="node50" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="936,755,1091,802"/><area shape="rect" id="node52" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="936,825,1091,871"/><area shape="rect" id="node54" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="936,894,1091,941"/><area shape="rect" id="node56" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1403,537,1528,583"/><area shape="rect" id="node61" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="936,963,1091,1010"/><area shape="rect" id="node58" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1599,476,1745,505"/><area shape="rect" id="node76" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="481,364,599,393"/><area shape="rect" id="node78" href="../../d5/d4c/a01058.html#a342daa95f79e50e5faee7c6e6409343f" title="ripple::OrderBookDB\l::update" alt="" coords="469,190,611,237"/><area shape="rect" id="node109" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="477,417,603,463"/><area shape="rect" id="node111" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="455,260,625,289"/><area shape="rect" id="node80" href="../../d9/d9d/a03417.html#af8a920635395c30b9a35ef301cb6d5bc" title="ripple::updateHelper" alt="" coords="705,137,844,167"/><area shape="rect" id="node104" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="712,310,837,357"/><area shape="rect" id="node106" href="../../d1/de6/a00837.html#a76e6c9a98c9e32b787878c5b6ad810c3" title="ripple::LedgerMaster\l::newOrderBookDB" alt="" coords="705,190,844,237"/><area shape="rect" id="node82" href="../../dd/d5f/a00825.html#a75205d48fe6ecf924cfed352ce21fa0a" title="ripple::Ledger::getBookBase" alt="" coords="920,316,1107,345"/><area shape="rect" id="node84" href="../../da/d61/a01350.html#a10b908daaabf22ae052bfc7fd221157c" title="ripple::Serializer\l::add16" alt="" coords="1187,238,1301,285"/><area shape="rect" id="node86" href="../../da/d61/a01350.html#a509771bf1109949d4bee7b71aecc3757" title="ripple::Serializer\l::add160" alt="" coords="1408,467,1523,514"/><area shape="rect" id="node90" href="../../d4/d0e/a01272.html#a5e27ec0a3b2b853272958e1b522bfd59" title="ripple::RippleAddress\l::createHumanAccountID" alt="" coords="1159,307,1329,354"/><area shape="rect" id="node92" href="../../d2/d41/a01493.html#aefb662aaabfc521cb4cdcdb715c7d4b8" title="ripple::STAmount::create\lHumanCurrency" alt="" coords="1161,497,1327,543"/><area shape="rect" id="node97" href="../../dd/d5f/a00825.html#a320888896e14c9ac9a91da0b113cad1a" title="ripple::Ledger::getQuality\lIndex" alt="" coords="1383,311,1548,358"/><area shape="rect" id="node100" href="../../da/d61/a01350.html#afc7187fd3c9e185d29a0ecf5500d0cdf" title="ripple::Serializer\l::getSHA512Half" alt="" coords="1184,377,1304,423"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_icgraph.png" border="0" usemap="#d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_icgraph" id="d2/dc7/a00838_a1a811affe449990c43b8e4ea1eb80411_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="237,110,400,157"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="448,78,611,125"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="659,75,821,122"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="869,5,1032,51"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="869,143,1032,190"/><area shape="rect" id="node14" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="869,74,1032,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4b8e42a3359f2089fbc7dbfa120117e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::fixIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a>&#160;</td>
          <td class="paramname"><em>ledgerIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledgerHash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a6f3456fffc40b8578d7b4c7dc065973c">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00271">271</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d1/d77/a02920_source.html#l00175">ripple::LedgerHistory::fixIndex()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#ae03adeae0930b7092edb4139cc7d0330">fixIndex</a> (ledgerIndex, ledgerHash);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a4b8e42a3359f2089fbc7dbfa120117e9_cgraph.png" border="0" usemap="#d2/dc7/a00838_a4b8e42a3359f2089fbc7dbfa120117e9_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a4b8e42a3359f2089fbc7dbfa120117e9_cgraph" id="d2/dc7/a00838_a4b8e42a3359f2089fbc7dbfa120117e9_cgraph">
<area shape="rect" id="node3" href="../../dd/d70/a00835.html#ae03adeae0930b7092edb4139cc7d0330" title="ripple::LedgerHistory\l::fixIndex" alt="" coords="217,5,359,51"/><area shape="rect" id="node5" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="409,5,551,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec967cf69ab1d294efab1dd1128b163c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::fixMismatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>ledger</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a32bef5fca62f4973de8533e2f46de313">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00559">559</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00376">clearLedger()</a>, <a class="el" href="../../dc/dc0/a03087_source.html#l00079">CondLog</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01368">getLedgerBySeq()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00370">haveLedger()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00147">ripple::base_uint&lt; BITS &gt;::isNonZero()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordtype">int</span> invalidate = 0;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        uint256 <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> lSeq = ledger-&gt;getLedgerSeq () - 1; lSeq &gt; 0; --lSeq)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3">haveLedger</a> (lSeq))</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                    hash = ledger-&gt;getLedgerHash (lSeq);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;fixMismatch encounters partial ledger&quot;</span>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609">clearLedger</a>(lSeq);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="keywordflow">if</span> (hash.isNonZero ())</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                    <span class="comment">// try to close the seam</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                    <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> otherLedger = <a class="code" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f">getLedgerBySeq</a> (lSeq);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    <span class="keywordflow">if</span> (otherLedger &amp;&amp; (otherLedger-&gt;getHash () == <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>))</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                    {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        <span class="comment">// we closed the seam</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                        <a class="code" href="../../dc/dc0/a03087.html#a22f88ba407917e2f7d6353efcb3e5920">CondLog</a> (invalidate != 0, <a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Match at &quot;</span> &lt;&lt; lSeq &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                invalidate &lt;&lt; <span class="stringliteral">&quot; prior ledgers invalidated&quot;</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609">clearLedger</a> (lSeq);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                ++invalidate;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="comment">// all prior ledgers invalidated</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a22f88ba407917e2f7d6353efcb3e5920">CondLog</a> (invalidate != 0, <a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;All &quot;</span> &lt;&lt; invalidate &lt;&lt; <span class="stringliteral">&quot; prior ledgers invalidated&quot;</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_cgraph.png" border="0" usemap="#d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_cgraph" id="d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="428,102,591,148"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f" title="ripple::LedgerMasterImp\l::getLedgerBySeq" alt="" coords="216,163,379,210"/><area shape="rect" id="node86" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3" title="ripple::LedgerMasterImp\l::haveLedger" alt="" coords="216,43,379,90"/><area shape="rect" id="node91" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="235,263,360,310"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="641,110,828,140"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="892,50,1068,80"/><area shape="rect" id="node9" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="877,103,1083,150"/><area shape="rect" id="node13" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="439,224,580,271"/><area shape="rect" id="node83" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="428,172,591,201"/><area shape="rect" id="node15" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="909,352,1051,399"/><area shape="rect" id="node17" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="664,292,805,339"/><area shape="rect" id="node72" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="891,176,1069,205"/><area shape="rect" id="node81" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="664,223,805,270"/><area shape="rect" id="node20" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="909,230,1051,276"/><area shape="rect" id="node22" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="891,300,1069,329"/><area shape="rect" id="node24" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="1151,99,1305,146"/><area shape="rect" id="node26" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1400,108,1501,137"/><area shape="rect" id="node30" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="1157,168,1299,215"/><area shape="rect" id="node32" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="1165,734,1291,780"/><area shape="rect" id="node44" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="1165,291,1291,338"/><area shape="rect" id="node46" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="1149,412,1307,441"/><area shape="rect" id="node67" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="1149,238,1307,268"/><area shape="rect" id="node70" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="1131,46,1325,76"/><area shape="rect" id="node28" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1577,99,1753,146"/><area shape="rect" id="node34" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1603,759,1728,806"/><area shape="rect" id="node38" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1376,820,1525,849"/><area shape="rect" id="node40" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1401,716,1500,745"/><area shape="rect" id="node36" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1804,606,1953,636"/><area shape="rect" id="node42" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1611,706,1720,736"/><area shape="rect" id="node48" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1373,368,1528,415"/><area shape="rect" id="node50" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1373,438,1528,484"/><area shape="rect" id="node52" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1373,507,1528,554"/><area shape="rect" id="node54" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1373,576,1528,623"/><area shape="rect" id="node56" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1373,646,1528,692"/><area shape="rect" id="node58" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1373,160,1528,207"/><area shape="rect" id="node60" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1388,230,1513,276"/><area shape="rect" id="node65" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1373,299,1528,346"/><area shape="rect" id="node62" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1592,445,1739,474"/><area shape="rect" id="node88" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="644,50,825,80"/><area shape="rect" id="node93" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="447,294,572,340"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_icgraph.png" border="0" usemap="#d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_icgraph" id="d2/dc7/a00838_aec967cf69ab1d294efab1dd1128b163c_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="216,65,379,111"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="1059,5,1221,51"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3" title="ripple::LedgerMasterImp\l::forceValid" alt="" coords="427,65,589,111"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="427,134,589,181"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="637,77,800,123"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="848,77,1011,123"/><area shape="rect" id="node16" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="1059,143,1221,190"/><area shape="rect" id="node19" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="1059,74,1221,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c612521c3c403ac534fed26bc4d2eb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::forceValid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>ledger</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ab44c45bb9f032a643142e651a9f50bc6">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00282">282</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        ledger-&gt;setValidated();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d">setFullLedger</a>(ledger, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a1c612521c3c403ac534fed26bc4d2eb3_cgraph.png" border="0" usemap="#d2/dc7/a00838_a1c612521c3c403ac534fed26bc4d2eb3_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a1c612521c3c403ac534fed26bc4d2eb3_cgraph" id="d2/dc7/a00838_a1c612521c3c403ac534fed26bc4d2eb3_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="216,689,379,735"/><area shape="rect" id="node5" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b" title="ripple::LedgerHistory\l::addLedger" alt="" coords="887,335,1028,382"/><area shape="rect" id="node11" href="../../d3/d32/a01176.html#a597108aeb4003727e9d2bb91960cf980" title="ripple::RangeSet::setValue" alt="" coords="640,731,819,760"/><area shape="rect" id="node23" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6" title="ripple::LedgerMasterImp\l::setValidLedger" alt="" coords="428,173,591,219"/><area shape="rect" id="node27" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1831,543,1932,572"/><area shape="rect" id="node35" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="428,843,591,890"/><area shape="rect" id="node38" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="445,913,573,959"/><area shape="rect" id="node40" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="439,774,580,821"/><area shape="rect" id="node64" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3" title="ripple::LedgerMasterImp\l::haveLedger" alt="" coords="648,661,811,707"/><area shape="rect" id="node67" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f" title="ripple::LedgerMasterImp\l::getLedgerBySeq" alt="" coords="648,541,811,587"/><area shape="rect" id="node111" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c" title="ripple::LedgerMasterImp\l::fixMismatch" alt="" coords="428,603,591,650"/><area shape="rect" id="node119" href="../../da/d74/a00099.html#a75626a7902ded7d35b15e92bbdcb09bb" title="ripple::Application\l::getValidators" alt="" coords="447,982,572,1029"/><area shape="rect" id="node121" href="../../dc/d92/a00929.html#a64aed2c8ae6dd215d88b2b17d52b960e" title="ripple::Validators\l::Manager::ledgerClosed" alt="" coords="428,1051,591,1098"/><area shape="rect" id="node7" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="1365,367,1507,414"/><area shape="rect" id="node9" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="1120,335,1261,382"/><area shape="rect" id="node13" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="867,671,1048,700"/><area shape="rect" id="node17" href="../../d3/d32/a01176.html#a48a885310b9aaaace8633ca53f6df1b7" title="ripple::RangeSet::simplify" alt="" coords="872,731,1043,760"/><area shape="rect" id="node15" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="1348,617,1524,647"/><area shape="rect" id="node19" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="1333,687,1539,734"/><area shape="rect" id="node21" href="../../d9/d9d/a03417.html#a975c0f5f2493f00dbf15e444b085d785" title="ripple::max" alt="" coords="1148,680,1233,709"/><area shape="rect" id="node25" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="648,181,811,211"/><area shape="rect" id="node31" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="667,42,792,89"/><area shape="rect" id="node33" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5" title="ripple::NetworkOPs\l::updateLocalTx" alt="" coords="661,111,797,158"/><area shape="rect" id="node29" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1983,534,2159,581"/><area shape="rect" id="node42" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="671,1077,788,1107"/><area shape="rect" id="node44" href="../../d5/d4c/a01058.html#a342daa95f79e50e5faee7c6e6409343f" title="ripple::OrderBookDB\l::update" alt="" coords="659,954,800,1001"/><area shape="rect" id="node60" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="667,885,792,931"/><area shape="rect" id="node62" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="644,1024,815,1053"/><area shape="rect" id="node46" href="../../d9/d9d/a03417.html#af8a920635395c30b9a35ef301cb6d5bc" title="ripple::updateHelper" alt="" coords="888,904,1027,933"/><area shape="rect" id="node55" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="895,1007,1020,1054"/><area shape="rect" id="node57" href="../../d1/de6/a00837.html#a76e6c9a98c9e32b787878c5b6ad810c3" title="ripple::LedgerMaster\l::newOrderBookDB" alt="" coords="888,1077,1027,1123"/><area shape="rect" id="node48" href="../../dd/d5f/a00825.html#a75205d48fe6ecf924cfed352ce21fa0a" title="ripple::Ledger::getBookBase" alt="" coords="1097,904,1284,933"/><area shape="rect" id="node52" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="1128,834,1253,881"/><area shape="rect" id="node50" href="../../da/d61/a01350.html#a10b908daaabf22ae052bfc7fd221157c" title="ripple::Serializer\l::add16" alt="" coords="1379,887,1493,934"/><area shape="rect" id="node69" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="887,455,1028,502"/><area shape="rect" id="node103" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="876,548,1039,577"/><area shape="rect" id="node105" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="876,601,1039,647"/><area shape="rect" id="node72" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="1120,455,1261,502"/><area shape="rect" id="node93" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="1347,560,1525,589"/><area shape="rect" id="node75" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="1365,490,1507,537"/><area shape="rect" id="node77" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="1347,437,1525,467"/><area shape="rect" id="node79" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="1607,649,1761,695"/><area shape="rect" id="node82" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="1613,350,1755,397"/><area shape="rect" id="node84" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="1621,419,1747,466"/><area shape="rect" id="node86" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="1605,489,1763,519"/><area shape="rect" id="node88" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="1605,543,1763,572"/><area shape="rect" id="node91" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="1587,596,1781,625"/><area shape="rect" id="node107" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="1097,627,1284,656"/><area shape="rect" id="node116" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="895,834,1020,881"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad940805c3f5d55b081cdc41a2538cae5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> ripple::LedgerMasterImp::getBuildingLedger </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a2cac42af97bc0a2d917335dc278a5642">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00334">334</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00081">mBuildingLedgerSeq</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">// The ledger we are currently building, 0 of none</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#a89e835d27948cd9eb737c05d30cdd55a">mBuildingLedgerSeq</a>.load ();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7aa87c9516f32431e1baf62c82359276"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float ripple::LedgerMasterImp::getCacheHitRate </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a8debf01ddee92cc6abea849b378f004c">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01426">1426</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../df/d27/a02921_source.html#l00041">ripple::LedgerHistory::getCacheHitRate()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>.</p>
<div class="fragment"><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a507bb40b5649985141e3dcbf57bd481d">getCacheHitRate</a> ();</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a7aa87c9516f32431e1baf62c82359276_cgraph.png" border="0" usemap="#d2/dc7/a00838_a7aa87c9516f32431e1baf62c82359276_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a7aa87c9516f32431e1baf62c82359276_cgraph" id="d2/dc7/a00838_a7aa87c9516f32431e1baf62c82359276_cgraph">
<area shape="rect" id="node3" href="../../dd/d70/a00835.html#a507bb40b5649985141e3dcbf57bd481d" title="ripple::LedgerHistory\l::getCacheHitRate" alt="" coords="217,5,359,51"/><area shape="rect" id="node5" href="../../dd/d55/a01638.html#a27ec9600637298298604d2307ddc58e5" title="ripple::TaggedCache\l::getHitRate" alt="" coords="409,5,551,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1a817b5ab306e769ce54b83da8805b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::getClosedLedger </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a439b582f2ef508ec1712b50c42c11a39">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01260">1260</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00050">mClosedLedger</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00456">getEarliestFetch()</a>.</p>
<div class="fragment"><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#aafddd7a3f3c8da90a1f8c374f05b1dca">mClosedLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_cgraph.png" border="0" usemap="#d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_cgraph" id="d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_cgraph">
<area shape="rect" id="node3" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="217,13,380,43"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_icgraph.png" border="0" usemap="#d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_icgraph" id="d2/dc7/a00838_af1a817b5ab306e769ce54b83da8805b4_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a83dd7c0aea451394bea74a1ec2608f1f" title="ripple::LedgerMasterImp\l::getEarliestFetch" alt="" coords="216,5,379,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a525774ca001bb889c8c4780dc35730d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ripple::LedgerMasterImp::getCompleteLedgers </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01287">1287</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, and <a class="el" href="../../d5/dd8/a03083_source.html#l00187">ripple::RangeSet::toString()</a>.</p>
<div class="fragment"><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a47245e91b39b9959af394ba4ea8dd3d7">toString</a> ();</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a525774ca001bb889c8c4780dc35730d2_cgraph.png" border="0" usemap="#d2/dc7/a00838_a525774ca001bb889c8c4780dc35730d2_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a525774ca001bb889c8c4780dc35730d2_cgraph" id="d2/dc7/a00838_a525774ca001bb889c8c4780dc35730d2_cgraph">
<area shape="rect" id="node3" href="../../d3/d32/a01176.html#a47245e91b39b9959af394ba4ea8dd3d7" title="ripple::RangeSet::toString" alt="" coords="217,13,388,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad5f69129cae359eadd7b15baee37a233"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::getCurrentLedger </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ace5931ca5ba70ad783563663790a5cf8">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01254">1254</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>.</p>
<div class="fragment"><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ad5f69129cae359eadd7b15baee37a233_cgraph.png" border="0" usemap="#d2/dc7/a00838_ad5f69129cae359eadd7b15baee37a233_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ad5f69129cae359eadd7b15baee37a233_cgraph" id="d2/dc7/a00838_ad5f69129cae359eadd7b15baee37a233_cgraph">
<area shape="rect" id="node3" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="217,13,380,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad39f3843e9b092fa8c4bc2c859f38026"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> ripple::LedgerMasterImp::getCurrentLedgerIndex </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#aff0fff76464084dc440d0c6320903c30">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00109">109</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ()-&gt;getLedgerSeq ();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ad39f3843e9b092fa8c4bc2c859f38026_cgraph.png" border="0" usemap="#d2/dc7/a00838_ad39f3843e9b092fa8c4bc2c859f38026_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ad39f3843e9b092fa8c4bc2c859f38026_cgraph" id="d2/dc7/a00838_ad39f3843e9b092fa8c4bc2c859f38026_cgraph">
<area shape="rect" id="node3" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="217,13,380,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a83dd7c0aea451394bea74a1ec2608f1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> ripple::LedgerMasterImp::getEarliestFetch </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a95d97589085fb63f268510c8f8cb3577">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00456">456</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d2/db9/a01926_source.html#l00464">ripple::Config::FETCH_DEPTH</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01260">getClosedLedger()</a>, and <a class="el" href="../../d0/dc2/a02477_source.html#l00647">ripple::getConfig()</a>.</p>
<div class="fragment"><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">// The earliest ledger we will let people fetch is ledger zero,</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">// unless that creates a larger range than allowed</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> e = <a class="code" href="../../d2/dc7/a00838.html#af1a817b5ab306e769ce54b83da8805b4">getClosedLedger</a>()-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span> (e &gt; <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().FETCH_DEPTH)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            e -= <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().<a class="code" href="../../d3/db8/a00316.html#a2a31355e421ab75c65e73f4ab1907693">FETCH_DEPTH</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            e = 0;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">return</span> e;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a83dd7c0aea451394bea74a1ec2608f1f_cgraph.png" border="0" usemap="#d2/dc7/a00838_a83dd7c0aea451394bea74a1ec2608f1f_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a83dd7c0aea451394bea74a1ec2608f1f_cgraph" id="d2/dc7/a00838_a83dd7c0aea451394bea74a1ec2608f1f_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#af1a817b5ab306e769ce54b83da8805b4" title="ripple::LedgerMasterImp\l::getClosedLedger" alt="" coords="216,5,379,51"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="239,75,356,104"/><area shape="rect" id="node5" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="428,13,591,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a489d89a5a5dc4086f03a891a5d85a56b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::getFetchPack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>nextLedger</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Request a fetch pack to get the ledger prior to 'nextLedger' </p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00527">527</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90">ripple::Overlay::getActivePeers()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee">ripple::Application::overlay()</a>, <a class="el" href="../../d6/d50/a02694_source.html#l00665">rand</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> target;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <a class="code" href="../../de/de6/a01063.html#ab31ecd9bdd548883e13ef848725264ab">Overlay::PeerSequence</a> peerList = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee">overlay</a> ().<a class="code" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90">getActivePeers</a> ();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        BOOST_FOREACH (<span class="keyword">const</span> <a class="code" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> &amp; peer, peerList)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="keywordflow">if</span> (peer-&gt;hasRange (nextLedger-&gt;getLedgerSeq() - 1, nextLedger-&gt;getLedgerSeq()))</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="keywordflow">if</span> (count++ == 0)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    target = peer;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d6/d50/a02694.html#a2391b9dab13f09bae65ae349c8d4c271">rand</a> () % ++count) == 0)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                    target = peer;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">if</span> (target)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            protocol::TMGetObjectByHash tmBH;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            tmBH.set_query (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            tmBH.set_type (protocol::TMGetObjectByHash::otFETCH_PACK);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            tmBH.set_ledgerhash (nextLedger-&gt;getHash().begin (), 32);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <a class="code" href="../../d8/d49/a00979.html#a08601cb412fcc15ee6365dbfb603cf21">Message::pointer</a> packet = boost::make_shared&lt;Message&gt; (tmBH, protocol::mtGET_OBJECTS);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            target-&gt;sendPacket (packet, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Requested fetch pack for &quot;</span> &lt;&lt; nextLedger-&gt;getLedgerSeq() - 1;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;No peer for fetch pack&quot;</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_cgraph.png" border="0" usemap="#d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_cgraph" id="d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_cgraph">
<area shape="rect" id="node3" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90" title="ripple::Overlay::getActive\lPeers" alt="" coords="217,5,385,51"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="251,75,352,104"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee" title="ripple::Application\l::overlay" alt="" coords="239,127,364,174"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="436,66,612,113"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_icgraph.png" border="0" usemap="#d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_icgraph" id="d2/dc7/a00838_a489d89a5a5dc4086f03a891a5d85a56b_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="216,110,379,157"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="427,78,589,125"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="637,75,800,122"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="848,5,1011,51"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="848,143,1011,190"/><area shape="rect" id="node14" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="848,74,1011,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a248a0cb23763154d759e141959fb8cbd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::getFullValidatedRange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;&#160;</td>
          <td class="paramname"><em>minVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;&#160;</td>
          <td class="paramname"><em>maxVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a6931bd2f28dffb0ff14ebfca9fd4d7c9">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00383">383</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/de6/a03084_source.html#l00030">ripple::RangeSet::absent</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00078">mPubLedgerSeq</a>, and <a class="el" href="../../d5/dd8/a03083_source.html#l00098">ripple::RangeSet::prevMissing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        maxVal = <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a>.load();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (!maxVal)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            minVal = <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61">prevMissing</a> (maxVal);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> (minVal == <a class="code" href="../../d3/d32/a01176.html#afeee191309ce12263254e17d3d7bdf68">RangeSet::absent</a>)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            minVal = maxVal;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            ++minVal;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a248a0cb23763154d759e141959fb8cbd_cgraph.png" border="0" usemap="#d2/dc7/a00838_a248a0cb23763154d759e141959fb8cbd_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a248a0cb23763154d759e141959fb8cbd_cgraph" id="d2/dc7/a00838_a248a0cb23763154d759e141959fb8cbd_cgraph">
<area shape="rect" id="node3" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61" title="ripple::RangeSet::prevMissing" alt="" coords="216,73,413,103"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="461,5,667,51"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="715,100,891,129"/><area shape="rect" id="node9" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="473,125,655,155"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a17d52ad7dd214c009f42fc7c4652ffa0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> ripple::LedgerMasterImp::getHashBySeq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get a ledger's hash by sequence number using the cache </p>

<p>Implements <a class="el" href="../../d1/de6/a00837.html#af1f0008f2ac45ed99166ad478da288ea">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01309">1309</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dd/d3f/a02912_source.html#l00882">ripple::Ledger::getHashByIndex()</a>, <a class="el" href="../../d1/d77/a02920_source.html#l00056">ripple::LedgerHistory::getLedgerHash()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00147">ripple::base_uint&lt; BITS &gt;::isNonZero()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>.</p>
<div class="fragment"><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        uint256 <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a> = <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#ab9d5f0e7116d4f7e44e1c7d0dd2587a6">getLedgerHash</a> (index);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">if</span> (hash.isNonZero ())</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <span class="keywordflow">return</span> hash;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459">Ledger::getHashByIndex</a> (index);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a17d52ad7dd214c009f42fc7c4652ffa0_cgraph.png" border="0" usemap="#d2/dc7/a00838_a17d52ad7dd214c009f42fc7c4652ffa0_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a17d52ad7dd214c009f42fc7c4652ffa0_cgraph" id="d2/dc7/a00838_a17d52ad7dd214c009f42fc7c4652ffa0_cgraph">
<area shape="rect" id="node3" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459" title="ripple::Ledger::getHashBy\lIndex" alt="" coords="216,234,389,281"/><area shape="rect" id="node29" href="../../dd/d70/a00835.html#ab9d5f0e7116d4f7e44e1c7d0dd2587a6" title="ripple::LedgerHistory\l::getLedgerHash" alt="" coords="232,479,373,526"/><area shape="rect" id="node33" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="240,549,365,595"/><area shape="rect" id="node5" href="../../d5/db5/a00374.html#a2d9feb6cec0521fbfdfb40b49b861282" title="ripple::Database::endIterRows" alt="" coords="441,5,639,35"/><area shape="rect" id="node7" href="../../d5/db5/a00374.html#ae13874bae245fcea24edd3945ff16723" title="ripple::Database::executeSQL" alt="" coords="441,59,639,88"/><area shape="rect" id="node9" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="489,112,591,141"/><area shape="rect" id="node13" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="469,165,611,211"/><area shape="rect" id="node15" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="477,234,603,281"/><area shape="rect" id="node17" href="../../d5/db5/a00374.html#a5695e1a1b8e65383924a03d29c81a4f2" title="ripple::Database::getStr" alt="" coords="460,304,620,333"/><area shape="rect" id="node21" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="477,357,603,403"/><area shape="rect" id="node27" href="../../d5/db5/a00374.html#ab79c6f2e2ea71a94c02da740740ee934" title="ripple::Database::startIterRows" alt="" coords="439,427,641,456"/><area shape="rect" id="node11" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="692,103,868,150"/><area shape="rect" id="node19" href="../../d5/db5/a00374.html#a5b7ed864f9f854446470c987b37ebecc" title="ripple::Database::getCol\lNumber" alt="" coords="699,295,861,342"/><area shape="rect" id="node23" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="707,365,853,395"/><area shape="rect" id="node25" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="919,365,1068,395"/><area shape="rect" id="node31" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="469,479,611,526"/><area shape="rect" id="node35" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="477,549,603,595"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ada1387013f4ac247a4ebd14bee004fa7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::getLedgerByHash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;&#160;</td>
          <td class="paramname"><em>hash</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a71a21a539d63be51cada4d3c4e4c4030">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01386">1386</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, <a class="el" href="../../d1/d77/a02920_source.html#l00099">ripple::LedgerHistory::getLedgerByHash()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00138">ripple::base_uint&lt; BITS &gt;::isZero()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00050">mClosedLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00767">consensusBuilt()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01296">findAcquireLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01121">getLedgerHash()</a>.</p>
<div class="fragment"><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    {</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>.isZero ())</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ret = <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4">getLedgerByHash</a> (<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        ret = <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="keywordflow">if</span> (ret &amp;&amp; (ret-&gt;getHash () == <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>))</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        ret = <a class="code" href="../../d2/dc7/a00838.html#aafddd7a3f3c8da90a1f8c374f05b1dca">mClosedLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="keywordflow">if</span> (ret &amp;&amp; (ret-&gt;getHash () == <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>))</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ();</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_cgraph.png" border="0" usemap="#d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_cgraph" id="d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_cgraph">
<area shape="rect" id="node3" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="217,103,380,132"/><area shape="rect" id="node5" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="228,155,369,202"/><area shape="rect" id="node61" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="236,225,361,271"/><area shape="rect" id="node7" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="448,86,589,133"/><area shape="rect" id="node9" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="448,155,589,202"/><area shape="rect" id="node11" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="429,225,608,255"/><area shape="rect" id="node13" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="676,5,831,51"/><area shape="rect" id="node15" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="925,120,1027,149"/><area shape="rect" id="node19" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="683,125,824,171"/><area shape="rect" id="node21" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="691,317,816,363"/><area shape="rect" id="node33" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="691,247,816,294"/><area shape="rect" id="node35" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="675,560,832,589"/><area shape="rect" id="node56" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="675,195,832,224"/><area shape="rect" id="node59" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="656,613,851,643"/><area shape="rect" id="node17" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1103,111,1279,158"/><area shape="rect" id="node23" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1128,233,1253,279"/><area shape="rect" id="node27" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="901,272,1051,301"/><area shape="rect" id="node29" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="927,325,1025,355"/><area shape="rect" id="node25" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1329,300,1479,329"/><area shape="rect" id="node31" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1136,325,1245,355"/><area shape="rect" id="node37" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="899,655,1053,702"/><area shape="rect" id="node39" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="899,725,1053,771"/><area shape="rect" id="node41" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="899,794,1053,841"/><area shape="rect" id="node43" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="899,863,1053,910"/><area shape="rect" id="node45" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="899,378,1053,425"/><area shape="rect" id="node47" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="899,447,1053,494"/><area shape="rect" id="node49" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="913,517,1039,563"/><area shape="rect" id="node54" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="899,586,1053,633"/><area shape="rect" id="node51" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1117,452,1264,481"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_icgraph.png" border="0" usemap="#d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_icgraph" id="d2/dc7/a00838_ada1387013f4ac247a4ebd14bee004fa7_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a054ed0eb590140ee5d25d8efc609a6a1" title="ripple::LedgerMasterImp\l::consensusBuilt" alt="" coords="216,66,379,113"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="216,135,379,182"/><area shape="rect" id="node18" href="../../d2/dc7/a00838.html#aeb97ab084032f9ba66f1b1dc6b57d1c6" title="ripple::LedgerMasterImp\l::findAcquireLedger" alt="" coords="216,205,379,251"/><area shape="rect" id="node22" href="../../d2/dc7/a00838.html#a3588de6d09767b38e69c01de23e61c7d" title="ripple::LedgerMasterImp\l::getLedgerHash" alt="" coords="216,274,379,321"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="427,81,589,127"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="637,77,800,123"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="848,5,1011,51"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="848,143,1011,190"/><area shape="rect" id="node16" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="848,74,1011,121"/><area shape="rect" id="node20" href="../../d2/dc7/a00838.html#a12e5d20e873fd1ff626ca7e4d7e726f9" title="ripple::LedgerMasterImp\l::walkHashBySeq" alt="" coords="427,205,589,251"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a24bd2159ae9b3932a055a8e6cb73e18f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::getLedgerBySeq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a5a199229ff499451b63f07ae13f5690a">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01368">1368</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00376">clearLedger()</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, <a class="el" href="../../d1/d77/a02920_source.html#l00067">ripple::LedgerHistory::getLedgerBySeq()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00050">mClosedLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00559">fixMismatch()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ret = <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6">getLedgerBySeq</a> (index);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        <span class="keywordflow">if</span> (ret)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        ret = <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <span class="keywordflow">if</span> (ret &amp;&amp; (ret-&gt;getLedgerSeq () == index))</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        ret = <a class="code" href="../../d2/dc7/a00838.html#aafddd7a3f3c8da90a1f8c374f05b1dca">mClosedLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordflow">if</span> (ret &amp;&amp; (ret-&gt;getLedgerSeq () == index))</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609">clearLedger</a> (index);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>();</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_cgraph.png" border="0" usemap="#d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_cgraph" id="d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="217,60,380,107"/><area shape="rect" id="node11" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="217,130,380,160"/><area shape="rect" id="node13" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="228,183,369,230"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="431,69,617,98"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="681,20,857,49"/><area shape="rect" id="node9" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="667,72,872,119"/><area shape="rect" id="node15" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="699,236,840,283"/><area shape="rect" id="node17" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="453,298,595,344"/><area shape="rect" id="node72" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="680,165,859,194"/><area shape="rect" id="node81" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="453,178,595,224"/><area shape="rect" id="node20" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="699,359,840,406"/><area shape="rect" id="node22" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="680,306,859,336"/><area shape="rect" id="node24" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="940,236,1095,283"/><area shape="rect" id="node26" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1189,106,1291,136"/><area shape="rect" id="node30" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="947,44,1088,91"/><area shape="rect" id="node32" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="955,731,1080,778"/><area shape="rect" id="node44" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="955,167,1080,214"/><area shape="rect" id="node46" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="939,410,1096,440"/><area shape="rect" id="node67" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="939,306,1096,336"/><area shape="rect" id="node70" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="920,114,1115,144"/><area shape="rect" id="node28" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1367,98,1543,144"/><area shape="rect" id="node34" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1392,655,1517,702"/><area shape="rect" id="node38" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1165,765,1315,794"/><area shape="rect" id="node40" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1191,818,1289,848"/><area shape="rect" id="node36" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1593,564,1743,593"/><area shape="rect" id="node42" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1400,818,1509,848"/><area shape="rect" id="node48" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1163,436,1317,483"/><area shape="rect" id="node50" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1163,506,1317,552"/><area shape="rect" id="node52" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1163,575,1317,622"/><area shape="rect" id="node54" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1163,644,1317,691"/><area shape="rect" id="node56" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1163,159,1317,206"/><area shape="rect" id="node58" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1163,228,1317,275"/><area shape="rect" id="node60" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1177,367,1303,414"/><area shape="rect" id="node65" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1163,298,1317,344"/><area shape="rect" id="node62" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1381,513,1528,542"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_icgraph.png" border="0" usemap="#d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_icgraph" id="d2/dc7/a00838_a24bd2159ae9b3932a055a8e6cb73e18f_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c" title="ripple::LedgerMasterImp\l::fixMismatch" alt="" coords="216,34,379,81"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="427,65,589,111"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="1269,5,1432,51"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3" title="ripple::LedgerMasterImp\l::forceValid" alt="" coords="637,65,800,111"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="637,134,800,181"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="848,79,1011,126"/><area shape="rect" id="node15" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="1059,78,1221,125"/><area shape="rect" id="node18" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="1269,143,1432,190"/><area shape="rect" id="node21" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="1269,74,1432,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3588de6d09767b38e69c01de23e61c7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> ripple::LedgerMasterImp::getLedgerHash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>desiredSeq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>knownGoodLedger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a0db958988fe21394024982e96035f485">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01121">1121</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l01386">getLedgerByHash()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00147">ripple::base_uint&lt; BITS &gt;::isNonZero()</a>, and <a class="el" href="../../dd/dfa/a02824_source.html#l00138">ripple::base_uint&lt; BITS &gt;::isZero()</a>.</p>
<div class="fragment"><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    { </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        assert(desiredSeq &lt; knownGoodLedger-&gt;getLedgerSeq());</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        uint256 <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a> = knownGoodLedger-&gt;getLedgerHash(desiredSeq);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="comment">// Not directly in the given ledger</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">if</span> (hash.isZero ())</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        { </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq = (desiredSeq + 255) % 256;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            assert(seq &lt; desiredSeq);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            uint256 i = knownGoodLedger-&gt;getLedgerHash(seq);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <span class="keywordflow">if</span> (i.isNonZero())</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> l = <a class="code" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7">getLedgerByHash</a>(i);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                <span class="keywordflow">if</span> (l)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                    hash = l-&gt;getLedgerHash(desiredSeq);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                    assert (hash.isNonZero());</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a3588de6d09767b38e69c01de23e61c7d_cgraph.png" border="0" usemap="#d2/dc7/a00838_a3588de6d09767b38e69c01de23e61c7d_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a3588de6d09767b38e69c01de23e61c7d_cgraph" id="d2/dc7/a00838_a3588de6d09767b38e69c01de23e61c7d_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="216,213,379,259"/><area shape="rect" id="node63" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="447,282,572,329"/><area shape="rect" id="node65" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="235,282,360,329"/><area shape="rect" id="node5" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="428,225,591,255"/><area shape="rect" id="node7" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="439,155,580,202"/><area shape="rect" id="node9" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="659,86,800,133"/><area shape="rect" id="node11" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="659,155,800,202"/><area shape="rect" id="node13" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="640,225,819,255"/><area shape="rect" id="node15" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="887,5,1041,51"/><area shape="rect" id="node17" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1136,160,1237,189"/><area shape="rect" id="node21" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="893,125,1035,171"/><area shape="rect" id="node23" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="901,317,1027,363"/><area shape="rect" id="node35" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="901,247,1027,294"/><area shape="rect" id="node37" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="885,560,1043,589"/><area shape="rect" id="node58" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="885,195,1043,224"/><area shape="rect" id="node61" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="867,613,1061,643"/><area shape="rect" id="node19" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1313,151,1489,198"/><area shape="rect" id="node25" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1339,238,1464,285"/><area shape="rect" id="node29" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1112,272,1261,301"/><area shape="rect" id="node31" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1137,325,1236,355"/><area shape="rect" id="node27" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1540,349,1689,379"/><area shape="rect" id="node33" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1347,325,1456,355"/><area shape="rect" id="node39" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1109,655,1264,702"/><area shape="rect" id="node41" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1109,725,1264,771"/><area shape="rect" id="node43" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1109,794,1264,841"/><area shape="rect" id="node45" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1109,863,1264,910"/><area shape="rect" id="node47" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1109,378,1264,425"/><area shape="rect" id="node49" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1109,447,1264,494"/><area shape="rect" id="node51" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1124,517,1249,563"/><area shape="rect" id="node56" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1109,586,1264,633"/><area shape="rect" id="node53" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1328,452,1475,481"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="accf85d84faf3c89fc70b36c8309e3bb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ripple::LedgerMasterImp::getMinValidations </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#aa7961e4d96dba24b272e032d00b2e512">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01277">1277</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00064">mMinValidations</a>.</p>
<div class="fragment"><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#a4a7bb998185ae6768a22a49fc064b871">mMinValidations</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25f5cc7afe62b8844d2036e89a485996"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ripple::LedgerMasterImp::getNeededValidations </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determines how many validations are needed to fully-validated a ledger</p>
<dl class="section return"><dt>Returns</dt><dd>Number of validations needed </dd></dl>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00699">699</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d0/dc2/a02477_source.html#l00647">ripple::getConfig()</a>, <a class="el" href="../../d3/dac/a01777.html#af2c2a17a862003e98972450c4d4c8e05">ripple::Validations::getTrustedValidationCount()</a>, <a class="el" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">ripple::Application::getValidations()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00147">ripple::base_uint&lt; BITS &gt;::isNonZero()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00024">MIN_VALIDATION_RATIO</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00065">mLastValidateHash</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00064">mMinValidations</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00767">consensusBuilt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().RUN_STANDALONE)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordtype">int</span> minVal = <a class="code" href="../../d2/dc7/a00838.html#a4a7bb998185ae6768a22a49fc064b871">mMinValidations</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc7/a00838.html#a9a7548c63624f1afe9014aeca724359d">mLastValidateHash</a>.<a class="code" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2">isNonZero</a> ())</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="keywordtype">int</span> val = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4">getValidations</a> ().<a class="code" href="../../d3/dac/a01777.html#af2c2a17a862003e98972450c4d4c8e05">getTrustedValidationCount</a> (<a class="code" href="../../d2/dc7/a00838.html#a9a7548c63624f1afe9014aeca724359d">mLastValidateHash</a>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            val *= <a class="code" href="../../d6/df9/a02923.html#aa2d4c52547142a3a2df5523830bde48d">MIN_VALIDATION_RATIO</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            val /= 256;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">if</span> (val &gt; minVal)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                minVal = val;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">return</span> minVal;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_cgraph.png" border="0" usemap="#d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_cgraph" id="d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="257,13,359,43"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="249,67,367,96"/><area shape="rect" id="node9" href="../../d3/dac/a01777.html#af2c2a17a862003e98972450c4d4c8e05" title="ripple::Validations\l::getTrustedValidationCount" alt="" coords="216,119,400,166"/><area shape="rect" id="node11" href="../../da/d74/a00099.html#a4f3da0257883c463e0a561d7ba793dd4" title="ripple::Application\l::getValidations" alt="" coords="245,189,371,235"/><area shape="rect" id="node13" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="245,258,371,305"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="449,5,625,51"/><area shape="rect" id="node15" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="475,258,600,305"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_icgraph.png" border="0" usemap="#d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_icgraph" id="d2/dc7/a00838_a25f5cc7afe62b8844d2036e89a485996_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="216,5,379,51"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a054ed0eb590140ee5d25d8efc609a6a1" title="ripple::LedgerMasterImp\l::consensusBuilt" alt="" coords="216,74,379,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0de9873967f30e4a1a2eefdbaa9392a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db0/a01437.html">beast::PropertyStream::Source</a>&amp; ripple::LedgerMasterImp::getPropertySource </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#aa5468552ddd75e6be71b08dc9c3a2787">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01436">1436</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00062">mLedgerCleaner</a>.</p>
<div class="fragment"><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="../../d2/dc7/a00838.html#ae7f9c5ede45fa7447912bd1357ce370e">mLedgerCleaner</a>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af840842996620f91efc2302aceef6b49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a> ripple::LedgerMasterImp::getPublishedLedger </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ab68f28d77183efd613919b589d85e330">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01272">1272</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00052">mPubLedger</a>.</p>
<div class="fragment"><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#af10ba0f0e5e469d2ed19227006bba59e">mPubLedger</a>;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8732f9e53cb69c4d4595a8e6eb437008"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ripple::LedgerMasterImp::getPublishedLedgerAge </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#aa071389f69f13394643e10ff1b6192c2">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00119">119</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567">ripple::NetworkOPs::getCloseTimeNC()</a>, <a class="el" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">ripple::Application::getOPs()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00077">mPubLedgerClose</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00153">isCaughtUp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> pubClose = <a class="code" href="../../d2/dc7/a00838.html#ace4219926da351849a60608ae264ecaa">mPubLedgerClose</a>.load();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">if</span> (!pubClose)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;No published ledger&quot;</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">return</span> 999999;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="../../db/d86/a02663.html#adec1df1b8b51cb32b77e5b86fff46471">std::int64_t</a> ret = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">getOPs</a> ().<a class="code" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567">getCloseTimeNC</a> ();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        ret -= <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d86/a02663.html#adec1df1b8b51cb32b77e5b86fff46471">std::int64_t</a><span class="keyword">&gt;</span> (pubClose);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        ret = (ret &gt; 0) ? ret : 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Published ledger age is &quot;</span> &lt;&lt; ret;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span> (ret);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_cgraph.png" border="0" usemap="#d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_cgraph" id="d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="239,13,340,43"/><area shape="rect" id="node7" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567" title="ripple::NetworkOPs\l::getCloseTimeNC" alt="" coords="221,66,357,113"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="227,135,352,182"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="407,5,583,51"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_icgraph.png" border="0" usemap="#d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_icgraph" id="d2/dc7/a00838_a8732f9e53cb69c4d4595a8e6eb437008_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#aca26d28ef7d6b1f57bf8aa83d58f0eb1" title="ripple::LedgerMasterImp\l::isCaughtUp" alt="" coords="221,5,384,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae93d94638412437c64a62cbede6caca3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::getValidatedLedger </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a2e32e5b06d5b855f57a7d4fb3d25c05e">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01266">1266</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00051">mValidLedger</a>.</p>
<div class="fragment"><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ae93d94638412437c64a62cbede6caca3_cgraph.png" border="0" usemap="#d2/dc7/a00838_ae93d94638412437c64a62cbede6caca3_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ae93d94638412437c64a62cbede6caca3_cgraph" id="d2/dc7/a00838_ae93d94638412437c64a62cbede6caca3_cgraph">
<area shape="rect" id="node3" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="217,13,380,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1f90e22e1119286d2fd1c049e6e55ec2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ripple::LedgerMasterImp::getValidatedLedgerAge </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a616a9ac6aa98e9ff03a112cd4c486a05">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00136">136</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567">ripple::NetworkOPs::getCloseTimeNC()</a>, <a class="el" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">ripple::Application::getOPs()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00079">mValidLedgerClose</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> valClose = <a class="code" href="../../d2/dc7/a00838.html#a669452386a0abf5655393ca6f7f4f9b5">mValidLedgerClose</a>.load();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">if</span> (!valClose)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;No validated ledger&quot;</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">return</span> 999999;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="../../db/d86/a02663.html#adec1df1b8b51cb32b77e5b86fff46471">std::int64_t</a> ret = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">getOPs</a> ().<a class="code" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567">getCloseTimeNC</a> ();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        ret -= <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d86/a02663.html#adec1df1b8b51cb32b77e5b86fff46471">std::int64_t</a><span class="keyword">&gt;</span> (valClose);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        ret = (ret &gt; 0) ? ret : 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Validated ledger age is &quot;</span> &lt;&lt; ret;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span> (ret);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a1f90e22e1119286d2fd1c049e6e55ec2_cgraph.png" border="0" usemap="#d2/dc7/a00838_a1f90e22e1119286d2fd1c049e6e55ec2_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a1f90e22e1119286d2fd1c049e6e55ec2_cgraph" id="d2/dc7/a00838_a1f90e22e1119286d2fd1c049e6e55ec2_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="236,13,337,43"/><area shape="rect" id="node7" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567" title="ripple::NetworkOPs\l::getCloseTimeNC" alt="" coords="219,66,355,113"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="224,135,349,182"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="404,5,580,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a23cd329d9d5a2a789fcbc4b466a6f059"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::getValidatedRange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;&#160;</td>
          <td class="paramname"><em>minVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> &amp;&#160;</td>
          <td class="paramname"><em>maxVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a4fa2beaa02e540b0c303a7c576d0f5d0">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00404">404</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/de6/a03084_source.html#l00030">ripple::RangeSet::absent</a>, <a class="el" href="../../dd/d3f/a02912_source.html#l01932">ripple::Ledger::getPendingSaves()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00078">mPubLedgerSeq</a>, and <a class="el" href="../../d5/dd8/a03083_source.html#l00098">ripple::RangeSet::prevMissing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    { </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        maxVal = <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a>.load();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span> (!maxVal)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            minVal = <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61">prevMissing</a> (maxVal);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> (minVal == <a class="code" href="../../d3/d32/a01176.html#afeee191309ce12263254e17d3d7bdf68">RangeSet::absent</a>)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            minVal = maxVal;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            ++minVal;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="comment">// Remove from the validated range any ledger sequences that may not be</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="comment">// fully updated in the database yet</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        std::set&lt;std::uint32_t&gt; sPendingSaves = <a class="code" href="../../dd/d5f/a00825.html#a8b74b8a54be3192f332c0a162230b8f0">Ledger::getPendingSaves</a>();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (!sPendingSaves.empty() &amp;&amp; ((minVal != 0) || (maxVal != 0)))</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="comment">// Ensure we shrink the tips as much as possible</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <span class="comment">// If we have 7-9 and 8,9 are invalid, we don&#39;t want to see the 8 and shrink to just 9</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="comment">// because then we&#39;ll have nothing when we could have 7.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">while</span> (sPendingSaves.count(maxVal) &gt; 0)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                --maxVal;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordflow">while</span> (sPendingSaves.count(minVal) &gt; 0)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                ++minVal;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="comment">// Best effort for remaining exclusions</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            BOOST_FOREACH(<a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> v, sPendingSaves)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                <span class="keywordflow">if</span> ((v &gt;= minVal) &amp;&amp; (v &lt;= maxVal))</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    <span class="keywordflow">if</span> (v &gt; ((minVal + maxVal) / 2))</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        maxVal = v - 1;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                        minVal = v + 1;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">if</span> (minVal &gt; maxVal)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                minVal = maxVal = 0;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a23cd329d9d5a2a789fcbc4b466a6f059_cgraph.png" border="0" usemap="#d2/dc7/a00838_a23cd329d9d5a2a789fcbc4b466a6f059_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a23cd329d9d5a2a789fcbc4b466a6f059_cgraph" id="d2/dc7/a00838_a23cd329d9d5a2a789fcbc4b466a6f059_cgraph">
<area shape="rect" id="node3" href="../../dd/d5f/a00825.html#a8b74b8a54be3192f332c0a162230b8f0" title="ripple::Ledger::getPending\lSaves" alt="" coords="228,5,401,51"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61" title="ripple::RangeSet::prevMissing" alt="" coords="216,75,413,104"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="461,6,667,53"/><area shape="rect" id="node9" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="715,101,891,131"/><area shape="rect" id="node11" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="473,127,655,156"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afa033d4db6bb19101350d50fe39d794c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> ripple::LedgerMasterImp::getValidLedgerIndex </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ae26626a1f1330e28e625ee8308de2809">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00114">114</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac24e067a552cb3b6d0409fdadc4cf7f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::haveLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>seq</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#af28d084eaf411320d8780322b2eba49c">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00370">370</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d5/dd8/a03083_source.html#l00040">ripple::RangeSet::hasValue()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00559">fixMismatch()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00468">tryFill()</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4">hasValue</a> (seq);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_cgraph.png" border="0" usemap="#d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_cgraph" id="d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_cgraph">
<area shape="rect" id="node3" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="216,13,397,43"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="445,13,621,43"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_icgraph.png" border="0" usemap="#d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_icgraph" id="d2/dc7/a00838_ac24e067a552cb3b6d0409fdadc4cf7f3_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c" title="ripple::LedgerMasterImp\l::fixMismatch" alt="" coords="216,73,379,119"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="427,73,589,119"/><area shape="rect" id="node18" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="1269,145,1432,191"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="1269,5,1432,51"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3" title="ripple::LedgerMasterImp\l::forceValid" alt="" coords="637,63,800,110"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="637,133,800,179"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="848,77,1011,123"/><area shape="rect" id="node15" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="1059,75,1221,122"/><area shape="rect" id="node21" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="1269,75,1432,122"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ee90e13899c16e5f426742b65482230"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::haveLedgerRange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#aebde1523ffaf94e474d25b63f8957d44">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00363">363</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/de6/a03084_source.html#l00030">ripple::RangeSet::absent</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, and <a class="el" href="../../d5/dd8/a03083_source.html#l00098">ripple::RangeSet::prevMissing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> prevMissing = <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61">prevMissing</a> (to + 1);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">return</span> (prevMissing == <a class="code" href="../../d3/d32/a01176.html#afeee191309ce12263254e17d3d7bdf68">RangeSet::absent</a>) || (prevMissing &lt; from);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a0ee90e13899c16e5f426742b65482230_cgraph.png" border="0" usemap="#d2/dc7/a00838_a0ee90e13899c16e5f426742b65482230_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a0ee90e13899c16e5f426742b65482230_cgraph" id="d2/dc7/a00838_a0ee90e13899c16e5f426742b65482230_cgraph">
<area shape="rect" id="node3" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61" title="ripple::RangeSet::prevMissing" alt="" coords="216,73,413,103"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="461,5,667,51"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="715,100,891,129"/><area shape="rect" id="node9" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="473,125,655,155"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aca26d28ef7d6b1f57bf8aa83d58f0eb1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::isCaughtUp </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>reason</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#af71498f099d37c1a2cc4cb4928f68d7b">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00153">153</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00119">getPublishedLedgerAge()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00077">mPubLedgerClose</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00079">mValidLedgerClose</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc7/a00838.html#a8732f9e53cb69c4d4595a8e6eb437008">getPublishedLedgerAge</a>() &gt; 180)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            reason = <span class="stringliteral">&quot;No recently-published ledger&quot;</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> validClose = <a class="code" href="../../d2/dc7/a00838.html#a669452386a0abf5655393ca6f7f4f9b5">mValidLedgerClose</a>.load();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> pubClose = <a class="code" href="../../d2/dc7/a00838.html#ace4219926da351849a60608ae264ecaa">mPubLedgerClose</a>.load();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">if</span> (!validClose || !pubClose)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            reason = <span class="stringliteral">&quot;No published ledger&quot;</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (validClose  &gt; (pubClose + 90))</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            reason = <span class="stringliteral">&quot;Published ledger lags validated ledger&quot;</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aca26d28ef7d6b1f57bf8aa83d58f0eb1_cgraph.png" border="0" usemap="#d2/dc7/a00838_aca26d28ef7d6b1f57bf8aa83d58f0eb1_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_aca26d28ef7d6b1f57bf8aa83d58f0eb1_cgraph" id="d2/dc7/a00838_aca26d28ef7d6b1f57bf8aa83d58f0eb1_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a8732f9e53cb69c4d4595a8e6eb437008" title="ripple::LedgerMasterImp\l::getPublishedLedgerAge" alt="" coords="217,66,383,113"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="449,13,551,43"/><area shape="rect" id="node9" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567" title="ripple::NetworkOPs\l::getCloseTimeNC" alt="" coords="432,66,568,113"/><area shape="rect" id="node11" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="437,135,563,182"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="617,5,793,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af396a0cc297766725644453f879a4e8f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::isNewPathRequest </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#af917115a5a13970c48e756c0d50aa0ae">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01218">1218</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00075">mPathFindNewRequest</a>.</p>
<div class="fragment"><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc7/a00838.html#a2ccb481e67e01950bdf802a7a2e90192">mPathFindNewRequest</a>)</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2ccb481e67e01950bdf802a7a2e90192">mPathFindNewRequest</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ace7bc6f1e79ecec3295256ba3000c8fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::newOrderBookDB </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a76e6c9a98c9e32b787878c5b6ad810c3">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01228">1228</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00053">mPathLedger</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01238">newPFWork()</a>.</p>
<div class="fragment"><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#aa3c17ca4f7adc29acb6f4f54d44b7e41">mPathLedger</a>.reset();</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f">newPFWork</a>(<span class="stringliteral">&quot;pf:newOBDB&quot;</span>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ace7bc6f1e79ecec3295256ba3000c8fb_cgraph.png" border="0" usemap="#d2/dc7/a00838_ace7bc6f1e79ecec3295256ba3000c8fb_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ace7bc6f1e79ecec3295256ba3000c8fb_cgraph" id="d2/dc7/a00838_ace7bc6f1e79ecec3295256ba3000c8fb_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f" title="ripple::LedgerMasterImp\l::newPFWork" alt="" coords="216,124,379,171"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="915,14,1016,44"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="449,94,575,140"/><area shape="rect" id="node11" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="427,164,597,193"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a0b6c134c1aa3633426a413ee99c6e6cf" title="ripple::LedgerMasterImp\l::updatePaths" alt="" coords="431,295,593,342"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1087,6,1263,52"/><area shape="rect" id="node16" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="676,66,815,112"/><area shape="rect" id="node18" href="../../da/d96/a00782.html#a871bab7c19f3bc9e4c6b0780276fde5b" title="ripple::Job::shouldCancel" alt="" coords="661,136,829,165"/><area shape="rect" id="node20" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="664,189,827,218"/><area shape="rect" id="node22" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="687,242,804,272"/><area shape="rect" id="node24" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="683,295,808,342"/><area shape="rect" id="node26" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567" title="ripple::NetworkOPs\l::getCloseTimeNC" alt="" coords="677,364,813,411"/><area shape="rect" id="node28" href="../../da/d74/a00099.html#a5368183e92fc6cd7a985295d258ec892" title="ripple::Application\l::getPathRequests" alt="" coords="680,434,811,480"/><area shape="rect" id="node30" href="../../da/d93/a01084.html#a12e05e9a990cbd8927fcc5b710987089" title="ripple::PathRequests\l::updateAll" alt="" coords="673,503,817,550"/><area shape="rect" id="node39" href="../../da/d96/a00782.html#a1b3e7432fc6096252741938e05ee3135" title="ripple::Job::getCancelCallback" alt="" coords="645,573,845,602"/><area shape="rect" id="node41" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="676,626,815,672"/><area shape="rect" id="node43" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="669,695,821,742"/><area shape="rect" id="node33" href="../../da/d93/a01084.html#a164386fea7cfb04118b4fec9ae02d567" title="ripple::PathRequests\l::getLineCache" alt="" coords="893,434,1037,480"/><area shape="rect" id="node35" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="903,503,1028,550"/><area shape="rect" id="node37" href="../../d1/de6/a00837.html#af917115a5a13970c48e756c0d50aa0ae" title="ripple::LedgerMaster\l::isNewPathRequest" alt="" coords="895,572,1036,619"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a80899acf017a1d4adc39aab8fddb6d2a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::newPathRequest </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a72079d9c1d15c67b0607364ee25402f5">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01210">1210</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00075">mPathFindNewRequest</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01238">newPFWork()</a>.</p>
<div class="fragment"><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2ccb481e67e01950bdf802a7a2e90192">mPathFindNewRequest</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f">newPFWork</a>(<span class="stringliteral">&quot;pf:newRequest&quot;</span>);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a80899acf017a1d4adc39aab8fddb6d2a_cgraph.png" border="0" usemap="#d2/dc7/a00838_a80899acf017a1d4adc39aab8fddb6d2a_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a80899acf017a1d4adc39aab8fddb6d2a_cgraph" id="d2/dc7/a00838_a80899acf017a1d4adc39aab8fddb6d2a_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f" title="ripple::LedgerMasterImp\l::newPFWork" alt="" coords="216,124,379,171"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="915,14,1016,44"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="449,94,575,140"/><area shape="rect" id="node11" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="427,164,597,193"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a0b6c134c1aa3633426a413ee99c6e6cf" title="ripple::LedgerMasterImp\l::updatePaths" alt="" coords="431,295,593,342"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1087,6,1263,52"/><area shape="rect" id="node16" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="676,66,815,112"/><area shape="rect" id="node18" href="../../da/d96/a00782.html#a871bab7c19f3bc9e4c6b0780276fde5b" title="ripple::Job::shouldCancel" alt="" coords="661,136,829,165"/><area shape="rect" id="node20" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="664,189,827,218"/><area shape="rect" id="node22" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="687,242,804,272"/><area shape="rect" id="node24" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="683,295,808,342"/><area shape="rect" id="node26" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567" title="ripple::NetworkOPs\l::getCloseTimeNC" alt="" coords="677,364,813,411"/><area shape="rect" id="node28" href="../../da/d74/a00099.html#a5368183e92fc6cd7a985295d258ec892" title="ripple::Application\l::getPathRequests" alt="" coords="680,434,811,480"/><area shape="rect" id="node30" href="../../da/d93/a01084.html#a12e05e9a990cbd8927fcc5b710987089" title="ripple::PathRequests\l::updateAll" alt="" coords="673,503,817,550"/><area shape="rect" id="node39" href="../../da/d96/a00782.html#a1b3e7432fc6096252741938e05ee3135" title="ripple::Job::getCancelCallback" alt="" coords="645,573,845,602"/><area shape="rect" id="node41" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="676,626,815,672"/><area shape="rect" id="node43" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="669,695,821,742"/><area shape="rect" id="node33" href="../../da/d93/a01084.html#a164386fea7cfb04118b4fec9ae02d567" title="ripple::PathRequests\l::getLineCache" alt="" coords="893,434,1037,480"/><area shape="rect" id="node35" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="903,503,1028,550"/><area shape="rect" id="node37" href="../../d1/de6/a00837.html#af917115a5a13970c48e756c0d50aa0ae" title="ripple::LedgerMaster\l::isNewPathRequest" alt="" coords="895,572,1036,619"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad047aff1c1ccfe1d8ebd0da6b78f8e2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::newPFWork </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A thread needs to be dispatched to handle pathfinding work of some kind </p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01238">1238</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">ripple::JobQueue::addJob()</a>, <a class="el" href="../../d0/d75/a03105_source.html#l00028">BIND_TYPE</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">ripple::Application::getJobQueue()</a>, <a class="el" href="../../d8/d96/a03116_source.html#l00046">ripple::jtUPDATE_PF</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00073">mPathFindThread</a>, <a class="el" href="../../d0/d75/a03105_source.html#l00029">P_1</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01228">newOrderBookDB()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01210">newPathRequest()</a>.</p>
<div class="fragment"><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc7/a00838.html#acf34ea2e71eef3806948648a302cc357">mPathFindThread</a> &lt; 2)</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            ++<a class="code" href="../../d2/dc7/a00838.html#acf34ea2e71eef3806948648a302cc357">mPathFindThread</a>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">getJobQueue</a>().<a class="code" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">addJob</a> (<a class="code" href="../../d9/d9d/a03417.html#ae0f54f8ce649d639bf3e2b295347e17aa556a2b64f4c3520465e883a54898df97">jtUPDATE_PF</a>, <a class="code" href="../../d8/d24/a02001.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                <a class="code" href="../../d0/d75/a03105.html#a6c0c867ff5909fab21adb4d253d4bcc5">BIND_TYPE</a> (&amp;<a class="code" href="../../d2/dc7/a00838.html#a0b6c134c1aa3633426a413ee99c6e6cf">LedgerMasterImp::updatePaths</a>, <span class="keyword">this</span>, <a class="code" href="../../d0/d75/a03105.html#af188598d0d6f186e4b5b0ec4b8da5be1">P_1</a>));</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        }</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_cgraph.png" border="0" usemap="#d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_cgraph" id="d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_cgraph">
<area shape="rect" id="node3" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="216,5,387,35"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="704,108,805,137"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="239,109,364,155"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a0b6c134c1aa3633426a413ee99c6e6cf" title="ripple::LedgerMasterImp\l::updatePaths" alt="" coords="220,389,383,435"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="876,99,1052,146"/><area shape="rect" id="node14" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="465,159,604,206"/><area shape="rect" id="node16" href="../../da/d96/a00782.html#a871bab7c19f3bc9e4c6b0780276fde5b" title="ripple::Job::shouldCancel" alt="" coords="451,229,619,259"/><area shape="rect" id="node18" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="453,283,616,312"/><area shape="rect" id="node20" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="476,336,593,365"/><area shape="rect" id="node22" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="472,389,597,435"/><area shape="rect" id="node24" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567" title="ripple::NetworkOPs\l::getCloseTimeNC" alt="" coords="467,458,603,505"/><area shape="rect" id="node26" href="../../da/d74/a00099.html#a5368183e92fc6cd7a985295d258ec892" title="ripple::Application\l::getPathRequests" alt="" coords="469,527,600,574"/><area shape="rect" id="node28" href="../../da/d93/a01084.html#a12e05e9a990cbd8927fcc5b710987089" title="ripple::PathRequests\l::updateAll" alt="" coords="463,597,607,643"/><area shape="rect" id="node37" href="../../da/d96/a00782.html#a1b3e7432fc6096252741938e05ee3135" title="ripple::Job::getCancelCallback" alt="" coords="435,667,635,696"/><area shape="rect" id="node39" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="465,719,604,766"/><area shape="rect" id="node41" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="459,789,611,835"/><area shape="rect" id="node31" href="../../da/d93/a01084.html#a164386fea7cfb04118b4fec9ae02d567" title="ripple::PathRequests\l::getLineCache" alt="" coords="683,527,827,574"/><area shape="rect" id="node33" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="692,597,817,643"/><area shape="rect" id="node35" href="../../d1/de6/a00837.html#af917115a5a13970c48e756c0d50aa0ae" title="ripple::LedgerMaster\l::isNewPathRequest" alt="" coords="684,666,825,713"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_icgraph.png" border="0" usemap="#d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_icgraph" id="d2/dc7/a00838_ad047aff1c1ccfe1d8ebd0da6b78f8e2f_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="216,110,379,157"/><area shape="rect" id="node16" href="../../d2/dc7/a00838.html#ace7bc6f1e79ecec3295256ba3000c8fb" title="ripple::LedgerMasterImp\l::newOrderBookDB" alt="" coords="216,179,379,226"/><area shape="rect" id="node18" href="../../d2/dc7/a00838.html#a80899acf017a1d4adc39aab8fddb6d2a" title="ripple::LedgerMasterImp\l::newPathRequest" alt="" coords="216,249,379,295"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="427,78,589,125"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="637,75,800,122"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="848,5,1011,51"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="848,143,1011,190"/><area shape="rect" id="node14" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="848,74,1011,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a01d24a938e48239dfd0d2b652ac54888"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a>&amp; ripple::LedgerMasterImp::peekMutex </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a17384418923af72d339d10bedd4c7752">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01248">1248</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>.</p>
<div class="fragment"><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a340c1c668d233c98f5ac0e3a62533b6c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::pushLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>newLedger</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a1ee50c8b4c240bdaafd6955f9d67454a">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00197">197</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00659">checkAccept()</a>, <a class="el" href="../../d0/dc2/a02477_source.html#l00647">ripple::getConfig()</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00058">ripple::LedgerHolder::getMutable()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00050">mClosedLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00047">mEngine</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00036">ripple::LedgerHolder::set()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../da/d5d/a03068_source.html#l00081">ripple::TransactionEngine::setLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// Caller should already have properly assembled this ledger into &quot;ready-to-close&quot; form --</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// all candidate transactions must already be applied</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;PushLedger: &quot;</span> &lt;&lt; newLedger-&gt;getHash ();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> closedLedger = <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#ad761b492c02d0a787bcfd5ee9b102ded">getMutable</a> ();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">if</span> (closedLedger)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                closedLedger-&gt;setClosed ();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                closedLedger-&gt;setImmutable ();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#aafddd7a3f3c8da90a1f8c374f05b1dca">mClosedLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (closedLedger);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (newLedger);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a>.<a class="code" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a">setLedger</a> (newLedger);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().RUN_STANDALONE)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d">setFullLedger</a>(newLedger, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415">tryAdvance</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f">checkAccept</a>(newLedger);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a340c1c668d233c98f5ac0e3a62533b6c_cgraph.png" border="0" usemap="#d2/dc7/a00838_a340c1c668d233c98f5ac0e3a62533b6c_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a340c1c668d233c98f5ac0e3a62533b6c_cgraph" id="d2/dc7/a00838_a340c1c668d233c98f5ac0e3a62533b6c_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="645,321,808,367"/><area shape="rect" id="node39" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="1321,1175,1439,1204"/><area shape="rect" id="node41" href="../../d3/d13/a00836.html#ad761b492c02d0a787bcfd5ee9b102ded" title="ripple::LedgerHolder\l::getMutable" alt="" coords="232,1425,371,1471"/><area shape="rect" id="node43" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="1299,351,1461,380"/><area shape="rect" id="node45" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="856,733,1019,779"/><area shape="rect" id="node107" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a" title="ripple::TransactionEngine\l::setLedger" alt="" coords="217,1494,385,1541"/><area shape="rect" id="node109" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="220,1355,383,1402"/><area shape="rect" id="node5" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="861,350,1013,397"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="2189,813,2291,843"/><area shape="rect" id="node11" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="2177,66,2303,113"/><area shape="rect" id="node23" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="868,419,1007,466"/><area shape="rect" id="node25" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="1745,503,1887,550"/><area shape="rect" id="node9" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="2367,805,2543,851"/><area shape="rect" id="node13" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="2392,5,2517,51"/><area shape="rect" id="node17" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="2380,75,2529,104"/><area shape="rect" id="node19" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="2405,128,2504,157"/><area shape="rect" id="node15" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="2593,13,2743,43"/><area shape="rect" id="node21" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="2613,128,2723,157"/><area shape="rect" id="node27" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="1955,622,2096,669"/><area shape="rect" id="node29" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="1955,503,2096,550"/><area shape="rect" id="node31" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="1936,135,2115,164"/><area shape="rect" id="node33" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="2163,205,2317,251"/><area shape="rect" id="node36" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="2169,135,2311,182"/><area shape="rect" id="node47" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b" title="ripple::LedgerHistory\l::addLedger" alt="" coords="1535,622,1676,669"/><area shape="rect" id="node52" href="../../d3/d32/a01176.html#a597108aeb4003727e9d2bb91960cf980" title="ripple::RangeSet::setValue" alt="" coords="1067,660,1245,689"/><area shape="rect" id="node58" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6" title="ripple::LedgerMasterImp\l::setValidLedger" alt="" coords="1075,350,1237,397"/><area shape="rect" id="node66" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="1075,953,1237,999"/><area shape="rect" id="node69" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="1092,763,1220,810"/><area shape="rect" id="node71" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="1085,1275,1227,1322"/><area shape="rect" id="node82" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3" title="ripple::LedgerMasterImp\l::haveLedger" alt="" coords="1299,763,1461,810"/><area shape="rect" id="node85" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f" title="ripple::LedgerMasterImp\l::getLedgerBySeq" alt="" coords="1299,833,1461,879"/><area shape="rect" id="node96" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c" title="ripple::LedgerMasterImp\l::fixMismatch" alt="" coords="1075,883,1237,930"/><area shape="rect" id="node103" href="../../da/d74/a00099.html#a75626a7902ded7d35b15e92bbdcb09bb" title="ripple::Application\l::getValidators" alt="" coords="1093,470,1219,517"/><area shape="rect" id="node105" href="../../dc/d92/a00929.html#a64aed2c8ae6dd215d88b2b17d52b960e" title="ripple::Validators\l::Manager::ledgerClosed" alt="" coords="1075,539,1237,586"/><area shape="rect" id="node50" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="1745,722,1887,769"/><area shape="rect" id="node54" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="1515,715,1696,744"/><area shape="rect" id="node56" href="../../d3/d32/a01176.html#a48a885310b9aaaace8633ca53f6df1b7" title="ripple::RangeSet::simplify" alt="" coords="1295,660,1465,689"/><area shape="rect" id="node62" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="1317,523,1443,570"/><area shape="rect" id="node64" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5" title="ripple::NetworkOPs\l::updateLocalTx" alt="" coords="1312,454,1448,501"/><area shape="rect" id="node74" href="../../d5/d4c/a01058.html#a342daa95f79e50e5faee7c6e6409343f" title="ripple::OrderBookDB\l::update" alt="" coords="1745,1275,1887,1322"/><area shape="rect" id="node78" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="1317,1395,1443,1442"/><area shape="rect" id="node80" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="1295,1496,1465,1525"/><area shape="rect" id="node87" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="1524,893,1687,939"/><area shape="rect" id="node89" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="1524,769,1687,799"/><area shape="rect" id="node91" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="1535,822,1676,869"/><area shape="rect" id="node101" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="1317,978,1443,1025"/><area shape="rect" id="node111" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="657,1351,796,1398"/><area shape="rect" id="node116" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="435,1326,597,1373"/><area shape="rect" id="node118" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="645,1063,808,1110"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a36c20f545f0d78eb9103597914b33687"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::pushLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>newLCL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>newOL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a8567295870ad7dc5742180b6a712384f">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00227">227</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d1/d77/a02920_source.html#l00123">ripple::LedgerHistory::builtLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00659">checkAccept()</a>, <a class="el" href="../../d0/dc2/a02477_source.html#l00647">ripple::getConfig()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00050">mClosedLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00047">mEngine</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00036">ripple::LedgerHolder::set()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../da/d5d/a03068_source.html#l00081">ripple::TransactionEngine::setLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        assert (newLCL-&gt;isClosed () &amp;&amp; newLCL-&gt;isAccepted ());</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        assert (!newOL-&gt;isClosed () &amp;&amp; !newOL-&gt;isAccepted ());</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#aafddd7a3f3c8da90a1f8c374f05b1dca">mClosedLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (newLCL);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (newOL);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a>.<a class="code" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a">setLedger</a> (newOL);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().RUN_STANDALONE)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d">setFullLedger</a>(newLCL, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415">tryAdvance</a>();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a9dd3968d9908661546e6985e72d4a4fa">builtLedger</a> (newLCL);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f">checkAccept</a> (newLCL);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a36c20f545f0d78eb9103597914b33687_cgraph.png" border="0" usemap="#d2/dc7/a00838_a36c20f545f0d78eb9103597914b33687_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a36c20f545f0d78eb9103597914b33687_cgraph" id="d2/dc7/a00838_a36c20f545f0d78eb9103597914b33687_cgraph">
<area shape="rect" id="node3" href="../../dd/d70/a00835.html#a9dd3968d9908661546e6985e72d4a4fa" title="ripple::LedgerHistory\l::builtLedger" alt="" coords="1309,1182,1451,1229"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="645,182,808,229"/><area shape="rect" id="node44" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="1321,959,1439,988"/><area shape="rect" id="node46" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="1299,251,1461,280"/><area shape="rect" id="node48" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="856,737,1019,783"/><area shape="rect" id="node110" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a" title="ripple::TransactionEngine\l::setLedger" alt="" coords="217,1283,385,1330"/><area shape="rect" id="node112" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="220,1470,383,1517"/><area shape="rect" id="node5" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="1955,745,2096,791"/><area shape="rect" id="node7" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="1543,1071,1668,1118"/><area shape="rect" id="node9" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="1745,778,1887,825"/><area shape="rect" id="node13" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="861,302,1013,349"/><area shape="rect" id="node15" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="2189,1268,2291,1297"/><area shape="rect" id="node19" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="2177,58,2303,105"/><area shape="rect" id="node31" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="868,371,1007,418"/><area shape="rect" id="node33" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="1745,226,1887,273"/><area shape="rect" id="node17" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="2367,1259,2543,1306"/><area shape="rect" id="node21" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="2392,58,2517,105"/><area shape="rect" id="node25" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="2380,128,2529,157"/><area shape="rect" id="node27" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="2405,5,2504,35"/><area shape="rect" id="node23" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="2593,67,2743,96"/><area shape="rect" id="node29" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="2613,5,2723,35"/><area shape="rect" id="node36" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="1955,226,2096,273"/><area shape="rect" id="node38" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="1936,119,2115,148"/><area shape="rect" id="node40" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="2163,127,2317,174"/><area shape="rect" id="node50" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b" title="ripple::LedgerHistory\l::addLedger" alt="" coords="1535,586,1676,633"/><area shape="rect" id="node54" href="../../d3/d32/a01176.html#a597108aeb4003727e9d2bb91960cf980" title="ripple::RangeSet::setValue" alt="" coords="1067,479,1245,508"/><area shape="rect" id="node60" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6" title="ripple::LedgerMasterImp\l::setValidLedger" alt="" coords="1075,307,1237,354"/><area shape="rect" id="node68" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="1075,961,1237,1007"/><area shape="rect" id="node71" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="1092,841,1220,887"/><area shape="rect" id="node73" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="1085,1283,1227,1330"/><area shape="rect" id="node84" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3" title="ripple::LedgerMasterImp\l::haveLedger" alt="" coords="1299,647,1461,694"/><area shape="rect" id="node87" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f" title="ripple::LedgerMasterImp\l::getLedgerBySeq" alt="" coords="1299,717,1461,763"/><area shape="rect" id="node98" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c" title="ripple::LedgerMasterImp\l::fixMismatch" alt="" coords="1075,771,1237,818"/><area shape="rect" id="node106" href="../../da/d74/a00099.html#a75626a7902ded7d35b15e92bbdcb09bb" title="ripple::Application\l::getValidators" alt="" coords="1093,633,1219,679"/><area shape="rect" id="node108" href="../../dc/d92/a00929.html#a64aed2c8ae6dd215d88b2b17d52b960e" title="ripple::Validators\l::Manager::ledgerClosed" alt="" coords="1075,702,1237,749"/><area shape="rect" id="node56" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="1515,656,1696,685"/><area shape="rect" id="node58" href="../../d3/d32/a01176.html#a48a885310b9aaaace8633ca53f6df1b7" title="ripple::RangeSet::simplify" alt="" coords="1295,544,1465,573"/><area shape="rect" id="node64" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="1317,423,1443,470"/><area shape="rect" id="node66" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5" title="ripple::NetworkOPs\l::updateLocalTx" alt="" coords="1312,354,1448,401"/><area shape="rect" id="node76" href="../../d5/d4c/a01058.html#a342daa95f79e50e5faee7c6e6409343f" title="ripple::OrderBookDB\l::update" alt="" coords="1745,1293,1887,1339"/><area shape="rect" id="node80" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="1317,1403,1443,1450"/><area shape="rect" id="node82" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="1295,1473,1465,1503"/><area shape="rect" id="node89" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="1524,769,1687,815"/><area shape="rect" id="node91" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="1524,716,1687,745"/><area shape="rect" id="node93" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="1535,838,1676,885"/><area shape="rect" id="node103" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="1317,1113,1443,1159"/><area shape="rect" id="node114" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="657,1410,796,1457"/><area shape="rect" id="node119" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="435,1385,597,1431"/><area shape="rect" id="node121" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="645,1071,808,1118"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac95124a3e83c81db53de4b68cdf8f71e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::setBuildingLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a>&#160;</td>
          <td class="paramname"><em>i</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a9e5a001c4c490f9210a91a95084ba070">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00340">340</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00081">mBuildingLedgerSeq</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00767">consensusBuilt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a89e835d27948cd9eb737c05d30cdd55a">mBuildingLedgerSeq</a>.store (i);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ac95124a3e83c81db53de4b68cdf8f71e_icgraph.png" border="0" usemap="#d2/dc7/a00838_ac95124a3e83c81db53de4b68cdf8f71e_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_ac95124a3e83c81db53de4b68cdf8f71e_icgraph" id="d2/dc7/a00838_ac95124a3e83c81db53de4b68cdf8f71e_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a054ed0eb590140ee5d25d8efc609a6a1" title="ripple::LedgerMasterImp\l::consensusBuilt" alt="" coords="216,5,379,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa1492db26502ab92492928444756b69d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::setFullLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>ledger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSynchronous</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isCurrent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ab3d82182ae233875090ea30f934363fa">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00600">600</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d1/d77/a02920_source.html#l00042">ripple::LedgerHistory::addLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00559">fixMismatch()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01368">getLedgerBySeq()</a>, <a class="el" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed">ripple::Application::getOrderBookDB()</a>, <a class="el" href="../../da/d74/a00099.html#a75626a7902ded7d35b15e92bbdcb09bb">ripple::Application::getValidators()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00370">haveLedger()</a>, <a class="el" href="../../dc/d92/a00929.html#a64aed2c8ae6dd215d88b2b17d52b960e">ripple::Validators::Manager::ledgerClosed()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00052">mPubLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00183">setPubLedger()</a>, <a class="el" href="../../dd/d0d/a02929_source.html#l00037">ripple::OrderBookDB::setup()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00175">setValidLedger()</a>, <a class="el" href="../../d5/dd8/a03083_source.html#l00126">ripple::RangeSet::setValue()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00282">forceValid()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00197">pushLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="comment">// A new ledger has been accepted as part of the trusted chain</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Ledger &quot;</span> &lt;&lt; ledger-&gt;getLedgerSeq () &lt;&lt; <span class="stringliteral">&quot; accepted :&quot;</span> &lt;&lt; ledger-&gt;getHash ();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        assert (ledger-&gt;peekAccountStateMap ()-&gt;getHash ().isNonZero ());</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        ledger-&gt;setValidated();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b">addLedger</a>(ledger, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        ledger-&gt;setFull();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        ledger-&gt;pendSaveValidated (isSynchronous, isCurrent);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a597108aeb4003727e9d2bb91960cf980">setValue</a> (ledger-&gt;getLedgerSeq ());</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> (ledger-&gt;getLedgerSeq() &gt; <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6">setValidLedger</a>(ledger);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc7/a00838.html#af10ba0f0e5e469d2ed19227006bba59e">mPubLedger</a>)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9">setPubLedger</a>(ledger);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed">getOrderBookDB</a>().<a class="code" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210">setup</a>(ledger);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">if</span> ((ledger-&gt;getLedgerSeq () != 0) &amp;&amp; <a class="code" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3">haveLedger</a> (ledger-&gt;getLedgerSeq () - 1))</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                <span class="comment">// we think we have the previous ledger, double check</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> prevLedger = <a class="code" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f">getLedgerBySeq</a> (ledger-&gt;getLedgerSeq () - 1);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keywordflow">if</span> (!prevLedger || (prevLedger-&gt;getHash () != ledger-&gt;getParentHash ()))</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Acquired ledger invalidates previous ledger: &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                                       (prevLedger ? <span class="stringliteral">&quot;hashMismatch&quot;</span> : <span class="stringliteral">&quot;missingLedger&quot;</span>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    <a class="code" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c">fixMismatch</a> (ledger);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">if</span> (isCurrent)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a> ().<a class="code" href="../../da/d74/a00099.html#a75626a7902ded7d35b15e92bbdcb09bb">getValidators</a> ().<a class="code" href="../../dc/d92/a00929.html#a64aed2c8ae6dd215d88b2b17d52b960e">ledgerClosed</a> (ledger-&gt;getHash());</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aa1492db26502ab92492928444756b69d_cgraph.png" border="0" usemap="#d2/dc7/a00838_aa1492db26502ab92492928444756b69d_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_aa1492db26502ab92492928444756b69d_cgraph" id="d2/dc7/a00838_aa1492db26502ab92492928444756b69d_cgraph">
<area shape="rect" id="node3" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b" title="ripple::LedgerHistory\l::addLedger" alt="" coords="676,95,817,142"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#aec967cf69ab1d294efab1dd1128b163c" title="ripple::LedgerMasterImp\l::fixMismatch" alt="" coords="217,303,380,350"/><area shape="rect" id="node19" href="../../d2/dc7/a00838.html#a24bd2159ae9b3932a055a8e6cb73e18f" title="ripple::LedgerMasterImp\l::getLedgerBySeq" alt="" coords="437,243,600,290"/><area shape="rect" id="node36" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1645,543,1747,572"/><area shape="rect" id="node65" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3" title="ripple::LedgerMasterImp\l::haveLedger" alt="" coords="437,363,600,410"/><area shape="rect" id="node76" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="235,474,363,521"/><area shape="rect" id="node78" href="../../da/d74/a00099.html#a75626a7902ded7d35b15e92bbdcb09bb" title="ripple::Application\l::getValidators" alt="" coords="236,543,361,590"/><area shape="rect" id="node81" href="../../dc/d92/a00929.html#a64aed2c8ae6dd215d88b2b17d52b960e" title="ripple::Validators\l::Manager::ledgerClosed" alt="" coords="217,613,380,659"/><area shape="rect" id="node83" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="217,682,380,729"/><area shape="rect" id="node85" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="228,751,369,798"/><area shape="rect" id="node106" href="../../d2/dc7/a00838.html#a61f4dc0d3e0e57071acbfcf4e55b3dc6" title="ripple::LedgerMasterImp\l::setValidLedger" alt="" coords="217,922,380,969"/><area shape="rect" id="node115" href="../../d3/d32/a01176.html#a597108aeb4003727e9d2bb91960cf980" title="ripple::RangeSet::setValue" alt="" coords="429,433,608,463"/><area shape="rect" id="node5" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="1155,109,1296,155"/><area shape="rect" id="node7" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="909,95,1051,142"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="665,303,828,350"/><area shape="rect" id="node70" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="684,567,809,614"/><area shape="rect" id="node13" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="887,387,1073,416"/><area shape="rect" id="node15" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="1137,365,1313,395"/><area shape="rect" id="node17" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="1123,423,1328,470"/><area shape="rect" id="node22" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="665,171,828,200"/><area shape="rect" id="node24" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="676,223,817,270"/><area shape="rect" id="node27" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="909,215,1051,262"/><area shape="rect" id="node55" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="1136,301,1315,331"/><area shape="rect" id="node30" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="1155,178,1296,225"/><area shape="rect" id="node32" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="1136,248,1315,277"/><area shape="rect" id="node34" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="1396,178,1551,225"/><area shape="rect" id="node40" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="1403,423,1544,470"/><area shape="rect" id="node42" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="1411,5,1536,51"/><area shape="rect" id="node44" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="1411,354,1536,401"/><area shape="rect" id="node46" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="1395,75,1552,104"/><area shape="rect" id="node50" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="1395,301,1552,331"/><area shape="rect" id="node53" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="1376,248,1571,277"/><area shape="rect" id="node38" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1823,534,1999,581"/><area shape="rect" id="node48" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1619,66,1773,113"/><area shape="rect" id="node67" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="656,373,837,403"/><area shape="rect" id="node72" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="917,594,1043,641"/><area shape="rect" id="node87" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="460,827,577,856"/><area shape="rect" id="node89" href="../../d5/d4c/a01058.html#a342daa95f79e50e5faee7c6e6409343f" title="ripple::OrderBookDB\l::update" alt="" coords="448,634,589,681"/><area shape="rect" id="node102" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="456,703,581,750"/><area shape="rect" id="node104" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="433,773,604,803"/><area shape="rect" id="node91" href="../../d9/d9d/a03417.html#af8a920635395c30b9a35ef301cb6d5bc" title="ripple::updateHelper" alt="" coords="677,637,816,667"/><area shape="rect" id="node97" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="684,690,809,737"/><area shape="rect" id="node99" href="../../d1/de6/a00837.html#a76e6c9a98c9e32b787878c5b6ad810c3" title="ripple::LedgerMaster\l::newOrderBookDB" alt="" coords="677,759,816,806"/><area shape="rect" id="node93" href="../../dd/d5f/a00825.html#a75205d48fe6ecf924cfed352ce21fa0a" title="ripple::Ledger::getBookBase" alt="" coords="887,664,1073,693"/><area shape="rect" id="node108" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="437,931,600,960"/><area shape="rect" id="node111" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="456,983,581,1030"/><area shape="rect" id="node113" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5" title="ripple::NetworkOPs\l::updateLocalTx" alt="" coords="451,1053,587,1099"/><area shape="rect" id="node118" href="../../d3/d32/a01176.html#a48a885310b9aaaace8633ca53f6df1b7" title="ripple::RangeSet::simplify" alt="" coords="661,439,832,468"/><area shape="rect" id="node121" href="../../d9/d9d/a03417.html#a975c0f5f2493f00dbf15e444b085d785" title="ripple::max" alt="" coords="937,491,1023,520"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aa1492db26502ab92492928444756b69d_icgraph.png" border="0" usemap="#d2/dc7/a00838_aa1492db26502ab92492928444756b69d_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_aa1492db26502ab92492928444756b69d_icgraph" id="d2/dc7/a00838_aa1492db26502ab92492928444756b69d_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="216,74,379,121"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="848,143,1011,190"/><area shape="rect" id="node16" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3" title="ripple::LedgerMasterImp\l::forceValid" alt="" coords="216,198,379,245"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="427,74,589,121"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="637,74,800,121"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="848,5,1011,51"/><area shape="rect" id="node14" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="848,74,1011,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aee257c2fb2e816fc7d87b6f558849bcc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::setLedgerRangePresent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>minV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>maxV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a50e92273060967fc8e7b43bcc79cd404">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01411">1411</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, and <a class="el" href="../../d5/dd8/a03083_source.html#l00136">ripple::RangeSet::setRange()</a>.</p>
<div class="fragment"><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> sl (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a116c548bc329d5d89402ccbef956fb0a">setRange</a> (minV, maxV);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_aee257c2fb2e816fc7d87b6f558849bcc_cgraph.png" border="0" usemap="#d2/dc7/a00838_aee257c2fb2e816fc7d87b6f558849bcc_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_aee257c2fb2e816fc7d87b6f558849bcc_cgraph" id="d2/dc7/a00838_aee257c2fb2e816fc7d87b6f558849bcc_cgraph">
<area shape="rect" id="node3" href="../../d3/d32/a01176.html#a116c548bc329d5d89402ccbef956fb0a" title="ripple::RangeSet::setRange" alt="" coords="225,39,407,68"/><area shape="rect" id="node5" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="456,9,637,39"/><area shape="rect" id="node9" href="../../d3/d32/a01176.html#a48a885310b9aaaace8633ca53f6df1b7" title="ripple::RangeSet::simplify" alt="" coords="461,67,632,96"/><area shape="rect" id="node7" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="700,5,876,35"/><area shape="rect" id="node11" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="685,58,891,105"/><area shape="rect" id="node13" href="../../d9/d9d/a03417.html#a975c0f5f2493f00dbf15e444b085d785" title="ripple::max" alt="" coords="745,128,831,157"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad18e6e33330f8bd07505f3215a8d6bb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::setMinValidations </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>v</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a7ebb47268fabd0e6400b1d30a8ed6f49">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01282">1282</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00064">mMinValidations</a>.</p>
<div class="fragment"><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a4a7bb998185ae6768a22a49fc064b871">mMinValidations</a> = v;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae22bac5ee027533eae5515893c8e15f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::setPubLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>l</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00183">183</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00052">mPubLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00077">mPubLedgerClose</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00078">mPubLedgerSeq</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#af10ba0f0e5e469d2ed19227006bba59e">mPubLedger</a> = l;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#ace4219926da351849a60608ae264ecaa">mPubLedgerClose</a> = l-&gt;getCloseTimeNC();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a07a4023248dca4e413091717af04160a">mPubLedgerSeq</a> = l-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ae22bac5ee027533eae5515893c8e15f9_icgraph.png" border="0" usemap="#d2/dc7/a00838_ae22bac5ee027533eae5515893c8e15f9_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_ae22bac5ee027533eae5515893c8e15f9_icgraph" id="d2/dc7/a00838_ae22bac5ee027533eae5515893c8e15f9_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="1080,5,1243,51"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="448,111,611,158"/><area shape="rect" id="node17" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411" title="ripple::LedgerMasterImp\l::findNewLedgersToPublish" alt="" coords="217,111,399,158"/><area shape="rect" id="node20" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="227,181,389,227"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="659,61,821,107"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="869,61,1032,107"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="1080,155,1243,202"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="1080,78,1243,125"/><area shape="rect" id="node23" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3" title="ripple::LedgerMasterImp\l::forceValid" alt="" coords="448,231,611,278"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a61f4dc0d3e0e57071acbfcf4e55b3dc6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::setValidLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>l</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00175">175</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">ripple::Application::getOPs()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00051">mValidLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00079">mValidLedgerClose</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00036">ripple::LedgerHolder::set()</a>, and <a class="el" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5">ripple::NetworkOPs::updateLocalTx()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (l);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a669452386a0abf5655393ca6f7f4f9b5">mValidLedgerClose</a> = l-&gt;getCloseTimeNC();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a> = l-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">getOPs</a>().<a class="code" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5">updateLocalTx</a> (l);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_cgraph.png" border="0" usemap="#d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_cgraph" id="d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="248,13,349,43"/><area shape="rect" id="node7" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="236,66,361,113"/><area shape="rect" id="node9" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="217,136,380,165"/><area shape="rect" id="node11" href="../../dd/dac/a01008.html#ad949d9ad4920e206419e5dc4abc272d5" title="ripple::NetworkOPs\l::updateLocalTx" alt="" coords="231,189,367,235"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="431,5,607,51"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_icgraph.png" border="0" usemap="#d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_icgraph" id="d2/dc7/a00838_a61f4dc0d3e0e57071acbfcf4e55b3dc6_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="1059,5,1221,51"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="216,142,379,189"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="427,111,589,158"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="1059,155,1221,202"/><area shape="rect" id="node19" href="../../d2/dc7/a00838.html#a1c612521c3c403ac534fed26bc4d2eb3" title="ripple::LedgerMasterImp\l::forceValid" alt="" coords="427,231,589,278"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="637,61,800,107"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="848,61,1011,107"/><area shape="rect" id="node15" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="1059,78,1221,125"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac23ef205fdd961805a7d177922601b44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::storeLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>ledger</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#ab51db6d41f7e2f639d4824052184afe0">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00276">276</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d1/d77/a02920_source.html#l00042">ripple::LedgerHistory::addLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>.</p>
<div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment">// Returns true if we already had the ledger</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b">addLedger</a> (ledger, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ac23ef205fdd961805a7d177922601b44_cgraph.png" border="0" usemap="#d2/dc7/a00838_ac23ef205fdd961805a7d177922601b44_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ac23ef205fdd961805a7d177922601b44_cgraph" id="d2/dc7/a00838_ac23ef205fdd961805a7d177922601b44_cgraph">
<area shape="rect" id="node3" href="../../dd/d70/a00835.html#ae34b301afcb6775938c3cca3bcd2ff9b" title="ripple::LedgerHistory\l::addLedger" alt="" coords="217,39,359,86"/><area shape="rect" id="node5" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="409,5,551,51"/><area shape="rect" id="node7" href="../../dd/d55/a01638.html#abf9dcf9333193cda6edfdf88f6351c97" title="ripple::TaggedCache\l::peekMutex" alt="" coords="409,74,551,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4f1fa5a5eaa9fcfea335f54f13d21308"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::sweep </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a97aa72e16b3c948f097930d2e65b2f91">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01421">1421</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>, and <a class="el" href="../../df/d27/a02921_source.html#l00071">ripple::LedgerHistory::sweep()</a>.</p>
<div class="fragment"><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a5c3fbc509e1f5446d85176bac513e74c">sweep</a> ();</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a4f1fa5a5eaa9fcfea335f54f13d21308_cgraph.png" border="0" usemap="#d2/dc7/a00838_a4f1fa5a5eaa9fcfea335f54f13d21308_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a4f1fa5a5eaa9fcfea335f54f13d21308_cgraph" id="d2/dc7/a00838_a4f1fa5a5eaa9fcfea335f54f13d21308_cgraph">
<area shape="rect" id="node3" href="../../dd/d70/a00835.html#a5c3fbc509e1f5446d85176bac513e74c" title="ripple::LedgerHistory\l::sweep" alt="" coords="217,5,359,51"/><area shape="rect" id="node5" href="../../dd/d55/a01638.html#aa8f0b1371bd083bcb602f70ba5e0d66f" title="ripple::TaggedCache\l::sweep" alt="" coords="409,5,551,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6fde97247627301874e756267c2b7abf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::switchLedgers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>lastClosed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>current</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#af249e0b1768882343f37df9720aeb25d">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00252">252</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00659">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00050">mClosedLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00047">mEngine</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00036">ripple::LedgerHolder::set()</a>, and <a class="el" href="../../da/d5d/a03068_source.html#l00081">ripple::TransactionEngine::setLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        assert (lastClosed &amp;&amp; current);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            lastClosed-&gt;setClosed ();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            lastClosed-&gt;setAccepted ();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (current);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#aafddd7a3f3c8da90a1f8c374f05b1dca">mClosedLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af">set</a> (lastClosed);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            assert (!current-&gt;isClosed ());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a1aae0b5a4e5ea0d26af6e28cceea359e">mEngine</a>.<a class="code" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a">setLedger</a> (current);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f">checkAccept</a> (lastClosed);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a6fde97247627301874e756267c2b7abf_cgraph.png" border="0" usemap="#d2/dc7/a00838_a6fde97247627301874e756267c2b7abf_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a6fde97247627301874e756267c2b7abf_cgraph" id="d2/dc7/a00838_a6fde97247627301874e756267c2b7abf_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a35095334931758d1ce432130aa8b743f" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="220,115,383,162"/><area shape="rect" id="node67" href="../../d3/d13/a00836.html#a4a8651dad58eadc278ad8db27acaa0af" title="ripple::LedgerHolder::set" alt="" coords="220,185,383,215"/><area shape="rect" id="node69" href="../../d9/dc5/a01705.html#a956d5ecb15bdc1a78656f91c00c06b1a" title="ripple::TransactionEngine\l::setLedger" alt="" coords="217,238,385,285"/><area shape="rect" id="node5" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="436,5,588,51"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1133,208,1235,237"/><area shape="rect" id="node11" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="899,55,1024,102"/><area shape="rect" id="node23" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="443,265,581,311"/><area shape="rect" id="node25" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="441,195,583,242"/><area shape="rect" id="node9" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1311,199,1487,246"/><area shape="rect" id="node13" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1336,46,1461,93"/><area shape="rect" id="node17" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1109,84,1259,113"/><area shape="rect" id="node19" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1135,137,1233,167"/><area shape="rect" id="node15" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1537,267,1687,296"/><area shape="rect" id="node21" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1344,137,1453,167"/><area shape="rect" id="node27" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="656,357,797,403"/><area shape="rect" id="node29" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="656,195,797,242"/><area shape="rect" id="node31" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="637,304,816,333"/><area shape="rect" id="node33" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="884,175,1039,222"/><area shape="rect" id="node36" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="891,245,1032,291"/><area shape="rect" id="node39" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="899,314,1024,361"/><area shape="rect" id="node41" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="883,488,1040,517"/><area shape="rect" id="node62" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="883,435,1040,464"/><area shape="rect" id="node65" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="864,541,1059,571"/><area shape="rect" id="node43" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1107,746,1261,793"/><area shape="rect" id="node45" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1107,261,1261,307"/><area shape="rect" id="node47" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1107,330,1261,377"/><area shape="rect" id="node49" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1107,399,1261,446"/><area shape="rect" id="node51" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1107,469,1261,515"/><area shape="rect" id="node53" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1107,538,1261,585"/><area shape="rect" id="node55" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1121,677,1247,723"/><area shape="rect" id="node60" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1107,607,1261,654"/><area shape="rect" id="node57" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1325,477,1472,507"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0db2f2d92f5bf50222003030c0bac415"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::tryAdvance </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#aa9fc2803ac02924b512a7f7712234563">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01106">1106</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">ripple::JobQueue::addJob()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00856">advanceThread()</a>, <a class="el" href="../../d0/d75/a03105_source.html#l00028">BIND_TYPE</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00065">ripple::LedgerHolder::empty()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">ripple::Application::getJobQueue()</a>, <a class="el" href="../../d8/d96/a03116_source.html#l00049">ripple::jtADVANCE</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00069">mAdvanceThread</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00070">mAdvanceWork</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00051">mValidLedger</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00197">pushLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00468">tryFill()</a>.</p>
<div class="fragment"><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="comment">// Can&#39;t advance without at least one fully-valid ledger</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#a77c7fd65a7fe8c0e3bd50eb6e0a62f83">mAdvanceWork</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc7/a00838.html#aba6f081f81dfd2020496d9d10659b3e2">mAdvanceThread</a> &amp;&amp; !<a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c">empty</a> ())</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#aba6f081f81dfd2020496d9d10659b3e2">mAdvanceThread</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">getJobQueue</a> ().<a class="code" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">addJob</a> (<a class="code" href="../../d9/d9d/a03417.html#ae0f54f8ce649d639bf3e2b295347e17aac6876ad6800d8cd0a4c9a306baf35204">jtADVANCE</a>, <span class="stringliteral">&quot;advanceLedger&quot;</span>,</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                                            <a class="code" href="../../d0/d75/a03105.html#a6c0c867ff5909fab21adb4d253d4bcc5">BIND_TYPE</a> (&amp;<a class="code" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7">LedgerMasterImp::advanceThread</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_cgraph.png" border="0" usemap="#d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_cgraph" id="d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_cgraph">
<area shape="rect" id="node3" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="1136,264,1307,293"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="216,869,379,915"/><area shape="rect" id="node25" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1171,559,1272,588"/><area shape="rect" id="node44" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="1159,1090,1284,1137"/><area shape="rect" id="node124" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="439,938,577,985"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="427,869,589,915"/><area shape="rect" id="node10" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="655,629,817,675"/><area shape="rect" id="node14" href="../../dd/dac/a01008.html#a7ebeb2a8f947b729b0a8a1aba97d3b54" title="ripple::NetworkOPs\l::clearNeedNetworkLedger" alt="" coords="648,869,824,915"/><area shape="rect" id="node16" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="909,818,1061,865"/><area shape="rect" id="node18" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411" title="ripple::LedgerMasterImp\l::findNewLedgersToPublish" alt="" coords="645,938,827,985"/><area shape="rect" id="node29" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="916,1199,1055,1246"/><area shape="rect" id="node37" href="../../d2/dc7/a00838.html#ae22bac5ee027533eae5515893c8e15f9" title="ripple::LedgerMasterImp\l::setPubLedger" alt="" coords="904,610,1067,657"/><area shape="rect" id="node41" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="1163,1365,1280,1395"/><area shape="rect" id="node48" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076" title="ripple::LedgerMaster\l::getCompleteLedgers" alt="" coords="661,1629,811,1675"/><area shape="rect" id="node51" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb" title="ripple::Application\l::getFeeTrack" alt="" coords="673,1698,799,1745"/><area shape="rect" id="node53" href="../../d2/dc7/a00838.html#a489d89a5a5dc4086f03a891a5d85a56b" title="ripple::LedgerMasterImp\l::getFetchPack" alt="" coords="655,1405,817,1451"/><area shape="rect" id="node60" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459" title="ripple::Ledger::getHashBy\lIndex" alt="" coords="649,1559,823,1606"/><area shape="rect" id="node78" href="../../dc/d0c/a00783.html#a5c2111a6134d3f9eae89261066018ade" title="ripple::JobQueue::getJob\lCount" alt="" coords="653,1767,819,1814"/><area shape="rect" id="node81" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="655,1077,817,1123"/><area shape="rect" id="node86" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="665,1007,807,1054"/><area shape="rect" id="node89" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="673,1837,799,1883"/><area shape="rect" id="node91" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="673,213,799,259"/><area shape="rect" id="node93" href="../../d3/db8/a00316.html#a072203ed975dafbf825044b054ff5a0a" title="ripple::Config::getSize" alt="" coords="661,283,811,312"/><area shape="rect" id="node95" href="../../d8/d86/a00703.html#abfa7313dd062dc0f416dfa71d8dad546" title="ripple::InboundLedgers\l::isFailure" alt="" coords="660,386,812,433"/><area shape="rect" id="node97" href="../../dd/d94/a00888.html#aad042032160b77a02227571a8a111fcf" title="ripple::LoadFeeTrack\l::isLoadedLocal" alt="" coords="664,506,808,553"/><area shape="rect" id="node99" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="673,1146,799,1193"/><area shape="rect" id="node102" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f" title="ripple::LedgerMasterImp\l::newPFWork" alt="" coords="904,357,1067,403"/><area shape="rect" id="node107" href="../../d3/d32/a01176.html#a5dbcae348cae3718537188a256568f61" title="ripple::RangeSet::prevMissing" alt="" coords="637,576,835,605"/><area shape="rect" id="node109" href="../../dd/dac/a01008.html#a024e36c725c9ebef73c42d943ffacc43" title="ripple::NetworkOPs\l::pubLedger" alt="" coords="668,1215,804,1262"/><area shape="rect" id="node111" href="../../d2/dc7/a00838.html#aa1492db26502ab92492928444756b69d" title="ripple::LedgerMasterImp\l::setFullLedger" alt="" coords="655,749,817,795"/><area shape="rect" id="node118" href="../../d1/de6/a00837.html#a9e5a8da329a1f130f91f2a9d26b28310" title="ripple::LedgerMaster\l::shouldAcquire" alt="" coords="667,1335,805,1382"/><area shape="rect" id="node120" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="655,93,817,139"/><area shape="rect" id="node12" href="../../d3/d32/a01176.html#a2af1f1b029e45a0a05ae8c21ed697b1a" title="ripple::RangeSet::clearValue" alt="" coords="892,507,1079,536"/><area shape="rect" id="node20" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="909,938,1061,985"/><area shape="rect" id="node23" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="904,1008,1067,1037"/><area shape="rect" id="node31" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="915,1061,1056,1107"/><area shape="rect" id="node33" href="../../da/d74/a00099.html#ac885cb8bec6f3b9b8bdd5f2a44d07fed" title="ripple::Application\l::getOrderBookDB" alt="" coords="921,749,1049,795"/><area shape="rect" id="node35" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="923,1130,1048,1177"/><area shape="rect" id="node39" href="../../d5/d4c/a01058.html#a7e5531b9b1df741c8db62d884b84d210" title="ripple::OrderBookDB\l::setup" alt="" coords="915,679,1056,726"/><area shape="rect" id="node27" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1356,550,1532,597"/><area shape="rect" id="node55" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90" title="ripple::Overlay::getActive\lPeers" alt="" coords="901,1319,1069,1366"/><area shape="rect" id="node58" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee" title="ripple::Application\l::overlay" alt="" coords="923,1389,1048,1435"/><area shape="rect" id="node62" href="../../d5/db5/a00374.html#a2d9feb6cec0521fbfdfb40b49b861282" title="ripple::Database::endIterRows" alt="" coords="887,1560,1084,1589"/><area shape="rect" id="node64" href="../../d5/db5/a00374.html#ae13874bae245fcea24edd3945ff16723" title="ripple::Database::executeSQL" alt="" coords="887,1613,1084,1643"/><area shape="rect" id="node67" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="915,1666,1056,1713"/><area shape="rect" id="node69" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="923,1735,1048,1782"/><area shape="rect" id="node71" href="../../d5/db5/a00374.html#a5695e1a1b8e65383924a03d29c81a4f2" title="ripple::Database::getStr" alt="" coords="905,1805,1065,1835"/><area shape="rect" id="node73" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="923,1858,1048,1905"/><area shape="rect" id="node75" href="../../d5/db5/a00374.html#ab79c6f2e2ea71a94c02da740740ee934" title="ripple::Database::startIterRows" alt="" coords="884,1928,1087,1957"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_icgraph.png" border="0" usemap="#d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_icgraph" id="d2/dc7/a00838_a0db2f2d92f5bf50222003030c0bac415_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="216,5,379,51"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="216,74,379,121"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="216,143,379,190"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="427,143,589,190"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="637,174,800,221"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab96778e6d7821b274d410a6cc1f9e0dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::tryFill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d96/a00782.html">Job</a> &amp;&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>ledger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00468">468</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../dd/d3f/a02912_source.html#l00906">ripple::Ledger::getHashesByIndex()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00370">haveLedger()</a>, <a class="el" href="../../da/d74/a00099.html#a97444297b943202db3e5ef166f91f12f">ripple::Application::isShutdown()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00060">mCompleteLedgers</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00059">mCompleteLock</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00071">mFillInProgress</a>, <a class="el" href="../../d5/dd8/a03083_source.html#l00136">ripple::RangeSet::setRange()</a>, <a class="el" href="../../d2/d7a/a03115_source.html#l00066">ripple::Job::shouldCancel()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> seq = ledger-&gt;getLedgerSeq ();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        uint256 prevHash = ledger-&gt;getParentHash ();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        std::map&lt; std::uint32_t, std::pair&lt;uint256, uint256&gt; &gt; ledgerHashes;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> minHas = ledger-&gt;getLedgerSeq ();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> maxHas = ledger-&gt;getLedgerSeq ();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">while</span> (! job.shouldCancel() &amp;&amp; seq &gt; 0)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                minHas = seq;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                --seq;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3">haveLedger</a> (seq))</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            std::map&lt; std::uint32_t, std::pair&lt;uint256, uint256&gt; &gt;::iterator it = ledgerHashes.find (seq);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span> (it == ledgerHashes.end ())</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a97444297b943202db3e5ef166f91f12f">isShutdown</a> ())</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a116c548bc329d5d89402ccbef956fb0a">setRange</a> (minHas, maxHas);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                maxHas = minHas;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                ledgerHashes = <a class="code" href="../../dd/d5f/a00825.html#ae1f577d77b4c2146cc52aa30c4dcc3a2">Ledger::getHashesByIndex</a> ((seq &lt; 500) ? 0 : (seq - 499), seq);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                it = ledgerHashes.find (seq);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="keywordflow">if</span> (it == ledgerHashes.end ())</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">if</span> (it-&gt;second.first != prevHash)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            prevHash = it-&gt;second.second;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#a96707096d2bede3f4ef8308ff724611b">mCompleteLock</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a7d42865d1c905dd9bc86fede85c43cbe">mCompleteLedgers</a>.<a class="code" href="../../d3/d32/a01176.html#a116c548bc329d5d89402ccbef956fb0a">setRange</a> (minHas, maxHas);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a222e2eaaaf1e2ed988284efe27848edc">mFillInProgress</a> = 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415">tryAdvance</a>();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_cgraph.png" border="0" usemap="#d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_cgraph" id="d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1215,801,1316,831"/><area shape="rect" id="node7" href="../../dd/d5f/a00825.html#ae1f577d77b4c2146cc52aa30c4dcc3a2" title="ripple::Ledger::getHashes\lByIndex" alt="" coords="937,295,1108,342"/><area shape="rect" id="node40" href="../../d2/dc7/a00838.html#ac24e067a552cb3b6d0409fdadc4cf7f3" title="ripple::LedgerMasterImp\l::haveLedger" alt="" coords="227,1101,389,1147"/><area shape="rect" id="node46" href="../../da/d74/a00099.html#a97444297b943202db3e5ef166f91f12f" title="ripple::Application\l::isShutdown" alt="" coords="245,1223,371,1270"/><area shape="rect" id="node48" href="../../d3/d32/a01176.html#a116c548bc329d5d89402ccbef956fb0a" title="ripple::RangeSet::setRange" alt="" coords="217,1171,399,1200"/><area shape="rect" id="node57" href="../../da/d96/a00782.html#a871bab7c19f3bc9e4c6b0780276fde5b" title="ripple::Job::shouldCancel" alt="" coords="224,1293,392,1323"/><area shape="rect" id="node59" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="227,899,389,946"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1417,793,1593,839"/><area shape="rect" id="node9" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="1188,58,1343,105"/><area shape="rect" id="node11" href="../../d5/db5/a00374.html#a2d9feb6cec0521fbfdfb40b49b861282" title="ripple::Database::endIterRows" alt="" coords="1167,320,1364,349"/><area shape="rect" id="node13" href="../../d5/db5/a00374.html#ae13874bae245fcea24edd3945ff16723" title="ripple::Database::executeSQL" alt="" coords="1167,373,1364,403"/><area shape="rect" id="node16" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="1195,426,1336,473"/><area shape="rect" id="node18" href="../../d6/db8/a00376.html#ac502024cd3201e9e9a9deeeca054675f" title="ripple::DatabaseCon\l::getDBLock" alt="" coords="1195,127,1336,174"/><area shape="rect" id="node20" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="1203,495,1328,542"/><area shape="rect" id="node22" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="1168,5,1363,35"/><area shape="rect" id="node24" href="../../d5/db5/a00374.html#a5695e1a1b8e65383924a03d29c81a4f2" title="ripple::Database::getStr" alt="" coords="1185,565,1345,595"/><area shape="rect" id="node28" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="1203,731,1328,778"/><area shape="rect" id="node32" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1203,197,1328,243"/><area shape="rect" id="node38" href="../../d5/db5/a00374.html#ab79c6f2e2ea71a94c02da740740ee934" title="ripple::Database::startIterRows" alt="" coords="1164,267,1367,296"/><area shape="rect" id="node26" href="../../d5/db5/a00374.html#a5b7ed864f9f854446470c987b37ebecc" title="ripple::Database::getCol\lNumber" alt="" coords="1424,557,1587,603"/><area shape="rect" id="node30" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="1443,1027,1568,1074"/><area shape="rect" id="node34" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1432,205,1579,235"/><area shape="rect" id="node36" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1644,205,1793,235"/><area shape="rect" id="node42" href="../../d3/d32/a01176.html#a560a4df0d1e7884177906908f5addee4" title="ripple::RangeSet::hasValue" alt="" coords="448,1109,629,1139"/><area shape="rect" id="node44" href="../../d3/d32/a01176.html#aa6967e4389abee4356efbf38a6383acb" title="ripple::RangeSet::contains" alt="" coords="692,1109,868,1139"/><area shape="rect" id="node51" href="../../d3/d32/a01176.html#a48a885310b9aaaace8633ca53f6df1b7" title="ripple::RangeSet::simplify" alt="" coords="453,1171,624,1200"/><area shape="rect" id="node53" href="../../d3/d32/a01176.html#a36db87b718539273de7a17b8e990fbf6" title="ripple::RangeSet::checkInternal\lConsistency" alt="" coords="677,1162,883,1209"/><area shape="rect" id="node55" href="../../d9/d9d/a03417.html#a975c0f5f2493f00dbf15e444b085d785" title="ripple::max" alt="" coords="737,1232,823,1261"/><area shape="rect" id="node61" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="937,1659,1108,1688"/><area shape="rect" id="node63" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="457,930,620,977"/><area shape="rect" id="node104" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="960,535,1085,582"/><area shape="rect" id="node119" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="711,886,849,933"/><area shape="rect" id="node65" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="699,967,861,1014"/><area shape="rect" id="node68" href="../../d2/dc7/a00838.html#a0c839d3083da43e7f837cfa14b09b609" title="ripple::LedgerMasterImp\l::clearLedger" alt="" coords="941,1157,1104,1203"/><area shape="rect" id="node70" href="../../dd/dac/a01008.html#a7ebeb2a8f947b729b0a8a1aba97d3b54" title="ripple::NetworkOPs\l::clearNeedNetworkLedger" alt="" coords="935,1226,1111,1273"/><area shape="rect" id="node72" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="1189,1338,1341,1385"/><area shape="rect" id="node74" href="../../d2/dc7/a00838.html#a1a811affe449990c43b8e4ea1eb80411" title="ripple::LedgerMasterImp\l::findNewLedgersToPublish" alt="" coords="932,1087,1113,1134"/><area shape="rect" id="node78" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="1196,1503,1335,1550"/><area shape="rect" id="node82" href="../../d1/de6/a00837.html#a5d4563a377393b7350c8a6faa42a7076" title="ripple::LedgerMaster\l::getCompleteLedgers" alt="" coords="948,1295,1097,1342"/><area shape="rect" id="node84" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="964,1365,1081,1395"/><area shape="rect" id="node86" href="../../da/d74/a00099.html#a426bdbb87f6dc2082cf6f418526901cb" title="ripple::Application\l::getFeeTrack" alt="" coords="960,1418,1085,1465"/><area shape="rect" id="node88" href="../../d2/dc7/a00838.html#a489d89a5a5dc4086f03a891a5d85a56b" title="ripple::LedgerMasterImp\l::getFetchPack" alt="" coords="941,967,1104,1014"/><area shape="rect" id="node91" href="../../dd/d5f/a00825.html#af710408f1b3e85fd1fc0f4a74abe5459" title="ripple::Ledger::getHashBy\lIndex" alt="" coords="936,365,1109,411"/><area shape="rect" id="node102" href="../../dc/d0c/a00783.html#a5c2111a6134d3f9eae89261066018ade" title="ripple::JobQueue::getJob\lCount" alt="" coords="940,1487,1105,1534"/><area shape="rect" id="node106" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="1184,1027,1347,1074"/><area shape="rect" id="node109" href="../../dd/d70/a00835.html#a2ee809a129221dcf26b25a709fd732c6" title="ripple::LedgerHistory\l::getLedgerBySeq" alt="" coords="952,605,1093,651"/><area shape="rect" id="node111" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="960,674,1085,721"/><area shape="rect" id="node113" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="960,743,1085,790"/><area shape="rect" id="node115" href="../../d3/db8/a00316.html#a072203ed975dafbf825044b054ff5a0a" title="ripple::Config::getSize" alt="" coords="948,813,1097,843"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_icgraph.png" border="0" usemap="#d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_icgraph" id="d2/dc7/a00838_ab96778e6d7821b274d410a6cc1f9e0dd_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="216,9,379,55"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="427,9,589,55"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="637,39,800,86"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="848,5,1011,51"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="848,74,1011,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98c6c7ec9fca47d5b807dd68635027e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::tune </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>age</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a3e03fd940382520dbac5cebf7f614214">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01416">1416</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l00055">mLedgerHistory</a>, and <a class="el" href="../../d1/d77/a02920_source.html#l00188">ripple::LedgerHistory::tune()</a>.</p>
<div class="fragment"><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="../../d2/dc7/a00838.html#aef3110d1d629f45f527dab691daf3375">mLedgerHistory</a>.<a class="code" href="../../dd/d70/a00835.html#a45d358b94342ad934f4739b78035ff99">tune</a> (size, age);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a98c6c7ec9fca47d5b807dd68635027e8_cgraph.png" border="0" usemap="#d2/dc7/a00838_a98c6c7ec9fca47d5b807dd68635027e8_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a98c6c7ec9fca47d5b807dd68635027e8_cgraph" id="d2/dc7/a00838_a98c6c7ec9fca47d5b807dd68635027e8_cgraph">
<area shape="rect" id="node3" href="../../dd/d70/a00835.html#a45d358b94342ad934f4739b78035ff99" title="ripple::LedgerHistory\l::tune" alt="" coords="217,39,359,86"/><area shape="rect" id="node5" href="../../dd/d55/a01638.html#a1397c8f83caf8c59a059ab869eaa7e50" title="ripple::TaggedCache\l::setTargetAge" alt="" coords="409,5,551,51"/><area shape="rect" id="node7" href="../../dd/d55/a01638.html#a2b0f99a8b2d0752fc37a54dea2b429cf" title="ripple::TaggedCache\l::setTargetSize" alt="" coords="409,74,551,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0b6c134c1aa3633426a413ee99c6e6cf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerMasterImp::updatePaths </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d96/a00782.html">Job</a> &amp;&#160;</td>
          <td class="paramname"><em>job</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01150">1150</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d7/dfc/a02922_source.html#l00065">ripple::LedgerHolder::empty()</a>, <a class="el" href="../../dc/d86/a02909_source.html#l00042">ripple::InboundLedger::fcGENERIC</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d2/d7a/a03115_source.html#l00055">ripple::Job::getCancelCallback()</a>, <a class="el" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567">ripple::NetworkOPs::getCloseTimeNC()</a>, <a class="el" href="../../d0/dc2/a02477_source.html#l00647">ripple::getConfig()</a>, <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>, <a class="el" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">ripple::Application::getOPs()</a>, <a class="el" href="../../da/d74/a00099.html#a5368183e92fc6cd7a985295d258ec892">ripple::Application::getPathRequests()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00045">m_mutex</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00049">mCurrentLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00075">mPathFindNewRequest</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00073">mPathFindThread</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00053">mPathLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00051">mValidLedger</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00080">mValidLedgerSeq</a>, <a class="el" href="../../d2/d7a/a03115_source.html#l00066">ripple::Job::shouldCancel()</a>, <a class="el" href="../../d6/d58/a02993_source.html#l00047">ripple::PathRequests::updateAll()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01238">newPFWork()</a>.</p>
<div class="fragment"><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getOPs().isNeedNetworkLedger () || <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c">empty</a> ())</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                --<a class="code" href="../../d2/dc7/a00838.html#acf34ea2e71eef3806948648a302cc357">mPathFindThread</a>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">while</span> (! job.shouldCancel())</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> lastLedger;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <a class="code" href="../../d2/dc7/a00838.html#a2029911c2cd2ed209f4cbe0746c16740">ScopedLockType</a> ml (<a class="code" href="../../d2/dc7/a00838.html#ad0b2af2d9d75a761814d35b46fffee50">m_mutex</a>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                    (!<a class="code" href="../../d2/dc7/a00838.html#aa3c17ca4f7adc29acb6f4f54d44b7e41">mPathLedger</a> || (<a class="code" href="../../d2/dc7/a00838.html#aa3c17ca4f7adc29acb6f4f54d44b7e41">mPathLedger</a>-&gt;getLedgerSeq() != <a class="code" href="../../d2/dc7/a00838.html#a072102635fb385fea58b847052530ba3">mValidLedgerSeq</a>)))</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                { <span class="comment">// We have a new valid ledger since the last full pathfinding</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                    <a class="code" href="../../d2/dc7/a00838.html#aa3c17ca4f7adc29acb6f4f54d44b7e41">mPathLedger</a> = <a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    lastLedger = <a class="code" href="../../d2/dc7/a00838.html#aa3c17ca4f7adc29acb6f4f54d44b7e41">mPathLedger</a>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc7/a00838.html#a2ccb481e67e01950bdf802a7a2e90192">mPathFindNewRequest</a>)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                { <span class="comment">// We have a new request but no new ledger</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    lastLedger = <a class="code" href="../../d2/dc7/a00838.html#af470efe211c7a2c4fb9b7591da41f240">mCurrentLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                { <span class="comment">// Nothing to do</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                    --<a class="code" href="../../d2/dc7/a00838.html#acf34ea2e71eef3806948648a302cc357">mPathFindThread</a>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().RUN_STANDALONE)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            { <span class="comment">// don&#39;t pathfind with a ledger that&#39;s more than 60 seconds old</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                <a class="code" href="../../db/d86/a02663.html#adec1df1b8b51cb32b77e5b86fff46471">std::int64_t</a> age = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc">getOPs</a>().<a class="code" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567">getCloseTimeNC</a>();</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                age -= <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d86/a02663.html#adec1df1b8b51cb32b77e5b86fff46471">std::int64_t</a><span class="keyword">&gt;</span> (lastLedger-&gt;getCloseTimeNC());</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                <span class="keywordflow">if</span> (age &gt; 60)</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Published ledger too old for updating paths&quot;</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                    --<a class="code" href="../../d2/dc7/a00838.html#acf34ea2e71eef3806948648a302cc357">mPathFindThread</a>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a5368183e92fc6cd7a985295d258ec892">getPathRequests</a>().<a class="code" href="../../da/d93/a01084.html#a12e05e9a990cbd8927fcc5b710987089">updateAll</a> (lastLedger, job.getCancelCallback ());</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">catch</span> (SHAMapMissingNode&amp;)</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d1/de6/a00837.html#aef424e9dd4c80d8e29a3d96739dd8f9d">LedgerMaster</a>) &lt;&lt; <span class="stringliteral">&quot;Missing node detected during pathfinding&quot;</span>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a>(lastLedger-&gt;getHash (), lastLedger-&gt;getLedgerSeq (),</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                    <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_cgraph.png" border="0" usemap="#d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_cgraph" id="d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_cgraph">
<area shape="rect" id="node3" href="../../d3/d13/a00836.html#a87cfd83ef66929c86ce7a0cf6050c02c" title="ripple::LedgerHolder\l::empty" alt="" coords="247,5,385,51"/><area shape="rect" id="node5" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="240,74,392,121"/><area shape="rect" id="node7" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="235,144,397,173"/><area shape="rect" id="node9" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="485,380,587,409"/><area shape="rect" id="node13" href="../../da/d96/a00782.html#a1b3e7432fc6096252741938e05ee3135" title="ripple::Job::getCancelCallback" alt="" coords="216,248,416,277"/><area shape="rect" id="node15" href="../../dd/dac/a01008.html#aeeadbf915d62f00319ce782da0990567" title="ripple::NetworkOPs\l::getCloseTimeNC" alt="" coords="248,301,384,347"/><area shape="rect" id="node17" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="257,371,375,400"/><area shape="rect" id="node19" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="247,423,385,470"/><area shape="rect" id="node21" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="253,493,379,539"/><area shape="rect" id="node23" href="../../da/d74/a00099.html#a5368183e92fc6cd7a985295d258ec892" title="ripple::Application\l::getPathRequests" alt="" coords="251,562,381,609"/><area shape="rect" id="node25" href="../../da/d96/a00782.html#a871bab7c19f3bc9e4c6b0780276fde5b" title="ripple::Job::shouldCancel" alt="" coords="232,632,400,661"/><area shape="rect" id="node27" href="../../da/d93/a01084.html#a12e05e9a990cbd8927fcc5b710987089" title="ripple::PathRequests\l::updateAll" alt="" coords="244,685,388,731"/><area shape="rect" id="node11" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="657,371,833,418"/><area shape="rect" id="node30" href="../../da/d93/a01084.html#a164386fea7cfb04118b4fec9ae02d567" title="ripple::PathRequests\l::getLineCache" alt="" coords="464,615,608,662"/><area shape="rect" id="node32" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="473,685,599,731"/><area shape="rect" id="node34" href="../../d1/de6/a00837.html#af917115a5a13970c48e756c0d50aa0ae" title="ripple::LedgerMaster\l::isNewPathRequest" alt="" coords="465,754,607,801"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_icgraph.png" border="0" usemap="#d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_icgraph" alt=""/></div>
<map name="d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_icgraph" id="d2/dc7/a00838_a0b6c134c1aa3633426a413ee99c6e6cf_icgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#ad047aff1c1ccfe1d8ebd0da6b78f8e2f" title="ripple::LedgerMasterImp\l::newPFWork" alt="" coords="216,179,379,226"/><area shape="rect" id="node5" href="../../d2/dc7/a00838.html#a1137d82f75868275f3380ffe9673d95f" title="ripple::LedgerMasterImp\l::doAdvance" alt="" coords="427,110,589,157"/><area shape="rect" id="node18" href="../../d2/dc7/a00838.html#ace7bc6f1e79ecec3295256ba3000c8fb" title="ripple::LedgerMasterImp\l::newOrderBookDB" alt="" coords="427,179,589,226"/><area shape="rect" id="node20" href="../../d2/dc7/a00838.html#a80899acf017a1d4adc39aab8fddb6d2a" title="ripple::LedgerMasterImp\l::newPathRequest" alt="" coords="427,249,589,295"/><area shape="rect" id="node7" href="../../d2/dc7/a00838.html#a70c3001914f0eb02e756c5f132d764f7" title="ripple::LedgerMasterImp\l::advanceThread" alt="" coords="637,78,800,125"/><area shape="rect" id="node9" href="../../d2/dc7/a00838.html#a0db2f2d92f5bf50222003030c0bac415" title="ripple::LedgerMasterImp\l::tryAdvance" alt="" coords="848,75,1011,122"/><area shape="rect" id="node11" href="../../d2/dc7/a00838.html#afef5d9e765e612499355e2b1caa27a91" title="ripple::LedgerMasterImp\l::checkAccept" alt="" coords="1059,5,1221,51"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#a340c1c668d233c98f5ac0e3a62533b6c" title="ripple::LedgerMasterImp\l::pushLedger" alt="" coords="1059,74,1221,121"/><area shape="rect" id="node15" href="../../d2/dc7/a00838.html#ab96778e6d7821b274d410a6cc1f9e0dd" title="ripple::LedgerMasterImp\l::tryFill" alt="" coords="1059,143,1221,190"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a389a31d85ac8bba591f60c9b8390a43e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> ripple::LedgerMasterImp::walkHashBySeq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Walk to a ledger's hash using the skip list </p>

<p>Implements <a class="el" href="../../d1/de6/a00837.html#aeca2e8ec457f78d98fa2c8522f9fd728">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01319">1319</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d7/dfc/a02922_source.html#l00050">ripple::LedgerHolder::get()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00051">mValidLedger</a>.</p>
<div class="fragment"><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        uint256 ledgerHash;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> referenceLedger;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        referenceLedger = <a class="code" href="../../d2/dc7/a00838.html#a9ff9ad643a573106cc5e9d1aab768b5f">mValidLedger</a>.<a class="code" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960">get</a> ();</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        <span class="keywordflow">if</span> (referenceLedger)</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            ledgerHash = <a class="code" href="../../d2/dc7/a00838.html#a389a31d85ac8bba591f60c9b8390a43e">walkHashBySeq</a> (index, referenceLedger);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">return</span> ledgerHash;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a389a31d85ac8bba591f60c9b8390a43e_cgraph.png" border="0" usemap="#d2/dc7/a00838_a389a31d85ac8bba591f60c9b8390a43e_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a389a31d85ac8bba591f60c9b8390a43e_cgraph" id="d2/dc7/a00838_a389a31d85ac8bba591f60c9b8390a43e_cgraph">
<area shape="rect" id="node3" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="217,13,380,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a12e5d20e873fd1ff626ca7e4d7e726f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> ripple::LedgerMasterImp::walkHashBySeq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a5e872c651337cffea1617f84474efea9">Ledger::ref</a>&#160;</td>
          <td class="paramname"><em>referenceLedger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Walk the chain of ledger hashed to determine the hash of the ledger with the specified index. The referenceLedger is used as the base of the chain and should be fully validated and must not precede the target index. This function may throw if nodes from the reference ledger or any prior ledger are not present in the node store. </p>

<p>Implements <a class="el" href="../../d1/de6/a00837.html#a7662d1476069bdbb2bc289b845fe0df8">ripple::LedgerMaster</a>.</p>

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l01337">1337</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>References <a class="el" href="../../d6/df9/a02923_source.html#l01296">findAcquireLedger()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00147">ripple::base_uint&lt; BITS &gt;::isNonZero()</a>, and <a class="el" href="../../dd/dfa/a02824_source.html#l00138">ripple::base_uint&lt; BITS &gt;::isZero()</a>.</p>
<div class="fragment"><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        uint256 ledgerHash;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">if</span> (!referenceLedger || (referenceLedger-&gt;getLedgerSeq() &lt; index))</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">return</span> ledgerHash; <span class="comment">// Nothing we can do. No validated ledger.</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="comment">// See if the hash for the ledger we need is in the reference ledger</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        ledgerHash = referenceLedger-&gt;getLedgerHash (index);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="keywordflow">if</span> (ledgerHash.isZero())</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        { </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="comment">// No, Try to get another ledger that might have the hash we need</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            <span class="comment">// Compute the index and hash of a ledger that will have the hash we need</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> refIndex = (index + 255) &amp; (~255);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> refHash = referenceLedger-&gt;getLedgerHash (refIndex);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <span class="keywordtype">bool</span> <span class="keyword">const</span> nonzero (refHash.isNonZero ());</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            assert (nonzero);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">if</span> (nonzero)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                <span class="comment">// We found the hash and sequence of a better reference ledger</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger = <a class="code" href="../../d2/dc7/a00838.html#aeb97ab084032f9ba66f1b1dc6b57d1c6">findAcquireLedger</a> (refIndex, refHash);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                <span class="keywordflow">if</span> (ledger)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                    ledgerHash = ledger-&gt;getLedgerHash (index);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                    assert (ledgerHash.isNonZero());</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            }</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="keywordflow">return</span> ledgerHash;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dc7/a00838_a12e5d20e873fd1ff626ca7e4d7e726f9_cgraph.png" border="0" usemap="#d2/dc7/a00838_a12e5d20e873fd1ff626ca7e4d7e726f9_cgraph" alt=""/></div>
<map name="d2/dc7/a00838_a12e5d20e873fd1ff626ca7e4d7e726f9_cgraph" id="d2/dc7/a00838_a12e5d20e873fd1ff626ca7e4d7e726f9_cgraph">
<area shape="rect" id="node3" href="../../d2/dc7/a00838.html#aeb97ab084032f9ba66f1b1dc6b57d1c6" title="ripple::LedgerMasterImp\l::findAcquireLedger" alt="" coords="216,942,379,989"/><area shape="rect" id="node70" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="657,1062,783,1109"/><area shape="rect" id="node72" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="235,1113,360,1159"/><area shape="rect" id="node5" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="432,942,584,989"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1347,959,1448,988"/><area shape="rect" id="node11" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="439,803,577,850"/><area shape="rect" id="node13" href="../../d2/dc7/a00838.html#ada1387013f4ac247a4ebd14bee004fa7" title="ripple::LedgerMasterImp\l::getLedgerByHash" alt="" coords="427,873,589,919"/><area shape="rect" id="node9" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1524,950,1700,997"/><area shape="rect" id="node15" href="../../d3/d13/a00836.html#acb5998c7f7a284bb0398d7867a41b960" title="ripple::LedgerHolder::get" alt="" coords="639,881,801,911"/><area shape="rect" id="node17" href="../../dd/d70/a00835.html#a55709ad23e8fb3e226bfb3e07c7890a4" title="ripple::LedgerHistory\l::getLedgerByHash" alt="" coords="649,781,791,827"/><area shape="rect" id="node19" href="../../dd/d55/a01638.html#a6b9d410c1a62349ee3452f4d66c6c751" title="ripple::TaggedCache\l::canonicalize" alt="" coords="869,811,1011,858"/><area shape="rect" id="node21" href="../../dd/d55/a01638.html#a2c709f3115377eeca448ef32acfb9ee0" title="ripple::TaggedCache\l::fetch" alt="" coords="869,689,1011,735"/><area shape="rect" id="node23" href="../../dd/d5f/a00825.html#aba5851ba119fe1d109ee22cc65abd151" title="ripple::Ledger::loadByHash" alt="" coords="851,759,1029,788"/><area shape="rect" id="node25" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="1097,750,1252,797"/><area shape="rect" id="node28" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="1104,819,1245,866"/><area shape="rect" id="node30" href="../../d7/d9a/a00152.html#a348c4019943a8b3a05f39f1efcb589c9" title="ripple::base_uint::\lGetHex" alt="" coords="1112,577,1237,623"/><area shape="rect" id="node42" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="1112,889,1237,935"/><area shape="rect" id="node44" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="1096,291,1253,320"/><area shape="rect" id="node65" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="1096,959,1253,988"/><area shape="rect" id="node68" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="1077,647,1272,676"/><area shape="rect" id="node32" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1549,603,1675,650"/><area shape="rect" id="node36" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="1323,664,1472,693"/><area shape="rect" id="node38" href="../../d9/d9d/a03417.html#a138db8803faea25db74891325f6b0073" title="ripple::strHex" alt="" coords="1348,560,1447,589"/><area shape="rect" id="node34" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1751,469,1900,499"/><area shape="rect" id="node40" href="../../d9/d9d/a03417.html#aca6318bcfeb25f74477566a7ddc06a63" title="ripple::charHex" alt="" coords="1557,551,1667,580"/><area shape="rect" id="node46" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1320,282,1475,329"/><area shape="rect" id="node48" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1320,351,1475,398"/><area shape="rect" id="node50" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1320,421,1475,467"/><area shape="rect" id="node52" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1320,490,1475,537"/><area shape="rect" id="node54" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1320,5,1475,51"/><area shape="rect" id="node56" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1320,74,1475,121"/><area shape="rect" id="node58" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1335,143,1460,190"/><area shape="rect" id="node63" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1320,213,1475,259"/><area shape="rect" id="node60" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1539,325,1685,355"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a2db881f4033e9addca4142a95992d872"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> ripple::LedgerMasterImp::m_journal</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00043">43</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad0b2af2d9d75a761814d35b46fffee50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a> ripple::LedgerMasterImp::m_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00045">45</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00190">addHeldTransaction()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00856">advanceThread()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00288">closeLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00345">doTransaction()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01218">isNewPathRequest()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01228">newOrderBookDB()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01210">newPathRequest()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01248">peekMutex()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00197">pushLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00252">switchLedgers()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00468">tryFill()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>.</p>

</div>
</div>
<a class="anchor" id="aba6f081f81dfd2020496d9d10659b3e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::mAdvanceThread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00069">69</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00856">advanceThread()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>.</p>

</div>
</div>
<a class="anchor" id="a77c7fd65a7fe8c0e3bd50eb6e0a62f83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::mAdvanceWork</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00070">70</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>.</p>

</div>
</div>
<a class="anchor" id="a89e835d27948cd9eb737c05d30cdd55a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&gt; ripple::LedgerMasterImp::mBuildingLedgerSeq</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00081">81</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00659">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00334">getBuildingLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00340">setBuildingLedger()</a>.</p>

</div>
</div>
<a class="anchor" id="aafddd7a3f3c8da90a1f8c374f05b1dca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d13/a00836.html">LedgerHolder</a> ripple::LedgerMasterImp::mClosedLedger</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00050">50</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01260">getClosedLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01386">getLedgerByHash()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01368">getLedgerBySeq()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00197">pushLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00252">switchLedgers()</a>.</p>

</div>
</div>
<a class="anchor" id="a7d42865d1c905dd9bc86fede85c43cbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d32/a01176.html">RangeSet</a> ripple::LedgerMasterImp::mCompleteLedgers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00060">60</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00376">clearLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01287">getCompleteLedgers()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00383">getFullValidatedRange()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00404">getValidatedRange()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00370">haveLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00363">haveLedgerRange()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01411">setLedgerRangePresent()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00468">tryFill()</a>.</p>

</div>
</div>
<a class="anchor" id="a96707096d2bede3f4ef8308ff724611b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/dc7/a00838.html#aa90fec862507188a8f8a8630e288efd4">LockType</a> ripple::LedgerMasterImp::mCompleteLock</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00059">59</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00376">clearLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01287">getCompleteLedgers()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00383">getFullValidatedRange()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00404">getValidatedRange()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00370">haveLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00363">haveLedgerRange()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01411">setLedgerRangePresent()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00468">tryFill()</a>.</p>

</div>
</div>
<a class="anchor" id="af470efe211c7a2c4fb9b7591da41f240"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d13/a00836.html">LedgerHolder</a> ripple::LedgerMasterImp::mCurrentLedger</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00049">49</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00288">closeLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00345">doTransaction()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01254">getCurrentLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00109">getCurrentLedgerIndex()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01386">getLedgerByHash()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01368">getLedgerBySeq()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00197">pushLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00252">switchLedgers()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>.</p>

</div>
</div>
<a class="anchor" id="a1aae0b5a4e5ea0d26af6e28cceea359e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc5/a01705.html">TransactionEngine</a> ripple::LedgerMasterImp::mEngine</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00047">47</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00288">closeLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00345">doTransaction()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00197">pushLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00252">switchLedgers()</a>.</p>

</div>
</div>
<a class="anchor" id="a222e2eaaaf1e2ed988284efe27848edc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ripple::LedgerMasterImp::mFillInProgress</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00071">71</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00468">tryFill()</a>.</p>

</div>
</div>
<a class="anchor" id="af129fb8d47bf0d34aab2696258e440e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d3e/a00253.html">CanonicalTXSet</a> ripple::LedgerMasterImp::mHeldTransactions</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00057">57</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00190">addHeldTransaction()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00288">closeLedger()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a7548c63624f1afe9014aeca724359d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> ripple::LedgerMasterImp::mLastValidateHash</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00065">65</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00699">getNeededValidations()</a>.</p>

</div>
</div>
<a class="anchor" id="a2b3a9be961735746d6b5946b24ac0588"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> ripple::LedgerMasterImp::mLastValidateSeq</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00066">66</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7f9c5ede45fa7447912bd1357ce370e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="../../d8/d64/a00828.html">LedgerCleaner</a>&gt; ripple::LedgerMasterImp::mLedgerCleaner</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00062">62</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01406">doLedgerCleaner()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01436">getPropertySource()</a>.</p>

</div>
</div>
<a class="anchor" id="aef3110d1d629f45f527dab691daf3375"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d70/a00835.html">LedgerHistory</a> ripple::LedgerMasterImp::mLedgerHistory</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00055">55</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00659">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00271">fixIndex()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01426">getCacheHitRate()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01309">getHashBySeq()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01386">getLedgerByHash()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01368">getLedgerBySeq()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00227">pushLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00276">storeLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01421">sweep()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01416">tune()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a7bb998185ae6768a22a49fc064b871"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ripple::LedgerMasterImp::mMinValidations</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00064">64</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01277">getMinValidations()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00699">getNeededValidations()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01282">setMinValidations()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5cc1c117a362d9d17b5343f1856037c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="../../d2/dc7/a00838.html#ac77311b87d5a70b3dc39e94990787e5e">callback</a>&gt; ripple::LedgerMasterImp::mOnValidate</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00067">67</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01431">addValidateCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a992b39b3307006235fd368a74acfe4f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::mPathFindNewLedger</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00074">74</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2ccb481e67e01950bdf802a7a2e90192"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerMasterImp::mPathFindNewRequest</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00075">75</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01218">isNewPathRequest()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01210">newPathRequest()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>.</p>

</div>
</div>
<a class="anchor" id="acf34ea2e71eef3806948648a302cc357"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ripple::LedgerMasterImp::mPathFindThread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00073">73</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01238">newPFWork()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3c17ca4f7adc29acb6f4f54d44b7e41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::mPathLedger</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00053">53</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l01228">newOrderBookDB()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>.</p>

</div>
</div>
<a class="anchor" id="af10ba0f0e5e469d2ed19227006bba59e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ripple::LedgerMasterImp::mPubLedger</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00052">52</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00719">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01272">getPublishedLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00183">setPubLedger()</a>.</p>

</div>
</div>
<a class="anchor" id="ace4219926da351849a60608ae264ecaa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&gt; ripple::LedgerMasterImp::mPubLedgerClose</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00077">77</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00119">getPublishedLedgerAge()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00153">isCaughtUp()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00183">setPubLedger()</a>.</p>

</div>
</div>
<a class="anchor" id="a07a4023248dca4e413091717af04160a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&gt; ripple::LedgerMasterImp::mPubLedgerSeq</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00078">78</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00383">getFullValidatedRange()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00404">getValidatedRange()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00183">setPubLedger()</a>.</p>

</div>
</div>
<a class="anchor" id="a9ff9ad643a573106cc5e9d1aab768b5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d13/a00836.html">LedgerHolder</a> ripple::LedgerMasterImp::mValidLedger</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00051">51</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00856">advanceThread()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01266">getValidatedLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00175">setValidLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01106">tryAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01319">walkHashBySeq()</a>.</p>

</div>
</div>
<a class="anchor" id="a669452386a0abf5655393ca6f7f4f9b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&gt; ripple::LedgerMasterImp::mValidLedgerClose</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00079">79</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00136">getValidatedLedgerAge()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00153">isCaughtUp()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l00175">setValidLedger()</a>.</p>

</div>
</div>
<a class="anchor" id="a072102635fb385fea58b847052530ba3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a>&gt; ripple::LedgerMasterImp::mValidLedgerSeq</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/df9/a02923_source.html#l00080">80</a> of file <a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/df9/a02923_source.html#l00659">checkAccept()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00767">consensusBuilt()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00877">doAdvance()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l01007">findNewLedgersToPublish()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00114">getValidLedgerIndex()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00600">setFullLedger()</a>, <a class="el" href="../../d6/df9/a02923_source.html#l00175">setValidLedger()</a>, and <a class="el" href="../../d6/df9/a02923_source.html#l01150">updatePaths()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>rippled/src/ripple_app/ledger/<a class="el" href="../../d6/df9/a02923_source.html">LedgerMaster.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d9d/a03417.html">ripple</a></li><li class="navelem"><a class="el" href="../../d2/dc7/a00838.html">LedgerMasterImp</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:11 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
