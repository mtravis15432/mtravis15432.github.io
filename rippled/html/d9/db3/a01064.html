<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: ripple::OverlayImpl Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d9/db3/a01064.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d1/d89/a07948.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::OverlayImpl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ripple::OverlayImpl:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d86/a07949.png" border="0" usemap="#ripple_1_1_overlay_impl_inherit__map" alt="Inheritance graph"/></div>
<map name="ripple_1_1_overlay_impl_inherit__map" id="ripple_1_1_overlay_impl_inherit__map">
<area shape="rect" id="node2" href="../../de/de6/a01063.html" title="ripple::Overlay" alt="" coords="92,188,199,217"/><area shape="rect" id="node4" href="../../d2/d49/a01561.html" title="beast::Stoppable" alt="" coords="5,92,125,121"/><area shape="rect" id="node6" href="../../d9/db0/a01437.html" title="beast::PropertyStream\l::Source" alt="" coords="149,83,301,130"/><area shape="rect" id="node8" href="../../d1/d04/a01744.html" title="beast::Uncopyable" alt="" coords="160,5,291,35"/><area shape="rect" id="node10" href="../../de/dbc/a00249.html" title="ripple::PeerFinder\l::Callback" alt="" coords="223,179,345,226"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ripple::OverlayImpl:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/dc8/a07950.png" border="0" usemap="#ripple_1_1_overlay_impl_coll__map" alt="Collaboration graph"/></div>
<map name="ripple_1_1_overlay_impl_coll__map" id="ripple_1_1_overlay_impl_coll__map">
<area shape="rect" id="node2" href="../../de/de6/a01063.html" title="ripple::Overlay" alt="" coords="1440,356,1547,385"/><area shape="rect" id="node4" href="../../d2/d49/a01561.html" title="beast::Stoppable" alt="" coords="1167,259,1287,288"/><area shape="rect" id="node12" href="../../dd/d56/a00274.html" title="beast::Stoppable::Child" alt="" coords="1415,277,1572,307"/><area shape="rect" id="node17" href="../../d9/dda/a01289.html" title="beast::RootStoppable" alt="" coords="1420,171,1567,200"/><area shape="rect" id="node62" href="../../d8/d38/a00926.html" title="ripple::PeerFinder\l::Manager" alt="" coords="1432,493,1555,539"/><area shape="rect" id="node6" href="../../d7/d06/a00131.html" title="beast::Atomic\&lt; int \&gt;" alt="" coords="885,116,1027,145"/><area shape="rect" id="node8" href="../../d7/d02/a01808.html" title="beast::WaitableEvent" alt="" coords="373,259,520,288"/><area shape="rect" id="node10" href="../../d1/d04/a01744.html" title="beast::Uncopyable" alt="" coords="5,309,136,339"/><area shape="rect" id="node21" href="../../d2/d79/a00898.html" title="beast::LockFreeStack\l\&lt; Child \&gt;" alt="" coords="881,175,1031,222"/><area shape="rect" id="node24" href="../../d3/d08/a01018.html" title="beast::LockFreeStack\l\&lt; Element, Tag \&gt;::Node" alt="" coords="187,117,349,163"/><area shape="rect" id="node31" href="../../d9/db0/a01437.html" title="beast::PropertyStream\l::Source" alt="" coords="1151,501,1303,547"/><area shape="rect" id="node34" href="../../d7/dde/a01384.html" title="beast::SharedData\&lt;\l State \&gt;" alt="" coords="887,521,1025,567"/><area shape="rect" id="node43" href="../../d5/d69/a00878.html" title="beast::List\&lt; beast\l::ServiceQueueBase::\lWaiter \&gt;" alt="" coords="193,449,343,513"/><area shape="rect" id="node46" href="../../d5/d69/a00878.html" title="beast::List\&lt; beast\l::ServiceQueueBase::\lItem \&gt;" alt="" coords="193,361,343,425"/><area shape="rect" id="node27" href="../../d7/d06/a00131.html" title="beast::Atomic\&lt; beast\l::LockFreeStack::Node * \&gt;" alt="" coords="547,74,725,121"/><area shape="rect" id="node57" href="../../de/d62/a00924.html" title="ripple::Resource::Manager" alt="" coords="1599,616,1772,645"/><area shape="rect" id="node37" href="../../d3/deb/a01386.html" title="beast::SharedMutexAdapter\l\&lt; RecursiveMutex \&gt;" alt="" coords="544,587,728,634"/><area shape="rect" id="node39" href="../../d8/d8e/a01224.html" title="beast::RecursiveMutex" alt="" coords="189,596,347,625"/><area shape="rect" id="node41" href="../../dc/d96/a01517.html" title="beast::ServiceQueueBase\l::State" alt="" coords="549,458,723,505"/><area shape="rect" id="node49" title="STL class. " alt="" coords="916,639,996,668"/><area shape="rect" id="node51" title="STL class. " alt="" coords="573,657,699,703"/><area shape="rect" id="node53" href="../../de/dbc/a00249.html" title="ripple::PeerFinder\l::Callback" alt="" coords="1828,58,1951,105"/><area shape="rect" id="node66" href="../../d0/d33/a01252.html" title="ripple::Resolver" alt="" coords="1833,336,1945,365"/><area shape="rect" id="node72" href="../../de/d99/a01101.html" title="ripple::PeerDoor" alt="" coords="1436,224,1551,253"/><area shape="rect" id="node74" href="../../d7/d06/a00131.html" title="beast::Atomic\&lt; ripple\l::Peer::ShortId \&gt;" alt="" coords="1816,562,1963,609"/><area shape="rect" id="node76" href="../../df/d0c/a00788.html" title="beast::Journal" alt="" coords="1837,5,1941,35"/><area shape="rect" id="node78" href="../../df/d84/a01408.html" title="beast::Journal::Sink" alt="" coords="1157,13,1296,43"/><area shape="rect" id="node80" href="../../d4/d2c/a01575.html" title="beast::Journal::Stream" alt="" coords="1416,92,1571,121"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae4871cf6ee4e956f0231c20f2cf13a84"><td class="memItemLeft" align="right" valign="top">typedef <br class="typebreak"/>
boost::asio::ip::tcp::socket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#ae4871cf6ee4e956f0231c20f2cf13a84">socket_type</a></td></tr>
<tr class="separator:ae4871cf6ee4e956f0231c20f2cf13a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579d5bc9848c4c3e8e659ea665700a2a"><td class="memItemLeft" align="right" valign="top">typedef std::unordered_map<br class="typebreak"/>
&lt; <a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a>, <br class="typebreak"/>
boost::weak_ptr&lt; <a class="el" href="../../d9/d10/a01103.html">PeerImp</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a579d5bc9848c4c3e8e659ea665700a2a">PeersBySlot</a></td></tr>
<tr class="separator:a579d5bc9848c4c3e8e659ea665700a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80e74ab24af8c0523973875dd7c7cd6a"><td class="memItemLeft" align="right" valign="top">typedef boost::unordered_map<br class="typebreak"/>
&lt; <a class="el" href="../../d4/d0e/a01272.html">RippleAddress</a>, <a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a80e74ab24af8c0523973875dd7c7cd6a">PeerByPublicKey</a></td></tr>
<tr class="separator:a80e74ab24af8c0523973875dd7c7cd6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad89b687faa3fe1764b0f2bf91ecdb23"><td class="memItemLeft" align="right" valign="top">typedef std::unordered_map<br class="typebreak"/>
&lt; <a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a>, <a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#aad89b687faa3fe1764b0f2bf91ecdb23">PeerByShortId</a></td></tr>
<tr class="separator:aad89b687faa3fe1764b0f2bf91ecdb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_a01063"><td colspan="2" onclick="javascript:toggleInherit('pub_types_a01063')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../de/de6/a01063.html">ripple::Overlay</a></td></tr>
<tr class="memitem:ab31ecd9bdd548883e13ef848725264ab inherit pub_types_a01063"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/de6/a01063.html#ab31ecd9bdd548883e13ef848725264ab">PeerSequence</a></td></tr>
<tr class="separator:ab31ecd9bdd548883e13ef848725264ab inherit pub_types_a01063"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a78919d5bd6c2f19641831974c712b5c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a78919d5bd6c2f19641831974c712b5c5">OverlayImpl</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;parent, <a class="el" href="../../de/d62/a00924.html">Resource::Manager</a> &amp;resourceManager, <a class="el" href="../../dd/d98/a00927.html">SiteFiles::Manager</a> &amp;siteFiles, <a class="el" href="../../d4/d33/a00536.html">beast::File</a> const &amp;pathToDbFileOrDirectory, <a class="el" href="../../d0/d33/a01252.html">Resolver</a> &amp;resolver, boost::asio::io_service &amp;io_service, boost::asio::ssl::context &amp;ssl_context)</td></tr>
<tr class="separator:a78919d5bd6c2f19641831974c712b5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a573ecfb6936c4423c4187a18c4b31afe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a573ecfb6936c4423c4187a18c4b31afe">~OverlayImpl</a> ()</td></tr>
<tr class="separator:a573ecfb6936c4423c4187a18c4b31afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa76519937058126b51f6b56128ea29ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#aa76519937058126b51f6b56128ea29ba">OverlayImpl</a> (<a class="el" href="../../d9/db3/a01064.html">OverlayImpl</a> const &amp;)=delete</td></tr>
<tr class="separator:aa76519937058126b51f6b56128ea29ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cbf3979760f7b694fb7ea3c7ebb571a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db3/a01064.html">OverlayImpl</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a7cbf3979760f7b694fb7ea3c7ebb571a">operator=</a> (<a class="el" href="../../d9/db3/a01064.html">OverlayImpl</a> const &amp;)=delete</td></tr>
<tr class="separator:a7cbf3979760f7b694fb7ea3c7ebb571a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10842a41b9793e3a2941741542aaa09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#af10842a41b9793e3a2941741542aaa09">accept</a> (bool proxyHandshake, <a class="el" href="../../d9/db3/a01064.html#ae4871cf6ee4e956f0231c20f2cf13a84">socket_type</a> &amp;&amp;socket)</td></tr>
<tr class="separator:af10842a41b9793e3a2941741542aaa09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac46c8e01be998c3a168b1bc6e2da0f07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#ac46c8e01be998c3a168b1bc6e2da0f07">connect</a> (<a class="el" href="../../da/dc3/a00453.html">beast::IP::Endpoint</a> const &amp;remote_endpoint)</td></tr>
<tr class="separator:ac46c8e01be998c3a168b1bc6e2da0f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0beeb2f44eb509bdf7b766d67e4d8780"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a0beeb2f44eb509bdf7b766d67e4d8780">next_id</a> ()</td></tr>
<tr class="separator:a0beeb2f44eb509bdf7b766d67e4d8780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b12e6a7e9b089480735592140bf5732"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a8b12e6a7e9b089480735592140bf5732">check_stopped</a> ()</td></tr>
<tr class="separator:a8b12e6a7e9b089480735592140bf5732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae610b1a44dfb3505bd9449e5217d660"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#aae610b1a44dfb3505bd9449e5217d660">release</a> ()</td></tr>
<tr class="separator:aae610b1a44dfb3505bd9449e5217d660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4e7d42e14e611f22fd50f5b1f11738"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#afa4e7d42e14e611f22fd50f5b1f11738">remove</a> (<a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;slot)</td></tr>
<tr class="separator:afa4e7d42e14e611f22fd50f5b1f11738"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41ffb563533fd26345f42d63949b7d9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a41ffb563533fd26345f42d63949b7d9d">connect</a> (std::vector&lt; <a class="el" href="../../da/dc3/a00453.html">beast::IP::Endpoint</a> &gt; const &amp;list)</td></tr>
<tr class="separator:a41ffb563533fd26345f42d63949b7d9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96caa67be889971c6642de9aa7c2a45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#ab96caa67be889971c6642de9aa7c2a45">activate</a> (<a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;slot)</td></tr>
<tr class="separator:ab96caa67be889971c6642de9aa7c2a45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a0219cf674d104352eb7c601100396"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#af1a0219cf674d104352eb7c601100396">send</a> (<a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;slot, std::vector&lt; <a class="el" href="../../d1/d0b/a00452.html">PeerFinder::Endpoint</a> &gt; const &amp;endpoints)</td></tr>
<tr class="separator:af1a0219cf674d104352eb7c601100396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cff3da8e418c4b955a6fccd02dd5a6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a7cff3da8e418c4b955a6fccd02dd5a6f">disconnect</a> (<a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;slot, bool graceful)</td></tr>
<tr class="separator:a7cff3da8e418c4b955a6fccd02dd5a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addad297874d76d9df9fc2d7c903d7782"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#addad297874d76d9df9fc2d7c903d7782">onPrepare</a> () override</td></tr>
<tr class="separator:addad297874d76d9df9fc2d7c903d7782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3918e80c1267d4f907730999a4f26008"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a3918e80c1267d4f907730999a4f26008">onStart</a> () override</td></tr>
<tr class="separator:a3918e80c1267d4f907730999a4f26008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac383aafb3e8cd3715e9030e53fcfe5ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#ac383aafb3e8cd3715e9030e53fcfe5ae">close_all</a> (bool graceful)</td></tr>
<tr class="separator:ac383aafb3e8cd3715e9030e53fcfe5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac252980b7a02834b5a4577456ad8f7a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#ac252980b7a02834b5a4577456ad8f7a3">onStop</a> () override</td></tr>
<tr class="separator:ac252980b7a02834b5a4577456ad8f7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a2a34dcf3647aad5b8860744fc4a324"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a3a2a34dcf3647aad5b8860744fc4a324">onChildrenStopped</a> () override</td></tr>
<tr class="separator:a3a2a34dcf3647aad5b8860744fc4a324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d322f141b42e6539ca146a47f6eaea2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a0d322f141b42e6539ca146a47f6eaea2">onWrite</a> (<a class="el" href="../../d1/ddd/a00943.html">beast::PropertyStream::Map</a> &amp;stream)</td></tr>
<tr class="separator:a0d322f141b42e6539ca146a47f6eaea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c6924ce448c66733205236a8eb5fa1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a9c6924ce448c66733205236a8eb5fa1b">onPeerActivated</a> (<a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;peer)</td></tr>
<tr class="separator:a9c6924ce448c66733205236a8eb5fa1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a764de53f025303840c76d1b8583332da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a764de53f025303840c76d1b8583332da">onPeerDisconnect</a> (<a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;peer)</td></tr>
<tr class="separator:a764de53f025303840c76d1b8583332da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c11a6baa3cc3fc0e3ab549f0c2b49d6"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a8c11a6baa3cc3fc0e3ab549f0c2b49d6">size</a> ()</td></tr>
<tr class="separator:a8c11a6baa3cc3fc0e3ab549f0c2b49d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c2c7c1e03e568c21ba57a486c21d835"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d27/a01781.html">Json::Value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a1c2c7c1e03e568c21ba57a486c21d835">json</a> ()</td></tr>
<tr class="separator:a1c2c7c1e03e568c21ba57a486c21d835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5d1f8e0f0b688f433ed96eab211b375"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/de6/a01063.html#ab31ecd9bdd548883e13ef848725264ab">Overlay::PeerSequence</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#ab5d1f8e0f0b688f433ed96eab211b375">getActivePeers</a> ()</td></tr>
<tr class="separator:ab5d1f8e0f0b688f433ed96eab211b375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0980ca22d4b2f415918240c2201b6e32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a0980ca22d4b2f415918240c2201b6e32">findPeerByShortID</a> (<a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a> const &amp;<a class="el" href="../../d9/de7/a02572.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>)</td></tr>
<tr class="separator:a0980ca22d4b2f415918240c2201b6e32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01063"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01063')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../de/de6/a01063.html">ripple::Overlay</a></td></tr>
<tr class="memitem:a98b5d91ee90be36a257696888cbdd74e inherit pub_methods_a01063"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/de6/a01063.html#a98b5d91ee90be36a257696888cbdd74e">~Overlay</a> ()=default</td></tr>
<tr class="separator:a98b5d91ee90be36a257696888cbdd74e inherit pub_methods_a01063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc745932a8cbc330dfb6c6e5e608b3c inherit pub_methods_a01063"><td class="memTemplParams" colspan="2">template&lt;typename Function &gt; </td></tr>
<tr class="memitem:a7dc745932a8cbc330dfb6c6e5e608b3c inherit pub_methods_a01063"><td class="memTemplItemLeft" align="right" valign="top">std::enable_if_t<br class="typebreak"/>
&lt; !std::is_void&lt; typename <br class="typebreak"/>
Function::return_type &gt;::<a class="el" href="../../d5/d95/a02720.html#a0f61d63b009d0880a89c843bd50d8d76">value</a>, <br class="typebreak"/>
typename Function::return_type &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../de/de6/a01063.html#a7dc745932a8cbc330dfb6c6e5e608b3c">foreach</a> (Function <a class="el" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a>)</td></tr>
<tr class="separator:a7dc745932a8cbc330dfb6c6e5e608b3c inherit pub_methods_a01063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896951e8ed1c1138f748b1402be07576 inherit pub_methods_a01063"><td class="memTemplParams" colspan="2">template&lt;class Function &gt; </td></tr>
<tr class="memitem:a896951e8ed1c1138f748b1402be07576 inherit pub_methods_a01063"><td class="memTemplItemLeft" align="right" valign="top">std::enable_if_t&lt; std::is_void<br class="typebreak"/>
&lt; typename <br class="typebreak"/>
Function::return_type &gt;::<a class="el" href="../../d5/d95/a02720.html#a0f61d63b009d0880a89c843bd50d8d76">value</a>, <br class="typebreak"/>
typename Function::return_type &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../de/de6/a01063.html#a896951e8ed1c1138f748b1402be07576">foreach</a> (Function <a class="el" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a>)</td></tr>
<tr class="separator:a896951e8ed1c1138f748b1402be07576 inherit pub_methods_a01063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01561"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01561')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d2/d49/a01561.html">beast::Stoppable</a></td></tr>
<tr class="memitem:a956c39a8c26ed410c10285e5a1ebf87f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a956c39a8c26ed410c10285e5a1ebf87f">Stoppable</a> (char const *<a class="el" href="../../dc/d40/a02767.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="el" href="../../d2/d49/a01561.html">Stoppable</a> &amp;parent)</td></tr>
<tr class="separator:a956c39a8c26ed410c10285e5a1ebf87f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae075b508fc6cf725795061ae8431d10f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#ae075b508fc6cf725795061ae8431d10f">~Stoppable</a> ()</td></tr>
<tr class="separator:ae075b508fc6cf725795061ae8431d10f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca78fcebed5c6b8c9cd96bacb588785 inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7ca78fcebed5c6b8c9cd96bacb588785">isStopping</a> () const </td></tr>
<tr class="separator:a7ca78fcebed5c6b8c9cd96bacb588785 inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b437c5eddc1f6e6108a112e58517fce inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7b437c5eddc1f6e6108a112e58517fce">isStopped</a> () const </td></tr>
<tr class="separator:a7b437c5eddc1f6e6108a112e58517fce inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e8f8db88a0ec9c9f616e55a220cc30 inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30">areChildrenStopped</a> () const </td></tr>
<tr class="separator:ac9e8f8db88a0ec9c9f616e55a220cc30 inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a3f86c14a870b4c8eefa77f9989a5e inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e">stopped</a> ()</td></tr>
<tr class="separator:a32a3f86c14a870b4c8eefa77f9989a5e inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01437"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01437')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d9/db0/a01437.html">beast::PropertyStream::Source</a></td></tr>
<tr class="memitem:a1dd058a9799aec943c4f52aa263f6242 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a1dd058a9799aec943c4f52aa263f6242">Source</a> (std::string const &amp;<a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a>)</td></tr>
<tr class="separator:a1dd058a9799aec943c4f52aa263f6242 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad334cdee3d793510a6d401101be7cbdc inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#ad334cdee3d793510a6d401101be7cbdc">~Source</a> ()</td></tr>
<tr class="separator:ad334cdee3d793510a6d401101be7cbdc inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ebda8c3ccfac01e9ec629551521c37 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">std::string const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a> () const </td></tr>
<tr class="separator:ad2ebda8c3ccfac01e9ec629551521c37 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b74ac4b0ae83b71d8605412b2fe5c8b inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a6b74ac4b0ae83b71d8605412b2fe5c8b">add</a> (<a class="el" href="../../d9/db0/a01437.html">Source</a> &amp;source)</td></tr>
<tr class="separator:a6b74ac4b0ae83b71d8605412b2fe5c8b inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4355f7842066d0b3f76c0392de3fdf4d inherit pub_methods_a01437"><td class="memTemplParams" colspan="2">template&lt;class Derived &gt; </td></tr>
<tr class="memitem:a4355f7842066d0b3f76c0392de3fdf4d inherit pub_methods_a01437"><td class="memTemplItemLeft" align="right" valign="top">Derived *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a4355f7842066d0b3f76c0392de3fdf4d">add</a> (Derived *child)</td></tr>
<tr class="separator:a4355f7842066d0b3f76c0392de3fdf4d inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a556e44cee0e7f79c29d62baf27913926 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a556e44cee0e7f79c29d62baf27913926">remove</a> (<a class="el" href="../../d9/db0/a01437.html">Source</a> &amp;child)</td></tr>
<tr class="separator:a556e44cee0e7f79c29d62baf27913926 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d00067514e90c8134de3d4777ea083e inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a1d00067514e90c8134de3d4777ea083e">removeAll</a> ()</td></tr>
<tr class="separator:a1d00067514e90c8134de3d4777ea083e inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4d96dfb59e72aa00e5f94fc07e0ab8 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a8a4d96dfb59e72aa00e5f94fc07e0ab8">write_one</a> (<a class="el" href="../../d9/d65/a01145.html">PropertyStream</a> &amp;stream)</td></tr>
<tr class="separator:a8a4d96dfb59e72aa00e5f94fc07e0ab8 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2398e48dde9f52949d08ca0785c0bb3 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#aa2398e48dde9f52949d08ca0785c0bb3">write</a> (<a class="el" href="../../d9/d65/a01145.html">PropertyStream</a> &amp;stream)</td></tr>
<tr class="separator:aa2398e48dde9f52949d08ca0785c0bb3 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936592a06d57d60b70874e358758c542 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a936592a06d57d60b70874e358758c542">write</a> (<a class="el" href="../../d9/d65/a01145.html">PropertyStream</a> &amp;stream, std::string const &amp;path)</td></tr>
<tr class="separator:a936592a06d57d60b70874e358758c542 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f49272d4017476ce3e4694b539b8ae inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../d9/db0/a01437.html">Source</a> *, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a30f49272d4017476ce3e4694b539b8ae">find</a> (std::string path)</td></tr>
<tr class="separator:a30f49272d4017476ce3e4694b539b8ae inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949fcb8686f4cfbb4401bb9a4aad80d7 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html">Source</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a949fcb8686f4cfbb4401bb9a4aad80d7">find_one_deep</a> (std::string const &amp;<a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a>)</td></tr>
<tr class="separator:a949fcb8686f4cfbb4401bb9a4aad80d7 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7982669e8117c921ff644b7e2a552b19 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html">PropertyStream::Source</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a7982669e8117c921ff644b7e2a552b19">find_path</a> (std::string path)</td></tr>
<tr class="separator:a7982669e8117c921ff644b7e2a552b19 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1761f2a6920ca1c5d9543afda4930c45 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html">PropertyStream::Source</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a1761f2a6920ca1c5d9543afda4930c45">find_one</a> (std::string const &amp;<a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a>)</td></tr>
<tr class="separator:a1761f2a6920ca1c5d9543afda4930c45 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a00249"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00249')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../de/dbc/a00249.html">ripple::PeerFinder::Callback</a></td></tr>
<tr class="memitem:a82ce6f37452066beb2204c70cccad594 inherit pub_methods_a00249"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbc/a00249.html#a82ce6f37452066beb2204c70cccad594">send</a> (<a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">Slot::ptr</a> const &amp;slot, <a class="el" href="../../d3/dff/a03422.html#a44f338ee3a1614e9c54c23915c5432e6">Endpoints</a> const &amp;endpoints)=0</td></tr>
<tr class="separator:a82ce6f37452066beb2204c70cccad594 inherit pub_methods_a00249"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:adab6e9fa83abe042915f0be57aad340e"><td class="memItemLeft" align="right" valign="top">std::recursive_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a></td></tr>
<tr class="separator:adab6e9fa83abe042915f0be57aad340e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80216dbe3ae14bdb7e6ecf6fa7dc2d96"><td class="memItemLeft" align="right" valign="top">std::condition_variable_any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a80216dbe3ae14bdb7e6ecf6fa7dc2d96">m_cond</a></td></tr>
<tr class="separator:a80216dbe3ae14bdb7e6ecf6fa7dc2d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe5baad281e352df046beaf5e37fe55"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#aabe5baad281e352df046beaf5e37fe55">m_child_count</a></td></tr>
<tr class="separator:aabe5baad281e352df046beaf5e37fe55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a272364d87023377cc9059bdbff5a7157"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a></td></tr>
<tr class="separator:a272364d87023377cc9059bdbff5a7157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a0bf589a6364fd1bcd500d661daba6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d62/a00924.html">Resource::Manager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a3a0bf589a6364fd1bcd500d661daba6a">m_resourceManager</a></td></tr>
<tr class="separator:a3a0bf589a6364fd1bcd500d661daba6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac68cea45e3ecdc66943099632d2c8621"><td class="memItemLeft" align="right" valign="top">std::unique_ptr<br class="typebreak"/>
&lt; <a class="el" href="../../d8/d38/a00926.html">PeerFinder::Manager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a></td></tr>
<tr class="separator:ac68cea45e3ecdc66943099632d2c8621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187750f2ebe7d8c9e517589e4624de3c"><td class="memItemLeft" align="right" valign="top">boost::asio::io_service &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a187750f2ebe7d8c9e517589e4624de3c">m_io_service</a></td></tr>
<tr class="separator:a187750f2ebe7d8c9e517589e4624de3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98222c69229d875c7e0cfdf101b307c0"><td class="memItemLeft" align="right" valign="top">boost::asio::ssl::context &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a98222c69229d875c7e0cfdf101b307c0">m_ssl_context</a></td></tr>
<tr class="separator:a98222c69229d875c7e0cfdf101b307c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f64828f3176b83a394b046dfe769e13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db3/a01064.html#a579d5bc9848c4c3e8e659ea665700a2a">PeersBySlot</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a></td></tr>
<tr class="separator:a1f64828f3176b83a394b046dfe769e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16db82d29d074aa00181fd2381324972"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db3/a01064.html#a80e74ab24af8c0523973875dd7c7cd6a">PeerByPublicKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a16db82d29d074aa00181fd2381324972">m_publicKeyMap</a></td></tr>
<tr class="separator:a16db82d29d074aa00181fd2381324972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2944e62685590732fba4865ef5bdc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db3/a01064.html#aad89b687faa3fe1764b0f2bf91ecdb23">PeerByShortId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a9a2944e62685590732fba4865ef5bdc8">m_shortIdMap</a></td></tr>
<tr class="separator:a9a2944e62685590732fba4865ef5bdc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22b331a5003b65216bc233a68831a92"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="../../de/d99/a01101.html">PeerDoor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#af22b331a5003b65216bc233a68831a92">m_doorDirect</a></td></tr>
<tr class="separator:af22b331a5003b65216bc233a68831a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad061b2f0f87ecc4b89b93a2a9b7da49"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="../../de/d99/a01101.html">PeerDoor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#aad061b2f0f87ecc4b89b93a2a9b7da49">m_doorProxy</a></td></tr>
<tr class="separator:aad061b2f0f87ecc4b89b93a2a9b7da49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222db6945256c0eebf01c39c572f655c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d33/a01252.html">Resolver</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a222db6945256c0eebf01c39c572f655c">m_resolver</a></td></tr>
<tr class="separator:a222db6945256c0eebf01c39c572f655c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b8a3d385f24195deb5811d4a22416eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d06/a00131.html">beast::Atomic</a>&lt; <a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/a01064.html#a8b8a3d385f24195deb5811d4a22416eb">m_nextShortId</a></td></tr>
<tr class="separator:a8b8a3d385f24195deb5811d4a22416eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_a01437"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_a01437')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../d9/db0/a01437.html">beast::PropertyStream::Source</a></td></tr>
<tr class="memitem:a12999b1c566cf7208abd535c2561e256 inherit pub_static_methods_a01437"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a12999b1c566cf7208abd535c2561e256">peel_leading_slash</a> (std::string *path)</td></tr>
<tr class="separator:a12999b1c566cf7208abd535c2561e256 inherit pub_static_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab971b977e48fc58d6264fa97d94cb6cd inherit pub_static_methods_a01437"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#ab971b977e48fc58d6264fa97d94cb6cd">peel_trailing_slashstar</a> (std::string *path)</td></tr>
<tr class="separator:ab971b977e48fc58d6264fa97d94cb6cd inherit pub_static_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9cb8e3df035052930a216cd2f052adc inherit pub_static_methods_a01437"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#aa9cb8e3df035052930a216cd2f052adc">peel_name</a> (std::string *path)</td></tr>
<tr class="separator:aa9cb8e3df035052930a216cd2f052adc inherit pub_static_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_a01063"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_a01063')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../de/de6/a01063.html">ripple::Overlay</a></td></tr>
<tr class="memitem:ad4ffefde8bba293f6de242a3fe8dd1b0 inherit pro_methods_a01063"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/de6/a01063.html#ad4ffefde8bba293f6de242a3fe8dd1b0">Overlay</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;parent)</td></tr>
<tr class="separator:ad4ffefde8bba293f6de242a3fe8dd1b0 inherit pro_methods_a01063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_a01561"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_a01561')"><img src="../../closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="../../d2/d49/a01561.html">beast::Stoppable</a></td></tr>
<tr class="memitem:af4e7ab358a26f9e77609119f56b6324d inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">char const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#af4e7ab358a26f9e77609119f56b6324d">m_name</a></td></tr>
<tr class="separator:af4e7ab358a26f9e77609119f56b6324d inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa65f6d0b79ef60e895f49ff1e3e572e inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dda/a01289.html">RootStoppable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#afa65f6d0b79ef60e895f49ff1e3e572e">m_root</a></td></tr>
<tr class="separator:afa65f6d0b79ef60e895f49ff1e3e572e inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bf935d3fb8d634a65993d18951e5c8c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d56/a00274.html">Child</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a8bf935d3fb8d634a65993d18951e5c8c">m_child</a></td></tr>
<tr class="separator:a8bf935d3fb8d634a65993d18951e5c8c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d15d9b53bec924ba390e76fb775b45c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d06/a00131.html">Atomic</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a4d15d9b53bec924ba390e76fb775b45c">m_started</a></td></tr>
<tr class="separator:a4d15d9b53bec924ba390e76fb775b45c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8958b95e49ca71456dc06ce6117bd7 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">bool volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a4d8958b95e49ca71456dc06ce6117bd7">m_stopped</a></td></tr>
<tr class="separator:a4d8958b95e49ca71456dc06ce6117bd7 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a456aaf3dae4f448e8a6ad889deb19e85 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">bool volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a456aaf3dae4f448e8a6ad889deb19e85">m_childrenStopped</a></td></tr>
<tr class="separator:a456aaf3dae4f448e8a6ad889deb19e85 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58b644e5741df3061537d39c9a1022c8 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d49/a01561.html#a229376a5eb68401604f3c83112b65ea6">Children</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a58b644e5741df3061537d39c9a1022c8">m_children</a></td></tr>
<tr class="separator:a58b644e5741df3061537d39c9a1022c8 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e94f76b666ad08e057a8b6a7c7dbe0c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d02/a01808.html">WaitableEvent</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7e94f76b666ad08e057a8b6a7c7dbe0c">m_stoppedEvent</a></td></tr>
<tr class="separator:a7e94f76b666ad08e057a8b6a7c7dbe0c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00046">46</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a80e74ab24af8c0523973875dd7c7cd6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::unordered_map&lt; <a class="el" href="../../d4/d0e/a01272.html">RippleAddress</a>, <a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a>&gt; <a class="el" href="../../d9/db3/a01064.html#a80e74ab24af8c0523973875dd7c7cd6a">ripple::OverlayImpl::PeerByPublicKey</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00057">57</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

</div>
</div>
<a class="anchor" id="aad89b687faa3fe1764b0f2bf91ecdb23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unordered_map&lt; <a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a>, <a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a>&gt; <a class="el" href="../../d9/db3/a01064.html#aad89b687faa3fe1764b0f2bf91ecdb23">ripple::OverlayImpl::PeerByShortId</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00060">60</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

</div>
</div>
<a class="anchor" id="a579d5bc9848c4c3e8e659ea665700a2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unordered_map&lt;<a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a>, boost::weak_ptr &lt;<a class="el" href="../../d9/d10/a01103.html">PeerImp</a>&gt; &gt; <a class="el" href="../../d9/db3/a01064.html#a579d5bc9848c4c3e8e659ea665700a2a">ripple::OverlayImpl::PeersBySlot</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00054">54</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae4871cf6ee4e956f0231c20f2cf13a84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::asio::ip::tcp::socket <a class="el" href="../../d9/db3/a01064.html#ae4871cf6ee4e956f0231c20f2cf13a84">ripple::OverlayImpl::socket_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00051">51</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a78919d5bd6c2f19641831974c712b5c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ripple::OverlayImpl::OverlayImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d62/a00924.html">Resource::Manager</a> &amp;&#160;</td>
          <td class="paramname"><em>resourceManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d98/a00927.html">SiteFiles::Manager</a> &amp;&#160;</td>
          <td class="paramname"><em>siteFiles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d33/a00536.html">beast::File</a> const &amp;&#160;</td>
          <td class="paramname"><em>pathToDbFileOrDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d33/a01252.html">Resolver</a> &amp;&#160;</td>
          <td class="paramname"><em>resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::asio::io_service &amp;&#160;</td>
          <td class="paramname"><em>io_service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::asio::ssl::context &amp;&#160;</td>
          <td class="paramname"><em>ssl_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00080">80</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    : <a class="code" href="../../de/de6/a01063.html#ad4ffefde8bba293f6de242a3fe8dd1b0">Overlay</a> (parent)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    , <a class="code" href="../../d9/db3/a01064.html#aabe5baad281e352df046beaf5e37fe55">m_child_count</a> (1)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    , <a class="code" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a> (LogPartition::getJournal &lt;PeersLog&gt; ())</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    , <a class="code" href="../../d9/db3/a01064.html#a3a0bf589a6364fd1bcd500d661daba6a">m_resourceManager</a> (resourceManager)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    , <a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a> (<a class="code" href="../../d9/db0/a01437.html#a6b74ac4b0ae83b71d8605412b2fe5c8b">add</a> (<a class="code" href="../../d8/d38/a00926.html#a6ae6272485fd31cfc762ea14fba821c9">PeerFinder::Manager::New</a> (</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        *<span class="keyword">this</span>,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        siteFiles,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        pathToDbFileOrDirectory,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        *<span class="keyword">this</span>,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#abf0dafb6d882fc70b9b0f2d33974ed97">get_seconds_clock</a> (),</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        LogPartition::getJournal &lt;PeerFinderLog&gt; ())))</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    , <a class="code" href="../../d9/db3/a01064.html#a187750f2ebe7d8c9e517589e4624de3c">m_io_service</a> (io_service)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    , <a class="code" href="../../d9/db3/a01064.html#a98222c69229d875c7e0cfdf101b307c0">m_ssl_context</a> (ssl_context)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    , <a class="code" href="../../d9/db3/a01064.html#a222db6945256c0eebf01c39c572f655c">m_resolver</a> (resolver)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a573ecfb6936c4423c4187a18c4b31afe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ripple::OverlayImpl::~OverlayImpl </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00104">104</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00068">m_child_count</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00065">m_cond</a>, and <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// Block until dependent objects have been destroyed.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// This is just to catch improper use of the Stoppable API.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    std::unique_lock &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#a80216dbe3ae14bdb7e6ecf6fa7dc2d96">m_cond</a>.wait (lock, [<span class="keyword">this</span>] {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="../../d9/db3/a01064.html#aabe5baad281e352df046beaf5e37fe55">m_child_count</a> == 0; });</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa76519937058126b51f6b56128ea29ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ripple::OverlayImpl::OverlayImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/db3/a01064.html">OverlayImpl</a> const &amp;&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af10842a41b9793e3a2941741542aaa09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::accept </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>proxyHandshake</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/db3/a01064.html#ae4871cf6ee4e956f0231c20f2cf13a84">socket_type</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>socket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process an incoming connection using the <a class="el" href="../../d5/d17/a01098.html">Peer</a> protocol. The caller transfers ownership of the socket via rvalue move. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">proxyHandshake</td><td><code>true</code> If a PROXY handshake is required. </td></tr>
    <tr><td class="paramname">socket</td><td>A socket in the accepted state. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00115">115</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../de/dfb/a01874_source.html#l00056">beast::IPAddressConversion::from_asio()</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00068">m_child_count</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00073">m_peerFinder</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00079">m_peers</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00071">m_resourceManager</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00076">m_ssl_context</a>, <a class="el" href="../../d8/df6/a02411_source.html#l00041">ripple::MultiSocket::Flag::proxy</a>, <a class="el" href="../../d8/df6/a02411_source.html#l00039">ripple::MultiSocket::Flag::server_role</a>, <a class="el" href="../../d8/df6/a02411_source.html#l00047">ripple::MultiSocket::Flag::ssl_required</a>, and <a class="el" href="../../d8/df6/a02411_source.html#l00077">ripple::MultiSocket::Flag::with()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc7/a03241_source.html#l00098">ripple::PeerDoorImp::handleAccept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// An error getting an endpoint means the connection closed.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// Just do nothing and the socket will be closed by the caller.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="../../d1/d8b/a03420.html#a2abcd4192724d45e2c5a572650a2decc">boost::system::error_code</a> ec;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> local_endpoint_native (<a class="code" href="../../d1/d8b/a03420.html#acc32cf403226613f8fe6ee3242f3820b">socket</a>.local_endpoint (ec));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (ec)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> remote_endpoint_native (<a class="code" href="../../d1/d8b/a03420.html#acc32cf403226613f8fe6ee3242f3820b">socket</a>.remote_endpoint (ec));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (ec)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> local_endpoint (</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="../../dc/d85/a00736.html#a5e02e604b7d4a590f7ceb14a26a6947b">beast::IPAddressConversion::from_asio</a> (local_endpoint_native));</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> remote_endpoint (</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="../../dc/d85/a00736.html#a5e02e604b7d4a590f7ceb14a26a6947b">beast::IPAddressConversion::from_asio</a> (remote_endpoint_native));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> <span class="keyword">const</span> slot (<a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a>-&gt;new_inbound_slot (</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        local_endpoint, remote_endpoint));</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (slot == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    MultiSocket::Flag <a class="code" href="../../df/d37/a02002.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> (</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="../../dc/dea/a00558.html#aa3ceaa0be65a8308b85ae96a11d64ed8ac779f33bc30c82b508bae92d9368dc8d">MultiSocket::Flag::server_role</a> | <a class="code" href="../../dc/dea/a00558.html#aa3ceaa0be65a8308b85ae96a11d64ed8a5ef3aa5d6a35a5632691deb25e7d9b93">MultiSocket::Flag::ssl_required</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (proxyHandshake)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="../../df/d37/a02002.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> = <a class="code" href="../../df/d37/a02002.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>.with (<a class="code" href="../../dc/dea/a00558.html#aa3ceaa0be65a8308b85ae96a11d64ed8ab473cc365e494aa1d9bcda4e9789a72d">MultiSocket::Flag::proxy</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../d9/d10/a01103.html#a50e3d5364a8de2d5a3d67490c8c8a83c">PeerImp::ptr</a> <span class="keyword">const</span> peer (boost::make_shared &lt;PeerImp&gt; (</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        std::move (<a class="code" href="../../d1/d8b/a03420.html#acc32cf403226613f8fe6ee3242f3820b">socket</a>), remote_endpoint, *<span class="keyword">this</span>, <a class="code" href="../../d9/db3/a01064.html#a3a0bf589a6364fd1bcd500d661daba6a">m_resourceManager</a>,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            *<a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a>, slot, <a class="code" href="../../d9/db3/a01064.html#a98222c69229d875c7e0cfdf101b307c0">m_ssl_context</a>, <a class="code" href="../../df/d37/a02002.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            std::pair &lt;PeersBySlot::iterator, bool&gt; <span class="keyword">const</span> result (</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.emplace (slot, peer));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            assert (result.second);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        ++<a class="code" href="../../d9/db3/a01064.html#aabe5baad281e352df046beaf5e37fe55">m_child_count</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">// This has to happen while holding the lock,</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// otherwise the socket might not be canceled during a stop.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        peer-&gt;start ();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_cgraph.png" border="0" usemap="#d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_cgraph" alt=""/></div>
<map name="d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_cgraph" id="d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_cgraph">
<area shape="rect" id="node3" href="../../dc/d85/a00736.html#a5e02e604b7d4a590f7ceb14a26a6947b" title="beast::IPAddressConversion\l::from_asio" alt="" coords="184,5,373,51"/><area shape="rect" id="node7" href="../../dc/dea/a00558.html#a6cb676e82b289dec647184a16812808d" title="ripple::MultiSocket\l::Flag::with" alt="" coords="213,74,344,121"/><area shape="rect" id="node5" href="../../d2/d7f/a03369.html#a578cc6ee4f830264e142c08775b7f1f9" title="beast::IP::from_asio" alt="" coords="423,13,561,43"/><area shape="rect" id="node9" href="../../dc/dea/a00558.html#af0ad09e75646893436247b66d0c52f81" title="ripple::MultiSocket\l::Flag::Flag" alt="" coords="427,74,557,121"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_icgraph.png" border="0" usemap="#d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_icgraph" alt=""/></div>
<map name="d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_icgraph" id="d9/db3/a01064_af10842a41b9793e3a2941741542aaa09_icgraph">
<area shape="rect" id="node3" href="../../d4/da7/a01102.html#a89de773fc292ddbd6f470180c842c160" title="ripple::PeerDoorImp\l::handleAccept" alt="" coords="184,5,323,51"/><area shape="rect" id="node5" href="../../d4/da7/a01102.html#aac96196f39e9958c3e22112d5d22250e" title="ripple::PeerDoorImp\l::async_accept" alt="" coords="371,5,509,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab96caa67be889971c6642de9aa7c2a45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::activate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>slot</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Activate the handshaked peer with the specified address. </p>

<p>Implements <a class="el" href="../../de/dbc/a00249.html#a920d4499f5648d3f6dca9aace2375c0d">ripple::PeerFinder::Callback</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00262">262</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00070">m_journal</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00079">m_peers</a>, and <a class="el" href="../../dd/d07/a02132_source.html#l00243">beast::Journal::trace</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a> &lt;&lt;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="stringliteral">&quot;Activate &quot;</span> &lt;&lt; slot-&gt;remote_endpoint();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    PeersBySlot::iterator <span class="keyword">const</span> iter (<a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.find (slot));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    assert (iter != <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.end ());</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="../../d9/d10/a01103.html#a50e3d5364a8de2d5a3d67490c8c8a83c">PeerImp::ptr</a> <span class="keyword">const</span> peer (iter-&gt;second.lock());</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    assert (peer != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    peer-&gt;activate ();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b12e6a7e9b089480735592140bf5732"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::check_stopped </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00213">213</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d2/d31/a02087_source.html#l00062">beast::Stoppable::areChildrenStopped()</a>, <a class="el" href="../../dd/d07/a02132_source.html#l00245">beast::Journal::info</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00068">m_child_count</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00065">m_cond</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00070">m_journal</a>, and <a class="el" href="../../d2/d31/a02087_source.html#l00067">beast::Stoppable::stopped()</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00468">onChildrenStopped()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00229">release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// To be stopped, child Stoppable objects must be stopped</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// and the count of dependent objects must be zero</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30">areChildrenStopped</a> () &amp;&amp; <a class="code" href="../../d9/db3/a01064.html#aabe5baad281e352df046beaf5e37fe55">m_child_count</a> == 0)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#a80216dbe3ae14bdb7e6ecf6fa7dc2d96">m_cond</a>.notify_all ();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#ad9e31acb5bfc1ff22e1a8a7b0561ec4e">info</a> &lt;&lt;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="stringliteral">&quot;Stopped.&quot;</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e">stopped</a> ();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_cgraph.png" border="0" usemap="#d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_cgraph" alt=""/></div>
<map name="d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_cgraph" id="d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_cgraph">
<area shape="rect" id="node3" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30" title="beast::Stoppable::areChildren\lStopped" alt="" coords="184,5,379,51"/><area shape="rect" id="node5" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e" title="beast::Stoppable::stopped" alt="" coords="195,75,368,104"/><area shape="rect" id="node7" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="427,66,573,113"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_icgraph.png" border="0" usemap="#d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_icgraph" alt=""/></div>
<map name="d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_icgraph" id="d9/db3/a01064_a8b12e6a7e9b089480735592140bf5732_icgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#a3a2a34dcf3647aad5b8860744fc4a324" title="ripple::OverlayImpl\l::onChildrenStopped" alt="" coords="185,5,324,51"/><area shape="rect" id="node5" href="../../d9/db3/a01064.html#aae610b1a44dfb3505bd9449e5217d660" title="ripple::OverlayImpl\l::release" alt="" coords="189,74,320,121"/><area shape="rect" id="node7" href="../../d9/db3/a01064.html#afa4e7d42e14e611f22fd50f5b1f11738" title="ripple::OverlayImpl\l::remove" alt="" coords="373,39,504,86"/><area shape="rect" id="node11" href="../../d9/db3/a01064.html#ac252980b7a02834b5a4577456ad8f7a3" title="ripple::OverlayImpl\l::onStop" alt="" coords="373,109,504,155"/><area shape="rect" id="node9" href="../../d9/d10/a01103.html#a162a0f14933f5b43db5a9655544effd2" title="ripple::PeerImp::~PeerImp" alt="" coords="553,48,727,77"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac383aafb3e8cd3715e9030e53fcfe5ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::close_all </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close all peer connections. If <code>graceful</code> is true then active Requirements: Caller must hold the mutex. </p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00438">438</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00079">m_peers</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00453">onStop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; entry : <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="../../d9/d10/a01103.html#a50e3d5364a8de2d5a3d67490c8c8a83c">PeerImp::ptr</a> <span class="keyword">const</span> peer (entry.second.lock());</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">// VFALCO The only case where the weak_ptr is expired should be if</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">//        ~PeerImp is pre-empted before it calls m_peers.remove()</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">if</span> (peer != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            peer-&gt;close (graceful);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_ac383aafb3e8cd3715e9030e53fcfe5ae_icgraph.png" border="0" usemap="#d9/db3/a01064_ac383aafb3e8cd3715e9030e53fcfe5ae_icgraph" alt=""/></div>
<map name="d9/db3/a01064_ac383aafb3e8cd3715e9030e53fcfe5ae_icgraph" id="d9/db3/a01064_ac383aafb3e8cd3715e9030e53fcfe5ae_icgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#ac252980b7a02834b5a4577456ad8f7a3" title="ripple::OverlayImpl\l::onStop" alt="" coords="184,5,315,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac46c8e01be998c3a168b1bc6e2da0f07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/dc3/a00453.html">beast::IP::Endpoint</a> const &amp;&#160;</td>
          <td class="paramname"><em>remote_endpoint</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../de/de6/a01063.html#ad2c027b6e00d798830d9d47cabbe7d41">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00164">164</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d8/df6/a02411_source.html#l00038">ripple::MultiSocket::Flag::client_role</a>, <a class="el" href="../../dd/d07/a02132_source.html#l00244">beast::Journal::debug</a>, <a class="el" href="../../d2/d31/a02087_source.html#l00052">beast::Stoppable::isStopping()</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00068">m_child_count</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00075">m_io_service</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00070">m_journal</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00073">m_peerFinder</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00079">m_peers</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00071">m_resourceManager</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00076">m_ssl_context</a>, and <a class="el" href="../../d8/df6/a02411_source.html#l00044">ripple::MultiSocket::Flag::ssl</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00254">connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d49/a01561.html#a7ca78fcebed5c6b8c9cd96bacb588785">isStopping</a>())</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="stringliteral">&quot;Skipping &quot;</span> &lt;&lt; remote_endpoint &lt;&lt;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="stringliteral">&quot; connect on stop&quot;</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> <span class="keyword">const</span> slot (</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a>-&gt;new_outbound_slot (remote_endpoint));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (slot == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    MultiSocket::Flag <span class="keyword">const</span> <a class="code" href="../../df/d37/a02002.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> (</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="../../dc/dea/a00558.html#aa3ceaa0be65a8308b85ae96a11d64ed8a546755c5d8716f064c48556a2ee1a634">MultiSocket::Flag::client_role</a> | <a class="code" href="../../dc/dea/a00558.html#aa3ceaa0be65a8308b85ae96a11d64ed8a0fb86a379c3fc4fc307e87b11f91d965">MultiSocket::Flag::ssl</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="../../d9/d10/a01103.html#a50e3d5364a8de2d5a3d67490c8c8a83c">PeerImp::ptr</a> <span class="keyword">const</span> peer (boost::make_shared &lt;PeerImp&gt; (</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        remote_endpoint, <a class="code" href="../../d9/db3/a01064.html#a187750f2ebe7d8c9e517589e4624de3c">m_io_service</a>, *<span class="keyword">this</span>, <a class="code" href="../../d9/db3/a01064.html#a3a0bf589a6364fd1bcd500d661daba6a">m_resourceManager</a>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            *<a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a>, slot, <a class="code" href="../../d9/db3/a01064.html#a98222c69229d875c7e0cfdf101b307c0">m_ssl_context</a>, <a class="code" href="../../df/d37/a02002.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            std::pair &lt;PeersBySlot::iterator, bool&gt; <span class="keyword">const</span> result (</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.emplace (slot, peer));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            assert (result.second);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        ++<a class="code" href="../../d9/db3/a01064.html#aabe5baad281e352df046beaf5e37fe55">m_child_count</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">// This has to happen while holding the lock,</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// otherwise the socket might not be canceled during a stop.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        peer-&gt;start ();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_cgraph.png" border="0" usemap="#d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_cgraph" alt=""/></div>
<map name="d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_cgraph" id="d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_cgraph">
<area shape="rect" id="node3" href="../../d2/d49/a01561.html#a7ca78fcebed5c6b8c9cd96bacb588785" title="beast::Stoppable::isStopping" alt="" coords="184,48,373,77"/><area shape="rect" id="node5" href="../../d9/dda/a01289.html#ad9cd49491da83c35da97c5314a5d6dc4" title="beast::RootStoppable\l::isStopping" alt="" coords="423,39,569,86"/><area shape="rect" id="node7" href="../../d7/d06/a00131.html#a5c88392b7809b40726246e4c3f8fdbbd" title="beast::Atomic::get" alt="" coords="620,48,748,77"/><area shape="rect" id="node9" href="../../d5/d83/a03337.html#a699ee774f7da236c969760c16eda014a" title="beast::beast_Interlocked\lExchangeAdd" alt="" coords="797,5,963,51"/><area shape="rect" id="node11" href="../../d5/d83/a03337.html#a3fdce02cb9dee31442b770d078f64edc" title="beast::beast_Interlocked\lExchangeAdd64" alt="" coords="797,74,963,121"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_icgraph.png" border="0" usemap="#d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_icgraph" alt=""/></div>
<map name="d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_icgraph" id="d9/db3/a01064_ac46c8e01be998c3a168b1bc6e2da0f07_icgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#a41ffb563533fd26345f42d63949b7d9d" title="ripple::OverlayImpl\l::connect" alt="" coords="184,5,315,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a41ffb563533fd26345f42d63949b7d9d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::connect </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../da/dc3/a00453.html">beast::IP::Endpoint</a> &gt; const &amp;&#160;</td>
          <td class="paramname"><em>addresses</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initiate outgoing <a class="el" href="../../d5/d17/a01098.html">Peer</a> connections to the specified set of endpoints. </p>

<p>Implements <a class="el" href="../../de/dbc/a00249.html#a60c5148e30d51adb1ab0e19163db6d50">ripple::PeerFinder::Callback</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00254">254</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">for</span> (std::vector &lt;beast::IP::Endpoint&gt;::const_iterator iter (list.begin());</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        iter != list.end(); ++iter)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#ac46c8e01be998c3a168b1bc6e2da0f07">connect</a> (*iter);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a41ffb563533fd26345f42d63949b7d9d_cgraph.png" border="0" usemap="#d9/db3/a01064_a41ffb563533fd26345f42d63949b7d9d_cgraph" alt=""/></div>
<map name="d9/db3/a01064_a41ffb563533fd26345f42d63949b7d9d_cgraph" id="d9/db3/a01064_a41ffb563533fd26345f42d63949b7d9d_cgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#ac46c8e01be998c3a168b1bc6e2da0f07" title="ripple::OverlayImpl\l::connect" alt="" coords="184,39,315,86"/><area shape="rect" id="node5" href="../../d2/d49/a01561.html#a7ca78fcebed5c6b8c9cd96bacb588785" title="beast::Stoppable::isStopping" alt="" coords="363,48,552,77"/><area shape="rect" id="node7" href="../../d9/dda/a01289.html#ad9cd49491da83c35da97c5314a5d6dc4" title="beast::RootStoppable\l::isStopping" alt="" coords="601,39,748,86"/><area shape="rect" id="node9" href="../../d7/d06/a00131.html#a5c88392b7809b40726246e4c3f8fdbbd" title="beast::Atomic::get" alt="" coords="799,48,927,77"/><area shape="rect" id="node11" href="../../d5/d83/a03337.html#a699ee774f7da236c969760c16eda014a" title="beast::beast_Interlocked\lExchangeAdd" alt="" coords="976,5,1141,51"/><area shape="rect" id="node13" href="../../d5/d83/a03337.html#a3fdce02cb9dee31442b770d078f64edc" title="beast::beast_Interlocked\lExchangeAdd64" alt="" coords="976,74,1141,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7cff3da8e418c4b955a6fccd02dd5a6f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Disconnect the handshaked peer with the specified address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td><code>true</code> to wait for send buffers to drain before closing. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../de/dbc/a00249.html#aa15516794a80cb812ed99ef1ef54f269">ripple::PeerFinder::Callback</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00314">314</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00070">m_journal</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00079">m_peers</a>, and <a class="el" href="../../dd/d07/a02132_source.html#l00243">beast::Journal::trace</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a>) <a class="code" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a> &lt;&lt;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="stringliteral">&quot;Disconnect &quot;</span> &lt;&lt; slot-&gt;remote_endpoint () &lt;&lt;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        (graceful ? <span class="stringliteral">&quot;gracefully&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    PeersBySlot::iterator <span class="keyword">const</span> iter (<a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.find (slot));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    assert (iter != <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.end ());</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="../../d9/d10/a01103.html#a50e3d5364a8de2d5a3d67490c8c8a83c">PeerImp::ptr</a> <span class="keyword">const</span> peer (iter-&gt;second.lock());</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    assert (peer != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    peer-&gt;close (graceful);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">//peer-&gt;detach (&quot;disc&quot;, false);</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0980ca22d4b2f415918240c2201b6e32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> ripple::OverlayImpl::findPeerByShortID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a> const &amp;&#160;</td>
          <td class="paramname"><em>id</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../de/de6/a01063.html#a5372f69289f13739d75e3ea0de8efb3a">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00572">572</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, and <a class="el" href="../../d9/de5/a03240_source.html#l00085">m_shortIdMap</a>.</p>

<p>Referenced by <a class="el" href="../../db/d36/a03243_source.html#l01845">ripple::PeerImp::recvLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    PeerByShortId::iterator <span class="keyword">const</span> iter (</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#a9a2944e62685590732fba4865ef5bdc8">m_shortIdMap</a>.find (<span class="keywordtype">id</span>));</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (iter != <a class="code" href="../../d9/db3/a01064.html#a9a2944e62685590732fba4865ef5bdc8">m_shortIdMap</a>.end ())</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">return</span> iter-&gt;second;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a>();</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a0980ca22d4b2f415918240c2201b6e32_icgraph.png" border="0" usemap="#d9/db3/a01064_a0980ca22d4b2f415918240c2201b6e32_icgraph" alt=""/></div>
<map name="d9/db3/a01064_a0980ca22d4b2f415918240c2201b6e32_icgraph" id="d9/db3/a01064_a0980ca22d4b2f415918240c2201b6e32_icgraph">
<area shape="rect" id="node3" href="../../d9/d10/a01103.html#ac582b079b5608c7a71f610f7638a09bc" title="ripple::PeerImp::recvLedger" alt="" coords="193,45,375,75"/><area shape="rect" id="node5" href="../../d9/d10/a01103.html#a50e5197ee12f2fe9b978a9412902b981" title="ripple::PeerImp::process\lReadBuffer" alt="" coords="425,37,588,83"/><area shape="rect" id="node7" href="../../d9/d10/a01103.html#a4dad989e8b4f4c854726a235afb6fbad" title="ripple::PeerImp::handleReadBody" alt="" coords="639,45,855,75"/><area shape="rect" id="node9" href="../../d9/d10/a01103.html#afece44c809309a7730b9192c90065b52" title="ripple::PeerImp::startReadBody" alt="" coords="904,17,1109,47"/><area shape="rect" id="node11" href="../../d9/d10/a01103.html#a751486a781a8805e7ba9b9486110471c" title="ripple::PeerImp::handleRead\lHeader" alt="" coords="1157,5,1344,51"/><area shape="rect" id="node13" href="../../d9/d10/a01103.html#abeee024c8f7c8d235b9bb0239db9f4b2" title="ripple::PeerImp::startRead\lHeader" alt="" coords="1393,35,1567,82"/><area shape="rect" id="node16" href="../../d9/d10/a01103.html#ab770dbfe865c2c492fa66316997b40aa" title="ripple::PeerImp::handleStart" alt="" coords="1616,44,1800,73"/><area shape="rect" id="node18" href="../../d9/d10/a01103.html#abb7f376a3c0cc916f91137c4c2d9c486" title="ripple::PeerImp::accept" alt="" coords="2081,16,2239,45"/><area shape="rect" id="node22" href="../../d9/d10/a01103.html#afb359344939e364b1a9afdcc27a5a0f2" title="ripple::PeerImp::onConnect" alt="" coords="1848,69,2029,99"/><area shape="rect" id="node20" href="../../d9/d10/a01103.html#a2070ddba2d1ac7d2997a0e9b4f76d93f" title="ripple::PeerImp::start" alt="" coords="2291,43,2435,72"/><area shape="rect" id="node24" href="../../d9/d10/a01103.html#a586041b00bf2280463df543bafc86f65" title="ripple::PeerImp::connect" alt="" coords="2079,69,2241,99"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab5d1f8e0f0b688f433ed96eab211b375"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/de6/a01063.html#ab31ecd9bdd548883e13ef848725264ab">Overlay::PeerSequence</a> ripple::OverlayImpl::getActivePeers </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00554">554</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, and <a class="el" href="../../d9/de5/a03240_source.html#l00082">m_publicKeyMap</a>.</p>

<p>Referenced by <a class="el" href="../../db/d36/a03243_source.html#l02185">ripple::PeerImp::getLedger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;{</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="../../de/de6/a01063.html#ab31ecd9bdd548883e13ef848725264ab">Overlay::PeerSequence</a> ret;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    ret.reserve (<a class="code" href="../../d9/db3/a01064.html#a16db82d29d074aa00181fd2381324972">m_publicKeyMap</a>.size ());</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    BOOST_FOREACH (PeerByPublicKey::value_type <span class="keyword">const</span>&amp; pair, <a class="code" href="../../d9/db3/a01064.html#a16db82d29d074aa00181fd2381324972">m_publicKeyMap</a>)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        assert (!!pair.second);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        ret.push_back (pair.second);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_ab5d1f8e0f0b688f433ed96eab211b375_icgraph.png" border="0" usemap="#d9/db3/a01064_ab5d1f8e0f0b688f433ed96eab211b375_icgraph" alt=""/></div>
<map name="d9/db3/a01064_ab5d1f8e0f0b688f433ed96eab211b375_icgraph" id="d9/db3/a01064_ab5d1f8e0f0b688f433ed96eab211b375_icgraph">
<area shape="rect" id="node3" href="../../d9/d10/a01103.html#a598f84e984d687fea5c2f03d83dbe624" title="ripple::PeerImp::getLedger" alt="" coords="185,13,359,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c2c7c1e03e568c21ba57a486c21d835"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d27/a01781.html">Json::Value</a> ripple::OverlayImpl::json </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../de/de6/a01063.html#a5da9bb30da9541be97e172a923aae879">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00548">548</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">return</span> <span class="keywordflow">foreach</span> (get_peer_json());</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0beeb2f44eb509bdf7b766d67e4d8780"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a> ripple::OverlayImpl::next_id </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00203">203</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00097">m_nextShortId</a>.</p>

<p>Referenced by <a class="el" href="../../db/d36/a03243_source.html#l00430">ripple::PeerImp::activate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> ++<a class="code" href="../../d9/db3/a01064.html#a8b8a3d385f24195deb5811d4a22416eb">m_nextShortId</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a0beeb2f44eb509bdf7b766d67e4d8780_icgraph.png" border="0" usemap="#d9/db3/a01064_a0beeb2f44eb509bdf7b766d67e4d8780_icgraph" alt=""/></div>
<map name="d9/db3/a01064_a0beeb2f44eb509bdf7b766d67e4d8780_icgraph" id="d9/db3/a01064_a0beeb2f44eb509bdf7b766d67e4d8780_icgraph">
<area shape="rect" id="node3" href="../../d9/d10/a01103.html#aafd6ba1fa3d975214f29925c12f25e17" title="ripple::PeerImp::activate" alt="" coords="185,13,348,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3a2a34dcf3647aad5b8860744fc4a324"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::onChildrenStopped </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override called when all children have stopped.</p>
<p>The call is made on an unspecified, implementation-specific thread. onStop and onChildrenStopped will never be called concurrently, across all Stoppable objects descended from the same root, inclusive of the root.</p>
<p>It is safe to call isStopping, isStopped, and areChildrenStopped from within this function; The values returned will always be valid and never change during the callback.</p>
<p>The default implementation does nothing.</p>
<p>Thread safety: May not block for long periods. Guaranteed only to be called once. Must be safe to call from any thread at any time. </p>

<p>Reimplemented from <a class="el" href="../../d2/d49/a01561.html#a2b5dbf359315d75eacb3386140b32e0f">beast::Stoppable</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00468">468</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../db/d5f/a03239_source.html#l00213">check_stopped()</a>, and <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#a8b12e6a7e9b089480735592140bf5732">check_stopped</a> ();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a3a2a34dcf3647aad5b8860744fc4a324_cgraph.png" border="0" usemap="#d9/db3/a01064_a3a2a34dcf3647aad5b8860744fc4a324_cgraph" alt=""/></div>
<map name="d9/db3/a01064_a3a2a34dcf3647aad5b8860744fc4a324_cgraph" id="d9/db3/a01064_a3a2a34dcf3647aad5b8860744fc4a324_cgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#a8b12e6a7e9b089480735592140bf5732" title="ripple::OverlayImpl\l::check_stopped" alt="" coords="195,35,325,82"/><area shape="rect" id="node5" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30" title="beast::Stoppable::areChildren\lStopped" alt="" coords="373,5,568,51"/><area shape="rect" id="node7" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e" title="beast::Stoppable::stopped" alt="" coords="384,75,557,104"/><area shape="rect" id="node9" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="616,66,763,113"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9c6924ce448c66733205236a8eb5fa1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::onPeerActivated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>peer</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A peer has connected successfully This is called after the peer handshake has been completed and during peer activation. At this point, the peer address and the public key are known. </p>

<p>Implements <a class="el" href="../../de/de6/a01063.html#a6ab798d659a2acf97936502020e009b8">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00492">492</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../dd/d07/a02132_source.html#l00244">beast::Journal::debug</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00070">m_journal</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00082">m_publicKeyMap</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00085">m_shortIdMap</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00540">size()</a>.</p>

<p>Referenced by <a class="el" href="../../db/d36/a03243_source.html#l00430">ripple::PeerImp::activate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// Now track this peer</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> result (<a class="code" href="../../d9/db3/a01064.html#a9a2944e62685590732fba4865ef5bdc8">m_shortIdMap</a>.emplace (</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            std::piecewise_construct,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                std::make_tuple (peer-&gt;getShortId()),</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                    std::make_tuple (peer)));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        assert(result.second);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> result (<a class="code" href="../../d9/db3/a01064.html#a16db82d29d074aa00181fd2381324972">m_publicKeyMap</a>.emplace (</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            boost::unordered::piecewise_construct,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                boost::make_tuple (peer-&gt;getNodePublic()),</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                    boost::make_tuple (peer)));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        assert(result.second);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#a272364d87023377cc9059bdbff5a7157">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="stringliteral">&quot;activated &quot;</span> &lt;&lt; peer-&gt;getRemoteAddress() &lt;&lt;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; peer-&gt;getShortId() &lt;&lt; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="../../d9/d9d/a03417.html#ad055bd0a1d4c7de9da4f74750bfe0460">RipplePublicKey</a>(peer-&gt;getNodePublic()) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">// We just accepted this peer so we have non-zero active peers</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    assert(<a class="code" href="../../d9/db3/a01064.html#a8c11a6baa3cc3fc0e3ab549f0c2b49d6">size</a>() != 0);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_cgraph.png" border="0" usemap="#d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_cgraph" alt=""/></div>
<map name="d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_cgraph" id="d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_cgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#a8c11a6baa3cc3fc0e3ab549f0c2b49d6" title="ripple::OverlayImpl\l::size" alt="" coords="184,5,315,51"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_icgraph.png" border="0" usemap="#d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_icgraph" alt=""/></div>
<map name="d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_icgraph" id="d9/db3/a01064_a9c6924ce448c66733205236a8eb5fa1b_icgraph">
<area shape="rect" id="node3" href="../../d9/d10/a01103.html#aafd6ba1fa3d975214f29925c12f25e17" title="ripple::PeerImp::activate" alt="" coords="185,13,348,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a764de53f025303840c76d1b8583332da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::onPeerDisconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>peer</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A peer is being disconnected This is called during the disconnection of a known, activated peer. It will not be called for outbound peer connections that don't succeed or for connections of peers that are dropped prior to being activated. </p>

<p>Implements <a class="el" href="../../de/de6/a01063.html#aee0e6b7ba4f550c4e448bdb24c46efaf">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00528">528</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00082">m_publicKeyMap</a>, and <a class="el" href="../../d9/de5/a03240_source.html#l00085">m_shortIdMap</a>.</p>

<p>Referenced by <a class="el" href="../../db/d36/a03243_source.html#l00317">ripple::PeerImp::detach()</a>.</p>
<div class="fragment"><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#a9a2944e62685590732fba4865ef5bdc8">m_shortIdMap</a>.erase (peer-&gt;getShortId ());</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#a16db82d29d074aa00181fd2381324972">m_publicKeyMap</a>.erase (peer-&gt;getNodePublic ());</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a764de53f025303840c76d1b8583332da_icgraph.png" border="0" usemap="#d9/db3/a01064_a764de53f025303840c76d1b8583332da_icgraph" alt=""/></div>
<map name="d9/db3/a01064_a764de53f025303840c76d1b8583332da_icgraph" id="d9/db3/a01064_a764de53f025303840c76d1b8583332da_icgraph">
<area shape="rect" id="node3" href="../../d9/d10/a01103.html#a87b0072cd3ec93aa82c2d6b65846a5dc" title="ripple::PeerImp::detach" alt="" coords="192,364,349,394"/><area shape="rect" id="node5" href="../../d9/d10/a01103.html#a586041b00bf2280463df543bafc86f65" title="ripple::PeerImp::connect" alt="" coords="3329,124,3492,154"/><area shape="rect" id="node9" href="../../d9/d10/a01103.html#a07f567ec644bc24a69fa82141578f532" title="ripple::PeerImp::close" alt="" coords="431,59,580,88"/><area shape="rect" id="node11" href="../../d9/d10/a01103.html#afb359344939e364b1a9afdcc27a5a0f2" title="ripple::PeerImp::onConnect" alt="" coords="3099,163,3280,192"/><area shape="rect" id="node14" href="../../d9/d10/a01103.html#a98a29348a95ed543b9f0b1921ccb9231" title="ripple::PeerImp::charge" alt="" coords="916,970,1073,999"/><area shape="rect" id="node18" href="../../d9/d10/a01103.html#a50e5197ee12f2fe9b978a9412902b981" title="ripple::PeerImp::process\lReadBuffer" alt="" coords="1671,845,1833,892"/><area shape="rect" id="node20" href="../../d9/d10/a01103.html#a4dad989e8b4f4c854726a235afb6fbad" title="ripple::PeerImp::handleReadBody" alt="" coords="1889,616,2105,646"/><area shape="rect" id="node24" href="../../d9/d10/a01103.html#a751486a781a8805e7ba9b9486110471c" title="ripple::PeerImp::handleRead\lHeader" alt="" coords="2408,637,2595,684"/><area shape="rect" id="node29" href="../../d9/d10/a01103.html#ab770dbfe865c2c492fa66316997b40aa" title="ripple::PeerImp::handleStart" alt="" coords="2867,215,3051,244"/><area shape="rect" id="node70" href="../../d9/d10/a01103.html#aff699b5b6eb93bbb36a4902bfeb58e57" title="ripple::PeerImp::handleShutdown" alt="" coords="399,470,612,499"/><area shape="rect" id="node73" href="../../d9/d10/a01103.html#a9002736fa8bd4628e187d94900e4f196" title="ripple::PeerImp::handleWrite" alt="" coords="412,416,599,446"/><area shape="rect" id="node81" href="../../d9/d10/a01103.html#a574643379e893eb9cda5ccfb2c3cb728" title="ripple::PeerImp::recvHello" alt="" coords="1424,658,1597,687"/><area shape="rect" id="node99" href="../../d9/d10/a01103.html#aef522602c7262ef47becd005307ca31f" title="ripple::PeerImp::handleVerify\lTimer" alt="" coords="663,21,852,68"/><area shape="rect" id="node7" href="../../d9/d10/a01103.html#a2070ddba2d1ac7d2997a0e9b4f76d93f" title="ripple::PeerImp::start" alt="" coords="3541,158,3685,187"/><area shape="rect" id="node16" href="../../d9/d10/a01103.html#a2332fb0fc9306bd8983bc76382f569d4" title="ripple::PeerImp::recvCluster" alt="" coords="1419,1028,1603,1058"/><area shape="rect" id="node35" href="../../d9/d10/a01103.html#abfbea2580921553c60dca1f7354c689c" title="ripple::PeerImp::recvTransaction" alt="" coords="1405,1082,1616,1111"/><area shape="rect" id="node38" href="../../d9/d10/a01103.html#a0936617035f35f443413659bb4b0513a" title="ripple::PeerImp::recvValidation" alt="" coords="1147,867,1347,896"/><area shape="rect" id="node41" href="../../d9/d10/a01103.html#a97a26373066da7012dad5cc914a739fa" title="ripple::PeerImp::checkValidation" alt="" coords="1405,802,1616,831"/><area shape="rect" id="node44" href="../../d9/d10/a01103.html#ac582b079b5608c7a71f610f7638a09bc" title="ripple::PeerImp::recvLedger" alt="" coords="1420,1151,1601,1180"/><area shape="rect" id="node47" href="../../d9/d10/a01103.html#aa15e090a6c30a482a48d818dc5ef5b7c" title="ripple::PeerImp::recvPropose" alt="" coords="1416,1227,1605,1256"/><area shape="rect" id="node50" href="../../d9/d10/a01103.html#a7ec58073fee87697fff3fe53f91e005f" title="ripple::PeerImp::recvHave\lTxSet" alt="" coords="1424,905,1597,952"/><area shape="rect" id="node53" href="../../d9/d10/a01103.html#a136c20a3ad4191ec0ec5e8cf3288b102" title="ripple::PeerImp::recvProofWork" alt="" coords="1408,975,1613,1004"/><area shape="rect" id="node56" href="../../d9/d10/a01103.html#a598f84e984d687fea5c2f03d83dbe624" title="ripple::PeerImp::getLedger" alt="" coords="1160,710,1333,739"/><area shape="rect" id="node58" href="../../d9/d10/a01103.html#a179042266045e236297a7f5138a1f56e" title="ripple::PeerImp::doFetchPack" alt="" coords="1149,763,1344,792"/><area shape="rect" id="node63" href="../../d9/d10/a01103.html#aa37903399c1e89cd301fd74e009c625e" title="ripple::PeerImp::checkTransaction" alt="" coords="1136,1123,1357,1152"/><area shape="rect" id="node66" href="../../d9/d10/a01103.html#a94b28fb7d0e33bd537d89df056a58e08" title="ripple::PeerImp::checkPropose" alt="" coords="1147,1227,1347,1256"/><area shape="rect" id="node22" href="../../d9/d10/a01103.html#afece44c809309a7730b9192c90065b52" title="ripple::PeerImp::startReadBody" alt="" coords="2155,642,2360,671"/><area shape="rect" id="node26" href="../../d9/d10/a01103.html#abeee024c8f7c8d235b9bb0239db9f4b2" title="ripple::PeerImp::startRead\lHeader" alt="" coords="2644,577,2817,624"/><area shape="rect" id="node31" href="../../d9/d10/a01103.html#abb7f376a3c0cc916f91137c4c2d9c486" title="ripple::PeerImp::accept" alt="" coords="3332,190,3489,219"/><area shape="rect" id="node60" href="../../d9/d10/a01103.html#ac32d101c485f40d3b46812a10bda4271" title="ripple::PeerImp::recvGet\lObjectByHash" alt="" coords="1429,732,1592,778"/><area shape="rect" id="node75" href="../../d9/d10/a01103.html#ac664f394caf1e19a524a955cf4a14420" title="ripple::PeerImp::sendPacket\lForce" alt="" coords="664,416,851,462"/><area shape="rect" id="node77" href="../../d9/d10/a01103.html#a0a7774d8d26f028dbbdf2c808cd7d3ac" title="ripple::PeerImp::sendPacket" alt="" coords="901,486,1088,515"/><area shape="rect" id="node79" href="../../d9/d10/a01103.html#a0195062462611450970b9524383cba3f" title="ripple::PeerImp::sendGet\lPeers" alt="" coords="1164,538,1329,585"/><area shape="rect" id="node84" href="../../d9/d10/a01103.html#a0103b6ab4d955e0c06621e691b5004fb" title="ripple::PeerImp::sendHello" alt="" coords="1664,315,1840,344"/><area shape="rect" id="node87" href="../../d9/d10/a01103.html#adb26ce97cce8e0a60091f3e141474451" title="ripple::PeerImp::recvGet\lPeers" alt="" coords="1165,416,1328,462"/><area shape="rect" id="node91" href="../../d9/d10/a01103.html#a9d2a8a5de2c5bfe6425e3356c8304852" title="ripple::PeerImp::recvPing" alt="" coords="1163,486,1331,515"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="addad297874d76d9df9fc2d7c903d7782"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::onPrepare </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override called during preparation. Since all other Stoppable objects in the tree have already been constructed, this provides an opportunity to perform initialization which depends on calling into other Stoppable objects. This call is made on the same thread that called prepare(). The default implementation does nothing. Guaranteed to only be called once. </p>

<p>Reimplemented from <a class="el" href="../../d2/d49/a01561.html#a89ef9cbd5742a977aa6d6e13f534ca55">beast::Stoppable</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00337">337</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d4/d0c/a02476_source.html#l00039">ripple::PeerFinder::Config::applyTuning()</a>, <a class="el" href="../../d6/d18/a01925_source.html#l00051">ripple::PeerFinder::Config::autoConnect</a>, <a class="el" href="../../dc/d40/a02767_source.html#l00022">base</a>, <a class="el" href="../../d4/d0c/a02476_source.html#l00032">ripple::PeerFinder::Config::calcOutPeers()</a>, <a class="el" href="../../d6/d18/a01925_source.html#l00057">ripple::PeerFinder::Config::features</a>, <a class="el" href="../../d0/dc2/a02477_source.html#l00647">ripple::getConfig()</a>, <a class="el" href="../../d2/db9/a01926_source.html#l00355">ripple::Config::IPS_FIXED</a>, <a class="el" href="../../d6/d18/a01925_source.html#l00054">ripple::PeerFinder::Config::listeningPort</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00088">m_doorDirect</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00091">m_doorProxy</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00075">m_io_service</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00073">m_peerFinder</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00094">m_resolver</a>, <a class="el" href="../../dc/dc7/a03241_source.html#l00137">ripple::make_PeerDoor()</a>, <a class="el" href="../../d6/d18/a01925_source.html#l00033">ripple::PeerFinder::Config::maxPeers</a>, <a class="el" href="../../db/d26/a02129_source.html#l00194">beast::PropertyStream::Source::name()</a>, <a class="el" href="../../d6/d18/a01925_source.html#l00045">ripple::PeerFinder::Config::outPeers</a>, <a class="el" href="../../d2/db9/a01926_source.html#l00405">ripple::Config::PEER_PRIVATE</a>, <a class="el" href="../../d2/db9/a01926_source.html#l00269">ripple::Config::peerListeningPort</a>, <a class="el" href="../../d2/db9/a01926_source.html#l00406">ripple::Config::PEERS_MAX</a>, <a class="el" href="../../d0/da6/a02412_source.html#l00056">ripple::Resolver::resolve()</a>, <a class="el" href="../../d2/db9/a01926_source.html#l00392">ripple::Config::RUN_STANDALONE</a>, <a class="el" href="../../d6/d19/a03242_source.html#l00038">ripple::PeerDoor::sslAndPROXYRequired</a>, <a class="el" href="../../d6/d19/a03242_source.html#l00037">ripple::PeerDoor::sslRequired</a>, <a class="el" href="../../db/d36/a03243_source.html#l02830">ripple::to_string()</a>, and <a class="el" href="../../d6/d18/a01925_source.html#l00048">ripple::PeerFinder::Config::wantIncoming</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    PeerFinder::Config config;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().PEERS_MAX != 0)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        config.maxPeers = <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().<a class="code" href="../../d3/db8/a00316.html#ac396f453decc1cab7a62f257fbfc4f6c">PEERS_MAX</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    config.outPeers = config.calcOutPeers();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    config.wantIncoming =</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        (! <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().<a class="code" href="../../d3/db8/a00316.html#a5291a6910fa0a3e2aa99943895467dba">PEER_PRIVATE</a>) &amp;&amp;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().<a class="code" href="../../d3/db8/a00316.html#aaef7ab4f94267ee43ce061f45bed1baf">peerListeningPort</a> != 0);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// if it&#39;s a private peer or we are running as standalone</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// automatic connections would defeat the purpose.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    config.autoConnect =</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        !<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().<a class="code" href="../../d3/db8/a00316.html#a9e6ee7c4f8367f7007f92d07d3268996">RUN_STANDALONE</a> &amp;&amp;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        !<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().<a class="code" href="../../d3/db8/a00316.html#a5291a6910fa0a3e2aa99943895467dba">PEER_PRIVATE</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    config.listeningPort = <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a>().<a class="code" href="../../d3/db8/a00316.html#aaef7ab4f94267ee43ce061f45bed1baf">peerListeningPort</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    config.features = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Enforce business rules</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    config.applyTuning ();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a>-&gt;setConfig (config);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">auto</span> bootstrapIps (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().IPS);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// If no IPs are specified, use the Ripple Labs round robin</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// pool to get some servers to insert into the boot cache. </span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (bootstrapIps.empty ())</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        bootstrapIps.push_back (<span class="stringliteral">&quot;r.ripple.com 51235&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (!bootstrapIps.empty ())</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#a222db6945256c0eebf01c39c572f655c">m_resolver</a>.<a class="code" href="../../d0/d33/a01252.html#a2b7ea0953f182de10d6d5818e6b26874">resolve</a> (bootstrapIps,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            [<span class="keyword">this</span>](</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                std::string <span class="keyword">const</span>&amp; <a class="code" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a>, </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                std::vector &lt;beast::IP::Endpoint&gt; <span class="keyword">const</span>&amp; addresses)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                std::vector &lt;std::string&gt; ips;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; addr : addresses)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    ips.push_back (<a class="code" href="../../d9/d9d/a03417.html#aba30c6642420129125415284c35f098f">to_string</a> (addr));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                std::string <span class="keyword">const</span> <a class="code" href="../../dc/d40/a02767.html#a70ff0f6c026c3dd1ef6aaf504e7fddc3">base</a> (<span class="stringliteral">&quot;config: &quot;</span>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="keywordflow">if</span> (!ips.empty ())</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                    <a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a>-&gt;addFallbackStrings (<a class="code" href="../../dc/d40/a02767.html#a70ff0f6c026c3dd1ef6aaf504e7fddc3">base</a> + name, ips);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            });</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Add the ips_fixed from the rippled.cfg file</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (! <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().<a class="code" href="../../d3/db8/a00316.html#a9e6ee7c4f8367f7007f92d07d3268996">RUN_STANDALONE</a> &amp;&amp; !<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().<a class="code" href="../../d3/db8/a00316.html#a3aaac87eab79667cbfd584dc4e7d6d6e">IPS_FIXED</a>.empty ())</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#a222db6945256c0eebf01c39c572f655c">m_resolver</a>.<a class="code" href="../../d0/d33/a01252.html#a2b7ea0953f182de10d6d5818e6b26874">resolve</a> (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().IPS_FIXED,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            [<span class="keyword">this</span>](</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                std::string <span class="keyword">const</span>&amp; name, </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                std::vector &lt;beast::IP::Endpoint&gt; <span class="keyword">const</span>&amp; addresses)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keywordflow">if</span> (!addresses.empty ())</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    <a class="code" href="../../d9/db3/a01064.html#ac68cea45e3ecdc66943099632d2c8621">m_peerFinder</a>-&gt;addFixedPeer (name, addresses);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            });</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// Configure the peer doors, which allow the server to accept incoming</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// peer connections:</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (! <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().<a class="code" href="../../d3/db8/a00316.html#a9e6ee7c4f8367f7007f92d07d3268996">RUN_STANDALONE</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#af22b331a5003b65216bc233a68831a92">m_doorDirect</a> = <a class="code" href="../../d9/d9d/a03417.html#aa65d34b53a388372ea12b8dde3be1fd0">make_PeerDoor</a> (</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <a class="code" href="../../de/d99/a01101.html#ab2604843fec993f3180a4be2eb8b07fcad065d91d070c41671d3bd2e10fa1b299">PeerDoor::sslRequired</a>,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            *<span class="keyword">this</span>,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().PEER_IP,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().peerListeningPort,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <a class="code" href="../../d9/db3/a01064.html#a187750f2ebe7d8c9e517589e4624de3c">m_io_service</a>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().peerPROXYListeningPort != 0)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="../../d9/db3/a01064.html#aad061b2f0f87ecc4b89b93a2a9b7da49">m_doorProxy</a> = <a class="code" href="../../d9/d9d/a03417.html#aa65d34b53a388372ea12b8dde3be1fd0">make_PeerDoor</a> (</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <a class="code" href="../../de/d99/a01101.html#ab2604843fec993f3180a4be2eb8b07fca0e803b2322a085b45665bb59825cdc65">PeerDoor::sslAndPROXYRequired</a>,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                *<span class="keyword">this</span>,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().PEER_IP,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d">getConfig</a> ().peerPROXYListeningPort,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <a class="code" href="../../d9/db3/a01064.html#a187750f2ebe7d8c9e517589e4624de3c">m_io_service</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_addad297874d76d9df9fc2d7c903d7782_cgraph.png" border="0" usemap="#d9/db3/a01064_addad297874d76d9df9fc2d7c903d7782_cgraph" alt=""/></div>
<map name="d9/db3/a01064_addad297874d76d9df9fc2d7c903d7782_cgraph" id="d9/db3/a01064_addad297874d76d9df9fc2d7c903d7782_cgraph">
<area shape="rect" id="node3" href="../../d4/d6f/a00315.html#a68e422e03ac12d2ce2f63847df890eb0" title="ripple::PeerFinder\l::Config::applyTuning" alt="" coords="192,5,339,51"/><area shape="rect" id="node5" href="../../d4/d6f/a00315.html#ab23a25632c3b1c493390e1bf4e4129f3" title="ripple::PeerFinder\l::Config::calcOutPeers" alt="" coords="421,35,576,82"/><area shape="rect" id="node10" href="../../d9/d9d/a03417.html#a3025f0e6e155cf9b7f4b6315f682423d" title="ripple::getConfig" alt="" coords="207,125,324,155"/><area shape="rect" id="node12" href="../../d9/d9d/a03417.html#aa65d34b53a388372ea12b8dde3be1fd0" title="ripple::make_PeerDoor" alt="" coords="188,179,343,208"/><area shape="rect" id="node14" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37" title="beast::PropertyStream\l::Source::name" alt="" coords="189,231,341,278"/><area shape="rect" id="node16" href="../../d0/d33/a01252.html#a2b7ea0953f182de10d6d5818e6b26874" title="ripple::Resolver::resolve" alt="" coords="184,301,347,331"/><area shape="rect" id="node18" href="../../d9/d9d/a03417.html#aba30c6642420129125415284c35f098f" title="ripple::to_string" alt="" coords="211,355,320,384"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a975c0f5f2493f00dbf15e444b085d785" title="ripple::max" alt="" coords="676,44,761,73"/><area shape="rect" id="node20" href="../../d5/d17/a01098.html#a7b6700e295afc70eda9083ebcacda145" title="ripple::Peer::getCluster\lNodeName" alt="" coords="421,258,576,305"/><area shape="rect" id="node22" href="../../d5/d17/a01098.html#a35b25d5a662db9a534ac4a972a8ba6b3" title="ripple::Peer::getRemoteAddress" alt="" coords="395,328,603,357"/><area shape="rect" id="node24" href="../../d5/d17/a01098.html#aeaf4f0b492c460f758b5ab25c289d1f2" title="ripple::Peer::isInCluster" alt="" coords="420,381,577,411"/><area shape="rect" id="node26" href="../../da/dc3/a00453.html#a61ca2a7887f10051efbe1611f1bab0fe" title="beast::IP::Endpoint\l::to_string" alt="" coords="432,434,565,481"/><area shape="rect" id="node28" href="../../da/dc3/a00453.html#a41d744f4c8d5888f8d5aa25da5e100bf" title="beast::IP::Endpoint\l::address" alt="" coords="652,365,785,411"/><area shape="rect" id="node30" href="../../da/dc3/a00453.html#ad34a025ff522a7e45e18ee58f2a9eab6" title="beast::IP::Endpoint\l::port" alt="" coords="652,434,785,481"/><area shape="rect" id="node32" href="../../d2/d7f/a03369.html#a4a51c292cb48681521db67f2b4848736" title="beast::IP::to_string" alt="" coords="652,504,785,533"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3918e80c1267d4f907730999a4f26008"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::onStart </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override called during start. </p>

<p>Reimplemented from <a class="el" href="../../d2/d49/a01561.html#a91389d18e9eb5e26847533b57be650cd">beast::Stoppable</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00428">428</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac252980b7a02834b5a4577456ad8f7a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::onStop </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override called when the stop notification is issued.</p>
<p>The call is made on an unspecified, implementation-specific thread. onStop and onChildrenStopped will never be called concurrently, across all Stoppable objects descended from the same root, inclusive of the root.</p>
<p>It is safe to call isStopping, isStopped, and areChildrenStopped from within this function; The values returned will always be valid and never change during the callback.</p>
<p>The default implementation simply calls <a class="el" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e">stopped()</a>. This is applicable when the Stoppable has a trivial stop operation (or no stop operation), and we are merely using the Stoppable API to position it as a dependency of some parent service.</p>
<p>Thread safety: May not block for long periods. Guaranteed only to be called once. Must be safe to call from any thread at any time. </p>

<p>Reimplemented from <a class="el" href="../../d2/d49/a01561.html#aeb5a464db59bc5313a39bb868c9f18da">beast::Stoppable</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00453">453</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../db/d5f/a03239_source.html#l00438">close_all()</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00088">m_doorDirect</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00091">m_doorProxy</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00229">release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/db3/a01064.html#af22b331a5003b65216bc233a68831a92">m_doorDirect</a>)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#af22b331a5003b65216bc233a68831a92">m_doorDirect</a>-&gt;stop();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/db3/a01064.html#aad061b2f0f87ecc4b89b93a2a9b7da49">m_doorProxy</a>)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#aad061b2f0f87ecc4b89b93a2a9b7da49">m_doorProxy</a>-&gt;stop();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// Take off the extra count we added in the constructor</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#aae610b1a44dfb3505bd9449e5217d660">release</a>();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#ac383aafb3e8cd3715e9030e53fcfe5ae">close_all</a> (<span class="keyword">false</span>);       </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_ac252980b7a02834b5a4577456ad8f7a3_cgraph.png" border="0" usemap="#d9/db3/a01064_ac252980b7a02834b5a4577456ad8f7a3_cgraph" alt=""/></div>
<map name="d9/db3/a01064_ac252980b7a02834b5a4577456ad8f7a3_cgraph" id="d9/db3/a01064_ac252980b7a02834b5a4577456ad8f7a3_cgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#ac383aafb3e8cd3715e9030e53fcfe5ae" title="ripple::OverlayImpl\l::close_all" alt="" coords="184,5,315,51"/><area shape="rect" id="node5" href="../../d9/db3/a01064.html#aae610b1a44dfb3505bd9449e5217d660" title="ripple::OverlayImpl\l::release" alt="" coords="184,74,315,121"/><area shape="rect" id="node7" href="../../d9/db3/a01064.html#a8b12e6a7e9b089480735592140bf5732" title="ripple::OverlayImpl\l::check_stopped" alt="" coords="363,74,493,121"/><area shape="rect" id="node9" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30" title="beast::Stoppable::areChildren\lStopped" alt="" coords="541,43,736,90"/><area shape="rect" id="node11" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e" title="beast::Stoppable::stopped" alt="" coords="552,113,725,143"/><area shape="rect" id="node13" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="784,105,931,151"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0d322f141b42e6539ca146a47f6eaea2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::onWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/a00943.html">beast::PropertyStream::Map</a> &amp;&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Subclass override. The default version does nothing. </p>

<p>Reimplemented from <a class="el" href="../../d9/db0/a01437.html#accd7269755b1a27d4c66715edc1f5915">beast::PropertyStream::Source</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00481">481</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7cbf3979760f7b694fb7ea3c7ebb571a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db3/a01064.html">OverlayImpl</a>&amp; ripple::OverlayImpl::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/db3/a01064.html">OverlayImpl</a> const &amp;&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aae610b1a44dfb3505bd9449e5217d660"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::release </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00229">229</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../db/d5f/a03239_source.html#l00213">check_stopped()</a>, and <a class="el" href="../../d9/de5/a03240_source.html#l00068">m_child_count</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00453">onStop()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00236">remove()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> (--<a class="code" href="../../d9/db3/a01064.html#aabe5baad281e352df046beaf5e37fe55">m_child_count</a> == 0)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="../../d9/db3/a01064.html#a8b12e6a7e9b089480735592140bf5732">check_stopped</a> ();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_cgraph.png" border="0" usemap="#d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_cgraph" alt=""/></div>
<map name="d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_cgraph" id="d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_cgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#a8b12e6a7e9b089480735592140bf5732" title="ripple::OverlayImpl\l::check_stopped" alt="" coords="184,35,315,82"/><area shape="rect" id="node5" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30" title="beast::Stoppable::areChildren\lStopped" alt="" coords="363,5,557,51"/><area shape="rect" id="node7" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e" title="beast::Stoppable::stopped" alt="" coords="373,75,547,104"/><area shape="rect" id="node9" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="605,66,752,113"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_icgraph.png" border="0" usemap="#d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_icgraph" alt=""/></div>
<map name="d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_icgraph" id="d9/db3/a01064_aae610b1a44dfb3505bd9449e5217d660_icgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#ac252980b7a02834b5a4577456ad8f7a3" title="ripple::OverlayImpl\l::onStop" alt="" coords="184,5,315,51"/><area shape="rect" id="node5" href="../../d9/db3/a01064.html#afa4e7d42e14e611f22fd50f5b1f11738" title="ripple::OverlayImpl\l::remove" alt="" coords="184,74,315,121"/><area shape="rect" id="node7" href="../../d9/d10/a01103.html#a162a0f14933f5b43db5a9655544effd2" title="ripple::PeerImp::~PeerImp" alt="" coords="364,83,537,112"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afa4e7d42e14e611f22fd50f5b1f11738"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>slot</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../de/de6/a01063.html#a89d6ec0c7dccababdcb8c2437924736f">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00236">236</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00079">m_peers</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00229">release()</a>.</p>

<p>Referenced by <a class="el" href="../../db/d36/a03243_source.html#l00281">ripple::PeerImp::~PeerImp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    PeersBySlot::iterator <span class="keyword">const</span> iter (<a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.find (slot));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    assert (iter != <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.end ());</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.erase (iter);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="../../d9/db3/a01064.html#aae610b1a44dfb3505bd9449e5217d660">release</a>();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_cgraph.png" border="0" usemap="#d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_cgraph" alt=""/></div>
<map name="d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_cgraph" id="d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_cgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#aae610b1a44dfb3505bd9449e5217d660" title="ripple::OverlayImpl\l::release" alt="" coords="184,35,315,82"/><area shape="rect" id="node5" href="../../d9/db3/a01064.html#a8b12e6a7e9b089480735592140bf5732" title="ripple::OverlayImpl\l::check_stopped" alt="" coords="363,35,493,82"/><area shape="rect" id="node7" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30" title="beast::Stoppable::areChildren\lStopped" alt="" coords="541,5,736,51"/><area shape="rect" id="node9" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e" title="beast::Stoppable::stopped" alt="" coords="552,75,725,104"/><area shape="rect" id="node11" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="784,66,931,113"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_icgraph.png" border="0" usemap="#d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_icgraph" alt=""/></div>
<map name="d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_icgraph" id="d9/db3/a01064_afa4e7d42e14e611f22fd50f5b1f11738_icgraph">
<area shape="rect" id="node3" href="../../d9/d10/a01103.html#a162a0f14933f5b43db5a9655544effd2" title="ripple::PeerImp::~PeerImp" alt="" coords="185,13,359,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1a0219cf674d104352eb7c601100396"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::OverlayImpl::send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d05/a01420.html#af8634ad4f6a8d38f67c41590b5ac6d71">PeerFinder::Slot::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d1/d0b/a00452.html">PeerFinder::Endpoint</a> &gt; const &amp;&#160;</td>
          <td class="paramname"><em>endpoints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00277">277</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../dc/d6a/a02463_source.html#l00034">ripple::PeerFinder::Endpoint::address</a>, <a class="el" href="../../dc/d6a/a02463_source.html#l00033">ripple::PeerFinder::Endpoint::hops</a>, <a class="el" href="../../d3/df9/a02052_source.html#l00070">beast::IP::Endpoint::is_v4()</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, <a class="el" href="../../d9/de5/a03240_source.html#l00079">m_peers</a>, <a class="el" href="../../d3/df9/a02052_source.html#l00057">beast::IP::Endpoint::port()</a>, <a class="el" href="../../d3/df9/a02052_source.html#l00074">beast::IP::Endpoint::to_v4()</a>, <a class="el" href="../../d8/d45/a01908_source.html#l00279">beast::toNetworkByteOrder()</a>, and <a class="el" href="../../d0/d3d/a02050_source.html#l00145">beast::IP::AddressV4::value</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">typedef</span> std::vector &lt;PeerFinder::Endpoint&gt; List;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    protocol::TMEndpoints tm;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">for</span> (List::const_iterator iter (endpoints.begin());</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        iter != endpoints.end(); ++iter)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        PeerFinder::Endpoint <span class="keyword">const</span>&amp; ep (*iter);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        protocol::TMEndpoint&amp; tme (*tm.add_endpoints());</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (ep.address.is_v4())</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            tme.mutable_ipv4()-&gt;set_ipv4(</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <a class="code" href="../../d5/d83/a03337.html#aa047c66ad7cc07af76a54de61dccebf9">beast::toNetworkByteOrder</a> (ep.address.to_v4().value));</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            tme.mutable_ipv4()-&gt;set_ipv4(0);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        tme.mutable_ipv4()-&gt;set_ipv4port (ep.address.port());</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        tme.set_hops (ep.hops);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    tm.set_version (1);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="../../d8/d49/a00979.html#a08601cb412fcc15ee6365dbfb603cf21">Message::pointer</a> msg (</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        boost::make_shared &lt;Message&gt; (</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            tm, protocol::mtENDPOINTS));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        PeersBySlot::iterator <span class="keyword">const</span> iter (<a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.find (slot));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        assert (iter != <a class="code" href="../../d9/db3/a01064.html#a1f64828f3176b83a394b046dfe769e13">m_peers</a>.end ());</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="../../d9/d10/a01103.html#a50e3d5364a8de2d5a3d67490c8c8a83c">PeerImp::ptr</a> <span class="keyword">const</span> peer (iter-&gt;second.lock());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        assert (peer != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        peer-&gt;sendPacket (msg, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_af1a0219cf674d104352eb7c601100396_cgraph.png" border="0" usemap="#d9/db3/a01064_af1a0219cf674d104352eb7c601100396_cgraph" alt=""/></div>
<map name="d9/db3/a01064_af1a0219cf674d104352eb7c601100396_cgraph" id="d9/db3/a01064_af1a0219cf674d104352eb7c601100396_cgraph">
<area shape="rect" id="node3" href="../../da/dc3/a00453.html#a3a8790b44f9aff62bffd5ae1ed9de52c" title="beast::IP::Endpoint\l::is_v4" alt="" coords="208,5,341,51"/><area shape="rect" id="node7" href="../../da/dc3/a00453.html#ad34a025ff522a7e45e18ee58f2a9eab6" title="beast::IP::Endpoint\l::port" alt="" coords="208,74,341,121"/><area shape="rect" id="node9" href="../../da/dc3/a00453.html#a8532f94749a6875ccf4549200f085e03" title="beast::IP::Endpoint\l::to_v4" alt="" coords="208,143,341,190"/><area shape="rect" id="node13" href="../../d5/d83/a03337.html#aa047c66ad7cc07af76a54de61dccebf9" title="beast::toNetworkByteOrder" alt="" coords="184,213,365,243"/><area shape="rect" id="node5" href="../../de/de1/a00065.html#a2de4e66f4905e763fd3cf277600af6e2" title="beast::IP::Address\l::is_v4" alt="" coords="415,5,545,51"/><area shape="rect" id="node11" href="../../de/de1/a00065.html#abdece011772a8923fe4b8e719e3f3141" title="beast::IP::Address\l::to_v4" alt="" coords="415,143,545,190"/><area shape="rect" id="node15" href="../../d5/d83/a03337.html#a3a2494dd68e7f6c92ac2b7498885b1b5" title="beast::toBigEndian" alt="" coords="415,213,545,243"/><area shape="rect" id="node17" href="../../d5/d83/a03337.html#a99f0f169568ccb971d11fbff2c0d851f" title="beast::swapBytes" alt="" coords="596,213,721,243"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8c11a6baa3cc3fc0e3ab549f0c2b49d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t ripple::OverlayImpl::size </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The number of active peers on the network Active peers are only those peers that have completed the handshake and are running the Ripple protocol. </p>

<p>Implements <a class="el" href="../../de/de6/a01063.html#abcbf323fcd7c62e46cd42289a8301985">ripple::Overlay</a>.</p>

<p>Definition at line <a class="el" href="../../db/d5f/a03239_source.html#l00540">540</a> of file <a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a>.</p>

<p>References <a class="el" href="../../d9/de5/a03240_source.html#l00062">m_mutex</a>, and <a class="el" href="../../d9/de5/a03240_source.html#l00082">m_publicKeyMap</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00492">onPeerActivated()</a>.</p>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    std::lock_guard &lt;decltype(m_mutex)&gt; lock (<a class="code" href="../../d9/db3/a01064.html#adab6e9fa83abe042915f0be57aad340e">m_mutex</a>);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/db3/a01064.html#a16db82d29d074aa00181fd2381324972">m_publicKeyMap</a>.size ();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db3/a01064_a8c11a6baa3cc3fc0e3ab549f0c2b49d6_icgraph.png" border="0" usemap="#d9/db3/a01064_a8c11a6baa3cc3fc0e3ab549f0c2b49d6_icgraph" alt=""/></div>
<map name="d9/db3/a01064_a8c11a6baa3cc3fc0e3ab549f0c2b49d6_icgraph" id="d9/db3/a01064_a8c11a6baa3cc3fc0e3ab549f0c2b49d6_icgraph">
<area shape="rect" id="node3" href="../../d9/db3/a01064.html#a9c6924ce448c66733205236a8eb5fa1b" title="ripple::OverlayImpl\l::onPeerActivated" alt="" coords="184,5,315,51"/><area shape="rect" id="node5" href="../../d9/d10/a01103.html#aafd6ba1fa3d975214f29925c12f25e17" title="ripple::PeerImp::activate" alt="" coords="364,13,527,43"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aabe5baad281e352df046beaf5e37fe55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t ripple::OverlayImpl::m_child_count</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00068">68</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00115">accept()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00213">check_stopped()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00229">release()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00104">~OverlayImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a80216dbe3ae14bdb7e6ecf6fa7dc2d96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable_any ripple::OverlayImpl::m_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00065">65</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00213">check_stopped()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00104">~OverlayImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="af22b331a5003b65216bc233a68831a92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="../../de/d99/a01101.html">PeerDoor</a>&gt; ripple::OverlayImpl::m_doorDirect</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The peer door for regular SSL connections </p>

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00088">88</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00337">onPrepare()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00453">onStop()</a>.</p>

</div>
</div>
<a class="anchor" id="aad061b2f0f87ecc4b89b93a2a9b7da49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="../../de/d99/a01101.html">PeerDoor</a>&gt; ripple::OverlayImpl::m_doorProxy</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The peer door for proxy connections </p>

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00091">91</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00337">onPrepare()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00453">onStop()</a>.</p>

</div>
</div>
<a class="anchor" id="a187750f2ebe7d8c9e517589e4624de3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::asio::io_service&amp; ripple::OverlayImpl::m_io_service</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00075">75</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00337">onPrepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a272364d87023377cc9059bdbff5a7157"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> ripple::OverlayImpl::m_journal</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00070">70</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00262">activate()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00213">check_stopped()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00314">disconnect()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00492">onPeerActivated()</a>.</p>

</div>
</div>
<a class="anchor" id="adab6e9fa83abe042915f0be57aad340e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::recursive_mutex ripple::OverlayImpl::m_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00062">62</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00115">accept()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00262">activate()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00314">disconnect()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00572">findPeerByShortID()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00554">getActivePeers()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00468">onChildrenStopped()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00492">onPeerActivated()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00528">onPeerDisconnect()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00453">onStop()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00236">remove()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00277">send()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00540">size()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00104">~OverlayImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a8b8a3d385f24195deb5811d4a22416eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d06/a00131.html">beast::Atomic</a>&lt;<a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a>&gt; ripple::OverlayImpl::m_nextShortId</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Monotically increasing identifiers for peers </p>

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00097">97</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00203">next_id()</a>.</p>

</div>
</div>
<a class="anchor" id="ac68cea45e3ecdc66943099632d2c8621"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="../../d8/d38/a00926.html">PeerFinder::Manager</a>&gt; ripple::OverlayImpl::m_peerFinder</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00073">73</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00115">accept()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00337">onPrepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f64828f3176b83a394b046dfe769e13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db3/a01064.html#a579d5bc9848c4c3e8e659ea665700a2a">PeersBySlot</a> ripple::OverlayImpl::m_peers</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Associates slots to peers. </p>

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00079">79</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00115">accept()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00262">activate()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00438">close_all()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00314">disconnect()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00236">remove()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00277">send()</a>.</p>

</div>
</div>
<a class="anchor" id="a16db82d29d074aa00181fd2381324972"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db3/a01064.html#a80e74ab24af8c0523973875dd7c7cd6a">PeerByPublicKey</a> ripple::OverlayImpl::m_publicKeyMap</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tracks peers by their public key </p>

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00082">82</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00554">getActivePeers()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00492">onPeerActivated()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00528">onPeerDisconnect()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00540">size()</a>.</p>

</div>
</div>
<a class="anchor" id="a222db6945256c0eebf01c39c572f655c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d33/a01252.html">Resolver</a>&amp; ripple::OverlayImpl::m_resolver</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The resolver we use for peer hostnames </p>

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00094">94</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00337">onPrepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a3a0bf589a6364fd1bcd500d661daba6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d62/a00924.html">Resource::Manager</a>&amp; ripple::OverlayImpl::m_resourceManager</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00071">71</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00115">accept()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a2944e62685590732fba4865ef5bdc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db3/a01064.html#aad89b687faa3fe1764b0f2bf91ecdb23">PeerByShortId</a> ripple::OverlayImpl::m_shortIdMap</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tracks peers by their session ID </p>

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00085">85</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00572">findPeerByShortID()</a>, <a class="el" href="../../db/d5f/a03239_source.html#l00492">onPeerActivated()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00528">onPeerDisconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="a98222c69229d875c7e0cfdf101b307c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::asio::ssl::context&amp; ripple::OverlayImpl::m_ssl_context</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/de5/a03240_source.html#l00076">76</a> of file <a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/d5f/a03239_source.html#l00115">accept()</a>, and <a class="el" href="../../db/d5f/a03239_source.html#l00164">connect()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rippled/src/ripple_overlay/impl/<a class="el" href="../../d9/de5/a03240_source.html">OverlayImpl.h</a></li>
<li>rippled/src/ripple_overlay/impl/<a class="el" href="../../db/d5f/a03239_source.html">OverlayImpl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d9d/a03417.html">ripple</a></li><li class="navelem"><a class="el" href="../../d9/db3/a01064.html">OverlayImpl</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:16 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
