<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: ripple::LedgerCleanerImp Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d1/dea/a00829.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d2/d91/a07343.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::LedgerCleanerImp Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for ripple::LedgerCleanerImp:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dbf/a07344.png" border="0" usemap="#ripple_1_1_ledger_cleaner_imp_inherit__map" alt="Inheritance graph"/></div>
<map name="ripple_1_1_ledger_cleaner_imp_inherit__map" id="ripple_1_1_ledger_cleaner_imp_inherit__map">
<area shape="rect" id="node2" href="../../d8/d64/a00828.html" title="ripple::LedgerCleaner" alt="" coords="480,67,624,96"/><area shape="rect" id="node4" href="../../d2/d49/a01561.html" title="beast::Stoppable" alt="" coords="268,5,388,35"/><area shape="rect" id="node6" href="../../d9/db0/a01437.html" title="beast::PropertyStream\l::Source" alt="" coords="252,58,404,105"/><area shape="rect" id="node8" href="../../d1/d04/a01744.html" title="beast::Uncopyable" alt="" coords="39,67,169,96"/><area shape="rect" id="node10" href="../../d6/d53/a01688.html" title="beast::Thread" alt="" coords="277,128,379,157"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ripple::LedgerCleanerImp:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d27/a07345.png" border="0" usemap="#ripple_1_1_ledger_cleaner_imp_coll__map" alt="Collaboration graph"/></div>
<map name="ripple_1_1_ledger_cleaner_imp_coll__map" id="ripple_1_1_ledger_cleaner_imp_coll__map">
<area shape="rect" id="node2" href="../../d8/d64/a00828.html" title="ripple::LedgerCleaner" alt="" coords="1523,295,1667,324"/><area shape="rect" id="node4" href="../../d2/d49/a01561.html" title="beast::Stoppable" alt="" coords="1249,138,1369,167"/><area shape="rect" id="node12" href="../../dd/d56/a00274.html" title="beast::Stoppable::Child" alt="" coords="1516,196,1673,226"/><area shape="rect" id="node17" href="../../d9/dda/a01289.html" title="beast::RootStoppable" alt="" coords="1521,67,1668,96"/><area shape="rect" id="node6" href="../../d7/d06/a00131.html" title="beast::Atomic\&lt; int \&gt;" alt="" coords="968,35,1109,64"/><area shape="rect" id="node8" href="../../d7/d02/a01808.html" title="beast::WaitableEvent" alt="" coords="276,350,423,379"/><area shape="rect" id="node53" href="../../d6/d53/a01688.html" title="beast::Thread" alt="" coords="668,538,769,567"/><area shape="rect" id="node10" href="../../d1/d04/a01744.html" title="beast::Uncopyable" alt="" coords="25,236,156,266"/><area shape="rect" id="node21" href="../../d2/d79/a00898.html" title="beast::LockFreeStack\l\&lt; Child \&gt;" alt="" coords="964,89,1113,136"/><area shape="rect" id="node24" href="../../d3/d08/a01018.html" title="beast::LockFreeStack\l\&lt; Element, Tag \&gt;::Node" alt="" coords="268,74,431,121"/><area shape="rect" id="node31" href="../../d9/db0/a01437.html" title="beast::PropertyStream\l::Source" alt="" coords="1233,326,1385,373"/><area shape="rect" id="node34" href="../../d7/dde/a01384.html" title="beast::SharedData\&lt;\l State \&gt;" alt="" coords="969,326,1108,373"/><area shape="rect" id="node43" href="../../d5/d69/a00878.html" title="beast::List\&lt; beast\l::ServiceQueueBase::\lWaiter \&gt;" alt="" coords="275,262,424,326"/><area shape="rect" id="node46" href="../../d5/d69/a00878.html" title="beast::List\&lt; beast\l::ServiceQueueBase::\lItem \&gt;" alt="" coords="275,403,424,467"/><area shape="rect" id="node27" href="../../d7/d06/a00131.html" title="beast::Atomic\&lt; beast\l::LockFreeStack::Node * \&gt;" alt="" coords="629,93,808,140"/><area shape="rect" id="node37" href="../../d3/deb/a01386.html" title="beast::SharedMutexAdapter\l\&lt; RecursiveMutex \&gt;" alt="" coords="627,385,811,432"/><area shape="rect" id="node39" href="../../d8/d8e/a01224.html" title="beast::RecursiveMutex" alt="" coords="271,495,428,524"/><area shape="rect" id="node41" href="../../dc/d96/a01517.html" title="beast::ServiceQueueBase\l::State" alt="" coords="632,316,805,362"/><area shape="rect" id="node49" title="STL class. " alt="" coords="999,454,1079,483"/><area shape="rect" id="node51" title="STL class. " alt="" coords="656,454,781,501"/><area shape="rect" id="node60" href="../../d1/d88/a01578.html" title="beast::String" alt="" coords="301,714,397,743"/><area shape="rect" id="node62" href="../../d5/d42/a00269.html" title="beast::CharPointer_UTF8" alt="" coords="5,714,176,743"/><area shape="rect" id="node68" href="../../df/d0c/a00788.html" title="beast::Journal" alt="" coords="1543,560,1647,590"/><area shape="rect" id="node70" href="../../df/d84/a01408.html" title="beast::Journal::Sink" alt="" coords="969,592,1108,622"/><area shape="rect" id="node72" href="../../d4/d2c/a01575.html" title="beast::Journal::Stream" alt="" coords="1232,654,1387,683"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd9/a01507.html">State</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae9275094046b3e9fa57b8aff051eb50b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d7/dde/a01384.html">beast::SharedData</a>&lt; <a class="el" href="../../d8/dd9/a01507.html">State</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#ae9275094046b3e9fa57b8aff051eb50b">SharedState</a></td></tr>
<tr class="separator:ae9275094046b3e9fa57b8aff051eb50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_a01688"><td colspan="2" onclick="javascript:toggleInherit('pub_types_a01688')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../d6/d53/a01688.html">beast::Thread</a></td></tr>
<tr class="memitem:ad5646c303a19fb582da1b3d8c5e4d3e0 inherit pub_types_a01688"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#ad5646c303a19fb582da1b3d8c5e4d3e0">ThreadID</a></td></tr>
<tr class="separator:ad5646c303a19fb582da1b3d8c5e4d3e0 inherit pub_types_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1cc4ae5319fcf2b6ec8e8fae88f77320"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a1cc4ae5319fcf2b6ec8e8fae88f77320">LedgerCleanerImp</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;stoppable, <a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> journal)</td></tr>
<tr class="separator:a1cc4ae5319fcf2b6ec8e8fae88f77320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6178db68a83cb93edeee8d254444285"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#ab6178db68a83cb93edeee8d254444285">~LedgerCleanerImp</a> ()</td></tr>
<tr class="separator:ab6178db68a83cb93edeee8d254444285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9d9dd8e6b585b7aee3b5b4611e0280b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#af9d9dd8e6b585b7aee3b5b4611e0280b">onPrepare</a> ()</td></tr>
<tr class="separator:af9d9dd8e6b585b7aee3b5b4611e0280b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ddb82f5bfaa3cc3e192d872d554a4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a62ddb82f5bfaa3cc3e192d872d554a4c">onStart</a> ()</td></tr>
<tr class="separator:a62ddb82f5bfaa3cc3e192d872d554a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3f9fc3675bb127de4a2165d0a477e2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#ad3f9fc3675bb127de4a2165d0a477e2b">onStop</a> ()</td></tr>
<tr class="separator:ad3f9fc3675bb127de4a2165d0a477e2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3650732c951d5f5d35a8bf0b43d3507"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#ac3650732c951d5f5d35a8bf0b43d3507">onWrite</a> (<a class="el" href="../../d1/ddd/a00943.html">beast::PropertyStream::Map</a> &amp;map)</td></tr>
<tr class="separator:ac3650732c951d5f5d35a8bf0b43d3507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a754722a8833fb4a620552480e33dfedb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a754722a8833fb4a620552480e33dfedb">doClean</a> (<a class="el" href="../../d6/d27/a01781.html">Json::Value</a> const &amp;params)</td></tr>
<tr class="separator:a754722a8833fb4a620552480e33dfedb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91efb616bc20073743996f88cb41f570"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a91efb616bc20073743996f88cb41f570">init</a> ()</td></tr>
<tr class="separator:a91efb616bc20073743996f88cb41f570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eff0ca87db1f583b2a401bc4f119990"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a6eff0ca87db1f583b2a401bc4f119990">run</a> ()</td></tr>
<tr class="separator:a6eff0ca87db1f583b2a401bc4f119990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f40a9f1b3e18b27e30873b35ad084e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a4f40a9f1b3e18b27e30873b35ad084e2">getLedgerHash</a> (<a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> ledger, <a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> index)</td></tr>
<tr class="separator:a4f40a9f1b3e18b27e30873b35ad084e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac210318bdb2ea4cf4cbe1be753a51968"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#ac210318bdb2ea4cf4cbe1be753a51968">doLedger</a> (<a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> const &amp;ledgerIndex, <a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> const &amp;ledgerHash, bool doNodes, bool doTxns)</td></tr>
<tr class="separator:ac210318bdb2ea4cf4cbe1be753a51968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add2f33954124ea07dc3d87eedb8ca74f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#add2f33954124ea07dc3d87eedb8ca74f">getHash</a> (<a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> const &amp;ledgerIndex, <a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> &amp;referenceLedger)</td></tr>
<tr class="separator:add2f33954124ea07dc3d87eedb8ca74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e614220e35452159e2f3debe682764e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a6e614220e35452159e2f3debe682764e">doLedgerCleaner</a> ()</td></tr>
<tr class="separator:a6e614220e35452159e2f3debe682764e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a00828"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00828')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d8/d64/a00828.html">ripple::LedgerCleaner</a></td></tr>
<tr class="memitem:a217e8b128c3b2e82e2ab92dc5660dbfa inherit pub_methods_a00828"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d64/a00828.html#a217e8b128c3b2e82e2ab92dc5660dbfa">~LedgerCleaner</a> ()=0</td></tr>
<tr class="separator:a217e8b128c3b2e82e2ab92dc5660dbfa inherit pub_methods_a00828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01561"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01561')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d2/d49/a01561.html">beast::Stoppable</a></td></tr>
<tr class="memitem:a956c39a8c26ed410c10285e5a1ebf87f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a956c39a8c26ed410c10285e5a1ebf87f">Stoppable</a> (char const *<a class="el" href="../../dc/d40/a02767.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="el" href="../../d2/d49/a01561.html">Stoppable</a> &amp;parent)</td></tr>
<tr class="separator:a956c39a8c26ed410c10285e5a1ebf87f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae075b508fc6cf725795061ae8431d10f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#ae075b508fc6cf725795061ae8431d10f">~Stoppable</a> ()</td></tr>
<tr class="separator:ae075b508fc6cf725795061ae8431d10f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca78fcebed5c6b8c9cd96bacb588785 inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7ca78fcebed5c6b8c9cd96bacb588785">isStopping</a> () const </td></tr>
<tr class="separator:a7ca78fcebed5c6b8c9cd96bacb588785 inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b437c5eddc1f6e6108a112e58517fce inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7b437c5eddc1f6e6108a112e58517fce">isStopped</a> () const </td></tr>
<tr class="separator:a7b437c5eddc1f6e6108a112e58517fce inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e8f8db88a0ec9c9f616e55a220cc30 inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#ac9e8f8db88a0ec9c9f616e55a220cc30">areChildrenStopped</a> () const </td></tr>
<tr class="separator:ac9e8f8db88a0ec9c9f616e55a220cc30 inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a3f86c14a870b4c8eefa77f9989a5e inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e">stopped</a> ()</td></tr>
<tr class="separator:a32a3f86c14a870b4c8eefa77f9989a5e inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5dbf359315d75eacb3386140b32e0f inherit pub_methods_a01561"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a2b5dbf359315d75eacb3386140b32e0f">onChildrenStopped</a> ()</td></tr>
<tr class="separator:a2b5dbf359315d75eacb3386140b32e0f inherit pub_methods_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01437"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01437')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d9/db0/a01437.html">beast::PropertyStream::Source</a></td></tr>
<tr class="memitem:a1dd058a9799aec943c4f52aa263f6242 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a1dd058a9799aec943c4f52aa263f6242">Source</a> (std::string const &amp;<a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a>)</td></tr>
<tr class="separator:a1dd058a9799aec943c4f52aa263f6242 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad334cdee3d793510a6d401101be7cbdc inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#ad334cdee3d793510a6d401101be7cbdc">~Source</a> ()</td></tr>
<tr class="separator:ad334cdee3d793510a6d401101be7cbdc inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ebda8c3ccfac01e9ec629551521c37 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">std::string const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a> () const </td></tr>
<tr class="separator:ad2ebda8c3ccfac01e9ec629551521c37 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b74ac4b0ae83b71d8605412b2fe5c8b inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a6b74ac4b0ae83b71d8605412b2fe5c8b">add</a> (<a class="el" href="../../d9/db0/a01437.html">Source</a> &amp;source)</td></tr>
<tr class="separator:a6b74ac4b0ae83b71d8605412b2fe5c8b inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4355f7842066d0b3f76c0392de3fdf4d inherit pub_methods_a01437"><td class="memTemplParams" colspan="2">template&lt;class Derived &gt; </td></tr>
<tr class="memitem:a4355f7842066d0b3f76c0392de3fdf4d inherit pub_methods_a01437"><td class="memTemplItemLeft" align="right" valign="top">Derived *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a4355f7842066d0b3f76c0392de3fdf4d">add</a> (Derived *child)</td></tr>
<tr class="separator:a4355f7842066d0b3f76c0392de3fdf4d inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a556e44cee0e7f79c29d62baf27913926 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a556e44cee0e7f79c29d62baf27913926">remove</a> (<a class="el" href="../../d9/db0/a01437.html">Source</a> &amp;child)</td></tr>
<tr class="separator:a556e44cee0e7f79c29d62baf27913926 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d00067514e90c8134de3d4777ea083e inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a1d00067514e90c8134de3d4777ea083e">removeAll</a> ()</td></tr>
<tr class="separator:a1d00067514e90c8134de3d4777ea083e inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4d96dfb59e72aa00e5f94fc07e0ab8 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a8a4d96dfb59e72aa00e5f94fc07e0ab8">write_one</a> (<a class="el" href="../../d9/d65/a01145.html">PropertyStream</a> &amp;stream)</td></tr>
<tr class="separator:a8a4d96dfb59e72aa00e5f94fc07e0ab8 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2398e48dde9f52949d08ca0785c0bb3 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#aa2398e48dde9f52949d08ca0785c0bb3">write</a> (<a class="el" href="../../d9/d65/a01145.html">PropertyStream</a> &amp;stream)</td></tr>
<tr class="separator:aa2398e48dde9f52949d08ca0785c0bb3 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936592a06d57d60b70874e358758c542 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a936592a06d57d60b70874e358758c542">write</a> (<a class="el" href="../../d9/d65/a01145.html">PropertyStream</a> &amp;stream, std::string const &amp;path)</td></tr>
<tr class="separator:a936592a06d57d60b70874e358758c542 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f49272d4017476ce3e4694b539b8ae inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../d9/db0/a01437.html">Source</a> *, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a30f49272d4017476ce3e4694b539b8ae">find</a> (std::string path)</td></tr>
<tr class="separator:a30f49272d4017476ce3e4694b539b8ae inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949fcb8686f4cfbb4401bb9a4aad80d7 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html">Source</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a949fcb8686f4cfbb4401bb9a4aad80d7">find_one_deep</a> (std::string const &amp;<a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a>)</td></tr>
<tr class="separator:a949fcb8686f4cfbb4401bb9a4aad80d7 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7982669e8117c921ff644b7e2a552b19 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html">PropertyStream::Source</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a7982669e8117c921ff644b7e2a552b19">find_path</a> (std::string path)</td></tr>
<tr class="separator:a7982669e8117c921ff644b7e2a552b19 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1761f2a6920ca1c5d9543afda4930c45 inherit pub_methods_a01437"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html">PropertyStream::Source</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db0/a01437.html#a1761f2a6920ca1c5d9543afda4930c45">find_one</a> (std::string const &amp;<a class="el" href="../../d9/db0/a01437.html#ad2ebda8c3ccfac01e9ec629551521c37">name</a>)</td></tr>
<tr class="separator:a1761f2a6920ca1c5d9543afda4930c45 inherit pub_methods_a01437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01688"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01688')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d6/d53/a01688.html">beast::Thread</a></td></tr>
<tr class="memitem:a53e1af928742b662e67f01b4de323a92 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a53e1af928742b662e67f01b4de323a92">Thread</a> (const <a class="el" href="../../d1/d88/a01578.html">String</a> &amp;<a class="el" href="../../d6/d53/a01688.html#a3e41f7640e43c15baa9210f092fe0eb5">threadName</a>)</td></tr>
<tr class="separator:a53e1af928742b662e67f01b4de323a92 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2565edea6618d05e7ee19930afb08b3c inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a2565edea6618d05e7ee19930afb08b3c">~Thread</a> ()</td></tr>
<tr class="separator:a2565edea6618d05e7ee19930afb08b3c inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a338a7d7297324717aabdc9fad34ec8 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a2a338a7d7297324717aabdc9fad34ec8">startThread</a> ()</td></tr>
<tr class="separator:a2a338a7d7297324717aabdc9fad34ec8 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f9c2a7e0f2dfb671c69d0cb264f0e23 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a9f9c2a7e0f2dfb671c69d0cb264f0e23">startThread</a> (int priority)</td></tr>
<tr class="separator:a9f9c2a7e0f2dfb671c69d0cb264f0e23 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f091046cfb7079b343c1e02f462cc94 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a0f091046cfb7079b343c1e02f462cc94">stopThread</a> (int timeOutMilliseconds=-1)</td></tr>
<tr class="separator:a0f091046cfb7079b343c1e02f462cc94 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a814e9f39a40ad66e2c66f2873d39b70c inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a814e9f39a40ad66e2c66f2873d39b70c">stopThreadAsync</a> ()</td></tr>
<tr class="separator:a814e9f39a40ad66e2c66f2873d39b70c inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3008b46e1f74df7b35a56a9d5e8465c inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#ae3008b46e1f74df7b35a56a9d5e8465c">isThreadRunning</a> () const </td></tr>
<tr class="separator:ae3008b46e1f74df7b35a56a9d5e8465c inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a8c61ba7975e767c62e9cc6a69868d6 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a7a8c61ba7975e767c62e9cc6a69868d6">signalThreadShouldExit</a> ()</td></tr>
<tr class="separator:a7a8c61ba7975e767c62e9cc6a69868d6 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3dac964e632b652dd1fabeaa20fbc07 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07">threadShouldExit</a> () const </td></tr>
<tr class="separator:ac3dac964e632b652dd1fabeaa20fbc07 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02cc909609f8c48d9673fcbe21400215 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a02cc909609f8c48d9673fcbe21400215">waitForThreadToExit</a> (int timeOutMilliseconds=-1) const </td></tr>
<tr class="separator:a02cc909609f8c48d9673fcbe21400215 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e73232af1bba50252ff38fd58c0e0c5 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a5e73232af1bba50252ff38fd58c0e0c5">setPriority</a> (int priority)</td></tr>
<tr class="separator:a5e73232af1bba50252ff38fd58c0e0c5 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d4ba22a58e4dbbbd6b4079fed413c2 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#ab3d4ba22a58e4dbbbd6b4079fed413c2">setAffinityMask</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> <a class="el" href="../../d6/d53/a01688.html#ab347c68be61976ea810bd9be1001510b">affinityMask</a>)</td></tr>
<tr class="separator:ab3d4ba22a58e4dbbbd6b4079fed413c2 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0203536ea9f728cdfe390df131927463 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a0203536ea9f728cdfe390df131927463">wait</a> (int timeOutMilliseconds=-1) const </td></tr>
<tr class="separator:a0203536ea9f728cdfe390df131927463 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab34cbf5c85d21da0cd3c324a7ea14461 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#ab34cbf5c85d21da0cd3c324a7ea14461">notify</a> () const </td></tr>
<tr class="separator:ab34cbf5c85d21da0cd3c324a7ea14461 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647188494652a4383fae32509d1cb5b3 inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d53/a01688.html#ad5646c303a19fb582da1b3d8c5e4d3e0">ThreadID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a647188494652a4383fae32509d1cb5b3">getThreadId</a> () const noexcept</td></tr>
<tr class="separator:a647188494652a4383fae32509d1cb5b3 inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639684001be0502d634fa9cb1587f9df inherit pub_methods_a01688"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d1/d88/a01578.html">String</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a639684001be0502d634fa9cb1587f9df">getThreadName</a> () const </td></tr>
<tr class="separator:a639684001be0502d634fa9cb1587f9df inherit pub_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1be11d7f4e5c68a1fc681da0d6dbffec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db0/a01437.html#ad5b5f14ad7af70d885063788c714fa77">SharedState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#a1be11d7f4e5c68a1fc681da0d6dbffec">m_state</a></td></tr>
<tr class="separator:a1be11d7f4e5c68a1fc681da0d6dbffec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e6fcae9da6487016b08eb1cf0300a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a></td></tr>
<tr class="separator:ab9e6fcae9da6487016b08eb1cf0300a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_a00828"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_a00828')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../d8/d64/a00828.html">ripple::LedgerCleaner</a></td></tr>
<tr class="memitem:a2ae45cd240a11d3a7f7a8b21e7d9a4ed inherit pub_static_methods_a00828"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d64/a00828.html">LedgerCleaner</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d64/a00828.html#a2ae45cd240a11d3a7f7a8b21e7d9a4ed">New</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;parent, <a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> journal)</td></tr>
<tr class="separator:a2ae45cd240a11d3a7f7a8b21e7d9a4ed inherit pub_static_methods_a00828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_a01688"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_a01688')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../d6/d53/a01688.html">beast::Thread</a></td></tr>
<tr class="memitem:a2092bd0a7b7951ad8499b82e7f24ca68 inherit pub_static_methods_a01688"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a2092bd0a7b7951ad8499b82e7f24ca68">setCurrentThreadPriority</a> (int priority)</td></tr>
<tr class="separator:a2092bd0a7b7951ad8499b82e7f24ca68 inherit pub_static_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0da29fd6ea8e0c5b7a0d122c95f3220 inherit pub_static_methods_a01688"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#aa0da29fd6ea8e0c5b7a0d122c95f3220">setCurrentThreadAffinityMask</a> (<a class="el" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">std::uint32_t</a> <a class="el" href="../../d6/d53/a01688.html#ab347c68be61976ea810bd9be1001510b">affinityMask</a>)</td></tr>
<tr class="separator:aa0da29fd6ea8e0c5b7a0d122c95f3220 inherit pub_static_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55db77995760cf1a29a154ae57dc9d8d inherit pub_static_methods_a01688"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d">sleep</a> (int milliseconds)</td></tr>
<tr class="separator:a55db77995760cf1a29a154ae57dc9d8d inherit pub_static_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba3125156c6538ba6fd308c4c2a5978 inherit pub_static_methods_a01688"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a6ba3125156c6538ba6fd308c4c2a5978">yield</a> ()</td></tr>
<tr class="separator:a6ba3125156c6538ba6fd308c4c2a5978 inherit pub_static_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a810116e24c319661ba9e7583ae17fa3e inherit pub_static_methods_a01688"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d53/a01688.html#ad5646c303a19fb582da1b3d8c5e4d3e0">ThreadID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a810116e24c319661ba9e7583ae17fa3e">getCurrentThreadId</a> ()</td></tr>
<tr class="separator:a810116e24c319661ba9e7583ae17fa3e inherit pub_static_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22684529e3fca91bfb96fad0508eb6bb inherit pub_static_methods_a01688"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d53/a01688.html">Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a22684529e3fca91bfb96fad0508eb6bb">getCurrentThread</a> ()</td></tr>
<tr class="separator:a22684529e3fca91bfb96fad0508eb6bb inherit pub_static_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a200476c04e32b851b30396a25bcc9703 inherit pub_static_methods_a01688"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d53/a01688.html#a200476c04e32b851b30396a25bcc9703">setCurrentThreadName</a> (const <a class="el" href="../../d1/d88/a01578.html">String</a> &amp;newThreadName)</td></tr>
<tr class="separator:a200476c04e32b851b30396a25bcc9703 inherit pub_static_methods_a01688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_a00828"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_a00828')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../d8/d64/a00828.html">ripple::LedgerCleaner</a></td></tr>
<tr class="memitem:aae1e4b00f58204372870ed0e51247a1a inherit pro_methods_a00828"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d64/a00828.html#aae1e4b00f58204372870ed0e51247a1a">LedgerCleaner</a> (<a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;parent)</td></tr>
<tr class="separator:aae1e4b00f58204372870ed0e51247a1a inherit pro_methods_a00828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_a01744"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_a01744')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../d1/d04/a01744.html">beast::Uncopyable</a></td></tr>
<tr class="memitem:a4661bf5ef8d2cf3887b4fab72247d77b inherit pro_methods_a01744"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d04/a01744.html#a4661bf5ef8d2cf3887b4fab72247d77b">Uncopyable</a> ()</td></tr>
<tr class="separator:a4661bf5ef8d2cf3887b4fab72247d77b inherit pro_methods_a01744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ae4991f36ebcd34f47281cc2fdf689 inherit pro_methods_a01744"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d04/a01744.html#a94ae4991f36ebcd34f47281cc2fdf689">~Uncopyable</a> ()</td></tr>
<tr class="separator:a94ae4991f36ebcd34f47281cc2fdf689 inherit pro_methods_a01744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_a01561"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_a01561')"><img src="../../closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="../../d2/d49/a01561.html">beast::Stoppable</a></td></tr>
<tr class="memitem:af4e7ab358a26f9e77609119f56b6324d inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">char const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#af4e7ab358a26f9e77609119f56b6324d">m_name</a></td></tr>
<tr class="separator:af4e7ab358a26f9e77609119f56b6324d inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa65f6d0b79ef60e895f49ff1e3e572e inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dda/a01289.html">RootStoppable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#afa65f6d0b79ef60e895f49ff1e3e572e">m_root</a></td></tr>
<tr class="separator:afa65f6d0b79ef60e895f49ff1e3e572e inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bf935d3fb8d634a65993d18951e5c8c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d56/a00274.html">Child</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a8bf935d3fb8d634a65993d18951e5c8c">m_child</a></td></tr>
<tr class="separator:a8bf935d3fb8d634a65993d18951e5c8c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d15d9b53bec924ba390e76fb775b45c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d06/a00131.html">Atomic</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a4d15d9b53bec924ba390e76fb775b45c">m_started</a></td></tr>
<tr class="separator:a4d15d9b53bec924ba390e76fb775b45c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8958b95e49ca71456dc06ce6117bd7 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">bool volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a4d8958b95e49ca71456dc06ce6117bd7">m_stopped</a></td></tr>
<tr class="separator:a4d8958b95e49ca71456dc06ce6117bd7 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a456aaf3dae4f448e8a6ad889deb19e85 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top">bool volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a456aaf3dae4f448e8a6ad889deb19e85">m_childrenStopped</a></td></tr>
<tr class="separator:a456aaf3dae4f448e8a6ad889deb19e85 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58b644e5741df3061537d39c9a1022c8 inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d49/a01561.html#a229376a5eb68401604f3c83112b65ea6">Children</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a58b644e5741df3061537d39c9a1022c8">m_children</a></td></tr>
<tr class="separator:a58b644e5741df3061537d39c9a1022c8 inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e94f76b666ad08e057a8b6a7c7dbe0c inherit pro_attribs_a01561"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d02/a01808.html">WaitableEvent</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/a01561.html#a7e94f76b666ad08e057a8b6a7c7dbe0c">m_stoppedEvent</a></td></tr>
<tr class="separator:a7e94f76b666ad08e057a8b6a7c7dbe0c inherit pro_attribs_a01561"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00036">36</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ae9275094046b3e9fa57b8aff051eb50b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d7/dde/a01384.html">beast::SharedData</a>&lt;<a class="el" href="../../d8/dd9/a01507.html">State</a>&gt; <a class="el" href="../../d1/dea/a00829.html#ae9275094046b3e9fa57b8aff051eb50b">ripple::LedgerCleanerImp::SharedState</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00060">60</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1cc4ae5319fcf2b6ec8e8fae88f77320"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ripple::LedgerCleanerImp::LedgerCleanerImp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d49/a01561.html#acb0fcc07d95f38f05243ead46986ecd2">Stoppable</a> &amp;&#160;</td>
          <td class="paramname"><em>stoppable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td>
          <td class="paramname"><em>journal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00067">67</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        : <a class="code" href="../../d8/d64/a00828.html#aae1e4b00f58204372870ed0e51247a1a">LedgerCleaner</a> (stoppable)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        , <a class="code" href="../../d6/d53/a01688.html#a53e1af928742b662e67f01b4de323a92">Thread</a> (<span class="stringliteral">&quot;LedgerCleaner&quot;</span>)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        , <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a> (journal)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6178db68a83cb93edeee8d254444285"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ripple::LedgerCleanerImp::~LedgerCleanerImp </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00076">76</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../d7/db5/a02088_source.html#l00178">beast::Thread::stopThread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="../../d6/d53/a01688.html#a0f091046cfb7079b343c1e02f462cc94">stopThread</a> ();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_ab6178db68a83cb93edeee8d254444285_cgraph.png" border="0" usemap="#d1/dea/a00829_ab6178db68a83cb93edeee8d254444285_cgraph" alt=""/></div>
<map name="d1/dea/a00829_ab6178db68a83cb93edeee8d254444285_cgraph" id="d1/dea/a00829_ab6178db68a83cb93edeee8d254444285_cgraph">
<area shape="rect" id="node3" href="../../d6/d53/a01688.html#a0f091046cfb7079b343c1e02f462cc94" title="beast::Thread::stopThread" alt="" coords="223,196,396,225"/><area shape="rect" id="node5" href="../../d6/d53/a01688.html#a810116e24c319661ba9e7583ae17fa3e" title="beast::Thread::getCurrent\lThreadId" alt="" coords="707,5,877,51"/><area shape="rect" id="node7" href="../../d6/d53/a01688.html#a647188494652a4383fae32509d1cb5b3" title="beast::Thread::getThreadId" alt="" coords="703,75,881,104"/><area shape="rect" id="node9" href="../../d6/d53/a01688.html#ae3008b46e1f74df7b35a56a9d5e8465c" title="beast::Thread::isThreadRunning" alt="" coords="688,251,896,280"/><area shape="rect" id="node11" href="../../d6/d53/a01688.html#ae81d39927327aaaf6e8a77ad9d94a318" title="beast::Thread::killThread" alt="" coords="460,248,625,277"/><area shape="rect" id="node13" href="../../d6/d53/a01688.html#ab34cbf5c85d21da0cd3c324a7ea14461" title="beast::Thread::notify" alt="" coords="472,301,613,331"/><area shape="rect" id="node17" href="../../d6/d53/a01688.html#a7a8c61ba7975e767c62e9cc6a69868d6" title="beast::Thread::signalThread\lShouldExit" alt="" coords="451,354,635,401"/><area shape="rect" id="node19" href="../../d6/d53/a01688.html#a02cc909609f8c48d9673fcbe21400215" title="beast::Thread::waitForThread\lToExit" alt="" coords="447,127,639,174"/><area shape="rect" id="node15" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="719,303,865,350"/><area shape="rect" id="node22" href="../../dc/dc8/a01695.html#a72213ba0e3eff5f7067dd740922651f2" title="beast::Time::getMillisecond\lCounter" alt="" coords="701,127,883,174"/><area shape="rect" id="node28" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d" title="beast::Thread::sleep" alt="" coords="721,197,863,227"/><area shape="rect" id="node24" href="../../d5/d83/a03337.html#ab9caefe6aa83608404ede7c32dbadda8" title="beast::beast_milliseconds\lSinceStartup" alt="" coords="944,127,1117,174"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a754722a8833fb4a620552480e33dfedb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::doClean </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d27/a01781.html">Json::Value</a> const &amp;&#160;</td>
          <td class="paramname"><em>parameters</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start a long running task to clean the ledger. The ledger is cleaned asynchronously, on an implementation defined thread. This function call does not block. The long running task will be stopped if the Stoppable stops.</p>
<p>Thread safety: Safe to call from any thread at any time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>A <a class="el" href="../../d2/dd6/a03414.html" title="JSON (JavaScript Object Notation). ">Json</a> object with configurable parameters. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d8/d64/a00828.html#ab8b75b3c971e4540cc3acbfba738d460">ripple::LedgerCleaner</a>.</p>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00133">133</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../da/d23/a02452_source.html#l00929">Json::Value::asBool()</a>, <a class="el" href="../../da/d23/a02452_source.html#l00861">Json::Value::asUInt()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d1/de6/a00837.html#a6931bd2f28dffb0ff14ebfca9fd4d7c9">ripple::LedgerMaster::getFullValidatedRange()</a>, <a class="el" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">ripple::Application::getLedgerMaster()</a>, <a class="el" href="../../da/d23/a02452_source.html#l01371">Json::Value::isMember()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00062">m_state</a>, and <a class="el" href="../../d7/db5/a02088_source.html#l00266">beast::Thread::notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> minRange;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> maxRange;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">getLedgerMaster</a>().<a class="code" href="../../d1/de6/a00837.html#a6931bd2f28dffb0ff14ebfca9fd4d7c9">getFullValidatedRange</a> (minRange, maxRange);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            SharedState::Access <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> (<a class="code" href="../../d1/dea/a00829.html#a1be11d7f4e5c68a1fc681da0d6dbffec">m_state</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange = maxRange;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange = minRange;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;checkNodes = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;fixTxns = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;failures = 0;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">            JSON Parameters:</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">                All parameters are optional. By default the cleaner cleans</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">                things it thinks are necessary. This behavior can be modified</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">                using the following options supplied via JSON RPC:</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">                &quot;ledger&quot;</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">                    A single unsigned integer representing an individual</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">                    ledger to clean.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">                &quot;min_ledger&quot;, &quot;max_ledger&quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">                    Unsigned integers representing the starting and ending</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">                    ledger numbers to clean. If unspecified, clean all ledgers.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">                &quot;full&quot;</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">                    A boolean. When set to true, means clean everything possible.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">                &quot;fix_txns&quot;</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">                    A boolean value indicating whether or not to fix the</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">                    transactions in the database as well.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">                &quot;check_nodes&quot;</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">                    A boolean, when set to true means check the nodes.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">                &quot;stop&quot;</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">                    A boolean, when set to true informs the cleaner to gracefully</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">                    stop its current activities if any cleaning is taking place.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">            */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="comment">// Quick way to fix a single ledger</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">if</span> (params.isMember(<span class="stringliteral">&quot;ledger&quot;</span>))</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange = params[<span class="stringliteral">&quot;ledger&quot;</span>].asUInt();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange = params[<span class="stringliteral">&quot;ledger&quot;</span>].asUInt();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;fixTxns = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;checkNodes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">if</span> (params.isMember(<span class="stringliteral">&quot;max_ledger&quot;</span>))</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                 <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange = params[<span class="stringliteral">&quot;max_ledger&quot;</span>].asUInt();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">if</span> (params.isMember(<span class="stringliteral">&quot;min_ledger&quot;</span>))</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange = params[<span class="stringliteral">&quot;min_ledger&quot;</span>].asUInt();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">if</span> (params.isMember(<span class="stringliteral">&quot;full&quot;</span>))</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;fixTxns = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;checkNodes = params[<span class="stringliteral">&quot;full&quot;</span>].asBool();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> (params.isMember(<span class="stringliteral">&quot;fix_txns&quot;</span>))</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;fixTxns = params[<span class="stringliteral">&quot;fix_txns&quot;</span>].asBool();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">if</span> (params.isMember(<span class="stringliteral">&quot;check_nodes&quot;</span>))</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;checkNodes = params[<span class="stringliteral">&quot;check_nodes&quot;</span>].asBool();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">if</span> (params.isMember(<span class="stringliteral">&quot;stop&quot;</span>) &amp;&amp; params[<span class="stringliteral">&quot;stop&quot;</span>].asBool())</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange = 0;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="../../d6/d53/a01688.html#ab34cbf5c85d21da0cd3c324a7ea14461">notify</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a754722a8833fb4a620552480e33dfedb_cgraph.png" border="0" usemap="#d1/dea/a00829_a754722a8833fb4a620552480e33dfedb_cgraph" alt=""/></div>
<map name="d1/dea/a00829_a754722a8833fb4a620552480e33dfedb_cgraph" id="d1/dea/a00829_a754722a8833fb4a620552480e33dfedb_cgraph">
<area shape="rect" id="node3" href="../../d6/d27/a01781.html#a7402c797285c020566c3db5f8ae4e940" title="Json::Value::asBool" alt="" coords="233,5,372,35"/><area shape="rect" id="node5" href="../../d6/d27/a01781.html#a2019d1bd296b89356c1b0da5970c918c" title="Json::Value::asUInt" alt="" coords="233,59,372,88"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="252,112,353,141"/><area shape="rect" id="node11" href="../../d1/de6/a00837.html#a6931bd2f28dffb0ff14ebfca9fd4d7c9" title="ripple::LedgerMaster\l::getFullValidatedRange" alt="" coords="223,165,383,211"/><area shape="rect" id="node13" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="240,234,365,281"/><area shape="rect" id="node15" href="../../d6/d27/a01781.html#a196defba501d70ea2b6793afb04108e3" title="Return true if the object has a member named key. " alt="" coords="225,304,380,333"/><area shape="rect" id="node17" href="../../d6/d53/a01688.html#ab34cbf5c85d21da0cd3c324a7ea14461" title="beast::Thread::notify" alt="" coords="232,357,373,387"/><area shape="rect" id="node9" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="433,103,609,150"/><area shape="rect" id="node19" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="448,349,595,395"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac210318bdb2ea4cf4cbe1be753a51968"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::LedgerCleanerImp::doLedger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledgerIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledgerHash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doNodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doTxns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Process a single ledger </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ledgerIndex</td><td>The index of the ledger to process. </td></tr>
    <tr><td class="paramname">ledgerHash</td><td>The known correct hash of the ledger. </td></tr>
    <tr><td class="paramname">doNodes</td><td>Ensure all ledger nodes are in the node db. </td></tr>
    <tr><td class="paramname">doTxns</td><td>Reprocess (account) transactions to SQL databases. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the ledger was cleaned. </dd></dl>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00262">262</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../dd/d07/a02132_source.html#l00244">beast::Journal::debug</a>, <a class="el" href="../../dc/d86/a02909_source.html#l00042">ripple::InboundLedger::fcGENERIC</a>, <a class="el" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c">ripple::LedgerMaster::findAcquireLedger()</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d1/de6/a00837.html#a6f3456fffc40b8578d7b4c7dc065973c">ripple::LedgerMaster::fixIndex()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>, <a class="el" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">ripple::Application::getLedgerMaster()</a>, <a class="el" href="../../dd/d3f/a02912_source.html#l00689">ripple::Ledger::loadByIndex()</a>, and <a class="el" href="../../d6/deb/a02915_source.html#l00063">m_journal</a>.</p>

<p>Referenced by <a class="el" href="../../d6/deb/a02915_source.html#l00360">doLedgerCleaner()</a>.</p>
<div class="fragment"><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> nodeLedger = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">getLedgerMaster</a>().<a class="code" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c">findAcquireLedger</a>(ledgerIndex, ledgerHash);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (!nodeLedger)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; <span class="stringliteral">&quot;Ledger &quot;</span> &lt;&lt; ledgerIndex &lt;&lt; <span class="stringliteral">&quot; not available&quot;</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> dbLedger = <a class="code" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed">Ledger::loadByIndex</a>(ledgerIndex);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span> (! dbLedger ||</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            (dbLedger-&gt;getHash() != ledgerHash) ||</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            (dbLedger-&gt;getParentHash() != nodeLedger-&gt;getParentHash()))</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="comment">// Ideally we&#39;d also check for more than one ledger with that index</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="stringliteral">&quot;Ledger &quot;</span> &lt;&lt; ledgerIndex &lt;&lt; <span class="stringliteral">&quot; mismatches SQL DB&quot;</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            doTxns = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span>(! <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">getLedgerMaster</a>().<a class="code" href="../../d1/de6/a00837.html#a6f3456fffc40b8578d7b4c7dc065973c">fixIndex</a>(ledgerIndex, ledgerHash))</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; <span class="stringliteral">&quot;ledger &quot;</span> &lt;&lt; ledgerIndex &lt;&lt; <span class="stringliteral">&quot; had wrong entry in history&quot;</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            doTxns = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">if</span> (doNodes &amp;&amp; !nodeLedger-&gt;walkLedger())</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; <span class="stringliteral">&quot;Ledger &quot;</span> &lt;&lt; ledgerIndex &lt;&lt; <span class="stringliteral">&quot; is missing nodes&quot;</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a>(ledgerHash, ledgerIndex, <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (doTxns &amp;&amp; !nodeLedger-&gt;pendSaveValidated(<span class="keyword">true</span>, <span class="keyword">false</span>))</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; <span class="stringliteral">&quot;Failed to save ledger &quot;</span> &lt;&lt; ledgerIndex;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        nodeLedger-&gt;dropCache();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_cgraph.png" border="0" usemap="#d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_cgraph" alt=""/></div>
<map name="d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_cgraph" id="d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_cgraph">
<area shape="rect" id="node3" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c" title="ripple::LedgerMaster\l::findAcquireLedger" alt="" coords="243,5,381,51"/><area shape="rect" id="node5" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="236,74,388,121"/><area shape="rect" id="node7" href="../../d1/de6/a00837.html#a6f3456fffc40b8578d7b4c7dc065973c" title="ripple::LedgerMaster\l::fixIndex" alt="" coords="243,143,381,190"/><area shape="rect" id="node9" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="720,263,821,292"/><area shape="rect" id="node13" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="243,263,381,310"/><area shape="rect" id="node15" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="249,333,375,379"/><area shape="rect" id="node17" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="223,432,401,461"/><area shape="rect" id="node11" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="897,254,1073,301"/><area shape="rect" id="node19" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="471,314,625,361"/><area shape="rect" id="node22" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="477,383,619,430"/><area shape="rect" id="node24" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="485,453,611,499"/><area shape="rect" id="node26" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="469,576,627,605"/><area shape="rect" id="node48" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="469,523,627,552"/><area shape="rect" id="node51" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="451,629,645,659"/><area shape="rect" id="node28" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="693,337,848,383"/><area shape="rect" id="node30" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="693,406,848,453"/><area shape="rect" id="node32" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="693,475,848,522"/><area shape="rect" id="node34" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="693,545,848,591"/><area shape="rect" id="node36" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="693,614,848,661"/><area shape="rect" id="node38" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="693,683,848,730"/><area shape="rect" id="node40" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="708,753,833,799"/><area shape="rect" id="node46" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="693,822,848,869"/><area shape="rect" id="node42" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="912,761,1059,791"/><area shape="rect" id="node44" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1124,761,1273,791"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_icgraph.png" border="0" usemap="#d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_icgraph" alt=""/></div>
<map name="d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_icgraph" id="d1/dea/a00829_ac210318bdb2ea4cf4cbe1be753a51968_icgraph">
<area shape="rect" id="node3" href="../../d1/dea/a00829.html#a6e614220e35452159e2f3debe682764e" title="ripple::LedgerCleanerImp\l::doLedgerCleaner" alt="" coords="223,5,388,51"/><area shape="rect" id="node5" href="../../d1/dea/a00829.html#a6eff0ca87db1f583b2a401bc4f119990" title="ripple::LedgerCleanerImp::run" alt="" coords="439,13,631,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e614220e35452159e2f3debe682764e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::doLedgerCleaner </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Run the ledger cleaner. </p>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00360">360</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../dd/d07/a02132_source.html#l00244">beast::Journal::debug</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00262">doLedger()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00315">getHash()</a>, <a class="el" href="../../dd/d07/a02132_source.html#l00245">beast::Journal::info</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00138">ripple::base_uint&lt; BITS &gt;::isZero()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00063">m_journal</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00062">m_state</a>, <a class="el" href="../../d7/db5/a02088_source.html#l00465">beast::Thread::sleep()</a>, and <a class="el" href="../../de/dd1/a02100_source.html#l00150">beast::Thread::threadShouldExit()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/deb/a02915_source.html#l00220">run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> goodLedger;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">while</span> (! this-&gt;<a class="code" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07">threadShouldExit</a>())</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> ledgerIndex;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> ledgerHash;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordtype">bool</span> doNodes;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordtype">bool</span> doTxns;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getFeeTrack().isLoadedLocal())</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; <span class="stringliteral">&quot;Waiting for load to subside&quot;</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <a class="code" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d">sleep</a>(5000);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07">threadShouldExit</a> ())</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                SharedState::Access <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> (<a class="code" href="../../d1/dea/a00829.html#a1be11d7f4e5c68a1fc681da0d6dbffec">m_state</a>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange &gt; <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange) ||</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    (<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange == 0) || (<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange == 0))</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange = 0;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                ledgerIndex = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                doNodes = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;checkNodes;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                doTxns = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;fixTxns;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            ledgerHash = <a class="code" href="../../d1/dea/a00829.html#add2f33954124ea07dc3d87eedb8ca74f">getHash</a>(ledgerIndex, goodLedger);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordtype">bool</span> fail = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">if</span> (ledgerHash.isZero())</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#ad9e31acb5bfc1ff22e1a8a7b0561ec4e">info</a> &lt;&lt; <span class="stringliteral">&quot;Unable to get hash for ledger &quot;</span> &lt;&lt; ledgerIndex;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dea/a00829.html#ac210318bdb2ea4cf4cbe1be753a51968">doLedger</a>(ledgerIndex, ledgerHash, doNodes, doTxns))</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#ad9e31acb5bfc1ff22e1a8a7b0561ec4e">info</a> &lt;&lt; <span class="stringliteral">&quot;Failed to process ledger &quot;</span> &lt;&lt; ledgerIndex;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="keywordflow">if</span> (fail)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    SharedState::Access <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> (<a class="code" href="../../d1/dea/a00829.html#a1be11d7f4e5c68a1fc681da0d6dbffec">m_state</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    ++<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;failures;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <a class="code" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d">sleep</a>(2000); <span class="comment">// Wait for acquiring to catch up to us</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    SharedState::Access <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> (<a class="code" href="../../d1/dea/a00829.html#a1be11d7f4e5c68a1fc681da0d6dbffec">m_state</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <span class="keywordflow">if</span> (ledgerIndex == <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        ++<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    <span class="keywordflow">if</span> (ledgerIndex == <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        --<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;failures = 0;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <a class="code" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d">sleep</a>(100); <span class="comment">// Reduce I/O pressure a bit</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a6e614220e35452159e2f3debe682764e_cgraph.png" border="0" usemap="#d1/dea/a00829_a6e614220e35452159e2f3debe682764e_cgraph" alt=""/></div>
<map name="d1/dea/a00829_a6e614220e35452159e2f3debe682764e_cgraph" id="d1/dea/a00829_a6e614220e35452159e2f3debe682764e_cgraph">
<area shape="rect" id="node3" href="../../d1/dea/a00829.html#ac210318bdb2ea4cf4cbe1be753a51968" title="ripple::LedgerCleanerImp\l::doLedger" alt="" coords="244,634,409,681"/><area shape="rect" id="node11" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="979,771,1080,800"/><area shape="rect" id="node56" href="../../d1/dea/a00829.html#add2f33954124ea07dc3d87eedb8ca74f" title="ripple::LedgerCleanerImp\l::getHash" alt="" coords="244,949,409,995"/><area shape="rect" id="node67" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="744,1098,869,1145"/><area shape="rect" id="node74" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d" title="beast::Thread::sleep" alt="" coords="256,1269,397,1299"/><area shape="rect" id="node76" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07" title="beast::Thread::threadShouldExit" alt="" coords="223,1323,431,1352"/><area shape="rect" id="node5" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c" title="ripple::LedgerMaster\l::findAcquireLedger" alt="" coords="501,789,640,835"/><area shape="rect" id="node7" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="731,795,883,842"/><area shape="rect" id="node9" href="../../d1/de6/a00837.html#a6f3456fffc40b8578d7b4c7dc065973c" title="ripple::LedgerMaster\l::fixIndex" alt="" coords="501,445,640,491"/><area shape="rect" id="node15" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="737,725,876,771"/><area shape="rect" id="node17" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="508,719,633,766"/><area shape="rect" id="node19" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="481,515,660,544"/><area shape="rect" id="node13" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1156,762,1332,809"/><area shape="rect" id="node21" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="729,309,884,355"/><area shape="rect" id="node24" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="736,378,877,425"/><area shape="rect" id="node26" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="744,447,869,494"/><area shape="rect" id="node28" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="728,256,885,285"/><area shape="rect" id="node50" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="728,621,885,651"/><area shape="rect" id="node53" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="709,568,904,597"/><area shape="rect" id="node30" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="952,74,1107,121"/><area shape="rect" id="node32" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="952,143,1107,190"/><area shape="rect" id="node34" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="952,213,1107,259"/><area shape="rect" id="node36" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="952,282,1107,329"/><area shape="rect" id="node38" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="952,351,1107,398"/><area shape="rect" id="node40" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="952,421,1107,467"/><area shape="rect" id="node42" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="967,490,1092,537"/><area shape="rect" id="node48" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="952,5,1107,51"/><area shape="rect" id="node44" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1171,499,1317,528"/><area shape="rect" id="node46" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1383,499,1532,528"/><area shape="rect" id="node60" href="../../d1/de6/a00837.html#a2e32e5b06d5b855f57a7d4fb3d25c05e" title="ripple::LedgerMaster\l::getValidatedLedger" alt="" coords="500,978,641,1025"/><area shape="rect" id="node62" href="../../d1/dea/a00829.html#a4f40a9f1b3e18b27e30873b35ad084e2" title="ripple::LedgerCleanerImp\l::getLedgerHash" alt="" coords="488,858,653,905"/><area shape="rect" id="node69" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="508,1098,633,1145"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a6e614220e35452159e2f3debe682764e_icgraph.png" border="0" usemap="#d1/dea/a00829_a6e614220e35452159e2f3debe682764e_icgraph" alt=""/></div>
<map name="d1/dea/a00829_a6e614220e35452159e2f3debe682764e_icgraph" id="d1/dea/a00829_a6e614220e35452159e2f3debe682764e_icgraph">
<area shape="rect" id="node3" href="../../d1/dea/a00829.html#a6eff0ca87db1f583b2a401bc4f119990" title="ripple::LedgerCleanerImp::run" alt="" coords="223,13,415,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="add2f33954124ea07dc3d87eedb8ca74f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> ripple::LedgerCleanerImp::getHash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledgerIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a> &amp;&#160;</td>
          <td class="paramname"><em>referenceLedger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the hash of the specified ledger. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ledgerIndex</td><td>The index of the desired ledger. </td></tr>
    <tr><td class="paramname">referenceLedger</td><td>[out] An optional known good subsequent ledger. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The hash of the ledger. This will be all-bits-zero if not found. </dd></dl>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00315">315</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c">ripple::LedgerMaster::findAcquireLedger()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00238">getLedgerHash()</a>, <a class="el" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">ripple::Application::getLedgerMaster()</a>, <a class="el" href="../../d1/de6/a00837.html#a2e32e5b06d5b855f57a7d4fb3d25c05e">ripple::LedgerMaster::getValidatedLedger()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00147">ripple::base_uint&lt; BITS &gt;::isNonZero()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00138">ripple::base_uint&lt; BITS &gt;::isZero()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00063">m_journal</a>, and <a class="el" href="../../dd/d07/a02132_source.html#l00246">beast::Journal::warning</a>.</p>

<p>Referenced by <a class="el" href="../../d6/deb/a02915_source.html#l00360">doLedgerCleaner()</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> ledgerHash;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">if</span> (!referenceLedger || (referenceLedger-&gt;getLedgerSeq() &lt; ledgerIndex))</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            referenceLedger = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">getLedgerMaster</a>().<a class="code" href="../../d1/de6/a00837.html#a2e32e5b06d5b855f57a7d4fb3d25c05e">getValidatedLedger</a>();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">if</span> (!referenceLedger)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a876412c0a487a7a8840b1556cc04cb57">warning</a> &lt;&lt; <span class="stringliteral">&quot;No validated ledger&quot;</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">return</span> ledgerHash; <span class="comment">// Nothing we can do. No validated ledger.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">if</span> (referenceLedger-&gt;getLedgerSeq() &gt;= ledgerIndex)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="comment">// See if the hash for the ledger we need is in the reference ledger</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            ledgerHash = <a class="code" href="../../d1/dea/a00829.html#a4f40a9f1b3e18b27e30873b35ad084e2">getLedgerHash</a>(referenceLedger, ledgerIndex);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keywordflow">if</span> (ledgerHash.isZero())</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            { </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="comment">// No, Try to get another ledger that might have the hash we need</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="comment">// Compute the index and hash of a ledger that will have the hash we need</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a> refIndex = (ledgerIndex + 255) &amp; (~255);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <a class="code" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> refHash = <a class="code" href="../../d1/dea/a00829.html#a4f40a9f1b3e18b27e30873b35ad084e2">getLedgerHash</a> (referenceLedger, refIndex);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                <span class="keywordtype">bool</span> <span class="keyword">const</span> nonzero (refHash.isNonZero ());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                assert (nonzero);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="keywordflow">if</span> (nonzero)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    <span class="comment">// We found the hash and sequence of a better reference ledger</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    referenceLedger = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104">getLedgerMaster</a>().<a class="code" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c">findAcquireLedger</a> (refIndex, refHash);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    <span class="keywordflow">if</span> (referenceLedger)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                        ledgerHash = <a class="code" href="../../d1/dea/a00829.html#a4f40a9f1b3e18b27e30873b35ad084e2">getLedgerHash</a>(referenceLedger, ledgerIndex);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a876412c0a487a7a8840b1556cc04cb57">warning</a> &lt;&lt; <span class="stringliteral">&quot;Validated ledger is prior to target ledger&quot;</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">return</span> ledgerHash;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_cgraph.png" border="0" usemap="#d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_cgraph" alt=""/></div>
<map name="d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_cgraph" id="d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_cgraph">
<area shape="rect" id="node3" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c" title="ripple::LedgerMaster\l::findAcquireLedger" alt="" coords="236,5,375,51"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="464,73,565,103"/><area shape="rect" id="node9" href="../../d1/dea/a00829.html#a4f40a9f1b3e18b27e30873b35ad084e2" title="ripple::LedgerCleanerImp\l::getLedgerHash" alt="" coords="223,125,388,171"/><area shape="rect" id="node16" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="243,194,368,241"/><area shape="rect" id="node18" href="../../d1/de6/a00837.html#a2e32e5b06d5b855f57a7d4fb3d25c05e" title="ripple::LedgerMaster\l::getValidatedLedger" alt="" coords="235,263,376,310"/><area shape="rect" id="node20" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="243,333,368,379"/><area shape="rect" id="node22" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="452,362,577,409"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="641,65,817,111"/><area shape="rect" id="node12" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="445,126,584,173"/><area shape="rect" id="node14" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="439,195,591,242"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_icgraph.png" border="0" usemap="#d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_icgraph" alt=""/></div>
<map name="d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_icgraph" id="d1/dea/a00829_add2f33954124ea07dc3d87eedb8ca74f_icgraph">
<area shape="rect" id="node3" href="../../d1/dea/a00829.html#a6e614220e35452159e2f3debe682764e" title="ripple::LedgerCleanerImp\l::doLedgerCleaner" alt="" coords="223,5,388,51"/><area shape="rect" id="node5" href="../../d1/dea/a00829.html#a6eff0ca87db1f583b2a401bc4f119990" title="ripple::LedgerCleanerImp::run" alt="" coords="439,13,631,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4f40a9f1b3e18b27e30873b35ad084e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> ripple::LedgerCleanerImp::getLedgerHash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a00825.html#a373b6b80e365f42477db12be3ce899ba">Ledger::pointer</a>&#160;</td>
          <td class="paramname"><em>ledger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d9d/a03417.html#a5aef073754f1be626fabfee7a85500df">LedgerIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00238">238</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../dc/d86/a02909_source.html#l00042">ripple::InboundLedger::fcGENERIC</a>, <a class="el" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">ripple::InboundLedgers::findCreate()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">ripple::Application::getInboundLedgers()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00063">m_journal</a>, and <a class="el" href="../../dd/d07/a02132_source.html#l00246">beast::Journal::warning</a>.</p>

<p>Referenced by <a class="el" href="../../d6/deb/a02915_source.html#l00315">getHash()</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="../../d9/d9d/a03417.html#a077afaa330c14078c1f60b740ffc7f73">LedgerHash</a> <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            hash = ledger-&gt;getLedgerHash(index);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">catch</span> (SHAMapMissingNode &amp;)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a876412c0a487a7a8840b1556cc04cb57">warning</a> &lt;&lt;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="stringliteral">&quot;Node missing from ledger &quot;</span> &lt;&lt; ledger-&gt;getLedgerSeq();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad">getInboundLedgers</a>().<a class="code" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a">findCreate</a> (</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                ledger-&gt;getHash(), ledger-&gt;getLedgerSeq(), <a class="code" href="../../dd/d85/a00702.html#a97d9eaf73e624a2b60dc5692bba9fc54a1fce9a276614d03a07645a31c4c1ae74">InboundLedger::fcGENERIC</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_cgraph.png" border="0" usemap="#d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_cgraph" alt=""/></div>
<map name="d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_cgraph" id="d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_cgraph">
<area shape="rect" id="node3" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="223,5,375,51"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="248,75,349,104"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="229,127,368,174"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="425,66,601,113"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_icgraph.png" border="0" usemap="#d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_icgraph" alt=""/></div>
<map name="d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_icgraph" id="d1/dea/a00829_a4f40a9f1b3e18b27e30873b35ad084e2_icgraph">
<area shape="rect" id="node3" href="../../d1/dea/a00829.html#add2f33954124ea07dc3d87eedb8ca74f" title="ripple::LedgerCleanerImp\l::getHash" alt="" coords="223,5,388,51"/><area shape="rect" id="node5" href="../../d1/dea/a00829.html#a6e614220e35452159e2f3debe682764e" title="ripple::LedgerCleanerImp\l::doLedgerCleaner" alt="" coords="439,5,604,51"/><area shape="rect" id="node7" href="../../d1/dea/a00829.html#a6eff0ca87db1f583b2a401bc4f119990" title="ripple::LedgerCleanerImp::run" alt="" coords="655,13,847,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a91efb616bc20073743996f88cb41f570"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::init </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00215">215</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../dd/d07/a02132_source.html#l00244">beast::Journal::debug</a>, and <a class="el" href="../../d6/deb/a02915_source.html#l00063">m_journal</a>.</p>

<p>Referenced by <a class="el" href="../../d6/deb/a02915_source.html#l00220">run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; <span class="stringliteral">&quot;Initializing&quot;</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a91efb616bc20073743996f88cb41f570_icgraph.png" border="0" usemap="#d1/dea/a00829_a91efb616bc20073743996f88cb41f570_icgraph" alt=""/></div>
<map name="d1/dea/a00829_a91efb616bc20073743996f88cb41f570_icgraph" id="d1/dea/a00829_a91efb616bc20073743996f88cb41f570_icgraph">
<area shape="rect" id="node3" href="../../d1/dea/a00829.html#a6eff0ca87db1f583b2a401bc4f119990" title="ripple::LedgerCleanerImp::run" alt="" coords="223,13,415,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af9d9dd8e6b585b7aee3b5b4611e0280b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::onPrepare </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override called during preparation. Since all other Stoppable objects in the tree have already been constructed, this provides an opportunity to perform initialization which depends on calling into other Stoppable objects. This call is made on the same thread that called prepare(). The default implementation does nothing. Guaranteed to only be called once. </p>

<p>Reimplemented from <a class="el" href="../../d2/d49/a01561.html#a89ef9cbd5742a977aa6d6e13f534ca55">beast::Stoppable</a>.</p>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00087">87</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62ddb82f5bfaa3cc3e192d872d554a4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::onStart </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override called during start. </p>

<p>Reimplemented from <a class="el" href="../../d2/d49/a01561.html#a91389d18e9eb5e26847533b57be650cd">beast::Stoppable</a>.</p>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00091">91</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../d7/db5/a02088_source.html#l00115">beast::Thread::startThread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="../../d6/d53/a01688.html#a2a338a7d7297324717aabdc9fad34ec8">startThread</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a62ddb82f5bfaa3cc3e192d872d554a4c_cgraph.png" border="0" usemap="#d1/dea/a00829_a62ddb82f5bfaa3cc3e192d872d554a4c_cgraph" alt=""/></div>
<map name="d1/dea/a00829_a62ddb82f5bfaa3cc3e192d872d554a4c_cgraph" id="d1/dea/a00829_a62ddb82f5bfaa3cc3e192d872d554a4c_cgraph">
<area shape="rect" id="node3" href="../../d6/d53/a01688.html#a2a338a7d7297324717aabdc9fad34ec8" title="beast::Thread::startThread" alt="" coords="221,75,397,104"/><area shape="rect" id="node5" href="../../d6/d53/a01688.html#a7988b11d77444cfc8ba590863e2f3a1a" title="beast::Thread::launchThread" alt="" coords="447,13,633,43"/><area shape="rect" id="node11" href="../../d6/d53/a01688.html#a1528b19070b35e686e76cefb753e91f0" title="beast::Thread::setThread\lPriority" alt="" coords="456,66,624,113"/><area shape="rect" id="node15" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="467,135,613,182"/><area shape="rect" id="node7" href="../../d5/d83/a03337.html#aa860b9c64bc9fb0a6e8e1d007bf339c9" title="beast::threadEntryProcBeast" alt="" coords="684,13,873,43"/><area shape="rect" id="node9" href="../../d5/d83/a03337.html#a1f872c4561966945f9da9f791cba3f11" title="beast::beast_threadEntry\lPoint" alt="" coords="923,5,1091,51"/><area shape="rect" id="node13" href="../../d5/d83/a03337.html#adfcad9f96859f16e6d3cffb4a08aa390" title="beast::blimit" alt="" coords="732,75,825,104"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad3f9fc3675bb127de4a2165d0a477e2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::onStop </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override called when the stop notification is issued.</p>
<p>The call is made on an unspecified, implementation-specific thread. onStop and onChildrenStopped will never be called concurrently, across all Stoppable objects descended from the same root, inclusive of the root.</p>
<p>It is safe to call isStopping, isStopped, and areChildrenStopped from within this function; The values returned will always be valid and never change during the callback.</p>
<p>The default implementation simply calls <a class="el" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e">stopped()</a>. This is applicable when the Stoppable has a trivial stop operation (or no stop operation), and we are merely using the Stoppable API to position it as a dependency of some parent service.</p>
<p>Thread safety: May not block for long periods. Guaranteed only to be called once. Must be safe to call from any thread at any time. </p>

<p>Reimplemented from <a class="el" href="../../d2/d49/a01561.html#aeb5a464db59bc5313a39bb868c9f18da">beast::Stoppable</a>.</p>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00096">96</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../dd/d07/a02132_source.html#l00245">beast::Journal::info</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00063">m_journal</a>, <a class="el" href="../../d7/db5/a02088_source.html#l00266">beast::Thread::notify()</a>, and <a class="el" href="../../d7/db5/a02088_source.html#l00155">beast::Thread::signalThreadShouldExit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#ad9e31acb5bfc1ff22e1a8a7b0561ec4e">info</a> &lt;&lt; <span class="stringliteral">&quot;Stopping&quot;</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="../../d6/d53/a01688.html#a7a8c61ba7975e767c62e9cc6a69868d6">signalThreadShouldExit</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="../../d6/d53/a01688.html#ab34cbf5c85d21da0cd3c324a7ea14461">notify</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_ad3f9fc3675bb127de4a2165d0a477e2b_cgraph.png" border="0" usemap="#d1/dea/a00829_ad3f9fc3675bb127de4a2165d0a477e2b_cgraph" alt=""/></div>
<map name="d1/dea/a00829_ad3f9fc3675bb127de4a2165d0a477e2b_cgraph" id="d1/dea/a00829_ad3f9fc3675bb127de4a2165d0a477e2b_cgraph">
<area shape="rect" id="node3" href="../../d6/d53/a01688.html#ab34cbf5c85d21da0cd3c324a7ea14461" title="beast::Thread::notify" alt="" coords="243,13,384,43"/><area shape="rect" id="node7" href="../../d6/d53/a01688.html#a7a8c61ba7975e767c62e9cc6a69868d6" title="beast::Thread::signalThread\lShouldExit" alt="" coords="221,66,405,113"/><area shape="rect" id="node5" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="453,5,600,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac3650732c951d5f5d35a8bf0b43d3507"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::onWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/a00943.html">beast::PropertyStream::Map</a> &amp;&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Subclass override. The default version does nothing. </p>

<p>Reimplemented from <a class="el" href="../../d9/db0/a01437.html#accd7269755b1a27d4c66715edc1f5915">beast::PropertyStream::Source</a>.</p>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00109">109</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../d6/deb/a02915_source.html#l00062">m_state</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        SharedState::Access <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> (<a class="code" href="../../d1/dea/a00829.html#a1be11d7f4e5c68a1fc681da0d6dbffec">m_state</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange == 0)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            map[<span class="stringliteral">&quot;status&quot;</span>] = <span class="stringliteral">&quot;idle&quot;</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            map[<span class="stringliteral">&quot;status&quot;</span>] = <span class="stringliteral">&quot;running&quot;</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            map[<span class="stringliteral">&quot;ledger_min&quot;</span>] = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;minRange;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            map[<span class="stringliteral">&quot;ledger_max&quot;</span>] = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;maxRange;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            map[<span class="stringliteral">&quot;check_nodes&quot;</span>] = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;checkNodes ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            map[<span class="stringliteral">&quot;fix_txns&quot;</span>] = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;fixTxns ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;failures &gt; 0)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                map[<span class="stringliteral">&quot;fail_counts&quot;</span>] = <a class="code" href="../../d8/d24/a02001.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>-&gt;failures;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6eff0ca87db1f583b2a401bc4f119990"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::LedgerCleanerImp::run </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Must be implemented to perform the thread's actual code.</p>
<p>Remember that the thread must regularly check the <a class="el" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07">threadShouldExit()</a> method whilst running, and if this returns true it should return from the <a class="el" href="../../d1/dea/a00829.html#a6eff0ca87db1f583b2a401bc4f119990">run()</a> method as soon as possible to avoid being forcibly killed.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07">threadShouldExit</a>, <a class="el" href="../../d6/d53/a01688.html#a2a338a7d7297324717aabdc9fad34ec8">startThread</a> </dd></dl>

<p>Implements <a class="el" href="../../d6/d53/a01688.html#a891267a76887c79d8eddd04b52581fe5">beast::Thread</a>.</p>

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00220">220</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>References <a class="el" href="../../dd/d07/a02132_source.html#l00244">beast::Journal::debug</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00360">doLedgerCleaner()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00215">init()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00063">m_journal</a>, <a class="el" href="../../d2/d31/a02087_source.html#l00067">beast::Stoppable::stopped()</a>, <a class="el" href="../../de/dd1/a02100_source.html#l00150">beast::Thread::threadShouldExit()</a>, and <a class="el" href="../../d7/db5/a02088_source.html#l00261">beast::Thread::wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="../../d1/dea/a00829.html#ab9e6fcae9da6487016b08eb1cf0300a5">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#aed264b891ebfe8df4c5b6b2231786491">debug</a> &lt;&lt; <span class="stringliteral">&quot;Started&quot;</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="../../d1/dea/a00829.html#a91efb616bc20073743996f88cb41f570">init</a> ();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">while</span> (! this-&gt;<a class="code" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07">threadShouldExit</a>())</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            this-&gt;<a class="code" href="../../d6/d53/a01688.html#a0203536ea9f728cdfe390df131927463">wait</a> ();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="keywordflow">if</span> (! this-&gt;<a class="code" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07">threadShouldExit</a>())</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <a class="code" href="../../d1/dea/a00829.html#a6e614220e35452159e2f3debe682764e">doLedgerCleaner</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e">stopped</a>();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dea/a00829_a6eff0ca87db1f583b2a401bc4f119990_cgraph.png" border="0" usemap="#d1/dea/a00829_a6eff0ca87db1f583b2a401bc4f119990_cgraph" alt=""/></div>
<map name="d1/dea/a00829_a6eff0ca87db1f583b2a401bc4f119990_cgraph" id="d1/dea/a00829_a6eff0ca87db1f583b2a401bc4f119990_cgraph">
<area shape="rect" id="node3" href="../../d1/dea/a00829.html#a6e614220e35452159e2f3debe682764e" title="ripple::LedgerCleanerImp\l::doLedgerCleaner" alt="" coords="253,1303,419,1350"/><area shape="rect" id="node78" href="../../d6/d53/a01688.html#ac3dac964e632b652dd1fabeaa20fbc07" title="beast::Thread::threadShouldExit" alt="" coords="473,1415,681,1444"/><area shape="rect" id="node80" href="../../d1/dea/a00829.html#a91efb616bc20073743996f88cb41f570" title="ripple::LedgerCleanerImp\l::init" alt="" coords="253,1445,419,1491"/><area shape="rect" id="node82" href="../../d2/d49/a01561.html#a32a3f86c14a870b4c8eefa77f9989a5e" title="beast::Stoppable::stopped" alt="" coords="249,1515,423,1544"/><area shape="rect" id="node87" href="../../d6/d53/a01688.html#a0203536ea9f728cdfe390df131927463" title="beast::Thread::wait" alt="" coords="269,1572,403,1601"/><area shape="rect" id="node5" href="../../d1/dea/a00829.html#ac210318bdb2ea4cf4cbe1be753a51968" title="ripple::LedgerCleanerImp\l::doLedger" alt="" coords="495,779,660,826"/><area shape="rect" id="node13" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="1229,835,1331,864"/><area shape="rect" id="node58" href="../../d1/dea/a00829.html#add2f33954124ea07dc3d87eedb8ca74f" title="ripple::LedgerCleanerImp\l::getHash" alt="" coords="495,1089,660,1135"/><area shape="rect" id="node72" href="../../d7/d9a/a00152.html#a25e873c7d069c6c2d44655736f2b6c21" title="ripple::base_uint::\lisZero" alt="" coords="995,1243,1120,1290"/><area shape="rect" id="node76" href="../../d6/d53/a01688.html#a55db77995760cf1a29a154ae57dc9d8d" title="beast::Thread::sleep" alt="" coords="507,1260,648,1289"/><area shape="rect" id="node7" href="../../d1/de6/a00837.html#a284cae94955402f898357ae5b8e5841c" title="ripple::LedgerMaster\l::findAcquireLedger" alt="" coords="752,865,891,911"/><area shape="rect" id="node9" href="../../d8/d86/a00703.html#a6f59efd378b35314541b4d5c76cd905a" title="ripple::InboundLedgers\l::findCreate" alt="" coords="981,869,1133,915"/><area shape="rect" id="node11" href="../../d1/de6/a00837.html#a6f3456fffc40b8578d7b4c7dc065973c" title="ripple::LedgerMaster\l::fixIndex" alt="" coords="752,694,891,741"/><area shape="rect" id="node17" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="988,770,1127,817"/><area shape="rect" id="node19" href="../../da/d74/a00099.html#a57929fa83c551514e364fe6981b0c104" title="ripple::Application\l::getLedgerMaster" alt="" coords="759,934,884,981"/><area shape="rect" id="node21" href="../../dd/d5f/a00825.html#aef9f56323068cb56357b5773a003a0ed" title="ripple::Ledger::loadByIndex" alt="" coords="732,475,911,504"/><area shape="rect" id="node15" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1407,826,1583,873"/><area shape="rect" id="node23" href="../../d2/d21/a01484.html#a1a5f1bf3e562c084e5df0379a944a2bd" title="ripple::SqliteStatement\l::bind" alt="" coords="980,431,1135,478"/><area shape="rect" id="node26" href="../../d6/db8/a00376.html#a9368476a90456c8f1256a53c239cc9a5" title="ripple::DatabaseCon\l::getDB" alt="" coords="987,501,1128,547"/><area shape="rect" id="node28" href="../../da/d74/a00099.html#a0a8cd54d61526a10f629ce55d196f344" title="ripple::Application\l::getLedgerDB" alt="" coords="995,309,1120,355"/><area shape="rect" id="node30" href="../../dd/d5f/a00825.html#a56523e45b148670f59a6fb1c53c91dc2" title="ripple::Ledger::getSQL1" alt="" coords="979,256,1136,285"/><area shape="rect" id="node52" href="../../dd/d5f/a00825.html#a9545eb2a2f70f4e8efdcb48ec4effaae" title="ripple::Ledger::getSQL2" alt="" coords="979,621,1136,651"/><area shape="rect" id="node55" href="../../d5/db5/a00374.html#a82432961e09d75f3b53c62c5d495beed" title="ripple::Database::getSqliteDB" alt="" coords="960,379,1155,408"/><area shape="rect" id="node32" href="../../d2/d21/a01484.html#aa21a18ccbd898583bd640ebd87dbe080" title="ripple::SqliteStatement\l::getError" alt="" coords="1203,282,1357,329"/><area shape="rect" id="node34" href="../../d2/d21/a01484.html#af1c43ede923d49feced5bb745c6c8324" title="ripple::SqliteStatement\l::getInt64" alt="" coords="1203,351,1357,398"/><area shape="rect" id="node36" href="../../d2/d21/a01484.html#a09bd6e09b032f4e7a77b164031b6e78b" title="ripple::SqliteStatement\l::getUInt32" alt="" coords="1203,421,1357,467"/><area shape="rect" id="node38" href="../../d2/d21/a01484.html#afbca7655aaa005526798081f7dc7669e" title="ripple::SqliteStatement\l::isDone" alt="" coords="1203,490,1357,537"/><area shape="rect" id="node40" href="../../d2/d21/a01484.html#a20b8119adafb0edb0175008e589aebfa" title="ripple::SqliteStatement\l::isRow" alt="" coords="1203,5,1357,51"/><area shape="rect" id="node42" href="../../d2/d21/a01484.html#a28ed6bbb0c1ef6c5238bfa3bd2b9170e" title="ripple::SqliteStatement\l::peekString" alt="" coords="1203,74,1357,121"/><area shape="rect" id="node44" href="../../d7/d9a/a00152.html#a9489844779665dbaf6181f037efcc7e0" title="ripple::base_uint::\lSetHexExact" alt="" coords="1217,143,1343,190"/><area shape="rect" id="node50" href="../../d2/d21/a01484.html#a80b6ff29deef6d948c5477dae82d0082" title="ripple::SqliteStatement\l::step" alt="" coords="1203,213,1357,259"/><area shape="rect" id="node46" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1421,152,1568,181"/><area shape="rect" id="node48" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1633,152,1783,181"/><area shape="rect" id="node62" href="../../d1/dea/a00829.html#a4f40a9f1b3e18b27e30873b35ad084e2" title="ripple::LedgerCleanerImp\l::getLedgerHash" alt="" coords="739,1003,904,1050"/><area shape="rect" id="node68" href="../../d1/de6/a00837.html#a2e32e5b06d5b855f57a7d4fb3d25c05e" title="ripple::LedgerMaster\l::getValidatedLedger" alt="" coords="751,1174,892,1221"/><area shape="rect" id="node70" href="../../d7/d9a/a00152.html#a3fa11a064a87fe4e970f00d661287dd2" title="ripple::base_uint::\lisNonZero" alt="" coords="759,1243,884,1290"/><area shape="rect" id="node84" href="../../d7/d02/a01808.html#a534ad45cb1fb86f6544356d78a0367e5" title="beast::WaitableEvent\l::signal" alt="" coords="504,1502,651,1549"/><area shape="rect" id="node89" href="../../d7/d02/a01808.html#a7022947723f14cd7b7778bce315cb852" title="beast::WaitableEvent\l::wait" alt="" coords="504,1571,651,1618"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab9e6fcae9da6487016b08eb1cf0300a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> ripple::LedgerCleanerImp::m_journal</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00063">63</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/deb/a02915_source.html#l00262">doLedger()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00360">doLedgerCleaner()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00315">getHash()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00238">getLedgerHash()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00215">init()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00096">onStop()</a>, and <a class="el" href="../../d6/deb/a02915_source.html#l00220">run()</a>.</p>

</div>
</div>
<a class="anchor" id="a1be11d7f4e5c68a1fc681da0d6dbffec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db0/a01437.html#ad5b5f14ad7af70d885063788c714fa77">SharedState</a> ripple::LedgerCleanerImp::m_state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/deb/a02915_source.html#l00062">62</a> of file <a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d6/deb/a02915_source.html#l00133">doClean()</a>, <a class="el" href="../../d6/deb/a02915_source.html#l00360">doLedgerCleaner()</a>, and <a class="el" href="../../d6/deb/a02915_source.html#l00109">onWrite()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>rippled/src/ripple_app/ledger/<a class="el" href="../../d6/deb/a02915_source.html">LedgerCleaner.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d9d/a03417.html">ripple</a></li><li class="navelem"><a class="el" href="../../d1/dea/a00829.html">LedgerCleanerImp</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:10 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
