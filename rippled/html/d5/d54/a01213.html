<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: rocksdb::log::Reader Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d54/a01213.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d6/d4f/a09038.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rocksdb::log::Reader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for rocksdb::log::Reader:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/ddb/a09039.png" border="0" usemap="#rocksdb_1_1log_1_1_reader_coll__map" alt="Collaboration graph"/></div>
<map name="rocksdb_1_1log_1_1_reader_coll__map" id="rocksdb_1_1log_1_1_reader_coll__map">
<area shape="rect" id="node4" href="../../d3/da4/a01343.html" title="rocksdb::SequentialFile" alt="" coords="7,13,164,43"/><area shape="rect" id="node6" href="../../de/daf/a01417.html" title="rocksdb::Slice" alt="" coords="267,75,371,104"/><area shape="rect" id="node8" href="../../d7/d04/a01246.html" title="rocksdb::log::Reader\l::Reporter" alt="" coords="248,127,389,174"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d04/a01246.html">Reporter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab5b5ee8bc8cfe141bfc7a1e348f29605"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#ab5b5ee8bc8cfe141bfc7a1e348f29605">Reader</a> (unique_ptr&lt; <a class="el" href="../../d3/da4/a01343.html">SequentialFile</a> &gt; &amp;&amp;<a class="el" href="../../d5/d54/a01213.html#ab165ffa0c2358772c29f6beb3fa5c0fb">file</a>, <a class="el" href="../../d7/d04/a01246.html">Reporter</a> *reporter, bool checksum, <a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> initial_offset)</td></tr>
<tr class="separator:ab5b5ee8bc8cfe141bfc7a1e348f29605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1199ab6f6198cec6183a878070cd421a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a1199ab6f6198cec6183a878070cd421a">~Reader</a> ()</td></tr>
<tr class="separator:a1199ab6f6198cec6183a878070cd421a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a9fb535a03f7843b921dd95262ddb9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a5a9fb535a03f7843b921dd95262ddb9c">ReadRecord</a> (<a class="el" href="../../de/daf/a01417.html">Slice</a> *record, std::string *scratch)</td></tr>
<tr class="separator:a5a9fb535a03f7843b921dd95262ddb9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51759086844f4544d185fa3ee5a00215"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a51759086844f4544d185fa3ee5a00215">LastRecordOffset</a> ()</td></tr>
<tr class="separator:a51759086844f4544d185fa3ee5a00215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080af1e50c8044196037e4ef170f4aae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a080af1e50c8044196037e4ef170f4aae">IsEOF</a> ()</td></tr>
<tr class="separator:a080af1e50c8044196037e4ef170f4aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f87388eb14e7c46cdac2cdf5f9e65f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a26f87388eb14e7c46cdac2cdf5f9e65f">UnmarkEOF</a> ()</td></tr>
<tr class="separator:a26f87388eb14e7c46cdac2cdf5f9e65f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab165ffa0c2358772c29f6beb3fa5c0fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/da4/a01343.html">SequentialFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#ab165ffa0c2358772c29f6beb3fa5c0fb">file</a> ()</td></tr>
<tr class="separator:ab165ffa0c2358772c29f6beb3fa5c0fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:aa3ba1ceefb6e08c1cbb0aa3f8ca13a7f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7fae7e9787b47b6c1537cb8d7d41b686e7f">kEof</a> = kMaxRecordType + 1, 
<a class="el" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c">kBadRecord</a> = kMaxRecordType + 2
 }</td></tr>
<tr class="separator:aa3ba1ceefb6e08c1cbb0aa3f8ca13a7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:acb5bb46275c505b8eab7bceac8affd36"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#acb5bb46275c505b8eab7bceac8affd36">SkipToInitialBlock</a> ()</td></tr>
<tr class="separator:acb5bb46275c505b8eab7bceac8affd36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57eb93a86418bd4a2b32ee163aecea5d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a57eb93a86418bd4a2b32ee163aecea5d">ReadPhysicalRecord</a> (<a class="el" href="../../de/daf/a01417.html">Slice</a> *result)</td></tr>
<tr class="separator:a57eb93a86418bd4a2b32ee163aecea5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7db406791cb13477c816733858ea1e51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a> (size_t bytes, const char *reason)</td></tr>
<tr class="separator:a7db406791cb13477c816733858ea1e51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49fd67047e3128cc471e7c31c5db6f9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c">ReportDrop</a> (size_t bytes, const <a class="el" href="../../d0/db9/a01552.html">Status</a> &amp;reason)</td></tr>
<tr class="separator:a49fd67047e3128cc471e7c31c5db6f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87371c717756bcbe4cd2f776cdfedbf0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a87371c717756bcbe4cd2f776cdfedbf0">Reader</a> (const <a class="el" href="../../d5/d54/a01213.html">Reader</a> &amp;)</td></tr>
<tr class="separator:a87371c717756bcbe4cd2f776cdfedbf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe524aa32b2d01499e18b41bde04359"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#adfe524aa32b2d01499e18b41bde04359">operator=</a> (const <a class="el" href="../../d5/d54/a01213.html">Reader</a> &amp;)</td></tr>
<tr class="separator:adfe524aa32b2d01499e18b41bde04359"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a64be34e5bef8f12baec8e3689f8dd2a5"><td class="memItemLeft" align="right" valign="top">const unique_ptr&lt; <a class="el" href="../../d3/da4/a01343.html">SequentialFile</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a64be34e5bef8f12baec8e3689f8dd2a5">file_</a></td></tr>
<tr class="separator:a64be34e5bef8f12baec8e3689f8dd2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac12f00795d1654b829dd8e74fee5739c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d04/a01246.html">Reporter</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#ac12f00795d1654b829dd8e74fee5739c">reporter_</a></td></tr>
<tr class="separator:ac12f00795d1654b829dd8e74fee5739c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54ed5bc4a69bb9c44f789212e29ac96b"><td class="memItemLeft" align="right" valign="top">bool const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a54ed5bc4a69bb9c44f789212e29ac96b">checksum_</a></td></tr>
<tr class="separator:a54ed5bc4a69bb9c44f789212e29ac96b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c35cf1331905cd29de0057cb60433a"><td class="memItemLeft" align="right" valign="top">char *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#ab7c35cf1331905cd29de0057cb60433a">backing_store_</a></td></tr>
<tr class="separator:ab7c35cf1331905cd29de0057cb60433a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a27b5d245726ebcfb1e8675583930c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/daf/a01417.html">Slice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a></td></tr>
<tr class="separator:a0a27b5d245726ebcfb1e8675583930c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8835968adb95da922c920a699c1c0be"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#ad8835968adb95da922c920a699c1c0be">eof_</a></td></tr>
<tr class="separator:ad8835968adb95da922c920a699c1c0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc206c6558fc025e7a75a3708da7f41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#a5fc206c6558fc025e7a75a3708da7f41">last_record_offset_</a></td></tr>
<tr class="separator:a5fc206c6558fc025e7a75a3708da7f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11ae6a11c0cf31188c719b0b4561034"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#af11ae6a11c0cf31188c719b0b4561034">end_of_buffer_offset_</a></td></tr>
<tr class="separator:af11ae6a11c0cf31188c719b0b4561034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c58f2b9ef4e5cc6fde8ff75bf70194"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d54/a01213.html#ae6c58f2b9ef4e5cc6fde8ff75bf70194">initial_offset_</a></td></tr>
<tr class="separator:ae6c58f2b9ef4e5cc6fde8ff75bf70194"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00025">25</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="aa3ba1ceefb6e08c1cbb0aa3f8ca13a7f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aa3ba1ceefb6e08c1cbb0aa3f8ca13a7fae7e9787b47b6c1537cb8d7d41b686e7f"></a>kEof</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c"></a>kBadRecord</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00095">95</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;       {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7fae7e9787b47b6c1537cb8d7d41b686e7f">kEof</a> = <a class="code" href="../../db/db5/a03468.html#ae8d976aa45c281e56e8938e282c6dd4b">kMaxRecordType</a> + 1,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Returned whenever we find an invalid physical record.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Currently there are three situations in which this happens:</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// * The record has an invalid CRC (ReadPhysicalRecord reports a drop)</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// * The record is a 0-length record (No drop is reported)</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// * The record is below constructor&#39;s initial_offset (No drop is reported)</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c">kBadRecord</a> = <a class="code" href="../../db/db5/a03468.html#ae8d976aa45c281e56e8938e282c6dd4b">kMaxRecordType</a> + 2</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab5b5ee8bc8cfe141bfc7a1e348f29605"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rocksdb::log::Reader::Reader </td>
          <td>(</td>
          <td class="paramtype">unique_ptr&lt; <a class="el" href="../../d3/da4/a01343.html">SequentialFile</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d04/a01246.html">Reporter</a> *&#160;</td>
          <td class="paramname"><em>reporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>checksum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>initial_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00023">23</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    : <a class="code" href="../../d5/d54/a01213.html#a64be34e5bef8f12baec8e3689f8dd2a5">file_</a>(std::move(<a class="code" href="../../d5/d54/a01213.html#ab165ffa0c2358772c29f6beb3fa5c0fb">file</a>)),</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#ac12f00795d1654b829dd8e74fee5739c">reporter_</a>(reporter),</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#a54ed5bc4a69bb9c44f789212e29ac96b">checksum_</a>(checksum),</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#ab7c35cf1331905cd29de0057cb60433a">backing_store_</a>(<span class="keyword">new</span> <span class="keywordtype">char</span>[<a class="code" href="../../db/db5/a03468.html#a00b1380129c937b835cf7c34f4ed6531">kBlockSize</a>]),</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>(),</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#ad8835968adb95da922c920a699c1c0be">eof_</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#a5fc206c6558fc025e7a75a3708da7f41">last_record_offset_</a>(0),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#af11ae6a11c0cf31188c719b0b4561034">end_of_buffer_offset_</a>(0),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#ae6c58f2b9ef4e5cc6fde8ff75bf70194">initial_offset_</a>(initial_offset) {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1199ab6f6198cec6183a878070cd421a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rocksdb::log::Reader::~Reader </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00036">36</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00082">backing_store_</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keyword">delete</span>[] <a class="code" href="../../d5/d54/a01213.html#ab7c35cf1331905cd29de0057cb60433a">backing_store_</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a87371c717756bcbe4cd2f776cdfedbf0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rocksdb::log::Reader::Reader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d5/d54/a01213.html">Reader</a> &amp;&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab165ffa0c2358772c29f6beb3fa5c0fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/da4/a01343.html">SequentialFile</a>* rocksdb::log::Reader::file </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00076">76</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00079">file_</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d15/a02583_source.html#l00188">rocksdb::log::LogTest::ForceError()</a>, and <a class="el" href="../../dc/d15/a02583_source.html#l00120">rocksdb::log::LogTest::reset_source_contents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#a64be34e5bef8f12baec8e3689f8dd2a5">file_</a>.get(); }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_ab165ffa0c2358772c29f6beb3fa5c0fb_icgraph.png" border="0" usemap="#d5/d54/a01213_ab165ffa0c2358772c29f6beb3fa5c0fb_icgraph" alt=""/></div>
<map name="d5/d54/a01213_ab165ffa0c2358772c29f6beb3fa5c0fb_icgraph" id="d5/d54/a01213_ab165ffa0c2358772c29f6beb3fa5c0fb_icgraph">
<area shape="rect" id="node3" href="../../d0/ddf/a00918.html#a4336028b15673600a6bb1e8566931677" title="rocksdb::log::LogTest\l::ForceError" alt="" coords="205,5,352,51"/><area shape="rect" id="node5" href="../../d0/ddf/a00918.html#a6a583f72c240c96d3ea87a0093f4fc73" title="rocksdb::log::LogTest\l::reset_source_contents" alt="" coords="197,74,360,121"/><area shape="rect" id="node7" href="../../d0/ddf/a00918.html#a3208a1c304cca8485d89dcb181349206" title="rocksdb::log::LogTest\l::Read" alt="" coords="409,74,556,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a080af1e50c8044196037e4ef170f4aae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rocksdb::log::Reader::IsEOF </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00066">66</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00084">eof_</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;               {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#ad8835968adb95da922c920a699c1c0be">eof_</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51759086844f4544d185fa3ee5a00215"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> rocksdb::log::Reader::LastRecordOffset </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00169">169</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00087">last_record_offset_</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d0b/a02741_source.html#l01286">rocksdb::WALDumperCommand::DoCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                  {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#a5fc206c6558fc025e7a75a3708da7f41">last_record_offset_</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a51759086844f4544d185fa3ee5a00215_icgraph.png" border="0" usemap="#d5/d54/a01213_a51759086844f4544d185fa3ee5a00215_icgraph" alt=""/></div>
<map name="d5/d54/a01213_a51759086844f4544d185fa3ee5a00215_icgraph" id="d5/d54/a01213_a51759086844f4544d185fa3ee5a00215_icgraph">
<area shape="rect" id="node3" href="../../dc/d5b/a01812.html#ab49250c660bcd1a8c6230c5cb31e7ead" title="rocksdb::WALDumperCommand\l::DoCommand" alt="" coords="197,5,408,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adfe524aa32b2d01499e18b41bde04359"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::log::Reader::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d5/d54/a01213.html">Reader</a> &amp;&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a57eb93a86418bd4a2b32ee163aecea5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int rocksdb::log::Reader::ReadPhysicalRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/daf/a01417.html">Slice</a> *&#160;</td>
          <td class="paramname"><em>result</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00184">184</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00082">backing_store_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00083">buffer_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00081">checksum_</a>, <a class="el" href="../../dd/d75/a02639_source.html#l00062">rocksdb::Slice::clear()</a>, <a class="el" href="../../dd/d75/a02639_source.html#l00046">rocksdb::Slice::data()</a>, <a class="el" href="../../d4/dff/a02723_source.html#l00067">rocksdb::DecodeFixed32()</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00089">end_of_buffer_offset_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00084">eof_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00079">file_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00092">initial_offset_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00102">kBadRecord</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00030">rocksdb::log::kBlockSize</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00096">kEof</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00033">rocksdb::log::kHeaderSize</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00019">rocksdb::log::kZeroType</a>, <a class="el" href="../../d5/d96/a02642_source.html#l00062">rocksdb::Status::ok()</a>, <a class="el" href="../../dd/d75/a02639_source.html#l00065">rocksdb::Slice::remove_prefix()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00173">ReportCorruption()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00177">ReportDrop()</a>, <a class="el" href="../../dd/d75/a02639_source.html#l00049">rocksdb::Slice::size()</a>, <a class="el" href="../../de/d3e/a02727_source.html#l00040">rocksdb::crc32c::Unmask()</a>, and <a class="el" href="../../de/d3e/a02727_source.html#l00023">rocksdb::crc32c::Value()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00064">ReadRecord()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                                     {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>() &lt; (size_t)<a class="code" href="../../db/db5/a03468.html#a65e367282121a27e00230acb234dd19a">kHeaderSize</a>) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d54/a01213.html#ad8835968adb95da922c920a699c1c0be">eof_</a>) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">// Last read was a full read, so this is a trailer to skip</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04">clear</a>();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="../../d9/d2c/a03421.html#af127c2e4fc73b5d35647147ef45b350c">Status</a> status = <a class="code" href="../../d5/d54/a01213.html#a64be34e5bef8f12baec8e3689f8dd2a5">file_</a>-&gt;Read(<a class="code" href="../../db/db5/a03468.html#a00b1380129c937b835cf7c34f4ed6531">kBlockSize</a>, &amp;<a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>, <a class="code" href="../../d5/d54/a01213.html#ab7c35cf1331905cd29de0057cb60433a">backing_store_</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#af11ae6a11c0cf31188c719b0b4561034">end_of_buffer_offset_</a> += <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">if</span> (!status.ok()) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04">clear</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c">ReportDrop</a>(<a class="code" href="../../db/db5/a03468.html#a00b1380129c937b835cf7c34f4ed6531">kBlockSize</a>, status);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#ad8835968adb95da922c920a699c1c0be">eof_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7fae7e9787b47b6c1537cb8d7d41b686e7f">kEof</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>() &lt; (size_t)<a class="code" href="../../db/db5/a03468.html#a00b1380129c937b835cf7c34f4ed6531">kBlockSize</a>) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#ad8835968adb95da922c920a699c1c0be">eof_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>() == 0) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="comment">// End of file</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7fae7e9787b47b6c1537cb8d7d41b686e7f">kEof</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordtype">size_t</span> drop_size = <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04">clear</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(drop_size, <span class="stringliteral">&quot;truncated record at end of file&quot;</span>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7fae7e9787b47b6c1537cb8d7d41b686e7f">kEof</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Parse the header</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* header = <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#abed770f35075076510897c3fbbc10923">data</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> a = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a><span class="keyword">&gt;</span>(header[4]) &amp; 0xff;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> b = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a><span class="keyword">&gt;</span>(header[5]) &amp; 0xff;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type = header[6];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> length = a | (b &lt;&lt; 8);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/db5/a03468.html#a65e367282121a27e00230acb234dd19a">kHeaderSize</a> + length &gt; <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>()) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordtype">size_t</span> drop_size = <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04">clear</a>();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(drop_size, <span class="stringliteral">&quot;bad record length&quot;</span>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c">kBadRecord</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (type == <a class="code" href="../../db/db5/a03468.html#a74f7335ef3445af14b9a167b2ba0864ead5939a88a508039004b82ef6bb895549">kZeroType</a> &amp;&amp; length == 0) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="comment">// Skip zero length record without reporting any drops since</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">// such records are produced by the mmap based writing code in</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="comment">// env_posix.cc that preallocates file regions.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04">clear</a>();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c">kBadRecord</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// Check crc</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d54/a01213.html#a54ed5bc4a69bb9c44f789212e29ac96b">checksum_</a>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> expected_crc = <a class="code" href="../../d7/db0/a03467.html#a8c50508656b8faef53619a2d4097eaf0">crc32c::Unmask</a>(<a class="code" href="../../d4/d87/a03436.html#a5eb46c01bbc65cc301b2648e655dbe15">DecodeFixed32</a>(header));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> actual_crc = <a class="code" href="../../d7/db0/a03467.html#a90a67ab6517f594a989c6cb4f3ff67f9">crc32c::Value</a>(header + 6, 1 + length);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span> (actual_crc != expected_crc) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">// Drop the rest of the buffer since &quot;length&quot; itself may have</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">// been corrupted and if we trust it, we could find some</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">// fragment of a real log record that just happens to look</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// like a valid log record.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordtype">size_t</span> drop_size = <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04">clear</a>();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(drop_size, <span class="stringliteral">&quot;checksum mismatch&quot;</span>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c">kBadRecord</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#ac03632091b9078ec551ffd58d3372f6b">remove_prefix</a>(<a class="code" href="../../db/db5/a03468.html#a65e367282121a27e00230acb234dd19a">kHeaderSize</a> + length);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// Skip physical record that started before initial_offset_</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d54/a01213.html#af11ae6a11c0cf31188c719b0b4561034">end_of_buffer_offset_</a> - <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>() - <a class="code" href="../../db/db5/a03468.html#a65e367282121a27e00230acb234dd19a">kHeaderSize</a> - length &lt;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#ae6c58f2b9ef4e5cc6fde8ff75bf70194">initial_offset_</a>) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      result-&gt;clear();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c">kBadRecord</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    *result = Slice(header + <a class="code" href="../../db/db5/a03468.html#a65e367282121a27e00230acb234dd19a">kHeaderSize</a>, length);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> type;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_cgraph.png" border="0" usemap="#d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_cgraph" alt=""/></div>
<map name="d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_cgraph" id="d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_cgraph">
<area shape="rect" id="node3" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04" title="rocksdb::Slice::clear" alt="" coords="224,5,365,35"/><area shape="rect" id="node5" href="../../de/daf/a01417.html#abed770f35075076510897c3fbbc10923" title="rocksdb::Slice::data" alt="" coords="225,59,364,88"/><area shape="rect" id="node7" href="../../d4/d87/a03436.html#a5eb46c01bbc65cc301b2648e655dbe15" title="rocksdb::DecodeFixed32" alt="" coords="1735,269,1900,299"/><area shape="rect" id="node9" href="../../d0/db9/a01552.html#a63cba37f62403ccc2f3e8b0b8ee04425" title="rocksdb::Status::ok" alt="" coords="227,163,363,192"/><area shape="rect" id="node11" href="../../de/daf/a01417.html#ac03632091b9078ec551ffd58d3372f6b" title="rocksdb::Slice::remove\l_prefix" alt="" coords="444,197,599,243"/><area shape="rect" id="node13" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="677,264,813,293"/><area shape="rect" id="node15" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51" title="rocksdb::log::Reader\l::ReportCorruption" alt="" coords="224,367,365,414"/><area shape="rect" id="node17" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c" title="rocksdb::log::Reader\l::ReportDrop" alt="" coords="451,317,592,363"/><area shape="rect" id="node28" href="../../d7/db0/a03467.html#a8c50508656b8faef53619a2d4097eaf0" title="rocksdb::crc32c::Unmask" alt="" coords="209,437,380,467"/><area shape="rect" id="node30" href="../../d7/db0/a03467.html#a90a67ab6517f594a989c6cb4f3ff67f9" title="rocksdb::crc32c::Value" alt="" coords="217,491,372,520"/><area shape="rect" id="node22" href="../../d0/db9/a01552.html#a585d7fbcadd8858734f534519290035d" title="rocksdb::Status::Corruption" alt="" coords="431,387,612,416"/><area shape="rect" id="node20" href="../../d7/d04/a01246.html#a3489a71709b9f8a459daf7761fc8658e" title="rocksdb::log::Reader\l::Reporter::Corruption" alt="" coords="672,317,819,363"/><area shape="rect" id="node24" href="../../d0/db9/a01552.html#afcc875b53756534a635212b3d8f43864" title="rocksdb::Status::Status" alt="" coords="665,387,825,416"/><area shape="rect" id="node32" href="../../d7/db0/a03467.html#aba0a720f8204028aa9b0f78f969d5f97" title="rocksdb::crc32c::Extend" alt="" coords="440,479,603,508"/><area shape="rect" id="node34" href="../../d7/db0/a03467.html#a174fe9c8cf3cb558b7accfdc10c6c04c" title="rocksdb::crc32c::CRC32" alt="" coords="663,465,828,495"/><area shape="rect" id="node36" href="../../d7/db0/a03467.html#aeb8537c518a4a8ac7e1d8f8ac1c6bb63" title="rocksdb::crc32c::Choose\l_CRC32" alt="" coords="877,386,1045,433"/><area shape="rect" id="node38" href="../../d7/db0/a03467.html#ab6bf1f9041f7859fe1aae6312f650115" title="rocksdb::crc32c::Fast\l_CRC32" alt="" coords="1107,299,1256,346"/><area shape="rect" id="node45" href="../../d7/db0/a03467.html#aabbb4470a0a8566fff676e40a5c3a491" title="rocksdb::crc32c::Slow\l_CRC32" alt="" coords="1317,330,1469,377"/><area shape="rect" id="node50" href="../../d7/db0/a03467.html#a6abc7c8ed18979f0e12fcfb6460f9285" title="rocksdb::crc32c::isSSE42" alt="" coords="1095,420,1268,449"/><area shape="rect" id="node40" href="../../d7/db0/a03467.html#aa5eeccea7be6cc99acab7223cc1c7baf" title="rocksdb::crc32c::LE\l_LOAD64" alt="" coords="1324,261,1463,307"/><area shape="rect" id="node42" href="../../d4/d87/a03436.html#a0bb1082c7c473bb0c6614963a14fed62" title="rocksdb::DecodeFixed64" alt="" coords="1519,269,1684,299"/><area shape="rect" id="node47" href="../../d7/db0/a03467.html#a72b216c9d4dfeeaea89e2410eec06ff9" title="rocksdb::crc32c::LE\l_LOAD32" alt="" coords="1532,326,1671,373"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_icgraph.png" border="0" usemap="#d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_icgraph" alt=""/></div>
<map name="d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_icgraph" id="d5/d54/a01213_a57eb93a86418bd4a2b32ee163aecea5d_icgraph">
<area shape="rect" id="node3" href="../../d5/d54/a01213.html#a5a9fb535a03f7843b921dd95262ddb9c" title="rocksdb::log::Reader\l::ReadRecord" alt="" coords="209,1383,351,1430"/><area shape="rect" id="node5" href="../../dd/df5/a00386.html#adb8cf2e0f98f8368db32bea16bcf3cb7" title="rocksdb::DBImpl::Recover\lLogFile" alt="" coords="417,1055,593,1102"/><area shape="rect" id="node69" href="../../dd/df5/a00386.html#a8a0816871126bc130e6e4f3ad8f81da8" title="rocksdb::DBImpl::ReadFirstLine" alt="" coords="401,1392,609,1421"/><area shape="rect" id="node79" href="../../d0/ddf/a00918.html#a3208a1c304cca8485d89dcb181349206" title="rocksdb::log::LogTest\l::Read" alt="" coords="432,1445,579,1491"/><area shape="rect" id="node81" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="964,1262,1103,1309"/><area shape="rect" id="node88" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="436,1514,575,1561"/><area shape="rect" id="node92" href="../../d1/d42/a01800.html#af55acbe3f8a2077614c6d8374eb24c04" title="rocksdb::VersionSet\l::ManifestContains" alt="" coords="700,1346,839,1393"/><area shape="rect" id="node104" href="../../dc/d5b/a01812.html#ab49250c660bcd1a8c6230c5cb31e7ead" title="rocksdb::WALDumperCommand\l::DoCommand" alt="" coords="400,1583,611,1630"/><area shape="rect" id="node7" href="../../dd/df5/a00386.html#afe079cf353957e6c79ed794cbc0bb9fc" title="rocksdb::DBImpl::Recover" alt="" coords="681,788,857,817"/><area shape="rect" id="node9" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="967,651,1100,680"/><area shape="rect" id="node11" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="1217,1211,1396,1240"/><area shape="rect" id="node15" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="1235,197,1379,243"/><area shape="rect" id="node17" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="1281,267,1332,296"/><area shape="rect" id="node19" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="1225,442,1388,489"/><area shape="rect" id="node25" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="1236,127,1377,174"/><area shape="rect" id="node29" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="1237,319,1376,366"/><area shape="rect" id="node35" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="1217,511,1396,558"/><area shape="rect" id="node37" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="1245,389,1368,419"/><area shape="rect" id="node43" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="1239,581,1375,627"/><area shape="rect" id="node45" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="1225,1141,1388,1187"/><area shape="rect" id="node49" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="1224,651,1389,680"/><area shape="rect" id="node51" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="1207,704,1407,733"/><area shape="rect" id="node53" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="1211,757,1403,803"/><area shape="rect" id="node55" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="1237,826,1376,873"/><area shape="rect" id="node57" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="1227,895,1387,942"/><area shape="rect" id="node59" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="1199,965,1415,995"/><area shape="rect" id="node61" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="1252,1019,1361,1048"/><area shape="rect" id="node63" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="1225,1071,1388,1118"/><area shape="rect" id="node65" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="1211,5,1403,35"/><area shape="rect" id="node67" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="1211,58,1403,105"/><area shape="rect" id="node13" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1569,1211,1620,1240"/><area shape="rect" id="node21" href="../../da/dee/a00383.html#a8cdb390521098e2a5f737561e9eb1134" title="rocksdb::DBConstructor\l::DBConstructor" alt="" coords="1513,542,1676,589"/><area shape="rect" id="node23" href="../../da/dee/a00383.html#ae9772754567f1b3c0ca7d5285a56ac6d" title="rocksdb::DBConstructor\l::FinishImpl" alt="" coords="1513,473,1676,519"/><area shape="rect" id="node27" href="../../d8/d64/a00181.html#a03997e3f4e60726e27f582cf684aa33a" title="rocksdb::Benchmark::Run" alt="" coords="1508,136,1681,165"/><area shape="rect" id="node31" href="../../d3/daa/a01577.html#aeac9f55bde5a11da0fcc2c88465de0c6" title="rocksdb::StressTest\l::Reopen" alt="" coords="1525,227,1664,274"/><area shape="rect" id="node33" href="../../d3/daa/a01577.html#af7e726bf27e216787e7c331834ec6075" title="rocksdb::StressTest::Run" alt="" coords="1509,297,1680,327"/><area shape="rect" id="node39" href="../../d4/d87/a03436.html#af1858c0090bf0030df9887905454e091" title="rocksdb::ProfileKeyComparison" alt="" coords="1492,420,1697,449"/><area shape="rect" id="node41" href="../../da/df3/a01581.html#af0dad875d53811db3382d7ab0ad93b01" title="rocksdb::StringAppendOperator\lTest::SetOpenDbFunction" alt="" coords="1493,350,1696,397"/><area shape="rect" id="node47" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="1476,1289,1713,1335"/><area shape="rect" id="node71" href="../../dd/df5/a00386.html#a58d2431c9ec2de7473a8bc2f171c04b8" title="rocksdb::DBImpl::ReadFirst\lRecord" alt="" coords="677,1434,861,1481"/><area shape="rect" id="node73" href="../../dd/df5/a00386.html#a663aa80742985c3054c1962a94be6267" title="rocksdb::DBImpl::AppendSorted\lWalsOfType" alt="" coords="928,1522,1139,1569"/><area shape="rect" id="node75" href="../../dd/df5/a00386.html#aa24437e34cff2bc2607adf5a382efe80" title="rocksdb::DBImpl::GetSorted\lWalFiles" alt="" coords="1213,1522,1400,1569"/><area shape="rect" id="node77" href="../../dd/df5/a00386.html#a7c148333899c4965e7f0c90bce0abd46" title="rocksdb::DBImpl::PurgeObsolete\lWALFiles" alt="" coords="1200,1591,1413,1638"/><area shape="rect" id="node85" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="1188,1314,1425,1361"/><area shape="rect" id="node90" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="659,1514,880,1561"/><area shape="rect" id="node94" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="964,1354,1103,1401"/><area shape="rect" id="node97" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="1208,1453,1405,1499"/><area shape="rect" id="node101" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="1220,1383,1393,1430"/><area shape="rect" id="node99" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="1500,1453,1689,1499"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5a9fb535a03f7843b921dd95262ddb9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rocksdb::log::Reader::ReadRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/daf/a01417.html">Slice</a> *&#160;</td>
          <td class="paramname"><em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>scratch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00064">64</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00083">buffer_</a>, <a class="el" href="../../dd/d75/a02639_source.html#l00062">rocksdb::Slice::clear()</a>, <a class="el" href="../../dd/d75/a02639_source.html#l00046">rocksdb::Slice::data()</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00089">end_of_buffer_offset_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00092">initial_offset_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00102">kBadRecord</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00096">kEof</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00024">rocksdb::log::kFirstType</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00021">rocksdb::log::kFullType</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00026">rocksdb::log::kLastType</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00025">rocksdb::log::kMiddleType</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00087">last_record_offset_</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00173">ReportCorruption()</a>, <a class="el" href="../../dd/d75/a02639_source.html#l00049">rocksdb::Slice::size()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00040">SkipToInitialBlock()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d0b/a02741_source.html#l01286">rocksdb::WALDumperCommand::DoCommand()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01539">rocksdb::VersionSet::DumpManifest()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01907">rocksdb::VersionSet::ManifestContains()</a>, <a class="el" href="../../dc/d15/a02583_source.html#l00155">rocksdb::log::LogTest::Read()</a>, <a class="el" href="../../db/d44/a02564_source.html#l01387">rocksdb::DBImpl::ReadFirstLine()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01400">rocksdb::VersionSet::Recover()</a>, and <a class="el" href="../../db/d44/a02564_source.html#l00874">rocksdb::DBImpl::RecoverLogFile()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                                         {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d54/a01213.html#a5fc206c6558fc025e7a75a3708da7f41">last_record_offset_</a> &lt; <a class="code" href="../../d5/d54/a01213.html#ae6c58f2b9ef4e5cc6fde8ff75bf70194">initial_offset_</a>) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d54/a01213.html#acb5bb46275c505b8eab7bceac8affd36">SkipToInitialBlock</a>()) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  scratch-&gt;clear();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  record-&gt;clear();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordtype">bool</span> in_fragmented_record = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// Record offset of the logical record that we&#39;re reading</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// 0 is a dummy value to make compilers happy</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> prospective_record_offset = 0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  Slice fragment;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> physical_record_offset = <a class="code" href="../../d5/d54/a01213.html#af11ae6a11c0cf31188c719b0b4561034">end_of_buffer_offset_</a> - <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> record_type = <a class="code" href="../../d5/d54/a01213.html#a57eb93a86418bd4a2b32ee163aecea5d">ReadPhysicalRecord</a>(&amp;fragment);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">switch</span> (record_type) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../db/db5/a03468.html#a74f7335ef3445af14b9a167b2ba0864ea4a067f062290a0fd7e25735dd89bd48d">kFullType</a>:</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">if</span> (in_fragmented_record) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;          <span class="comment">// Handle bug in earlier versions of log::Writer where</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;          <span class="comment">// it could emit an empty kFirstType record at the tail end</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;          <span class="comment">// of a block followed by a kFullType or kFirstType record</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;          <span class="comment">// at the beginning of the next block.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;          <span class="keywordflow">if</span> (scratch-&gt;empty()) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            in_fragmented_record = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(scratch-&gt;size(), <span class="stringliteral">&quot;partial record without end(1)&quot;</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        prospective_record_offset = physical_record_offset;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        scratch-&gt;clear();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        *record = fragment;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#a5fc206c6558fc025e7a75a3708da7f41">last_record_offset_</a> = prospective_record_offset;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../db/db5/a03468.html#a74f7335ef3445af14b9a167b2ba0864eaa148b9f10d68a7147f5e5493f1011d21">kFirstType</a>:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (in_fragmented_record) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;          <span class="comment">// Handle bug in earlier versions of log::Writer where</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          <span class="comment">// it could emit an empty kFirstType record at the tail end</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;          <span class="comment">// of a block followed by a kFullType or kFirstType record</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          <span class="comment">// at the beginning of the next block.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;          <span class="keywordflow">if</span> (scratch-&gt;empty()) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            in_fragmented_record = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(scratch-&gt;size(), <span class="stringliteral">&quot;partial record without end(2)&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;          }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        prospective_record_offset = physical_record_offset;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        scratch-&gt;assign(fragment.data(), fragment.size());</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        in_fragmented_record = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../db/db5/a03468.html#a74f7335ef3445af14b9a167b2ba0864ea8e212001f35e68b4e85318949b76f9d7">kMiddleType</a>:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span> (!in_fragmented_record) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(fragment.size(),</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                           <span class="stringliteral">&quot;missing start of fragmented record(1)&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;          scratch-&gt;append(fragment.data(), fragment.size());</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../db/db5/a03468.html#a74f7335ef3445af14b9a167b2ba0864eaabd98fd2948fd5ade3a3a2a533a9b024">kLastType</a>:</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span> (!in_fragmented_record) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(fragment.size(),</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                           <span class="stringliteral">&quot;missing start of fragmented record(2)&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          scratch-&gt;append(fragment.data(), fragment.size());</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;          *record = Slice(*scratch);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#a5fc206c6558fc025e7a75a3708da7f41">last_record_offset_</a> = prospective_record_offset;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7fae7e9787b47b6c1537cb8d7d41b686e7f">kEof</a>:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">if</span> (in_fragmented_record) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(scratch-&gt;size(), <span class="stringliteral">&quot;partial record without end(3)&quot;</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          scratch-&gt;clear();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/d54/a01213.html#aa3ba1ceefb6e08c1cbb0aa3f8ca13a7faa4e6a8d4ecbbcc2d69790d5525cc167c">kBadRecord</a>:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span> (in_fragmented_record) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;          <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(scratch-&gt;size(), <span class="stringliteral">&quot;error in middle of record&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;          in_fragmented_record = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;          scratch-&gt;clear();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">default</span>: {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordtype">char</span> buf[40];</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;unknown record type %u&quot;</span>, record_type);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51">ReportCorruption</a>(</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            (fragment.size() + (in_fragmented_record ? scratch-&gt;size() : 0)),</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            buf);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        in_fragmented_record = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        scratch-&gt;clear();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_cgraph.png" border="0" usemap="#d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_cgraph" alt=""/></div>
<map name="d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_cgraph" id="d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_cgraph">
<area shape="rect" id="node3" href="../../de/daf/a01417.html#a8f740f146e792dc89409f8402a61ad04" title="rocksdb::Slice::clear" alt="" coords="416,5,557,35"/><area shape="rect" id="node5" href="../../de/daf/a01417.html#abed770f35075076510897c3fbbc10923" title="rocksdb::Slice::data" alt="" coords="417,59,556,88"/><area shape="rect" id="node7" href="../../d5/d54/a01213.html#a57eb93a86418bd4a2b32ee163aecea5d" title="rocksdb::log::Reader\l::ReadPhysicalRecord" alt="" coords="199,257,351,303"/><area shape="rect" id="node17" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="869,343,1005,372"/><area shape="rect" id="node19" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51" title="rocksdb::log::Reader\l::ReportCorruption" alt="" coords="416,525,557,571"/><area shape="rect" id="node59" href="../../d5/d54/a01213.html#acb5bb46275c505b8eab7bceac8affd36" title="rocksdb::log::Reader\l::SkipToInitialBlock" alt="" coords="204,413,345,459"/><area shape="rect" id="node11" href="../../d4/d87/a03436.html#a5eb46c01bbc65cc301b2648e655dbe15" title="rocksdb::DecodeFixed32" alt="" coords="1927,179,2092,208"/><area shape="rect" id="node13" href="../../d0/db9/a01552.html#a63cba37f62403ccc2f3e8b0b8ee04425" title="rocksdb::Status::ok" alt="" coords="419,421,555,451"/><area shape="rect" id="node15" href="../../de/daf/a01417.html#ac03632091b9078ec551ffd58d3372f6b" title="rocksdb::Slice::remove\l_prefix" alt="" coords="636,298,791,345"/><area shape="rect" id="node21" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c" title="rocksdb::log::Reader\l::ReportDrop" alt="" coords="643,431,784,478"/><area shape="rect" id="node32" href="../../d7/db0/a03467.html#a8c50508656b8faef53619a2d4097eaf0" title="rocksdb::crc32c::Unmask" alt="" coords="401,368,572,397"/><area shape="rect" id="node34" href="../../d7/db0/a03467.html#a90a67ab6517f594a989c6cb4f3ff67f9" title="rocksdb::crc32c::Value" alt="" coords="409,163,564,192"/><area shape="rect" id="node26" href="../../d0/db9/a01552.html#a585d7fbcadd8858734f534519290035d" title="rocksdb::Status::Corruption" alt="" coords="623,533,804,563"/><area shape="rect" id="node24" href="../../d7/d04/a01246.html#a3489a71709b9f8a459daf7761fc8658e" title="rocksdb::log::Reader\l::Reporter::Corruption" alt="" coords="864,431,1011,478"/><area shape="rect" id="node28" href="../../d0/db9/a01552.html#afcc875b53756534a635212b3d8f43864" title="rocksdb::Status::Status" alt="" coords="857,533,1017,563"/><area shape="rect" id="node36" href="../../d7/db0/a03467.html#aba0a720f8204028aa9b0f78f969d5f97" title="rocksdb::crc32c::Extend" alt="" coords="632,163,795,192"/><area shape="rect" id="node38" href="../../d7/db0/a03467.html#a174fe9c8cf3cb558b7accfdc10c6c04c" title="rocksdb::crc32c::CRC32" alt="" coords="855,188,1020,217"/><area shape="rect" id="node40" href="../../d7/db0/a03467.html#aeb8537c518a4a8ac7e1d8f8ac1c6bb63" title="rocksdb::crc32c::Choose\l_CRC32" alt="" coords="1069,193,1237,239"/><area shape="rect" id="node42" href="../../d7/db0/a03467.html#ab6bf1f9041f7859fe1aae6312f650115" title="rocksdb::crc32c::Fast\l_CRC32" alt="" coords="1299,266,1448,313"/><area shape="rect" id="node49" href="../../d7/db0/a03467.html#aabbb4470a0a8566fff676e40a5c3a491" title="rocksdb::crc32c::Slow\l_CRC32" alt="" coords="1509,170,1661,217"/><area shape="rect" id="node54" href="../../d7/db0/a03467.html#a6abc7c8ed18979f0e12fcfb6460f9285" title="rocksdb::crc32c::isSSE42" alt="" coords="1287,213,1460,243"/><area shape="rect" id="node44" href="../../d7/db0/a03467.html#aa5eeccea7be6cc99acab7223cc1c7baf" title="rocksdb::crc32c::LE\l_LOAD64" alt="" coords="1516,257,1655,303"/><area shape="rect" id="node46" href="../../d4/d87/a03436.html#a0bb1082c7c473bb0c6614963a14fed62" title="rocksdb::DecodeFixed64" alt="" coords="1711,252,1876,281"/><area shape="rect" id="node51" href="../../d7/db0/a03467.html#a72b216c9d4dfeeaea89e2410eec06ff9" title="rocksdb::crc32c::LE\l_LOAD32" alt="" coords="1724,170,1863,217"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_icgraph.png" border="0" usemap="#d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_icgraph" alt=""/></div>
<map name="d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_icgraph" id="d5/d54/a01213_a5a9fb535a03f7843b921dd95262ddb9c_icgraph">
<area shape="rect" id="node3" href="../../dc/d5b/a01812.html#ab49250c660bcd1a8c6230c5cb31e7ead" title="rocksdb::WALDumperCommand\l::DoCommand" alt="" coords="197,230,408,277"/><area shape="rect" id="node5" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="233,299,372,346"/><area shape="rect" id="node9" href="../../d1/d42/a01800.html#af55acbe3f8a2077614c6d8374eb24c04" title="rocksdb::VersionSet\l::ManifestContains" alt="" coords="497,350,636,397"/><area shape="rect" id="node32" href="../../d0/ddf/a00918.html#a3208a1c304cca8485d89dcb181349206" title="rocksdb::log::LogTest\l::Read" alt="" coords="229,539,376,586"/><area shape="rect" id="node34" href="../../dd/df5/a00386.html#a8a0816871126bc130e6e4f3ad8f81da8" title="rocksdb::DBImpl::ReadFirstLine" alt="" coords="199,1092,407,1121"/><area shape="rect" id="node52" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="761,271,900,318"/><area shape="rect" id="node59" href="../../dd/df5/a00386.html#adb8cf2e0f98f8368db32bea16bcf3cb7" title="rocksdb::DBImpl::Recover\lLogFile" alt="" coords="215,470,391,517"/><area shape="rect" id="node7" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="456,281,677,327"/><area shape="rect" id="node11" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="761,146,900,193"/><area shape="rect" id="node13" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="1015,308,1193,337"/><area shape="rect" id="node17" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="1005,49,1203,95"/><area shape="rect" id="node28" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="1017,118,1191,165"/><area shape="rect" id="node15" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1367,308,1417,337"/><area shape="rect" id="node19" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="1297,49,1487,95"/><area shape="rect" id="node21" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="1856,23,2053,70"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1585,109,1783,155"/><area shape="rect" id="node25" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="1561,5,1807,35"/><area shape="rect" id="node30" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="1273,209,1511,255"/><area shape="rect" id="node36" href="../../dd/df5/a00386.html#a58d2431c9ec2de7473a8bc2f171c04b8" title="rocksdb::DBImpl::ReadFirst\lRecord" alt="" coords="475,1325,659,1371"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#a663aa80742985c3054c1962a94be6267" title="rocksdb::DBImpl::AppendSorted\lWalsOfType" alt="" coords="725,1566,936,1613"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#aa24437e34cff2bc2607adf5a382efe80" title="rocksdb::DBImpl::GetSorted\lWalFiles" alt="" coords="1011,1566,1197,1613"/><area shape="rect" id="node46" href="../../dd/df5/a00386.html#a7c148333899c4965e7f0c90bce0abd46" title="rocksdb::DBImpl::PurgeObsolete\lWALFiles" alt="" coords="997,1635,1211,1682"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#aefb7a749f364c505a5a6b06d977cbc71" title="rocksdb::DBImpl::GetUpdates\lSince" alt="" coords="1293,1509,1491,1555"/><area shape="rect" id="node44" href="../../d4/d87/a03436.html#ae83d9e0143c5cb2f28a47460a91fe73e" title="rocksdb::TEST" alt="" coords="1337,1579,1447,1608"/><area shape="rect" id="node48" href="../../dd/df5/a00386.html#a9b3b0cce1e70a97d4d797ba7d5511dd5" title="rocksdb::DBImpl::PurgeObsolete\lFiles" alt="" coords="1285,1633,1499,1679"/><area shape="rect" id="node50" href="../../dd/df5/a00386.html#ad62af2cf23b7a2da72715051e719e5f1" title="rocksdb::DBImpl::TEST\l_PurgeObsoleteteWAL" alt="" coords="1311,1702,1473,1749"/><area shape="rect" id="node56" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="985,238,1223,285"/><area shape="rect" id="node61" href="../../dd/df5/a00386.html#afe079cf353957e6c79ed794cbc0bb9fc" title="rocksdb::DBImpl::Recover" alt="" coords="479,755,655,784"/><area shape="rect" id="node63" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="764,892,897,921"/><area shape="rect" id="node66" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="1032,553,1176,599"/><area shape="rect" id="node68" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="1079,623,1129,652"/><area shape="rect" id="node70" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="1023,814,1185,861"/><area shape="rect" id="node74" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="1033,745,1175,791"/><area shape="rect" id="node76" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="1035,883,1173,930"/><area shape="rect" id="node78" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="1015,953,1193,999"/><area shape="rect" id="node80" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="1043,1023,1165,1052"/><area shape="rect" id="node82" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="1036,1075,1172,1122"/><area shape="rect" id="node84" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="1023,361,1185,407"/><area shape="rect" id="node87" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="1021,1145,1187,1175"/><area shape="rect" id="node89" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="1004,1199,1204,1228"/><area shape="rect" id="node91" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="1008,1251,1200,1298"/><area shape="rect" id="node93" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="1035,1321,1173,1367"/><area shape="rect" id="node95" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="1024,1390,1184,1437"/><area shape="rect" id="node97" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="996,1460,1212,1489"/><area shape="rect" id="node99" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="1049,1513,1159,1543"/><area shape="rect" id="node101" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="1023,430,1185,477"/><area shape="rect" id="node103" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="1008,500,1200,529"/><area shape="rect" id="node105" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="1008,675,1200,722"/><area shape="rect" id="node72" href="../../da/dee/a00383.html#a8cdb390521098e2a5f737561e9eb1134" title="rocksdb::DBConstructor\l::DBConstructor" alt="" coords="1311,814,1473,861"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7db406791cb13477c816733858ea1e51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::log::Reader::ReportCorruption </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00173">173</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>

<p>References <a class="el" href="../../d5/d96/a02642_source.html#l00042">rocksdb::Status::Corruption()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00177">ReportDrop()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00064">ReadRecord()</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                                              {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c">ReportDrop</a>(bytes, <a class="code" href="../../d0/db9/a01552.html#a585d7fbcadd8858734f534519290035d">Status::Corruption</a>(reason));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a7db406791cb13477c816733858ea1e51_cgraph.png" border="0" usemap="#d5/d54/a01213_a7db406791cb13477c816733858ea1e51_cgraph" alt=""/></div>
<map name="d5/d54/a01213_a7db406791cb13477c816733858ea1e51_cgraph" id="d5/d54/a01213_a7db406791cb13477c816733858ea1e51_cgraph">
<area shape="rect" id="node3" href="../../d0/db9/a01552.html#a585d7fbcadd8858734f534519290035d" title="rocksdb::Status::Corruption" alt="" coords="199,5,380,35"/><area shape="rect" id="node7" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c" title="rocksdb::log::Reader\l::ReportDrop" alt="" coords="219,58,360,105"/><area shape="rect" id="node5" href="../../d0/db9/a01552.html#afcc875b53756534a635212b3d8f43864" title="rocksdb::Status::Status" alt="" coords="429,5,589,35"/><area shape="rect" id="node9" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="441,63,577,92"/><area shape="rect" id="node11" href="../../d7/d04/a01246.html#a3489a71709b9f8a459daf7761fc8658e" title="rocksdb::log::Reader\l::Reporter::Corruption" alt="" coords="436,115,583,162"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a7db406791cb13477c816733858ea1e51_icgraph.png" border="0" usemap="#d5/d54/a01213_a7db406791cb13477c816733858ea1e51_icgraph" alt=""/></div>
<map name="d5/d54/a01213_a7db406791cb13477c816733858ea1e51_icgraph" id="d5/d54/a01213_a7db406791cb13477c816733858ea1e51_icgraph">
<area shape="rect" id="node3" href="../../d5/d54/a01213.html#a57eb93a86418bd4a2b32ee163aecea5d" title="rocksdb::log::Reader\l::ReadPhysicalRecord" alt="" coords="199,470,351,517"/><area shape="rect" id="node5" href="../../d5/d54/a01213.html#a5a9fb535a03f7843b921dd95262ddb9c" title="rocksdb::log::Reader\l::ReadRecord" alt="" coords="401,441,543,487"/><area shape="rect" id="node7" href="../../dc/d5b/a01812.html#ab49250c660bcd1a8c6230c5cb31e7ead" title="rocksdb::WALDumperCommand\l::DoCommand" alt="" coords="592,261,803,307"/><area shape="rect" id="node9" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="628,330,767,377"/><area shape="rect" id="node13" href="../../d1/d42/a01800.html#af55acbe3f8a2077614c6d8374eb24c04" title="rocksdb::VersionSet\l::ManifestContains" alt="" coords="892,381,1031,427"/><area shape="rect" id="node36" href="../../d0/ddf/a00918.html#a3208a1c304cca8485d89dcb181349206" title="rocksdb::log::LogTest\l::Read" alt="" coords="624,570,771,617"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#a8a0816871126bc130e6e4f3ad8f81da8" title="rocksdb::DBImpl::ReadFirstLine" alt="" coords="593,916,801,945"/><area shape="rect" id="node54" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="1156,271,1295,318"/><area shape="rect" id="node61" href="../../dd/df5/a00386.html#adb8cf2e0f98f8368db32bea16bcf3cb7" title="rocksdb::DBImpl::Recover\lLogFile" alt="" coords="609,501,785,547"/><area shape="rect" id="node11" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="851,311,1072,358"/><area shape="rect" id="node15" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="1156,146,1295,193"/><area shape="rect" id="node17" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="1409,308,1588,337"/><area shape="rect" id="node21" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="1400,49,1597,95"/><area shape="rect" id="node32" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="1412,118,1585,165"/><area shape="rect" id="node19" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1761,308,1812,337"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="1692,49,1881,95"/><area shape="rect" id="node25" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="2251,23,2448,70"/><area shape="rect" id="node27" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1980,109,2177,155"/><area shape="rect" id="node29" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="1956,5,2201,35"/><area shape="rect" id="node34" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="1668,209,1905,255"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#a58d2431c9ec2de7473a8bc2f171c04b8" title="rocksdb::DBImpl::ReadFirst\lRecord" alt="" coords="869,1045,1053,1091"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#a663aa80742985c3054c1962a94be6267" title="rocksdb::DBImpl::AppendSorted\lWalsOfType" alt="" coords="1120,1566,1331,1613"/><area shape="rect" id="node44" href="../../dd/df5/a00386.html#aa24437e34cff2bc2607adf5a382efe80" title="rocksdb::DBImpl::GetSorted\lWalFiles" alt="" coords="1405,1566,1592,1613"/><area shape="rect" id="node50" href="../../dd/df5/a00386.html#a7c148333899c4965e7f0c90bce0abd46" title="rocksdb::DBImpl::PurgeObsolete\lWALFiles" alt="" coords="1392,1635,1605,1682"/><area shape="rect" id="node46" href="../../dd/df5/a00386.html#aefb7a749f364c505a5a6b06d977cbc71" title="rocksdb::DBImpl::GetUpdates\lSince" alt="" coords="1688,1509,1885,1555"/><area shape="rect" id="node48" href="../../d4/d87/a03436.html#ae83d9e0143c5cb2f28a47460a91fe73e" title="rocksdb::TEST" alt="" coords="1732,1579,1841,1608"/><area shape="rect" id="node52" href="../../dd/df5/a00386.html#a9b3b0cce1e70a97d4d797ba7d5511dd5" title="rocksdb::DBImpl::PurgeObsolete\lFiles" alt="" coords="1680,1635,1893,1682"/><area shape="rect" id="node58" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="1380,238,1617,285"/><area shape="rect" id="node63" href="../../dd/df5/a00386.html#afe079cf353957e6c79ed794cbc0bb9fc" title="rocksdb::DBImpl::Recover" alt="" coords="873,751,1049,780"/><area shape="rect" id="node65" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="1159,892,1292,921"/><area shape="rect" id="node68" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="1427,622,1571,669"/><area shape="rect" id="node70" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="1473,692,1524,721"/><area shape="rect" id="node72" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="1417,745,1580,791"/><area shape="rect" id="node74" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="1428,814,1569,861"/><area shape="rect" id="node76" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="1429,883,1568,930"/><area shape="rect" id="node78" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="1409,953,1588,999"/><area shape="rect" id="node80" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="1437,1023,1560,1052"/><area shape="rect" id="node82" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="1431,1075,1567,1122"/><area shape="rect" id="node84" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="1417,361,1580,407"/><area shape="rect" id="node87" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="1416,1145,1581,1175"/><area shape="rect" id="node89" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="1399,1199,1599,1228"/><area shape="rect" id="node91" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="1403,1251,1595,1298"/><area shape="rect" id="node93" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="1429,1321,1568,1367"/><area shape="rect" id="node95" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="1419,1390,1579,1437"/><area shape="rect" id="node97" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="1391,1460,1607,1489"/><area shape="rect" id="node99" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="1444,1513,1553,1543"/><area shape="rect" id="node101" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="1417,430,1580,477"/><area shape="rect" id="node103" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="1403,500,1595,529"/><area shape="rect" id="node105" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="1403,553,1595,599"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a49fd67047e3128cc471e7c31c5db6f9c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::log::Reader::ReportDrop </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/db9/a01552.html">Status</a> &amp;&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00177">177</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00083">buffer_</a>, <a class="el" href="../../d7/d04/a01246.html#a3489a71709b9f8a459daf7761fc8658e">rocksdb::log::Reader::Reporter::Corruption()</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00089">end_of_buffer_offset_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00092">initial_offset_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00080">reporter_</a>, and <a class="el" href="../../dd/d75/a02639_source.html#l00049">rocksdb::Slice::size()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00173">ReportCorruption()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00040">SkipToInitialBlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                                          {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d54/a01213.html#ac12f00795d1654b829dd8e74fee5739c">reporter_</a> != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#af11ae6a11c0cf31188c719b0b4561034">end_of_buffer_offset_</a> - <a class="code" href="../../d5/d54/a01213.html#a0a27b5d245726ebcfb1e8675583930c0">buffer_</a>.<a class="code" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d">size</a>() - bytes &gt;= <a class="code" href="../../d5/d54/a01213.html#ae6c58f2b9ef4e5cc6fde8ff75bf70194">initial_offset_</a>) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="../../d5/d54/a01213.html#ac12f00795d1654b829dd8e74fee5739c">reporter_</a>-&gt;<a class="code" href="../../d7/d04/a01246.html#a3489a71709b9f8a459daf7761fc8658e">Corruption</a>(bytes, reason);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_cgraph.png" border="0" usemap="#d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_cgraph" alt=""/></div>
<map name="d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_cgraph" id="d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_cgraph">
<area shape="rect" id="node3" href="../../d7/d04/a01246.html#a3489a71709b9f8a459daf7761fc8658e" title="rocksdb::log::Reader\l::Reporter::Corruption" alt="" coords="199,5,345,51"/><area shape="rect" id="node5" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="204,75,340,104"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_icgraph.png" border="0" usemap="#d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_icgraph" alt=""/></div>
<map name="d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_icgraph" id="d5/d54/a01213_a49fd67047e3128cc471e7c31c5db6f9c_icgraph">
<area shape="rect" id="node3" href="../../d5/d54/a01213.html#a57eb93a86418bd4a2b32ee163aecea5d" title="rocksdb::log::Reader\l::ReadPhysicalRecord" alt="" coords="391,381,543,427"/><area shape="rect" id="node103" href="../../d5/d54/a01213.html#a7db406791cb13477c816733858ea1e51" title="rocksdb::log::Reader\l::ReportCorruption" alt="" coords="199,441,340,487"/><area shape="rect" id="node107" href="../../d5/d54/a01213.html#acb5bb46275c505b8eab7bceac8affd36" title="rocksdb::log::Reader\l::SkipToInitialBlock" alt="" coords="396,501,537,547"/><area shape="rect" id="node5" href="../../d5/d54/a01213.html#a5a9fb535a03f7843b921dd95262ddb9c" title="rocksdb::log::Reader\l::ReadRecord" alt="" coords="593,441,735,487"/><area shape="rect" id="node7" href="../../dc/d5b/a01812.html#ab49250c660bcd1a8c6230c5cb31e7ead" title="rocksdb::WALDumperCommand\l::DoCommand" alt="" coords="784,261,995,307"/><area shape="rect" id="node9" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="820,330,959,377"/><area shape="rect" id="node13" href="../../d1/d42/a01800.html#af55acbe3f8a2077614c6d8374eb24c04" title="rocksdb::VersionSet\l::ManifestContains" alt="" coords="1084,381,1223,427"/><area shape="rect" id="node36" href="../../d0/ddf/a00918.html#a3208a1c304cca8485d89dcb181349206" title="rocksdb::log::LogTest\l::Read" alt="" coords="816,570,963,617"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#a8a0816871126bc130e6e4f3ad8f81da8" title="rocksdb::DBImpl::ReadFirstLine" alt="" coords="785,916,993,945"/><area shape="rect" id="node50" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="1348,271,1487,318"/><area shape="rect" id="node57" href="../../dd/df5/a00386.html#adb8cf2e0f98f8368db32bea16bcf3cb7" title="rocksdb::DBImpl::Recover\lLogFile" alt="" coords="801,501,977,547"/><area shape="rect" id="node11" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="1043,311,1264,358"/><area shape="rect" id="node15" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="1348,146,1487,193"/><area shape="rect" id="node17" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="1601,308,1780,337"/><area shape="rect" id="node21" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="1592,49,1789,95"/><area shape="rect" id="node32" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="1604,118,1777,165"/><area shape="rect" id="node19" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1953,308,2004,337"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="1884,49,2073,95"/><area shape="rect" id="node25" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="2443,23,2640,70"/><area shape="rect" id="node27" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="2172,109,2369,155"/><area shape="rect" id="node29" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="2148,5,2393,35"/><area shape="rect" id="node34" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="1860,209,2097,255"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#a58d2431c9ec2de7473a8bc2f171c04b8" title="rocksdb::DBImpl::ReadFirst\lRecord" alt="" coords="1061,1045,1245,1091"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#a663aa80742985c3054c1962a94be6267" title="rocksdb::DBImpl::AppendSorted\lWalsOfType" alt="" coords="1312,1566,1523,1613"/><area shape="rect" id="node44" href="../../dd/df5/a00386.html#aa24437e34cff2bc2607adf5a382efe80" title="rocksdb::DBImpl::GetSorted\lWalFiles" alt="" coords="1597,1566,1784,1613"/><area shape="rect" id="node48" href="../../dd/df5/a00386.html#a7c148333899c4965e7f0c90bce0abd46" title="rocksdb::DBImpl::PurgeObsolete\lWALFiles" alt="" coords="1584,1635,1797,1682"/><area shape="rect" id="node46" href="../../dd/df5/a00386.html#aefb7a749f364c505a5a6b06d977cbc71" title="rocksdb::DBImpl::GetUpdates\lSince" alt="" coords="1880,1566,2077,1613"/><area shape="rect" id="node54" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="1572,238,1809,285"/><area shape="rect" id="node59" href="../../dd/df5/a00386.html#afe079cf353957e6c79ed794cbc0bb9fc" title="rocksdb::DBImpl::Recover" alt="" coords="1065,751,1241,780"/><area shape="rect" id="node61" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="1351,892,1484,921"/><area shape="rect" id="node64" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="1619,622,1763,669"/><area shape="rect" id="node66" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="1665,692,1716,721"/><area shape="rect" id="node68" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="1609,745,1772,791"/><area shape="rect" id="node70" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="1620,814,1761,861"/><area shape="rect" id="node72" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="1621,883,1760,930"/><area shape="rect" id="node74" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="1601,953,1780,999"/><area shape="rect" id="node76" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="1629,1023,1752,1052"/><area shape="rect" id="node78" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="1623,1075,1759,1122"/><area shape="rect" id="node80" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="1609,361,1772,407"/><area shape="rect" id="node83" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="1608,1145,1773,1175"/><area shape="rect" id="node85" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="1591,1199,1791,1228"/><area shape="rect" id="node87" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="1595,1251,1787,1298"/><area shape="rect" id="node89" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="1621,1321,1760,1367"/><area shape="rect" id="node91" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="1611,1390,1771,1437"/><area shape="rect" id="node93" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="1583,1460,1799,1489"/><area shape="rect" id="node95" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="1636,1513,1745,1543"/><area shape="rect" id="node97" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="1609,430,1772,477"/><area shape="rect" id="node99" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="1595,500,1787,529"/><area shape="rect" id="node101" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="1595,553,1787,599"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acb5bb46275c505b8eab7bceac8affd36"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rocksdb::log::Reader::SkipToInitialBlock </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dae/a02581_source.html#l00040">40</a> of file <a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00089">end_of_buffer_offset_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00079">file_</a>, <a class="el" href="../../d1/d03/a02582_source.html#l00092">initial_offset_</a>, <a class="el" href="../../d7/d66/a02580_source.html#l00030">rocksdb::log::kBlockSize</a>, <a class="el" href="../../d5/d96/a02642_source.html#l00062">rocksdb::Status::ok()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00177">ReportDrop()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00064">ReadRecord()</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                                {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordtype">size_t</span> offset_in_block = <a class="code" href="../../d5/d54/a01213.html#ae6c58f2b9ef4e5cc6fde8ff75bf70194">initial_offset_</a> % <a class="code" href="../../db/db5/a03468.html#a00b1380129c937b835cf7c34f4ed6531">kBlockSize</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> block_start_location = <a class="code" href="../../d5/d54/a01213.html#ae6c58f2b9ef4e5cc6fde8ff75bf70194">initial_offset_</a> - offset_in_block;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// Don&#39;t search a block if we&#39;d be in the trailer</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">if</span> (offset_in_block &gt; <a class="code" href="../../db/db5/a03468.html#a00b1380129c937b835cf7c34f4ed6531">kBlockSize</a> - 6) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    offset_in_block = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    block_start_location += <a class="code" href="../../db/db5/a03468.html#a00b1380129c937b835cf7c34f4ed6531">kBlockSize</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  }</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="../../d5/d54/a01213.html#af11ae6a11c0cf31188c719b0b4561034">end_of_buffer_offset_</a> = block_start_location;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// Skip to start of first block that can contain the initial record</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span> (block_start_location &gt; 0) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="../../d9/d2c/a03421.html#af127c2e4fc73b5d35647147ef45b350c">Status</a> skip_status = <a class="code" href="../../d5/d54/a01213.html#a64be34e5bef8f12baec8e3689f8dd2a5">file_</a>-&gt;Skip(block_start_location);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> (!skip_status.ok()) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <a class="code" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c">ReportDrop</a>(block_start_location, skip_status);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_cgraph.png" border="0" usemap="#d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_cgraph" alt=""/></div>
<map name="d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_cgraph" id="d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_cgraph">
<area shape="rect" id="node3" href="../../d0/db9/a01552.html#a63cba37f62403ccc2f3e8b0b8ee04425" title="rocksdb::Status::ok" alt="" coords="201,5,337,35"/><area shape="rect" id="node5" href="../../d5/d54/a01213.html#a49fd67047e3128cc471e7c31c5db6f9c" title="rocksdb::log::Reader\l::ReportDrop" alt="" coords="199,58,340,105"/><area shape="rect" id="node7" href="../../d7/d04/a01246.html#a3489a71709b9f8a459daf7761fc8658e" title="rocksdb::log::Reader\l::Reporter::Corruption" alt="" coords="391,27,537,74"/><area shape="rect" id="node9" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="396,97,532,127"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_icgraph.png" border="0" usemap="#d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_icgraph" alt=""/></div>
<map name="d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_icgraph" id="d5/d54/a01213_acb5bb46275c505b8eab7bceac8affd36_icgraph">
<area shape="rect" id="node3" href="../../d5/d54/a01213.html#a5a9fb535a03f7843b921dd95262ddb9c" title="rocksdb::log::Reader\l::ReadRecord" alt="" coords="199,410,340,457"/><area shape="rect" id="node5" href="../../dc/d5b/a01812.html#ab49250c660bcd1a8c6230c5cb31e7ead" title="rocksdb::WALDumperCommand\l::DoCommand" alt="" coords="389,230,600,277"/><area shape="rect" id="node7" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="425,299,564,346"/><area shape="rect" id="node11" href="../../d1/d42/a01800.html#af55acbe3f8a2077614c6d8374eb24c04" title="rocksdb::VersionSet\l::ManifestContains" alt="" coords="689,350,828,397"/><area shape="rect" id="node34" href="../../d0/ddf/a00918.html#a3208a1c304cca8485d89dcb181349206" title="rocksdb::log::LogTest\l::Read" alt="" coords="421,539,568,586"/><area shape="rect" id="node36" href="../../dd/df5/a00386.html#a8a0816871126bc130e6e4f3ad8f81da8" title="rocksdb::DBImpl::ReadFirstLine" alt="" coords="391,1092,599,1121"/><area shape="rect" id="node54" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="953,271,1092,318"/><area shape="rect" id="node61" href="../../dd/df5/a00386.html#adb8cf2e0f98f8368db32bea16bcf3cb7" title="rocksdb::DBImpl::Recover\lLogFile" alt="" coords="407,470,583,517"/><area shape="rect" id="node9" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="648,281,869,327"/><area shape="rect" id="node13" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="953,146,1092,193"/><area shape="rect" id="node15" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="1207,308,1385,337"/><area shape="rect" id="node19" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="1197,49,1395,95"/><area shape="rect" id="node30" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="1209,118,1383,165"/><area shape="rect" id="node17" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1559,308,1609,337"/><area shape="rect" id="node21" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="1489,49,1679,95"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="2048,23,2245,70"/><area shape="rect" id="node25" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1777,109,1975,155"/><area shape="rect" id="node27" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="1753,5,1999,35"/><area shape="rect" id="node32" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="1465,209,1703,255"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#a58d2431c9ec2de7473a8bc2f171c04b8" title="rocksdb::DBImpl::ReadFirst\lRecord" alt="" coords="667,1325,851,1371"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#a663aa80742985c3054c1962a94be6267" title="rocksdb::DBImpl::AppendSorted\lWalsOfType" alt="" coords="917,1566,1128,1613"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#aa24437e34cff2bc2607adf5a382efe80" title="rocksdb::DBImpl::GetSorted\lWalFiles" alt="" coords="1203,1566,1389,1613"/><area shape="rect" id="node48" href="../../dd/df5/a00386.html#a7c148333899c4965e7f0c90bce0abd46" title="rocksdb::DBImpl::PurgeObsolete\lWALFiles" alt="" coords="1189,1635,1403,1682"/><area shape="rect" id="node44" href="../../dd/df5/a00386.html#aefb7a749f364c505a5a6b06d977cbc71" title="rocksdb::DBImpl::GetUpdates\lSince" alt="" coords="1485,1566,1683,1613"/><area shape="rect" id="node46" href="../../d4/d87/a03436.html#ae83d9e0143c5cb2f28a47460a91fe73e" title="rocksdb::TEST" alt="" coords="1529,1513,1639,1543"/><area shape="rect" id="node50" href="../../dd/df5/a00386.html#a9b3b0cce1e70a97d4d797ba7d5511dd5" title="rocksdb::DBImpl::PurgeObsolete\lFiles" alt="" coords="1477,1705,1691,1751"/><area shape="rect" id="node52" href="../../dd/df5/a00386.html#ad62af2cf23b7a2da72715051e719e5f1" title="rocksdb::DBImpl::TEST\l_PurgeObsoleteteWAL" alt="" coords="1503,1635,1665,1682"/><area shape="rect" id="node58" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="1177,238,1415,285"/><area shape="rect" id="node63" href="../../dd/df5/a00386.html#afe079cf353957e6c79ed794cbc0bb9fc" title="rocksdb::DBImpl::Recover" alt="" coords="671,755,847,784"/><area shape="rect" id="node65" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="956,892,1089,921"/><area shape="rect" id="node68" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="1224,622,1368,669"/><area shape="rect" id="node70" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="1271,692,1321,721"/><area shape="rect" id="node72" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="1215,745,1377,791"/><area shape="rect" id="node74" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="1225,814,1367,861"/><area shape="rect" id="node76" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="1227,883,1365,930"/><area shape="rect" id="node78" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="1207,953,1385,999"/><area shape="rect" id="node80" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="1235,1023,1357,1052"/><area shape="rect" id="node82" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="1228,1075,1364,1122"/><area shape="rect" id="node84" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="1215,361,1377,407"/><area shape="rect" id="node87" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="1213,1145,1379,1175"/><area shape="rect" id="node89" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="1196,1199,1396,1228"/><area shape="rect" id="node91" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="1200,1251,1392,1298"/><area shape="rect" id="node93" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="1227,1321,1365,1367"/><area shape="rect" id="node95" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="1216,1390,1376,1437"/><area shape="rect" id="node97" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="1188,1460,1404,1489"/><area shape="rect" id="node99" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="1241,1513,1351,1543"/><area shape="rect" id="node101" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="1215,430,1377,477"/><area shape="rect" id="node103" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="1200,500,1392,529"/><area shape="rect" id="node105" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="1200,553,1392,599"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a26f87388eb14e7c46cdac2cdf5f9e65f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::log::Reader::UnmarkEOF </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00072">72</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>References <a class="el" href="../../d1/d03/a02582_source.html#l00084">eof_</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                   {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="../../d5/d54/a01213.html#ad8835968adb95da922c920a699c1c0be">eof_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab7c35cf1331905cd29de0057cb60433a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* const rocksdb::log::Reader::backing_store_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00082">82</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00036">~Reader()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a27b5d245726ebcfb1e8675583930c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/daf/a01417.html">Slice</a> rocksdb::log::Reader::buffer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00083">83</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00064">ReadRecord()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00177">ReportDrop()</a>.</p>

</div>
</div>
<a class="anchor" id="a54ed5bc4a69bb9c44f789212e29ac96b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool const rocksdb::log::Reader::checksum_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00081">81</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>.</p>

</div>
</div>
<a class="anchor" id="af11ae6a11c0cf31188c719b0b4561034"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> rocksdb::log::Reader::end_of_buffer_offset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00089">89</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00064">ReadRecord()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00177">ReportDrop()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00040">SkipToInitialBlock()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8835968adb95da922c920a699c1c0be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rocksdb::log::Reader::eof_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00084">84</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d1/d03/a02582_source.html#l00066">IsEOF()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, and <a class="el" href="../../d1/d03/a02582_source.html#l00072">UnmarkEOF()</a>.</p>

</div>
</div>
<a class="anchor" id="a64be34e5bef8f12baec8e3689f8dd2a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unique_ptr&lt;<a class="el" href="../../d3/da4/a01343.html">SequentialFile</a>&gt; rocksdb::log::Reader::file_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00079">79</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d1/d03/a02582_source.html#l00076">file()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00040">SkipToInitialBlock()</a>.</p>

</div>
</div>
<a class="anchor" id="ae6c58f2b9ef4e5cc6fde8ff75bf70194"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> const rocksdb::log::Reader::initial_offset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00092">92</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00184">ReadPhysicalRecord()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00064">ReadRecord()</a>, <a class="el" href="../../d6/dae/a02581_source.html#l00177">ReportDrop()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00040">SkipToInitialBlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a5fc206c6558fc025e7a75a3708da7f41"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> rocksdb::log::Reader::last_record_offset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00087">87</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00169">LastRecordOffset()</a>, and <a class="el" href="../../d6/dae/a02581_source.html#l00064">ReadRecord()</a>.</p>

</div>
</div>
<a class="anchor" id="ac12f00795d1654b829dd8e74fee5739c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d04/a01246.html">Reporter</a>* const rocksdb::log::Reader::reporter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d03/a02582_source.html#l00080">80</a> of file <a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dae/a02581_source.html#l00177">ReportDrop()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rippled/src/ripple/rocksdb/rocksdb/db/<a class="el" href="../../d1/d03/a02582_source.html">log_reader.h</a></li>
<li>rippled/src/ripple/rocksdb/rocksdb/db/<a class="el" href="../../d6/dae/a02581_source.html">log_reader.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d4/d87/a03436.html">rocksdb</a></li><li class="navelem"><a class="el" href="../../db/db5/a03468.html">log</a></li><li class="navelem"><a class="el" href="../../d5/d54/a01213.html">Reader</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:24 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
