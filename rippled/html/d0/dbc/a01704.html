<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: ripple::TransactionAcquire Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d0/dbc/a01704.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../dd/d69/a07650.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::TransactionAcquire Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ripple::TransactionAcquire:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d89/a07651.png" border="0" usemap="#ripple_1_1_transaction_acquire_inherit__map" alt="Inheritance graph"/></div>
<map name="ripple_1_1_transaction_acquire_inherit__map" id="ripple_1_1_transaction_acquire_inherit__map">
<area shape="rect" id="node2" href="../../d1/d3d/a01110.html" title="ripple::PeerSet" alt="" coords="379,13,485,43"/><area shape="rect" id="node8" href="../../d7/dfc/a00349.html" title="ripple::CountedObject\l\&lt; TransactionAcquire \&gt;" alt="" coords="353,135,511,182"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ripple::TransactionAcquire:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d97/a07652.png" border="0" usemap="#ripple_1_1_transaction_acquire_coll__map" alt="Collaboration graph"/></div>
<map name="ripple_1_1_transaction_acquire_coll__map" id="ripple_1_1_transaction_acquire_coll__map">
<area shape="rect" id="node2" href="../../d1/d3d/a01110.html" title="ripple::PeerSet" alt="" coords="923,141,1029,171"/><area shape="rect" id="node6" href="../../d2/dee/a00049.html" title="beast::abstract_clock\l\&lt; Duration \&gt;" alt="" coords="549,79,696,126"/><area shape="rect" id="node8" href="../../df/d0c/a00788.html" title="beast::Journal" alt="" coords="571,149,675,179"/><area shape="rect" id="node10" href="../../df/d84/a01408.html" title="beast::Journal::Sink" alt="" coords="5,63,144,92"/><area shape="rect" id="node12" href="../../d4/d2c/a01575.html" title="beast::Journal::Stream" alt="" coords="240,121,395,151"/><area shape="rect" id="node15" href="../../d0/d4e/a01741.html" title="ripple::uint256" alt="" coords="572,203,673,232"/><area shape="rect" id="node17" href="../../d7/d9a/a00152.html" title="base_uint256" alt="" coords="268,203,367,232"/><area shape="rect" id="node21" href="../../d7/dfc/a00349.html" title="ripple::CountedObject\l\&lt; TransactionAcquire \&gt;" alt="" coords="897,263,1055,310"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aec96b8b1497a6c2c54780028a0d52b64"><td class="memItemLeft" align="right" valign="top">typedef boost::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="../../d0/dbc/a01704.html">TransactionAcquire</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#aec96b8b1497a6c2c54780028a0d52b64">pointer</a></td></tr>
<tr class="separator:aec96b8b1497a6c2c54780028a0d52b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_a01110"><td colspan="2" onclick="javascript:toggleInherit('pub_types_a01110')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../d1/d3d/a01110.html">ripple::PeerSet</a></td></tr>
<tr class="memitem:a78ffba7d0664ae18c089d815b7217ae7 inherit pub_types_a01110"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d2/dee/a00049.html">beast::abstract_clock</a><br class="typebreak"/>
&lt; std::chrono::seconds &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a78ffba7d0664ae18c089d815b7217ae7">clock_type</a></td></tr>
<tr class="separator:a78ffba7d0664ae18c089d815b7217ae7 inherit pub_types_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a21b3049cf56f2d919de8636243307d42"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a> (<a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;<a class="el" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>, <a class="el" href="../../d1/d3d/a01110.html#a78ffba7d0664ae18c089d815b7217ae7">clock_type</a> &amp;clock)</td></tr>
<tr class="separator:a21b3049cf56f2d919de8636243307d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57e5ff125d6a4b73f706d589384561c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#ad57e5ff125d6a4b73f706d589384561c">~TransactionAcquire</a> ()</td></tr>
<tr class="separator:ad57e5ff125d6a4b73f706d589384561c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52d7420ab173785373b09f6bf22b8f9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/dfe/a01366.html#a585bf78e9ec9fa02084eb73db874939c">SHAMap::ref</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#a52d7420ab173785373b09f6bf22b8f9e">getMap</a> ()</td></tr>
<tr class="separator:a52d7420ab173785373b09f6bf22b8f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5050201ff5162e27302513d989837c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d0c/a01368.html">SHAMapAddNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#af5050201ff5162e27302513d989837c2">takeNodes</a> (const std::list&lt; <a class="el" href="../../df/d0b/a01372.html">SHAMapNode</a> &gt; &amp;IDs, const std::list&lt; <a class="el" href="../../d9/d9d/a03417.html#a1b87ba4732cf1725393e8dd60bf73b0c">Blob</a> &gt; &amp;data, <a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;)</td></tr>
<tr class="separator:af5050201ff5162e27302513d989837c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01110"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01110')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d1/d3d/a01110.html">ripple::PeerSet</a></td></tr>
<tr class="memitem:af4feb007aefaee406ca0cc8dc076ae31 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#af4feb007aefaee406ca0cc8dc076ae31">getHash</a> () const </td></tr>
<tr class="separator:af4feb007aefaee406ca0cc8dc076ae31 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c318faf0a5092a8bda14936cfc3bda inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ab8c318faf0a5092a8bda14936cfc3bda">isComplete</a> () const </td></tr>
<tr class="separator:ab8c318faf0a5092a8bda14936cfc3bda inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a227639419851af47d2619bfacc67f7c8 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a227639419851af47d2619bfacc67f7c8">isFailed</a> () const </td></tr>
<tr class="separator:a227639419851af47d2619bfacc67f7c8 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8b6048a0b05a11da32d1657dcb98fd6 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6">getTimeouts</a> () const </td></tr>
<tr class="separator:ac8b6048a0b05a11da32d1657dcb98fd6 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8031813bb349578b227c8725ab019b42 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a8031813bb349578b227c8725ab019b42">isActive</a> ()</td></tr>
<tr class="separator:a8031813bb349578b227c8725ab019b42 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7733986159c48a56d6e5049817a7c66 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ad7733986159c48a56d6e5049817a7c66">progress</a> ()</td></tr>
<tr class="separator:ad7733986159c48a56d6e5049817a7c66 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d1ae49c98ce55d07fe51e0d42b9eeec inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a9d1ae49c98ce55d07fe51e0d42b9eeec">clearProgress</a> ()</td></tr>
<tr class="separator:a9d1ae49c98ce55d07fe51e0d42b9eeec inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ef171e6bca3a585187561198bbf06e6 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a3ef171e6bca3a585187561198bbf06e6">isProgress</a> ()</td></tr>
<tr class="separator:a3ef171e6bca3a585187561198bbf06e6 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7710649f6c87a5f821f67078ece2d7e5 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a7710649f6c87a5f821f67078ece2d7e5">touch</a> ()</td></tr>
<tr class="separator:a7710649f6c87a5f821f67078ece2d7e5 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d4a779090b657422c58f0337160965 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dee/a00049.html#adcd13d148ce842515a1184fb7e36ba92">clock_type::time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ae0d4a779090b657422c58f0337160965">getLastAction</a> () const </td></tr>
<tr class="separator:ae0d4a779090b657422c58f0337160965 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4b615fe7df1614e209da5ef5e94d2a inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a8b4b615fe7df1614e209da5ef5e94d2a">peerHas</a> (<a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;)</td></tr>
<tr class="separator:a8b4b615fe7df1614e209da5ef5e94d2a inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92b545557843aac8eef76993db6f62bd inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a92b545557843aac8eef76993db6f62bd">peerHasVoid</a> (<a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;peer)</td></tr>
<tr class="separator:a92b545557843aac8eef76993db6f62bd inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79972fb45964b1b6a5f4f59a83e6584b inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a79972fb45964b1b6a5f4f59a83e6584b">badPeer</a> (<a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;)</td></tr>
<tr class="separator:a79972fb45964b1b6a5f4f59a83e6584b inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addc5e94d9df5ad4a25e9afb735984cf3 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#addc5e94d9df5ad4a25e9afb735984cf3">setTimer</a> ()</td></tr>
<tr class="separator:addc5e94d9df5ad4a25e9afb735984cf3 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a895261f3ca551dfe74b9d7a8dc85e462 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a895261f3ca551dfe74b9d7a8dc85e462">takePeerSetFrom</a> (const <a class="el" href="../../d1/d3d/a01110.html">PeerSet</a> &amp;s)</td></tr>
<tr class="separator:a895261f3ca551dfe74b9d7a8dc85e462 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afacebbce37949c27d74cfff7cd0b8e84 inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#afacebbce37949c27d74cfff7cd0b8e84">getPeerCount</a> () const </td></tr>
<tr class="separator:afacebbce37949c27d74cfff7cd0b8e84 inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e055abdbebbbad43ae78f6c8ad4c2a inherit pub_methods_a01110"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ae1e055abdbebbbad43ae78f6c8ad4c2a">isDone</a> () const </td></tr>
<tr class="separator:ae1e055abdbebbbad43ae78f6c8ad4c2a inherit pub_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a00349"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00349')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d7/dfc/a00349.html">ripple::CountedObject&lt; TransactionAcquire &gt;</a></td></tr>
<tr class="memitem:a3ffb842b3de733b87a0e7fa3b5b576d9 inherit pub_methods_a00349"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfc/a00349.html#a3ffb842b3de733b87a0e7fa3b5b576d9">CountedObject</a> ()</td></tr>
<tr class="separator:a3ffb842b3de733b87a0e7fa3b5b576d9 inherit pub_methods_a00349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e628043690cdc8ab735cf9cac02ddd inherit pub_methods_a00349"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfc/a00349.html#aa6e628043690cdc8ab735cf9cac02ddd">CountedObject</a> (<a class="el" href="../../d7/dfc/a00349.html">CountedObject</a> const &amp;)</td></tr>
<tr class="separator:aa6e628043690cdc8ab735cf9cac02ddd inherit pub_methods_a00349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab157393b396d6ff4da9afcf364f3beaf inherit pub_methods_a00349"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfc/a00349.html#ab157393b396d6ff4da9afcf364f3beaf">~CountedObject</a> ()</td></tr>
<tr class="separator:ab157393b396d6ff4da9afcf364f3beaf inherit pub_methods_a00349"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab9786faf83be79df96cc41d227be91b0"><td class="memItemLeft" align="right" valign="top">static char const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#ab9786faf83be79df96cc41d227be91b0">getCountedObjectName</a> ()</td></tr>
<tr class="separator:ab9786faf83be79df96cc41d227be91b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aff2883c1a530f0236fb22abca68ab83e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#aff2883c1a530f0236fb22abca68ab83e">onTimer</a> (bool <a class="el" href="../../d1/d3d/a01110.html#ad7733986159c48a56d6e5049817a7c66">progress</a>, <a class="el" href="../../d1/d3d/a01110.html#a62757c176f89d10d432eaa1e0e9d06ad">ScopedLockType</a> &amp;peerSetLock)</td></tr>
<tr class="separator:aff2883c1a530f0236fb22abca68ab83e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa760936e4317bbf5cfc4167ea66f22f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#aa760936e4317bbf5cfc4167ea66f22f6">newPeer</a> (<a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;peer)</td></tr>
<tr class="separator:aa760936e4317bbf5cfc4167ea66f22f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4797477cdc277af74dc698f8d2b9105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#ae4797477cdc277af74dc698f8d2b9105">done</a> ()</td></tr>
<tr class="separator:ae4797477cdc277af74dc698f8d2b9105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada68c8c11f2c9292782989f1ed65fefd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd">trigger</a> (<a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;)</td></tr>
<tr class="separator:ada68c8c11f2c9292782989f1ed65fefd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac900d1a9a0ec0bad305ad08716eb0047"><td class="memItemLeft" align="right" valign="top">boost::weak_ptr&lt; <a class="el" href="../../d1/d3d/a01110.html">PeerSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#ac900d1a9a0ec0bad305ad08716eb0047">pmDowncast</a> ()</td></tr>
<tr class="separator:ac900d1a9a0ec0bad305ad08716eb0047"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa930f51d4cc46a2f22184c40ce784145"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/dfe/a01366.html#a863e0d49cf8941071ae4a0b0e4d44eca">SHAMap::pointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a></td></tr>
<tr class="separator:aa930f51d4cc46a2f22184c40ce784145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac08d68ec10f8f01c3b91ed8e240a1adc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/a01704.html#ac08d68ec10f8f01c3b91ed8e240a1adc">mHaveRoot</a></td></tr>
<tr class="separator:ac08d68ec10f8f01c3b91ed8e240a1adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_types_a01110"><td colspan="2" onclick="javascript:toggleInherit('pro_types_a01110')"><img src="../../closed.png" alt="-"/>&#160;Protected Types inherited from <a class="el" href="../../d1/d3d/a01110.html">ripple::PeerSet</a></td></tr>
<tr class="memitem:ac9480e2ac7543a8fd85eef6a17360110 inherit pro_types_a01110"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d9/d9d/a03417.html#abf55a274ab90a3ca5b8dc903a401ad93">RippleRecursiveMutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ac9480e2ac7543a8fd85eef6a17360110">LockType</a></td></tr>
<tr class="separator:ac9480e2ac7543a8fd85eef6a17360110 inherit pro_types_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62757c176f89d10d432eaa1e0e9d06ad inherit pro_types_a01110"><td class="memItemLeft" align="right" valign="top">typedef std::unique_lock<br class="typebreak"/>
&lt; <a class="el" href="../../d1/d3d/a01110.html#ac9480e2ac7543a8fd85eef6a17360110">LockType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a62757c176f89d10d432eaa1e0e9d06ad">ScopedLockType</a></td></tr>
<tr class="separator:a62757c176f89d10d432eaa1e0e9d06ad inherit pro_types_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d979bb852ce3b982a34d8ef9ea95cc7 inherit pro_types_a01110"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d5/d17/a01098.html#a437b05deb433e6d7cc2eb368b7a4ecfe">Peer::ShortId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a6d979bb852ce3b982a34d8ef9ea95cc7">PeerIdentifier</a></td></tr>
<tr class="separator:a6d979bb852ce3b982a34d8ef9ea95cc7 inherit pro_types_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e9d1c310c497d55870dc3510414ab2 inherit pro_types_a01110"><td class="memItemLeft" align="right" valign="top">typedef int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a96e9d1c310c497d55870dc3510414ab2">ReceivedChunkCount</a></td></tr>
<tr class="separator:a96e9d1c310c497d55870dc3510414ab2 inherit pro_types_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54baec17adf6b03bfa120b36d495cb0d inherit pro_types_a01110"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d9/d9d/a03417.html#a1382c24eaaf3ee6a51a5b64d8ad5706c">ripple::unordered_map</a><br class="typebreak"/>
&lt; <a class="el" href="../../d1/d3d/a01110.html#a6d979bb852ce3b982a34d8ef9ea95cc7">PeerIdentifier</a>, <br class="typebreak"/>
<a class="el" href="../../d1/d3d/a01110.html#a96e9d1c310c497d55870dc3510414ab2">ReceivedChunkCount</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a54baec17adf6b03bfa120b36d495cb0d">PeerSetMap</a></td></tr>
<tr class="separator:a54baec17adf6b03bfa120b36d495cb0d inherit pro_types_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_a01110"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_a01110')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../d1/d3d/a01110.html">ripple::PeerSet</a></td></tr>
<tr class="memitem:a9b86c0b971aab53ab66fee7a50ad35c0 inherit pro_methods_a01110"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a9b86c0b971aab53ab66fee7a50ad35c0">PeerSet</a> (<a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;<a class="el" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>, int interval, bool txnData, <a class="el" href="../../d1/d3d/a01110.html#a78ffba7d0664ae18c089d815b7217ae7">clock_type</a> &amp;clock, <a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> journal)</td></tr>
<tr class="separator:a9b86c0b971aab53ab66fee7a50ad35c0 inherit pro_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22815d04e8927297736623dbfafa24a6 inherit pro_methods_a01110"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a22815d04e8927297736623dbfafa24a6">~PeerSet</a> ()=0</td></tr>
<tr class="separator:a22815d04e8927297736623dbfafa24a6 inherit pro_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43016ec89fd4afa2b3e02eca1ea6d438 inherit pro_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a43016ec89fd4afa2b3e02eca1ea6d438">setComplete</a> ()</td></tr>
<tr class="separator:a43016ec89fd4afa2b3e02eca1ea6d438 inherit pro_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad594cc4722672d822763db9ea8fbc8b8 inherit pro_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ad594cc4722672d822763db9ea8fbc8b8">setFailed</a> ()</td></tr>
<tr class="separator:ad594cc4722672d822763db9ea8fbc8b8 inherit pro_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af519e54b016eff0b244aceba65944e55 inherit pro_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#af519e54b016eff0b244aceba65944e55">invokeOnTimer</a> ()</td></tr>
<tr class="separator:af519e54b016eff0b244aceba65944e55 inherit pro_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d539d36401a5042d1363c450379bb43 inherit pro_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a3d539d36401a5042d1363c450379bb43">sendRequest</a> (const protocol::TMGetLedger &amp;<a class="el" href="../../d5/d6c/a00977.html">message</a>)</td></tr>
<tr class="separator:a3d539d36401a5042d1363c450379bb43 inherit pro_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa9bc14245b53af2a9f579c42915b414 inherit pro_methods_a01110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#afa9bc14245b53af2a9f579c42915b414">sendRequest</a> (const protocol::TMGetLedger &amp;<a class="el" href="../../d5/d6c/a00977.html">message</a>, <a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;peer)</td></tr>
<tr class="separator:afa9bc14245b53af2a9f579c42915b414 inherit pro_methods_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_a01110"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_a01110')"><img src="../../closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="../../d1/d3d/a01110.html">ripple::PeerSet</a></td></tr>
<tr class="memitem:a63e0e407163a2e3f9fcd9135f519b5d1 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a63e0e407163a2e3f9fcd9135f519b5d1">m_journal</a></td></tr>
<tr class="separator:a63e0e407163a2e3f9fcd9135f519b5d1 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2948d22daac5896d15ba248073378d7e inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d3d/a01110.html#a78ffba7d0664ae18c089d815b7217ae7">clock_type</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a2948d22daac5896d15ba248073378d7e">m_clock</a></td></tr>
<tr class="separator:a2948d22daac5896d15ba248073378d7e inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf832de14bb20d46936e9d5deaeb0322 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d3d/a01110.html#ac9480e2ac7543a8fd85eef6a17360110">LockType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#aaf832de14bb20d46936e9d5deaeb0322">mLock</a></td></tr>
<tr class="separator:aaf832de14bb20d46936e9d5deaeb0322 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1128568df615b4bd9c1a2dc1319c03e inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a></td></tr>
<tr class="separator:ab1128568df615b4bd9c1a2dc1319c03e inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afe5f9719f2ce0d2850a0fa6d5b40a9 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a6afe5f9719f2ce0d2850a0fa6d5b40a9">mTimerInterval</a></td></tr>
<tr class="separator:a6afe5f9719f2ce0d2850a0fa6d5b40a9 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9b6f50ad29c4a6838652f98d5cca7e3 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ae9b6f50ad29c4a6838652f98d5cca7e3">mTimeouts</a></td></tr>
<tr class="separator:ae9b6f50ad29c4a6838652f98d5cca7e3 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e8e26a4201b05c805959c7fc909ec84 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a5e8e26a4201b05c805959c7fc909ec84">mComplete</a></td></tr>
<tr class="separator:a5e8e26a4201b05c805959c7fc909ec84 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a7d358bfb4c9ca39cbe143a270d6123 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a9a7d358bfb4c9ca39cbe143a270d6123">mFailed</a></td></tr>
<tr class="separator:a9a7d358bfb4c9ca39cbe143a270d6123 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de0f6ca4f1cbccdf393b472e4f67bcb inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a0de0f6ca4f1cbccdf393b472e4f67bcb">mAggressive</a></td></tr>
<tr class="separator:a0de0f6ca4f1cbccdf393b472e4f67bcb inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0202171185fd6a222d387cdfb6d0348 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ac0202171185fd6a222d387cdfb6d0348">mTxnData</a></td></tr>
<tr class="separator:ac0202171185fd6a222d387cdfb6d0348 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b05a07702e9788f2cccb5c94d6de8c4 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dee/a00049.html#adcd13d148ce842515a1184fb7e36ba92">clock_type::time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a4b05a07702e9788f2cccb5c94d6de8c4">mLastAction</a></td></tr>
<tr class="separator:a4b05a07702e9788f2cccb5c94d6de8c4 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab291c226238498bf28b4ffad090b47e1 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#ab291c226238498bf28b4ffad090b47e1">mProgress</a></td></tr>
<tr class="separator:ab291c226238498bf28b4ffad090b47e1 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd22289e791ef3e5c1de421c91d789b inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top">boost::asio::deadline_timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a1dd22289e791ef3e5c1de421c91d789b">mTimer</a></td></tr>
<tr class="separator:a1dd22289e791ef3e5c1de421c91d789b inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a443f2dbabcd04581f3fcc014a6c902a9 inherit pro_attribs_a01110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d3d/a01110.html#a54baec17adf6b03bfa120b36d495cb0d">PeerSetMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3d/a01110.html#a443f2dbabcd04581f3fcc014a6c902a9">mPeers</a></td></tr>
<tr class="separator:a443f2dbabcd04581f3fcc014a6c902a9 inherit pro_attribs_a01110"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../d4/d44/a03065_source.html#l00027">27</a> of file <a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aec96b8b1497a6c2c54780028a0d52b64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::shared_ptr&lt;<a class="el" href="../../d0/dbc/a01704.html">TransactionAcquire</a>&gt; <a class="el" href="../../d0/dbc/a01704.html#aec96b8b1497a6c2c54780028a0d52b64">ripple::TransactionAcquire::pointer</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d44/a03065_source.html#l00035">35</a> of file <a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a21b3049cf56f2d919de8636243307d42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ripple::TransactionAcquire::TransactionAcquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d3d/a01110.html#a78ffba7d0664ae18c089d815b7217ae7">clock_type</a> &amp;&#160;</td>
          <td class="paramname"><em>clock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d38/a03064_source.html#l00037">37</a> of file <a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../d5/d95/a02720_source.html#l00040">hash</a>, <a class="el" href="../../d4/d44/a03065_source.html#l00050">mMap</a>, and <a class="el" href="../../d6/def/a03033_source.html#l00027">ripple::smtTRANSACTION</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    : <a class="code" href="../../d1/d3d/a01110.html#a9b86c0b971aab53ab66fee7a50ad35c0">PeerSet</a> (<a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>, <a class="code" href="../../d9/d9d/a03417.html#a322cd021ee18f8c142f1a50eaf1d5dd7adc1c1066205c92e7706aa6ed21c24afd">TX_ACQUIRE_TIMEOUT</a>, <span class="keyword">true</span>, clock,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        LogPartition::getJournal &lt;TransactionAcquire&gt; ())</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    , <a class="code" href="../../d0/dbc/a01704.html#ac08d68ec10f8f01c3b91ed8e240a1adc">mHaveRoot</a> (<span class="keyword">false</span>)</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a> = boost::make_shared&lt;SHAMap&gt; (<a class="code" href="../../d9/d9d/a03417.html#a5d9fe757c37a7602a883d30b14e1bf3caba7dd2006afa674ae6aea4d1b42ec9b4">smtTRANSACTION</a>, <a class="code" href="../../d5/d95/a02720.html#a11ecb029164e055f28f4123ce3748862">hash</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        std::ref (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getFullBelowCache ()));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>-&gt;setTXMap ();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_a21b3049cf56f2d919de8636243307d42_cgraph.png" border="0" usemap="#d0/dbc/a01704_a21b3049cf56f2d919de8636243307d42_cgraph" alt=""/></div>
<map name="d0/dbc/a01704_a21b3049cf56f2d919de8636243307d42_cgraph" id="d0/dbc/a01704_a21b3049cf56f2d919de8636243307d42_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="228,13,329,43"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="380,5,556,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad57e5ff125d6a4b73f706d589384561c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ripple::TransactionAcquire::~TransactionAcquire </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d38/a03064_source.html#l00047">47</a> of file <a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae4797477cdc277af74dc698f8d2b9105"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::TransactionAcquire::done </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d38/a03064_source.html#l00062">62</a> of file <a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a>.</p>

<p>References <a class="el" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">ripple::JobQueue::addJob()</a>, <a class="el" href="../../d0/d75/a03105_source.html#l00028">BIND_TYPE</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">ripple::Application::getJobQueue()</a>, <a class="el" href="../../d8/d96/a03116_source.html#l00051">ripple::jtTXN_DATA</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, <a class="el" href="../../de/da4/a03005_source.html#l00145">ripple::PeerSet::mFailed</a>, <a class="el" href="../../de/da4/a03005_source.html#l00141">ripple::PeerSet::mHash</a>, <a class="el" href="../../d4/d44/a03065_source.html#l00050">mMap</a>, <a class="el" href="../../de/d38/a03064_source.html#l00051">ripple::TACompletionHandler()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../de/d38/a03064_source.html#l00081">onTimer()</a>, and <a class="el" href="../../de/d38/a03064_source.html#l00140">trigger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// We hold a PeerSet lock and so cannot acquire the master lock here</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../d6/dfe/a01366.html#a863e0d49cf8941071ae4a0b0e4d44eca">SHAMap::pointer</a> map;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#a9a7d358bfb4c9ca39cbe143a270d6123">mFailed</a>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to acquire TX set &quot;</span> &lt;&lt; <a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;Acquired TX set &quot;</span> &lt;&lt; <a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>-&gt;setImmutable ();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        map = <a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c">getJobQueue</a>().<a class="code" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e">addJob</a> (<a class="code" href="../../d9/d9d/a03417.html#ae0f54f8ce649d639bf3e2b295347e17aac04ecc4122a37cf832f12c0dd02a27d2">jtTXN_DATA</a>, <span class="stringliteral">&quot;completeAcquire&quot;</span>, <a class="code" href="../../d0/d75/a03105.html#a6c0c867ff5909fab21adb4d253d4bcc5">BIND_TYPE</a> (&amp;<a class="code" href="../../d9/d9d/a03417.html#ab60dd3cb8f8d17b918ea9072bad6f551">TACompletionHandler</a>, <a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>, map));</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_cgraph.png" border="0" usemap="#d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_cgraph" alt=""/></div>
<map name="d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_cgraph" id="d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_cgraph">
<area shape="rect" id="node3" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="236,5,407,35"/><area shape="rect" id="node5" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="491,55,592,84"/><area shape="rect" id="node9" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="259,109,384,155"/><area shape="rect" id="node11" href="../../d9/d9d/a03417.html#ab60dd3cb8f8d17b918ea9072bad6f551" title="ripple::TACompletionHandler" alt="" coords="227,183,416,212"/><area shape="rect" id="node7" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="668,46,844,93"/><area shape="rect" id="node13" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="465,107,617,154"/><area shape="rect" id="node16" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="472,177,611,223"/><area shape="rect" id="node18" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="479,246,604,293"/><area shape="rect" id="node20" href="../../dd/dac/a01008.html#a8a3422f518b3bfc4b4e2d16abde6ef0d" title="ripple::NetworkOPs\l::mapComplete" alt="" coords="473,315,609,362"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_icgraph.png" border="0" usemap="#d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_icgraph" alt=""/></div>
<map name="d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_icgraph" id="d0/dbc/a01704_ae4797477cdc277af74dc698f8d2b9105_icgraph">
<area shape="rect" id="node3" href="../../d0/dbc/a01704.html#aff2883c1a530f0236fb22abca68ab83e" title="ripple::TransactionAcquire\l::onTimer" alt="" coords="448,5,621,51"/><area shape="rect" id="node5" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd" title="ripple::TransactionAcquire\l::trigger" alt="" coords="227,71,400,118"/><area shape="rect" id="node8" href="../../d0/dbc/a01704.html#af5050201ff5162e27302513d989837c2" title="ripple::TransactionAcquire\l::takeNodes" alt="" coords="448,74,621,121"/><area shape="rect" id="node10" href="../../d0/dbc/a01704.html#aa760936e4317bbf5cfc4167ea66f22f6" title="ripple::TransactionAcquire\l::newPeer" alt="" coords="448,143,621,190"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab9786faf83be79df96cc41d227be91b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char const* ripple::TransactionAcquire::getCountedObjectName </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d44/a03065_source.html#l00033">33</a> of file <a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;TransactionAcquire&quot;</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a52d7420ab173785373b09f6bf22b8f9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/dfe/a01366.html#a585bf78e9ec9fa02084eb73db874939c">SHAMap::ref</a> ripple::TransactionAcquire::getMap </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d44/a03065_source.html#l00041">41</a> of file <a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>.</p>

<p>References <a class="el" href="../../d4/d44/a03065_source.html#l00050">mMap</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa760936e4317bbf5cfc4167ea66f22f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::TransactionAcquire::newPeer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>peer</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/d3d/a01110.html#a89b36ce44b243850b2ef063a470700d9">ripple::PeerSet</a>.</p>

<p>Definition at line <a class="el" href="../../d4/d44/a03065_source.html#l00054">54</a> of file <a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>.</p>

<p>References <a class="el" href="../../de/d38/a03064_source.html#l00140">trigger()</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd">trigger</a> (peer);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_aa760936e4317bbf5cfc4167ea66f22f6_cgraph.png" border="0" usemap="#d0/dbc/a01704_aa760936e4317bbf5cfc4167ea66f22f6_cgraph" alt=""/></div>
<map name="d0/dbc/a01704_aa760936e4317bbf5cfc4167ea66f22f6_cgraph" id="d0/dbc/a01704_aa760936e4317bbf5cfc4167ea66f22f6_cgraph">
<area shape="rect" id="node3" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd" title="ripple::TransactionAcquire\l::trigger" alt="" coords="227,207,400,253"/><area shape="rect" id="node5" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1157,11,1283,57"/><area shape="rect" id="node9" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="471,101,620,130"/><area shape="rect" id="node11" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6" title="ripple::PeerSet::getTimeouts" alt="" coords="452,154,639,183"/><area shape="rect" id="node13" href="../../df/d0b/a01372.html#a344c70ac6bbd1e865495841d638b7fdd" title="ripple::SHAMapNode\l::getRawString" alt="" coords="473,207,617,253"/><area shape="rect" id="node31" href="../../d1/d3d/a01110.html#a3d539d36401a5042d1363c450379bb43" title="ripple::PeerSet::sendRequest" alt="" coords="449,277,641,306"/><area shape="rect" id="node33" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="955,363,1056,393"/><area shape="rect" id="node38" href="../../d0/dbc/a01704.html#ae4797477cdc277af74dc698f8d2b9105" title="ripple::TransactionAcquire\l::done" alt="" coords="459,423,632,469"/><area shape="rect" id="node7" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1359,50,1508,79"/><area shape="rect" id="node15" href="../../df/d0b/a01372.html#ace328564a09fe8629e690586129fefbf" title="ripple::SHAMapNode\l::addIDRaw" alt="" coords="713,140,857,187"/><area shape="rect" id="node25" href="../../da/d61/a01350.html#a0fc02b8ef2f7112fb502175445e22566" title="ripple::Serializer\l::getString" alt="" coords="728,209,843,256"/><area shape="rect" id="node17" href="../../da/d61/a01350.html#a0a59bc79c929b9b01c3fd88ca54195f1" title="ripple::Serializer\l::add256" alt="" coords="948,71,1063,117"/><area shape="rect" id="node23" href="../../da/d61/a01350.html#a0344fccc7552038b51568aa4f93fca4e" title="ripple::Serializer\l::add8" alt="" coords="948,140,1063,187"/><area shape="rect" id="node20" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1147,81,1293,110"/><area shape="rect" id="node27" href="../../da/d61/a01350.html#ab9a75804693822b6f9177da1aa3cade4" title="ripple::Serializer\l::getDataPtr" alt="" coords="948,209,1063,256"/><area shape="rect" id="node29" href="../../da/d61/a01350.html#ac7bf5cce451c952933b2750d902d848c" title="ripple::Serializer\l::size" alt="" coords="948,279,1063,325"/><area shape="rect" id="node35" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1132,355,1308,401"/><area shape="rect" id="node40" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="700,431,871,461"/><area shape="rect" id="node43" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="723,484,848,531"/><area shape="rect" id="node45" href="../../d9/d9d/a03417.html#ab60dd3cb8f8d17b918ea9072bad6f551" title="ripple::TACompletionHandler" alt="" coords="691,554,880,583"/><area shape="rect" id="node47" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="929,441,1081,488"/><area shape="rect" id="node50" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="936,511,1075,557"/><area shape="rect" id="node52" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="943,580,1068,627"/><area shape="rect" id="node54" href="../../dd/dac/a01008.html#a8a3422f518b3bfc4b4e2d16abde6ef0d" title="ripple::NetworkOPs\l::mapComplete" alt="" coords="937,649,1073,696"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aff2883c1a530f0236fb22abca68ab83e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::TransactionAcquire::onTimer </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>progress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d3d/a01110.html#a62757c176f89d10d432eaa1e0e9d06ad">ScopedLockType</a> &amp;&#160;</td>
          <td class="paramname"><em>peerSetLock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/d3d/a01110.html#ac0416d2dcd2e5eb8801f55b03f4875e1">ripple::PeerSet</a>.</p>

<p>Definition at line <a class="el" href="../../de/d38/a03064_source.html#l00081">81</a> of file <a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a>.</p>

<p>References <a class="el" href="../../de/d38/a03064_source.html#l00062">done()</a>, <a class="el" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90">ripple::Overlay::getActivePeers()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../de/da4/a03005_source.html#l00036">ripple::PeerSet::getHash()</a>, <a class="el" href="../../da/d96/a03004_source.html#l00187">ripple::PeerSet::getPeerCount()</a>, <a class="el" href="../../de/da4/a03005_source.html#l00051">ripple::PeerSet::getTimeouts()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, <a class="el" href="../../de/da4/a03005_source.html#l00145">ripple::PeerSet::mFailed</a>, <a class="el" href="../../de/da4/a03005_source.html#l00141">ripple::PeerSet::mHash</a>, <a class="el" href="../../de/da4/a03005_source.html#l00143">ripple::PeerSet::mTimeouts</a>, <a class="el" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee">ripple::Application::overlay()</a>, <a class="el" href="../../da/d96/a03004_source.html#l00055">ripple::PeerSet::peerHas()</a>, <a class="el" href="../../de/d38/a03064_source.html#l00140">trigger()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">bool</span> aggressive = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6">getTimeouts</a> () &gt; 10)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;Ten timeouts on TX set &quot;</span> &lt;&lt; <a class="code" href="../../d1/d3d/a01110.html#af4feb007aefaee406ca0cc8dc076ae31">getHash</a> ();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        psl.unlock();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="../../da/d74/a00099.html#af8a80d2747ba486d431294e36acd449a">Application::ScopedLockType</a> lock (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getMasterLock ());</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getOPs ().stillNeedTXSet (<a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>))</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;Still need it&quot;</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <a class="code" href="../../d1/d3d/a01110.html#ae9b6f50ad29c4a6838652f98d5cca7e3">mTimeouts</a> = 0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                aggressive = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        psl.lock();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">if</span> (!aggressive)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <a class="code" href="../../d1/d3d/a01110.html#a9a7d358bfb4c9ca39cbe143a270d6123">mFailed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="../../d0/dbc/a01704.html#ae4797477cdc277af74dc698f8d2b9105">done</a> ();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (aggressive || !<a class="code" href="../../d1/d3d/a01110.html#afacebbce37949c27d74cfff7cd0b8e84">getPeerCount</a> ())</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// out of peers</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;Out of peers for TX set &quot;</span> &lt;&lt; <a class="code" href="../../d1/d3d/a01110.html#af4feb007aefaee406ca0cc8dc076ae31">getHash</a> ();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="../../de/de6/a01063.html#ab31ecd9bdd548883e13ef848725264ab">Overlay::PeerSequence</a> peerList = <a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().<a class="code" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee">overlay</a> ().<a class="code" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90">getActivePeers</a> ();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        BOOST_FOREACH (<a class="code" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> <span class="keyword">const</span>&amp; peer, peerList)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">if</span> (peer-&gt;hasTxSet (<a class="code" href="../../d1/d3d/a01110.html#af4feb007aefaee406ca0cc8dc076ae31">getHash</a> ()))</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <a class="code" href="../../d1/d3d/a01110.html#a8b4b615fe7df1614e209da5ef5e94d2a">peerHas</a> (peer);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span> (!found)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            BOOST_FOREACH (<a class="code" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> <span class="keyword">const</span>&amp; peer, peerList)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <a class="code" href="../../d1/d3d/a01110.html#a8b4b615fe7df1614e209da5ef5e94d2a">peerHas</a> (peer);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../d4/d87/a03436.html#afc04d0d2aaea0945960c9fbe27fa19de">else</a> <a class="code" href="../../d4/d87/a03436.html#a6f17c6df7ce20ec52aecef2475cd4158">if</a> (!<a class="code" href="../../d1/d3d/a01110.html#ad7733986159c48a56d6e5049817a7c66">progress</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd">trigger</a> (Peer::ptr ());</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_aff2883c1a530f0236fb22abca68ab83e_cgraph.png" border="0" usemap="#d0/dbc/a01704_aff2883c1a530f0236fb22abca68ab83e_cgraph" alt=""/></div>
<map name="d0/dbc/a01704_aff2883c1a530f0236fb22abca68ab83e_cgraph" id="d0/dbc/a01704_aff2883c1a530f0236fb22abca68ab83e_cgraph">
<area shape="rect" id="node3" href="../../d0/dbc/a01704.html#ae4797477cdc277af74dc698f8d2b9105" title="ripple::TransactionAcquire\l::done" alt="" coords="459,298,632,345"/><area shape="rect" id="node7" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="955,359,1056,388"/><area shape="rect" id="node24" href="../../de/de6/a01063.html#a5b8ee783b77679fb2fad2543ab521a90" title="ripple::Overlay::getActive\lPeers" alt="" coords="229,625,397,671"/><area shape="rect" id="node27" href="../../d1/d3d/a01110.html#af4feb007aefaee406ca0cc8dc076ae31" title="ripple::PeerSet::getHash" alt="" coords="231,695,396,724"/><area shape="rect" id="node29" href="../../d1/d3d/a01110.html#afacebbce37949c27d74cfff7cd0b8e84" title="ripple::PeerSet::getPeer\lCount" alt="" coords="705,394,865,441"/><area shape="rect" id="node32" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6" title="ripple::PeerSet::getTimeouts" alt="" coords="452,751,639,780"/><area shape="rect" id="node34" href="../../da/d74/a00099.html#a0511c5e849c6735036d4667a72ff01ee" title="ripple::Application\l::overlay" alt="" coords="251,747,376,794"/><area shape="rect" id="node36" href="../../d1/d3d/a01110.html#a8b4b615fe7df1614e209da5ef5e94d2a" title="ripple::PeerSet::peerHas" alt="" coords="231,817,396,847"/><area shape="rect" id="node40" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd" title="ripple::TransactionAcquire\l::trigger" alt="" coords="227,505,400,551"/><area shape="rect" id="node5" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="700,291,871,320"/><area shape="rect" id="node11" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="723,221,848,267"/><area shape="rect" id="node13" href="../../d9/d9d/a03417.html#ab60dd3cb8f8d17b918ea9072bad6f551" title="ripple::TACompletionHandler" alt="" coords="691,117,880,147"/><area shape="rect" id="node9" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1132,350,1308,397"/><area shape="rect" id="node15" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="929,143,1081,190"/><area shape="rect" id="node18" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="936,213,1075,259"/><area shape="rect" id="node20" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="943,5,1068,51"/><area shape="rect" id="node22" href="../../dd/dac/a01008.html#a8a3422f518b3bfc4b4e2d16abde6ef0d" title="ripple::NetworkOPs\l::mapComplete" alt="" coords="937,74,1073,121"/><area shape="rect" id="node38" href="../../d1/d3d/a01110.html#a89b36ce44b243850b2ef063a470700d9" title="ripple::PeerSet::newPeer" alt="" coords="463,817,628,847"/><area shape="rect" id="node42" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1157,487,1283,534"/><area shape="rect" id="node46" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="471,697,620,727"/><area shape="rect" id="node49" href="../../df/d0b/a01372.html#a344c70ac6bbd1e865495841d638b7fdd" title="ripple::SHAMapNode\l::getRawString" alt="" coords="473,565,617,611"/><area shape="rect" id="node67" href="../../d1/d3d/a01110.html#a3d539d36401a5042d1363c450379bb43" title="ripple::PeerSet::sendRequest" alt="" coords="449,461,641,491"/><area shape="rect" id="node44" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1359,465,1508,495"/><area shape="rect" id="node51" href="../../df/d0b/a01372.html#ace328564a09fe8629e690586129fefbf" title="ripple::SHAMapNode\l::addIDRaw" alt="" coords="713,565,857,611"/><area shape="rect" id="node61" href="../../da/d61/a01350.html#a0fc02b8ef2f7112fb502175445e22566" title="ripple::Serializer\l::getString" alt="" coords="728,634,843,681"/><area shape="rect" id="node53" href="../../da/d61/a01350.html#a0a59bc79c929b9b01c3fd88ca54195f1" title="ripple::Serializer\l::add256" alt="" coords="948,426,1063,473"/><area shape="rect" id="node59" href="../../da/d61/a01350.html#a0344fccc7552038b51568aa4f93fca4e" title="ripple::Serializer\l::add8" alt="" coords="948,495,1063,542"/><area shape="rect" id="node56" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1147,435,1293,464"/><area shape="rect" id="node63" href="../../da/d61/a01350.html#ab9a75804693822b6f9177da1aa3cade4" title="ripple::Serializer\l::getDataPtr" alt="" coords="948,565,1063,611"/><area shape="rect" id="node65" href="../../da/d61/a01350.html#ac7bf5cce451c952933b2750d902d848c" title="ripple::Serializer\l::size" alt="" coords="948,634,1063,681"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac900d1a9a0ec0bad305ad08716eb0047"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::weak_ptr&lt; <a class="el" href="../../d1/d3d/a01110.html">PeerSet</a> &gt; ripple::TransactionAcquire::pmDowncast </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/d3d/a01110.html#a6e68dc9fd65061e94dd0de272ce354fc">ripple::PeerSet</a>.</p>

<p>Definition at line <a class="el" href="../../de/d38/a03064_source.html#l00135">135</a> of file <a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> boost::dynamic_pointer_cast&lt;<a class="code" href="../../d1/d3d/a01110.html#a9b86c0b971aab53ab66fee7a50ad35c0">PeerSet</a>&gt; (shared_from_this ());</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af5050201ff5162e27302513d989837c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d0c/a01368.html">SHAMapAddNode</a> ripple::TransactionAcquire::takeNodes </td>
          <td>(</td>
          <td class="paramtype">const std::list&lt; <a class="el" href="../../df/d0b/a01372.html">SHAMapNode</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>IDs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::list&lt; <a class="el" href="../../d9/d9d/a03417.html#a1b87ba4732cf1725393e8dd60bf73b0c">Blob</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d38/a03064_source.html#l00200">200</a> of file <a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a>.</p>

<p>References <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../de/da4/a03005_source.html#l00036">ripple::PeerSet::getHash()</a>, <a class="el" href="../../de/dae/a03028_source.html#l00099">ripple::SHAMapAddNode::invalid()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00029">ripple::lsDEBUG</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00032">ripple::lsERROR</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00031">ripple::lsWARNING</a>, <a class="el" href="../../de/da4/a03005_source.html#l00144">ripple::PeerSet::mComplete</a>, <a class="el" href="../../de/da4/a03005_source.html#l00145">ripple::PeerSet::mFailed</a>, <a class="el" href="../../d4/d44/a03065_source.html#l00051">mHaveRoot</a>, <a class="el" href="../../d4/d44/a03065_source.html#l00050">mMap</a>, <a class="el" href="../../de/da4/a03005_source.html#l00058">ripple::PeerSet::progress()</a>, <a class="el" href="../../dc/d23/a03041_source.html#l00030">ripple::snfWIRE</a>, <a class="el" href="../../de/d38/a03064_source.html#l00140">trigger()</a>, <a class="el" href="../../de/dae/a03028_source.html#l00095">ripple::SHAMapAddNode::useful()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#a5e8e26a4201b05c805959c7fc909ec84">mComplete</a>)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;TX set complete&quot;</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">return</span> SHAMapAddNode ();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#a9a7d358bfb4c9ca39cbe143a270d6123">mFailed</a>)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;TX set failed&quot;</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">return</span> SHAMapAddNode ();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span> (nodeIDs.empty ())</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/d0c/a01368.html#a3dc682b7185ec0834398b3aa2b2d0034">SHAMapAddNode::invalid</a> ();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        std::list&lt;SHAMapNode&gt;::const_iterator nodeIDit = nodeIDs.begin ();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        std::list&lt; Blob &gt;::const_iterator nodeDatait = data.begin ();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        ConsensusTransSetSF sf (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getTempNodeCache ());</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">while</span> (nodeIDit != nodeIDs.end ())</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordflow">if</span> (nodeIDit-&gt;isRoot ())</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d0/dbc/a01704.html#ac08d68ec10f8f01c3b91ed8e240a1adc">mHaveRoot</a>)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a031699c2a2c25288caf7c5c512da58eb">lsDEBUG</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;Got root TXS node, already have it&quot;</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>-&gt;addRootNode (<a class="code" href="../../d1/d3d/a01110.html#af4feb007aefaee406ca0cc8dc076ae31">getHash</a> (), *nodeDatait, <a class="code" href="../../d9/d9d/a03417.html#ac8683dfc227ea8c196fc4e4f2080e36da82251cdf5d561efb6b1838672e116253">snfWIRE</a>, <span class="keyword">nullptr</span>).isGood())</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;TX acquire got bad root node&quot;</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <a class="code" href="../../d0/dbc/a01704.html#ac08d68ec10f8f01c3b91ed8e240a1adc">mHaveRoot</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>-&gt;addKnownNode (*nodeIDit, *nodeDatait, &amp;sf).isGood())</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a4f9eb9b54b9bf0586ad6249697d4adde">lsWARNING</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;TX acquire got bad non-root node&quot;</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../dd/d0c/a01368.html#a3dc682b7185ec0834398b3aa2b2d0034">SHAMapAddNode::invalid</a> ();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            ++nodeIDit;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            ++nodeDatait;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd">trigger</a> (peer);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="../../d1/d3d/a01110.html#ad7733986159c48a56d6e5049817a7c66">progress</a> ();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d0c/a01368.html#a180f6dbffb287cdafd5d36c43919af7d">SHAMapAddNode::useful</a> ();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a2aa4cf81dadaf26c72546ae13129feea">lsERROR</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;Peer sends us junky transaction node data&quot;</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d0c/a01368.html#a3dc682b7185ec0834398b3aa2b2d0034">SHAMapAddNode::invalid</a> ();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_af5050201ff5162e27302513d989837c2_cgraph.png" border="0" usemap="#d0/dbc/a01704_af5050201ff5162e27302513d989837c2_cgraph" alt=""/></div>
<map name="d0/dbc/a01704_af5050201ff5162e27302513d989837c2_cgraph" id="d0/dbc/a01704_af5050201ff5162e27302513d989837c2_cgraph">
<area shape="rect" id="node3" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="955,17,1056,47"/><area shape="rect" id="node7" href="../../d1/d3d/a01110.html#af4feb007aefaee406ca0cc8dc076ae31" title="ripple::PeerSet::getHash" alt="" coords="231,440,396,469"/><area shape="rect" id="node9" href="../../dd/d0c/a01368.html#a3dc682b7185ec0834398b3aa2b2d0034" title="ripple::SHAMapAddNode\l::invalid" alt="" coords="229,493,397,539"/><area shape="rect" id="node13" href="../../d1/d3d/a01110.html#ad7733986159c48a56d6e5049817a7c66" title="ripple::PeerSet::progress" alt="" coords="231,632,396,661"/><area shape="rect" id="node15" href="../../d0/dbc/a01704.html#ada68c8c11f2c9292782989f1ed65fefd" title="ripple::TransactionAcquire\l::trigger" alt="" coords="227,359,400,406"/><area shape="rect" id="node65" href="../../dd/d0c/a01368.html#a180f6dbffb287cdafd5d36c43919af7d" title="ripple::SHAMapAddNode\l::useful" alt="" coords="229,562,397,609"/><area shape="rect" id="node5" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="1132,9,1308,55"/><area shape="rect" id="node11" href="../../dd/d0c/a01368.html#ad464fbfde2b828dd6f57d9f8c51c6111" title="ripple::SHAMapAddNode\l::SHAMapAddNode" alt="" coords="459,574,627,621"/><area shape="rect" id="node17" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="1157,338,1283,385"/><area shape="rect" id="node21" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="468,468,617,497"/><area shape="rect" id="node23" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6" title="ripple::PeerSet::getTimeouts" alt="" coords="449,521,636,551"/><area shape="rect" id="node25" href="../../df/d0b/a01372.html#a344c70ac6bbd1e865495841d638b7fdd" title="ripple::SHAMapNode\l::getRawString" alt="" coords="471,398,615,445"/><area shape="rect" id="node43" href="../../d1/d3d/a01110.html#a3d539d36401a5042d1363c450379bb43" title="ripple::PeerSet::sendRequest" alt="" coords="687,68,879,97"/><area shape="rect" id="node47" href="../../d0/dbc/a01704.html#ae4797477cdc277af74dc698f8d2b9105" title="ripple::TransactionAcquire\l::done" alt="" coords="456,217,629,263"/><area shape="rect" id="node19" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1359,377,1508,407"/><area shape="rect" id="node27" href="../../df/d0b/a01372.html#ace328564a09fe8629e690586129fefbf" title="ripple::SHAMapNode\l::addIDRaw" alt="" coords="711,398,855,445"/><area shape="rect" id="node37" href="../../da/d61/a01350.html#a0fc02b8ef2f7112fb502175445e22566" title="ripple::Serializer\l::getString" alt="" coords="725,537,840,583"/><area shape="rect" id="node29" href="../../da/d61/a01350.html#a0a59bc79c929b9b01c3fd88ca54195f1" title="ripple::Serializer\l::add256" alt="" coords="948,398,1063,445"/><area shape="rect" id="node35" href="../../da/d61/a01350.html#a0344fccc7552038b51568aa4f93fca4e" title="ripple::Serializer\l::add8" alt="" coords="948,467,1063,514"/><area shape="rect" id="node32" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="1147,408,1293,437"/><area shape="rect" id="node39" href="../../da/d61/a01350.html#ab9a75804693822b6f9177da1aa3cade4" title="ripple::Serializer\l::getDataPtr" alt="" coords="948,537,1063,583"/><area shape="rect" id="node41" href="../../da/d61/a01350.html#ac7bf5cce451c952933b2750d902d848c" title="ripple::Serializer\l::size" alt="" coords="948,606,1063,653"/><area shape="rect" id="node49" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="697,225,868,255"/><area shape="rect" id="node52" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="720,278,845,325"/><area shape="rect" id="node54" href="../../d9/d9d/a03417.html#ab60dd3cb8f8d17b918ea9072bad6f551" title="ripple::TACompletionHandler" alt="" coords="688,172,877,201"/><area shape="rect" id="node56" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="929,70,1081,117"/><area shape="rect" id="node59" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="936,139,1075,186"/><area shape="rect" id="node61" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="943,209,1068,255"/><area shape="rect" id="node63" href="../../dd/dac/a01008.html#a8a3422f518b3bfc4b4e2d16abde6ef0d" title="ripple::NetworkOPs\l::mapComplete" alt="" coords="937,278,1073,325"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ada68c8c11f2c9292782989f1ed65fefd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::TransactionAcquire::trigger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d17/a01098.html#a74554bf78a38b1c2c190b5b47c1955d4">Peer::ptr</a> const &amp;&#160;</td>
          <td class="paramname"><em>peer</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d38/a03064_source.html#l00140">140</a> of file <a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a>.</p>

<p>References <a class="el" href="../../dd/dfa/a02824_source.html#l00094">ripple::base_uint&lt; BITS &gt;::begin()</a>, <a class="el" href="../../de/d38/a03064_source.html#l00062">done()</a>, <a class="el" href="../../d9/da5/a02935_source.html#l01387">ripple::getApp()</a>, <a class="el" href="../../dd/d84/a03034_source.html#l00125">ripple::SHAMapNode::getRawString()</a>, <a class="el" href="../../de/da4/a03005_source.html#l00051">ripple::PeerSet::getTimeouts()</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00030">ripple::lsINFO</a>, <a class="el" href="../../d8/d4b/a03093_source.html#l00028">ripple::lsTRACE</a>, <a class="el" href="../../de/da4/a03005_source.html#l00144">ripple::PeerSet::mComplete</a>, <a class="el" href="../../de/da4/a03005_source.html#l00145">ripple::PeerSet::mFailed</a>, <a class="el" href="../../de/da4/a03005_source.html#l00141">ripple::PeerSet::mHash</a>, <a class="el" href="../../d4/d44/a03065_source.html#l00051">mHaveRoot</a>, <a class="el" href="../../d4/d44/a03065_source.html#l00050">mMap</a>, <a class="el" href="../../da/d96/a03004_source.html#l00154">ripple::PeerSet::sendRequest()</a>, <a class="el" href="../../dd/dfa/a02824_source.html#l00442">ripple::base_uint&lt; BITS &gt;::size()</a>, and <a class="el" href="../../dc/dc0/a03087_source.html#l00075">WriteLog</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d44/a03065_source.html#l00054">newPeer()</a>, <a class="el" href="../../de/d38/a03064_source.html#l00081">onTimer()</a>, and <a class="el" href="../../de/d38/a03064_source.html#l00200">takeNodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#a5e8e26a4201b05c805959c7fc909ec84">mComplete</a>)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;trigger after complete&quot;</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#a9a7d358bfb4c9ca39cbe143a270d6123">mFailed</a>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a275905728c3e58efd16146a7e25c5df6">lsINFO</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;trigger after fail&quot;</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dbc/a01704.html#ac08d68ec10f8f01c3b91ed8e240a1adc">mHaveRoot</a>)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="../../dc/dc0/a03087.html#a5308b5072b82addfc9132f3aa5d0e45f">WriteLog</a> (<a class="code" href="../../d9/d9d/a03417.html#afc7159a6877417e38472fbbd425f2244a994075b2b57b391e5ba833769ac13487">lsTRACE</a>, <a class="code" href="../../d0/dbc/a01704.html#a21b3049cf56f2d919de8636243307d42">TransactionAcquire</a>) &lt;&lt; <span class="stringliteral">&quot;TransactionAcquire::trigger &quot;</span> &lt;&lt; (peer ? <span class="stringliteral">&quot;havePeer&quot;</span> : <span class="stringliteral">&quot;noPeer&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; no root&quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        protocol::TMGetLedger tmGL;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        tmGL.set_ledgerhash (<a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>.<a class="code" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d">begin</a> (), <a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>.<a class="code" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544">size</a> ());</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        tmGL.set_itype (protocol::liTS_CANDIDATE);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6">getTimeouts</a> () != 0)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            tmGL.set_querytype (protocol::qtINDIRECT);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        * (tmGL.add_nodeids ()) = SHAMapNode ().getRawString ();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="../../d1/d3d/a01110.html#a3d539d36401a5042d1363c450379bb43">sendRequest</a> (tmGL, peer);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        std::vector&lt;SHAMapNode&gt; nodeIDs;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        std::vector&lt;uint256&gt; nodeHashes;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">// VFALCO TODO Use a dependency injection on the temp node cache</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        ConsensusTransSetSF sf (<a class="code" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70">getApp</a>().getTempNodeCache ());</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>-&gt;getMissingNodes (nodeIDs, nodeHashes, 256, &amp;sf);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (nodeIDs.empty ())</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/dbc/a01704.html#aa930f51d4cc46a2f22184c40ce784145">mMap</a>-&gt;isValid ())</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <a class="code" href="../../d1/d3d/a01110.html#a5e8e26a4201b05c805959c7fc909ec84">mComplete</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <a class="code" href="../../d1/d3d/a01110.html#a9a7d358bfb4c9ca39cbe143a270d6123">mFailed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <a class="code" href="../../d0/dbc/a01704.html#ae4797477cdc277af74dc698f8d2b9105">done</a> ();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        protocol::TMGetLedger tmGL;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        tmGL.set_ledgerhash (<a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>.<a class="code" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d">begin</a> (), <a class="code" href="../../d1/d3d/a01110.html#ab1128568df615b4bd9c1a2dc1319c03e">mHash</a>.<a class="code" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544">size</a> ());</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        tmGL.set_itype (protocol::liTS_CANDIDATE);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6">getTimeouts</a> () != 0)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            tmGL.set_querytype (protocol::qtINDIRECT);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        BOOST_FOREACH (SHAMapNode &amp; it, nodeIDs)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            * (tmGL.add_nodeids ()) = it.getRawString ();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="../../d1/d3d/a01110.html#a3d539d36401a5042d1363c450379bb43">sendRequest</a> (tmGL, peer);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_cgraph.png" border="0" usemap="#d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_cgraph" alt=""/></div>
<map name="d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_cgraph" id="d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_cgraph">
<area shape="rect" id="node3" href="../../d7/d9a/a00152.html#a05af5cdcc33627cb359debe028ab675d" title="ripple::base_uint::\lbegin" alt="" coords="936,569,1061,616"/><area shape="rect" id="node7" href="../../d0/dbc/a01704.html#ae4797477cdc277af74dc698f8d2b9105" title="ripple::TransactionAcquire\l::done" alt="" coords="237,194,411,241"/><area shape="rect" id="node11" href="../../d9/d9d/a03417.html#a41dc315618e2f1d4be04cf094a642d70" title="ripple::getApp" alt="" coords="733,39,835,68"/><area shape="rect" id="node29" href="../../df/d0b/a01372.html#a344c70ac6bbd1e865495841d638b7fdd" title="ripple::SHAMapNode\l::getRawString" alt="" coords="252,404,396,450"/><area shape="rect" id="node47" href="../../d1/d3d/a01110.html#ac8b6048a0b05a11da32d1657dcb98fd6" title="ripple::PeerSet::getTimeouts" alt="" coords="231,474,417,503"/><area shape="rect" id="node49" href="../../d1/d3d/a01110.html#a3d539d36401a5042d1363c450379bb43" title="ripple::PeerSet::sendRequest" alt="" coords="228,91,420,120"/><area shape="rect" id="node52" href="../../d7/d9a/a00152.html#a463054abe1fe73a6f2d2dd9ecc9fb544" title="ripple::base_uint::size" alt="" coords="249,698,399,727"/><area shape="rect" id="node5" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="1137,547,1287,576"/><area shape="rect" id="node9" href="../../dc/d0c/a00783.html#a0e6d017b056c57465c9d72f928e3271e" title="ripple::JobQueue::addJob" alt="" coords="479,142,649,171"/><area shape="rect" id="node15" href="../../da/d74/a00099.html#a860be08979e27d8c6f37f722f996ba6c" title="ripple::Application\l::getJobQueue" alt="" coords="501,194,627,241"/><area shape="rect" id="node17" href="../../d9/d9d/a03417.html#ab60dd3cb8f8d17b918ea9072bad6f551" title="ripple::TACompletionHandler" alt="" coords="469,264,659,294"/><area shape="rect" id="node13" href="../../d4/d3a/a00101.html#a96693896ee8bf0b18686bce1d0559d95" title="ripple::ApplicationImpBase\l::getInstance" alt="" coords="911,30,1087,77"/><area shape="rect" id="node19" href="../../d8/d86/a00703.html#aa8378c07e914d43964d816ee1ac8d1dd" title="ripple::InboundLedgers\l::dropLedger" alt="" coords="708,230,860,277"/><area shape="rect" id="node22" href="../../da/d74/a00099.html#a6d349a4ada03689eae062c0399762dad" title="ripple::Application\l::getInboundLedgers" alt="" coords="715,300,853,346"/><area shape="rect" id="node24" href="../../da/d74/a00099.html#a7c963aa5c47180b24897ff6b5622e5bc" title="ripple::Application\l::getOPs" alt="" coords="721,92,847,138"/><area shape="rect" id="node26" href="../../dd/dac/a01008.html#a8a3422f518b3bfc4b4e2d16abde6ef0d" title="ripple::NetworkOPs\l::mapComplete" alt="" coords="716,161,852,208"/><area shape="rect" id="node31" href="../../df/d0b/a01372.html#ace328564a09fe8629e690586129fefbf" title="ripple::SHAMapNode\l::addIDRaw" alt="" coords="492,508,636,554"/><area shape="rect" id="node41" href="../../da/d61/a01350.html#a0fc02b8ef2f7112fb502175445e22566" title="ripple::Serializer\l::getString" alt="" coords="507,404,621,450"/><area shape="rect" id="node33" href="../../da/d61/a01350.html#a0a59bc79c929b9b01c3fd88ca54195f1" title="ripple::Serializer\l::add256" alt="" coords="727,508,841,554"/><area shape="rect" id="node39" href="../../da/d61/a01350.html#a0344fccc7552038b51568aa4f93fca4e" title="ripple::Serializer\l::add8" alt="" coords="727,577,841,624"/><area shape="rect" id="node36" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="925,516,1072,546"/><area shape="rect" id="node43" href="../../da/d61/a01350.html#ab9a75804693822b6f9177da1aa3cade4" title="ripple::Serializer\l::getDataPtr" alt="" coords="727,369,841,416"/><area shape="rect" id="node45" href="../../da/d61/a01350.html#ac7bf5cce451c952933b2750d902d848c" title="ripple::Serializer\l::size" alt="" coords="727,438,841,485"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_icgraph.png" border="0" usemap="#d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_icgraph" alt=""/></div>
<map name="d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_icgraph" id="d0/dbc/a01704_ada68c8c11f2c9292782989f1ed65fefd_icgraph">
<area shape="rect" id="node3" href="../../d0/dbc/a01704.html#aa760936e4317bbf5cfc4167ea66f22f6" title="ripple::TransactionAcquire\l::newPeer" alt="" coords="227,5,400,51"/><area shape="rect" id="node5" href="../../d0/dbc/a01704.html#aff2883c1a530f0236fb22abca68ab83e" title="ripple::TransactionAcquire\l::onTimer" alt="" coords="227,74,400,121"/><area shape="rect" id="node7" href="../../d0/dbc/a01704.html#af5050201ff5162e27302513d989837c2" title="ripple::TransactionAcquire\l::takeNodes" alt="" coords="227,143,400,190"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ac08d68ec10f8f01c3b91ed8e240a1adc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::TransactionAcquire::mHaveRoot</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d44/a03065_source.html#l00051">51</a> of file <a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d38/a03064_source.html#l00200">takeNodes()</a>, and <a class="el" href="../../de/d38/a03064_source.html#l00140">trigger()</a>.</p>

</div>
</div>
<a class="anchor" id="aa930f51d4cc46a2f22184c40ce784145"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/dfe/a01366.html#a863e0d49cf8941071ae4a0b0e4d44eca">SHAMap::pointer</a> ripple::TransactionAcquire::mMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d44/a03065_source.html#l00050">50</a> of file <a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d38/a03064_source.html#l00062">done()</a>, <a class="el" href="../../d4/d44/a03065_source.html#l00041">getMap()</a>, <a class="el" href="../../de/d38/a03064_source.html#l00200">takeNodes()</a>, <a class="el" href="../../de/d38/a03064_source.html#l00037">TransactionAcquire()</a>, and <a class="el" href="../../de/d38/a03064_source.html#l00140">trigger()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rippled/src/ripple_app/tx/<a class="el" href="../../d4/d44/a03065_source.html">TransactionAcquire.h</a></li>
<li>rippled/src/ripple_app/tx/<a class="el" href="../../de/d38/a03064_source.html">TransactionAcquire.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d9d/a03417.html">ripple</a></li><li class="navelem"><a class="el" href="../../d0/dbc/a01704.html">TransactionAcquire</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:13 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
