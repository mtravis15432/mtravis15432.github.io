<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: ripple::core::OfferStream Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d0/d22/a01049.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../da/d4d/a07967.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::core::OfferStream Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ripple::core::OfferStream:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/dd7/a07968.png" border="0" usemap="#ripple_1_1core_1_1_offer_stream_coll__map" alt="Collaboration graph"/></div>
<map name="ripple_1_1core_1_1_offer_stream_coll__map" id="ripple_1_1core_1_1_offer_stream_coll__map">
<area shape="rect" id="node2" href="../../dd/df3/a00219.html" title="ripple::core::BookTip" alt="" coords="512,60,653,89"/><area shape="rect" id="node4" href="../../d0/d4e/a01741.html" title="ripple::uint256" alt="" coords="267,60,368,89"/><area shape="rect" id="node6" href="../../d7/d9a/a00152.html" title="base_uint256" alt="" coords="25,60,124,89"/><area shape="rect" id="node8" href="../../d7/d46/a01045.html" title="ripple::core::Offer" alt="" coords="521,113,644,143"/><area shape="rect" id="node10" href="../../d5/d16/a01154.html" title="ripple::core::Quality" alt="" coords="251,113,384,143"/><area shape="rect" id="node12" href="../../d2/d1d/a01277.html" title="ripple::RippleBookType\l\&lt; ByValue \&gt;" alt="" coords="504,166,661,213"/><area shape="rect" id="node14" href="../../df/d0c/a00788.html" title="beast::Journal" alt="" coords="531,236,635,265"/><area shape="rect" id="node16" href="../../df/d84/a01408.html" title="beast::Journal::Sink" alt="" coords="5,235,144,264"/><area shape="rect" id="node18" href="../../d4/d2c/a01575.html" title="beast::Journal::Stream" alt="" coords="240,296,395,325"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acfdc5be8797f1223fccb909e63fd909e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#acfdc5be8797f1223fccb909e63fd909e">OfferStream</a> (<a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;<a class="el" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>, <a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;<a class="el" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>, <a class="el" href="../../d1/deb/a03418.html#ae2f9fec5a2385c7f5e9fad26fa332c67">BookRef</a> <a class="el" href="../../d0/d22/a01049.html#a8abeebe8648b7106b34b05812e38c4ca">book</a>, <a class="el" href="../../d2/d04/a00281.html#aa96892110e0d37be7d6948401eaa37fd">Clock::time_point</a> when, <a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> journal)</td></tr>
<tr class="separator:acfdc5be8797f1223fccb909e63fd909e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78dda46f1ab42d4de6cfcccef8b9c550"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a> () noexcept</td></tr>
<tr class="separator:a78dda46f1ab42d4de6cfcccef8b9c550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add65c742e84a0f805e107e2ff80ac684"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a> () noexcept</td></tr>
<tr class="separator:add65c742e84a0f805e107e2ff80ac684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abeebe8648b7106b34b05812e38c4ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/deb/a03418.html#a219a5f675ae2836beb6ec54d8c522e25">Book</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a8abeebe8648b7106b34b05812e38c4ca">book</a> () const noexcept</td></tr>
<tr class="separator:a8abeebe8648b7106b34b05812e38c4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4810288f0a1b0ad7152c5a8500dad53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#af4810288f0a1b0ad7152c5a8500dad53">dir</a> () const noexcept</td></tr>
<tr class="separator:af4810288f0a1b0ad7152c5a8500dad53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6813c5f12000303a5dc230d1d7c0e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d46/a01045.html">Offer</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a4a6813c5f12000303a5dc230d1d7c0e5">tip</a> () const </td></tr>
<tr class="separator:a4a6813c5f12000303a5dc230d1d7c0e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e73441cbdbd8cfcc418bd1bb6beff57"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a1e73441cbdbd8cfcc418bd1bb6beff57">step</a> ()</td></tr>
<tr class="separator:a1e73441cbdbd8cfcc418bd1bb6beff57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a895537e29c2694d04facb31ae324599e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a895537e29c2694d04facb31ae324599e">fill</a> (<a class="el" href="../../d1/dc1/a00092.html">Amounts</a> const &amp;remaining_funds)</td></tr>
<tr class="separator:a895537e29c2694d04facb31ae324599e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a50b81c0ed8e45a60ea8613eac52424ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a50b81c0ed8e45a60ea8613eac52424ab">erase</a> (<a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;<a class="el" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>)</td></tr>
<tr class="separator:a50b81c0ed8e45a60ea8613eac52424ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a4dc7ea5738db8b69683f81a0dfd72955"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a></td></tr>
<tr class="separator:a4dc7ea5738db8b69683f81a0dfd72955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b150a55d35dd1cff8ad583668a36c70"><td class="memItemLeft" align="right" valign="top">std::reference_wrapper<br class="typebreak"/>
&lt; <a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a7b150a55d35dd1cff8ad583668a36c70">m_view</a></td></tr>
<tr class="separator:a7b150a55d35dd1cff8ad583668a36c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512b00067a4157584b01e60d84b4299f"><td class="memItemLeft" align="right" valign="top">std::reference_wrapper<br class="typebreak"/>
&lt; <a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a512b00067a4157584b01e60d84b4299f">m_view_cancel</a></td></tr>
<tr class="separator:a512b00067a4157584b01e60d84b4299f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c1f1f3f66fe20c2f96467ceb333c23e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/deb/a03418.html#a219a5f675ae2836beb6ec54d8c522e25">Book</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a5c1f1f3f66fe20c2f96467ceb333c23e">m_book</a></td></tr>
<tr class="separator:a5c1f1f3f66fe20c2f96467ceb333c23e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b7f1d4587a937d0e6c40292ac948971"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d04/a00281.html#aa96892110e0d37be7d6948401eaa37fd">Clock::time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a3b7f1d4587a937d0e6c40292ac948971">m_when</a></td></tr>
<tr class="separator:a3b7f1d4587a937d0e6c40292ac948971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be0934cfd3bdeaed70e41d97305473b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/df3/a00219.html">BookTip</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a></td></tr>
<tr class="separator:a5be0934cfd3bdeaed70e41d97305473b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9156b1865a5015afb1847c0f7f6103a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d46/a01045.html">Offer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a></td></tr>
<tr class="separator:a9156b1865a5015afb1847c0f7f6103a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Presents and consumes the offers in an order book.</p>
<p>Two <code>LedgerView</code> objects accumulate changes to the ledger. <code>view</code> is applied when the calling transaction succeeds. If the calling transaction fails, then <code>view_cancel</code> is applied.</p>
<p>Certain invalid offers are automatically removed:</p>
<ul>
<li>Offers with missing ledger entries</li>
<li>Offers that expired</li>
<li>Offers found unfunded: An offer is found unfunded when the corresponding balance is zero and the caller has not modified the balance. This is accomplished by also looking up the balance in the cancel view.</li>
</ul>
<p>When an offer is removed, it is removed from both views. This grooms the order book regardless of whether or not the transaction is successful.</p>
<p>TODO: Remove offers belonging to the taker </p>

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00055">55</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acfdc5be8797f1223fccb909e63fd909e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ripple::core::OfferStream::OfferStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;&#160;</td>
          <td class="paramname"><em>view</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;&#160;</td>
          <td class="paramname"><em>view_cancel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/deb/a03418.html#ae2f9fec5a2385c7f5e9fad26fa332c67">BookRef</a>&#160;</td>
          <td class="paramname"><em>book</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d04/a00281.html#aa96892110e0d37be7d6948401eaa37fd">Clock::time_point</a>&#160;</td>
          <td class="paramname"><em>when</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a>&#160;</td>
          <td class="paramname"><em>journal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00109">109</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        : <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a> (journal)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        , <a class="code" href="../../d0/d22/a01049.html#a7b150a55d35dd1cff8ad583668a36c70">m_view</a> (<a class="code" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        , <a class="code" href="../../d0/d22/a01049.html#a512b00067a4157584b01e60d84b4299f">m_view_cancel</a> (<a class="code" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        , <a class="code" href="../../d0/d22/a01049.html#a5c1f1f3f66fe20c2f96467ceb333c23e">m_book</a> (<a class="code" href="../../d0/d22/a01049.html#a8abeebe8648b7106b34b05812e38c4ca">book</a>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        , <a class="code" href="../../d0/d22/a01049.html#a3b7f1d4587a937d0e6c40292ac948971">m_when</a> (when)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        , <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a> (<a class="code" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>, <a class="code" href="../../d0/d22/a01049.html#a8abeebe8648b7106b34b05812e38c4ca">book</a>)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8abeebe8648b7106b34b05812e38c4ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/deb/a03418.html#a219a5f675ae2836beb6ec54d8c522e25">Book</a> const&amp; ripple::core::OfferStream::book </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00133">133</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>References <a class="el" href="../../d2/d80/a02875_source.html#l00061">m_book</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/d22/a01049.html#a5c1f1f3f66fe20c2f96467ceb333c23e">m_book</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af4810288f0a1b0ad7152c5a8500dad53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d4e/a01741.html">uint256</a> const&amp; ripple::core::OfferStream::dir </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00139">139</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>References <a class="el" href="../../d9/dcc/a02872_source.html#l00068">ripple::core::BookTip::dir()</a>, and <a class="el" href="../../d2/d80/a02875_source.html#l00063">m_tip</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262">dir</a>();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d22/a01049_af4810288f0a1b0ad7152c5a8500dad53_cgraph.png" border="0" usemap="#d0/d22/a01049_af4810288f0a1b0ad7152c5a8500dad53_cgraph" alt=""/></div>
<map name="d0/d22/a01049_af4810288f0a1b0ad7152c5a8500dad53_cgraph" id="d0/d22/a01049_af4810288f0a1b0ad7152c5a8500dad53_cgraph">
<area shape="rect" id="node3" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262" title="ripple::core::BookTip::dir" alt="" coords="241,5,404,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a50b81c0ed8e45a60ea8613eac52424ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ripple::core::OfferStream::erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a> &amp;&#160;</td>
          <td class="paramname"><em>view</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00069">69</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>References <a class="el" href="../../d9/dcc/a02872_source.html#l00068">ripple::core::BookTip::dir()</a>, <a class="el" href="../../d4/db9/a02918_source.html#l00136">ripple::LedgerEntrySet::entryCache()</a>, <a class="el" href="../../d4/db9/a02918_source.html#l00199">ripple::LedgerEntrySet::entryModify()</a>, <a class="el" href="../../dd/d07/a02132_source.html#l00247">beast::Journal::error</a>, <a class="el" href="../../d9/dcc/a02872_source.html#l00074">ripple::core::BookTip::index()</a>, <a class="el" href="../../d0/d08/a03184_source.html#l00049">ripple::ltDIR_NODE</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00058">m_journal</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00063">m_tip</a>, and <a class="el" href="../../dd/d07/a02132_source.html#l00243">beast::Journal::trace</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00162">step()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">// VFALCO NOTE</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">//      This should be using LedgerView::dirDelete, which will</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="comment">//      correctly remove the directory if its the last entry.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">//      Unfortunately this is a protocol breaking change.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">auto</span> p (<a class="code" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>.<a class="code" href="../../d0/d08/a00832.html#ad13594cf847a6c56ef479ee44ae3c329">entryCache</a> (<a class="code" href="../../d8/dbb/a03480.html#ggaf6e0324b257fc9992b83ecf827c2a07ba1ca6f5da9e86f814af3d6f8b3631ebe8">ltDIR_NODE</a>, <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262">dir</a>()));</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">if</span> (p == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a754a7a96d490fbc7f53f69572b9c1514">error</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a754a7a96d490fbc7f53f69572b9c1514">error</a> &lt;&lt;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <span class="stringliteral">&quot;Missing directory &quot;</span> &lt;&lt; <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262">dir</a>() &lt;&lt;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="stringliteral">&quot; for offer &quot;</span> &lt;&lt; <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#a946656d1cae252176c0205485d660bcf">index</a>();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keyword">auto</span> v (p-&gt;getFieldV256 (sfIndexes));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keyword">auto</span>&amp; x (v.peekValue());</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keyword">auto</span> it (std::find (x.begin(), x.end(), <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#a946656d1cae252176c0205485d660bcf">index</a>()));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span> (it == x.end())</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a754a7a96d490fbc7f53f69572b9c1514">error</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a754a7a96d490fbc7f53f69572b9c1514">error</a> &lt;&lt;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <span class="stringliteral">&quot;Missing offer &quot;</span> &lt;&lt; <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#a946656d1cae252176c0205485d660bcf">index</a>() &lt;&lt;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <span class="stringliteral">&quot; for directory &quot;</span> &lt;&lt; <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262">dir</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        x.erase (it);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        p-&gt;setFieldV256 (sfIndexes, v);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>.<a class="code" href="../../d0/d08/a00832.html#a566a4d723aabbf98f55afc88f9159b18">entryModify</a> (p);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a> &lt;&lt;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="stringliteral">&quot;Missing offer &quot;</span> &lt;&lt; <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#a946656d1cae252176c0205485d660bcf">index</a>() &lt;&lt;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <span class="stringliteral">&quot; removed from directory &quot;</span> &lt;&lt; <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262">dir</a>();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_cgraph.png" border="0" usemap="#d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_cgraph" alt=""/></div>
<map name="d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_cgraph" id="d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_cgraph">
<area shape="rect" id="node3" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262" title="ripple::core::BookTip::dir" alt="" coords="220,5,383,35"/><area shape="rect" id="node5" href="../../d0/d08/a00832.html#ad13594cf847a6c56ef479ee44ae3c329" title="ripple::LedgerEntrySet\l::entryCache" alt="" coords="227,58,376,105"/><area shape="rect" id="node7" href="../../d0/d08/a00832.html#a566a4d723aabbf98f55afc88f9159b18" title="ripple::LedgerEntrySet\l::entryModify" alt="" coords="227,127,376,174"/><area shape="rect" id="node9" href="../../dd/df3/a00219.html#a946656d1cae252176c0205485d660bcf" title="ripple::core::BookTip\l::index" alt="" coords="231,197,372,243"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_icgraph.png" border="0" usemap="#d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_icgraph" alt=""/></div>
<map name="d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_icgraph" id="d0/d22/a01049_a50b81c0ed8e45a60ea8613eac52424ab_icgraph">
<area shape="rect" id="node3" href="../../d0/d22/a01049.html#a1e73441cbdbd8cfcc418bd1bb6beff57" title="ripple::core::OfferStream\l::step" alt="" coords="219,5,384,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a895537e29c2694d04facb31ae324599e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::core::OfferStream::fill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc1/a00092.html">Amounts</a> const &amp;&#160;</td>
          <td class="paramname"><em>remaining_funds</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates the offer to reflect remaining funds. The caller is responsible for following all the rounding rules. The offer will be considered fully consumed if either the in or the out amount is zero. </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> If the offer had no funds remaining. </dd></dl>

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00263">263</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">// Erase the offer if it is fully consumed (in==0 || out==0)</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// This is the same as becoming unfunded</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e73441cbdbd8cfcc418bd1bb6beff57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ripple::core::OfferStream::step </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advance to the next valid offer. This automatically removes:</p>
<ul>
<li>Offers with missing ledger entries</li>
<li>Offers found unfunded</li>
<li>expired offers <dl class="section return"><dt>Returns</dt><dd><code>true</code> if there is a valid offer. </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00162">162</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>References <a class="el" href="../../d7/d13/a02873_source.html#l00070">ripple::core::Offer::account()</a>, <a class="el" href="../../d7/d13/a02873_source.html#l00079">ripple::core::Offer::amount()</a>, <a class="el" href="../../d9/dcc/a02872_source.html#l00086">ripple::core::BookTip::entry()</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00069">erase()</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00058">m_journal</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00064">m_offer</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00063">m_tip</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00062">m_when</a>, <a class="el" href="../../d4/db9/a02918_source.html#l01096">ripple::LedgerEntrySet::offerDelete()</a>, <a class="el" href="../../db/d08/a02871_source.html#l00046">ripple::core::Amounts::out</a>, <a class="el" href="../../d9/dcc/a02872_source.html#l00080">ripple::core::BookTip::quality()</a>, <a class="el" href="../../d9/dcc/a02872_source.html#l00096">ripple::core::BookTip::step()</a>, <a class="el" href="../../dd/d07/a02132_source.html#l00243">beast::Journal::trace</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00121">view()</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00127">view_cancel()</a>, and <a class="el" href="../../dd/d07/a02132_source.html#l00246">beast::Journal::warning</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment">// Modifying the order or logic of these</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">// operations causes a protocol breaking change.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="comment">// BookTip::step deletes the current offer from the view before</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="comment">// advancing to the next (unless the ledger entry is missing).</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">if</span> (! <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#a5ef802b7e2bdcc2a922b627804428ca3">step</a>())</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <a class="code" href="../../dc/d54/a01344.html#abf05184c020b05e80bdf996c9bee96eb">SLE::pointer</a> <span class="keyword">const</span>&amp; entry (<a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#a69dc34b0e8513de5a991c8b31af7c4d7">entry</a>());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="comment">// Remove if missing</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">if</span> (! entry)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#a50b81c0ed8e45a60ea8613eac52424ab">erase</a> (<a class="code" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>());</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#a50b81c0ed8e45a60ea8613eac52424ab">erase</a> (<a class="code" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>());</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="comment">// Remove if expired</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span> (entry-&gt;isFieldPresent (sfExpiration) &amp;&amp;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                entry-&gt;getFieldU32 (sfExpiration) &lt;= <a class="code" href="../../d0/d22/a01049.html#a3b7f1d4587a937d0e6c40292ac948971">m_when</a>)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>().<a class="code" href="../../d0/d08/a00832.html#a47e828204b1fc11c80899fadd55f4c63">offerDelete</a> (entry-&gt;getIndex());</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a> &lt;&lt;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <span class="stringliteral">&quot;Removing expired offer &quot;</span> &lt;&lt; entry-&gt;getIndex();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a> = Offer (entry, <a class="code" href="../../d0/d22/a01049.html#a5be0934cfd3bdeaed70e41d97305473b">m_tip</a>.<a class="code" href="../../dd/df3/a00219.html#ab32cc3db3c8d3ef09ea042034ab5fa02">quality</a>());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            Amounts <span class="keyword">const</span> amount (<a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a>.<a class="code" href="../../d7/d46/a01045.html#a8d8b16273568621674eed0abaed78608">amount</a>());</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="comment">// Remove if either amount is zero</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">if</span> (amount.empty())</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>().<a class="code" href="../../d0/d08/a00832.html#a47e828204b1fc11c80899fadd55f4c63">offerDelete</a> (entry-&gt;getIndex());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a876412c0a487a7a8840b1556cc04cb57">warning</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#a876412c0a487a7a8840b1556cc04cb57">warning</a> &lt;&lt;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    <span class="stringliteral">&quot;Removing bad offer &quot;</span> &lt;&lt; entry-&gt;getIndex();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a> = Offer{};</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="comment">// Calculate owner funds</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="comment">// VFALCO NOTE The calling code also checks the funds,</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">//             how expensive is looking up the funds twice?</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="../../d1/deb/a03418.html#a2b4afff5229fc018caed0ebdc7765740">Amount</a> <span class="keyword">const</span> owner_funds (<a class="code" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550">view</a>().accountFunds (</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a>.<a class="code" href="../../d7/d46/a01045.html#a0a06d9159e9f0c690aa12f7aa9c87d99">account</a>(), <a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a>.<a class="code" href="../../d7/d46/a01045.html#a8d8b16273568621674eed0abaed78608">amount</a>().<a class="code" href="../../d1/dc1/a00092.html#ac34d16f45b1f7ad706177621e2d726f6">out</a>));</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">// Check for unfunded offer</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">if</span> (owner_funds &lt;= zero)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="comment">// If the owner&#39;s balance in the pristine view is the same,</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="comment">// we haven&#39;t modified the balance and therefore the</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="comment">// offer is &quot;found unfunded&quot; versus &quot;became unfunded&quot;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>().accountFunds (<a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a>.<a class="code" href="../../d7/d46/a01045.html#a0a06d9159e9f0c690aa12f7aa9c87d99">account</a>(),</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a>.<a class="code" href="../../d7/d46/a01045.html#a8d8b16273568621674eed0abaed78608">amount</a>().<a class="code" href="../../d1/dc1/a00092.html#ac34d16f45b1f7ad706177621e2d726f6">out</a>) == owner_funds)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <a class="code" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>().<a class="code" href="../../d0/d08/a00832.html#a47e828204b1fc11c80899fadd55f4c63">offerDelete</a> (entry-&gt;getIndex());</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a> &lt;&lt;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        <span class="stringliteral">&quot;Removing unfunded offer &quot;</span> &lt;&lt; entry-&gt;getIndex();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a> &lt;&lt;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                        <span class="stringliteral">&quot;Removing became unfunded offer &quot;</span> &lt;&lt; entry-&gt;getIndex();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a> = Offer{};</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor"></span>            <span class="comment">// Remove if its our own offer</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="comment">// VFALCO NOTE We might not want this for payments</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">if</span> (m_account == owner)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                <a class="code" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684">view_cancel</a>().<a class="code" href="../../d0/d08/a00832.html#a47e828204b1fc11c80899fadd55f4c63">offerDelete</a> (entry-&gt;getIndex());</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a>) <a class="code" href="../../d0/d22/a01049.html#a4dc7ea5738db8b69683f81a0dfd72955">m_journal</a>.<a class="code" href="../../df/d0c/a00788.html#af70bab6f3469226387fb6018e14d83fc">trace</a> &lt;&lt;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                    <span class="stringliteral">&quot;Removing self offer &quot;</span> &lt;&lt; entry-&gt;getIndex();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d22/a01049_a1e73441cbdbd8cfcc418bd1bb6beff57_cgraph.png" border="0" usemap="#d0/d22/a01049_a1e73441cbdbd8cfcc418bd1bb6beff57_cgraph" alt=""/></div>
<map name="d0/d22/a01049_a1e73441cbdbd8cfcc418bd1bb6beff57_cgraph" id="d0/d22/a01049_a1e73441cbdbd8cfcc418bd1bb6beff57_cgraph">
<area shape="rect" id="node3" href="../../d7/d46/a01045.html#a0a06d9159e9f0c690aa12f7aa9c87d99" title="ripple::core::Offer\l::account" alt="" coords="240,5,363,51"/><area shape="rect" id="node5" href="../../d7/d46/a01045.html#a8d8b16273568621674eed0abaed78608" title="ripple::core::Offer\l::amount" alt="" coords="240,74,363,121"/><area shape="rect" id="node7" href="../../dd/df3/a00219.html#a69dc34b0e8513de5a991c8b31af7c4d7" title="ripple::core::BookTip\l::entry" alt="" coords="231,143,372,190"/><area shape="rect" id="node9" href="../../d0/d22/a01049.html#a50b81c0ed8e45a60ea8613eac52424ab" title="ripple::core::OfferStream\l::erase" alt="" coords="219,213,384,259"/><area shape="rect" id="node19" href="../../d0/d08/a00832.html#a47e828204b1fc11c80899fadd55f4c63" title="ripple::LedgerEntrySet\l::offerDelete" alt="" coords="441,301,591,347"/><area shape="rect" id="node22" href="../../dd/df3/a00219.html#ab32cc3db3c8d3ef09ea042034ab5fa02" title="ripple::core::BookTip\l::quality" alt="" coords="231,402,372,449"/><area shape="rect" id="node30" href="../../dd/df3/a00219.html#a5ef802b7e2bdcc2a922b627804428ca3" title="ripple::core::BookTip\l::step" alt="" coords="231,333,372,379"/><area shape="rect" id="node37" href="../../d0/d22/a01049.html#a78dda46f1ab42d4de6cfcccef8b9c550" title="ripple::core::OfferStream\l::view" alt="" coords="219,471,384,518"/><area shape="rect" id="node39" href="../../d0/d22/a01049.html#add65c742e84a0f805e107e2ff80ac684" title="ripple::core::OfferStream\l::view_cancel" alt="" coords="219,541,384,587"/><area shape="rect" id="node11" href="../../dd/df3/a00219.html#aa3f901d35235733bb79934dc92df8262" title="ripple::core::BookTip::dir" alt="" coords="435,248,597,277"/><area shape="rect" id="node13" href="../../d0/d08/a00832.html#ad13594cf847a6c56ef479ee44ae3c329" title="ripple::LedgerEntrySet\l::entryCache" alt="" coords="649,301,799,347"/><area shape="rect" id="node15" href="../../d0/d08/a00832.html#a566a4d723aabbf98f55afc88f9159b18" title="ripple::LedgerEntrySet\l::entryModify" alt="" coords="441,58,591,105"/><area shape="rect" id="node17" href="../../dd/df3/a00219.html#a946656d1cae252176c0205485d660bcf" title="ripple::core::BookTip\l::index" alt="" coords="445,127,587,174"/><area shape="rect" id="node24" href="../../dd/d5f/a00825.html#ad8125a5566e9310f96db8d6d421e75d3" title="ripple::Ledger::getQuality" alt="" coords="433,491,599,520"/><area shape="rect" id="node26" href="../../d7/d9a/a00152.html#afcb87d72a05033f7eafdf7563bf52224" title="ripple::base_uint::end" alt="" coords="651,491,797,520"/><area shape="rect" id="node28" href="../../d7/d9a/a00152.html#af39117db8d26ecef7a570cd3448822a6" title="ripple::base_uint::data" alt="" coords="849,491,999,520"/><area shape="rect" id="node35" href="../../dd/df3/a00219.html#a2bae1c2be55b46fa5c1c920ecafa2f33" title="ripple::core::BookTip\l::view" alt="" coords="445,421,587,467"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4a6813c5f12000303a5dc230d1d7c0e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d46/a01045.html">Offer</a> const&amp; ripple::core::OfferStream::tip </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the offer at the tip of the order book. Offers are always presented in decreasing quality. Only valid if <a class="el" href="../../d0/d22/a01049.html#a1e73441cbdbd8cfcc418bd1bb6beff57">step()</a> returned <code>true</code>. </p>

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00149">149</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>References <a class="el" href="../../d2/d80/a02875_source.html#l00064">m_offer</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/d22/a01049.html#a9156b1865a5015afb1847c0f7f6103a3">m_offer</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a78dda46f1ab42d4de6cfcccef8b9c550"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a>&amp; ripple::core::OfferStream::view </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00121">121</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>References <a class="el" href="../../d2/d80/a02875_source.html#l00059">m_view</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00162">step()</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/d22/a01049.html#a7b150a55d35dd1cff8ad583668a36c70">m_view</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d22/a01049_a78dda46f1ab42d4de6cfcccef8b9c550_icgraph.png" border="0" usemap="#d0/d22/a01049_a78dda46f1ab42d4de6cfcccef8b9c550_icgraph" alt=""/></div>
<map name="d0/d22/a01049_a78dda46f1ab42d4de6cfcccef8b9c550_icgraph" id="d0/d22/a01049_a78dda46f1ab42d4de6cfcccef8b9c550_icgraph">
<area shape="rect" id="node3" href="../../d0/d22/a01049.html#a1e73441cbdbd8cfcc418bd1bb6beff57" title="ripple::core::OfferStream\l::step" alt="" coords="219,5,384,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="add65c742e84a0f805e107e2ff80ac684"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a>&amp; ripple::core::OfferStream::view_cancel </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00127">127</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>References <a class="el" href="../../d2/d80/a02875_source.html#l00060">m_view_cancel</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00162">step()</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/d22/a01049.html#a512b00067a4157584b01e60d84b4299f">m_view_cancel</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d22/a01049_add65c742e84a0f805e107e2ff80ac684_icgraph.png" border="0" usemap="#d0/d22/a01049_add65c742e84a0f805e107e2ff80ac684_icgraph" alt=""/></div>
<map name="d0/d22/a01049_add65c742e84a0f805e107e2ff80ac684_icgraph" id="d0/d22/a01049_add65c742e84a0f805e107e2ff80ac684_icgraph">
<area shape="rect" id="node3" href="../../d0/d22/a01049.html#a1e73441cbdbd8cfcc418bd1bb6beff57" title="ripple::core::OfferStream\l::step" alt="" coords="219,5,384,51"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a5c1f1f3f66fe20c2f96467ceb333c23e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/deb/a03418.html#a219a5f675ae2836beb6ec54d8c522e25">Book</a> ripple::core::OfferStream::m_book</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00061">61</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00133">book()</a>.</p>

</div>
</div>
<a class="anchor" id="a4dc7ea5738db8b69683f81a0dfd72955"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d0c/a00788.html">beast::Journal</a> ripple::core::OfferStream::m_journal</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00058">58</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00069">erase()</a>, and <a class="el" href="../../d2/d80/a02875_source.html#l00162">step()</a>.</p>

</div>
</div>
<a class="anchor" id="a9156b1865a5015afb1847c0f7f6103a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d46/a01045.html">Offer</a> ripple::core::OfferStream::m_offer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00064">64</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00162">step()</a>, and <a class="el" href="../../d2/d80/a02875_source.html#l00149">tip()</a>.</p>

</div>
</div>
<a class="anchor" id="a5be0934cfd3bdeaed70e41d97305473b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/df3/a00219.html">BookTip</a> ripple::core::OfferStream::m_tip</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00063">63</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00139">dir()</a>, <a class="el" href="../../d2/d80/a02875_source.html#l00069">erase()</a>, and <a class="el" href="../../d2/d80/a02875_source.html#l00162">step()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b150a55d35dd1cff8ad583668a36c70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::reference_wrapper&lt;<a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a>&gt; ripple::core::OfferStream::m_view</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00059">59</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00121">view()</a>.</p>

</div>
</div>
<a class="anchor" id="a512b00067a4157584b01e60d84b4299f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::reference_wrapper&lt;<a class="el" href="../../d1/deb/a03418.html#a663f2dfb074c3b50606cf31a587b9c9c">LedgerView</a>&gt; ripple::core::OfferStream::m_view_cancel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00060">60</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00127">view_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="a3b7f1d4587a937d0e6c40292ac948971"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d04/a00281.html#aa96892110e0d37be7d6948401eaa37fd">Clock::time_point</a> ripple::core::OfferStream::m_when</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d80/a02875_source.html#l00062">62</a> of file <a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d80/a02875_source.html#l00162">step()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>rippled/src/ripple_app/book/<a class="el" href="../../d2/d80/a02875_source.html">OfferStream.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d9d/a03417.html">ripple</a></li><li class="navelem"><a class="el" href="../../d1/deb/a03418.html">core</a></li><li class="navelem"><a class="el" href="../../d0/d22/a01049.html">OfferStream</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:16 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
