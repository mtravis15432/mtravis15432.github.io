<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>rippled: rocksdb::VersionSet::Builder Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rippled
   &#160;<span id="projectnumber">0.24.0-rc1</span>
   </div>
   <div id="projectbrief">Reference implementation of the Ripple Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d0/d27/a00239.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d0/dbb/a08659.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rocksdb::VersionSet::Builder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for rocksdb::VersionSet::Builder:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dbc/a08661.png" border="0" usemap="#rocksdb_1_1_version_set_1_1_builder_coll__map" alt="Collaboration graph"/></div>
<map name="rocksdb_1_1_version_set_1_1_builder_coll__map" id="rocksdb_1_1_version_set_1_1_builder_coll__map">
<area shape="rect" id="node2" href="../../d1/d42/a01800.html" title="rocksdb::VersionSet" alt="" coords="1759,995,1897,1024"/><area shape="rect" id="node88" href="../../d4/dd1/a01797.html" title="rocksdb::Version" alt="" coords="2079,1043,2199,1072"/><area shape="rect" id="node6" href="../../da/d18/a01850.html" title="rocksdb::log::Writer" alt="" coords="1008,293,1144,323"/><area shape="rect" id="node10" href="../../d9/d75/a01843.html" title="rocksdb::WritableFile" alt="" coords="219,253,363,283"/><area shape="rect" id="node12" href="../../d5/d5f/a00461.html" title="rocksdb::EnvOptions" alt="" coords="1004,1312,1148,1341"/><area shape="rect" id="node106" href="../../de/df9/a01624.html" title="rocksdb::TableCache" alt="" coords="1420,1195,1567,1224"/><area shape="rect" id="node16" href="../../d7/db6/a00940.html" title="rocksdb::VersionSet\l::ManifestWriter" alt="" coords="1007,1433,1145,1479"/><area shape="rect" id="node18" href="../../d0/db9/a01552.html" title="rocksdb::Status" alt="" coords="604,1423,719,1452"/><area shape="rect" id="node20" href="../../d2/d86/a01798.html" title="rocksdb::VersionEdit" alt="" coords="591,1600,732,1629"/><area shape="rect" id="node82" href="../../d9/d5e/a00295.html" title="rocksdb::Compaction" alt="" coords="2356,1556,2503,1585"/><area shape="rect" id="node24" title="STL class. " alt="" coords="251,1139,331,1168"/><area shape="rect" id="node40" href="../../de/de6/a00723.html" title="rocksdb::InternalKey" alt="" coords="591,1535,732,1564"/><area shape="rect" id="node45" href="../../dd/d57/a01054.html" title="rocksdb::Options" alt="" coords="1016,887,1136,916"/><area shape="rect" id="node100" href="../../d0/d72/a00724.html" title="rocksdb::InternalKeyComparator" alt="" coords="971,477,1181,507"/><area shape="rect" id="node26" title="STL class. " alt="" coords="7,1130,132,1177"/><area shape="rect" id="node32" href="../../d0/d39/a00314.html" title="rocksdb::port::CondVar" alt="" coords="583,1476,740,1505"/><area shape="rect" id="node34" href="../../d9/d9a/a00998.html" title="rocksdb::port::Mutex" alt="" coords="220,1455,361,1484"/><area shape="rect" id="node38" href="../../d0/ddb/a00542.html" title="rocksdb::FileMetaData" alt="" coords="999,1553,1153,1583"/><area shape="rect" id="node43" href="../../db/db1/a00460.html" title="rocksdb::Env" alt="" coords="612,1369,711,1399"/><area shape="rect" id="node59" href="../../dd/de9/a00552.html" title="rocksdb::FilterPolicy" alt="" coords="591,657,732,687"/><area shape="rect" id="node61" href="../../d9/d0d/a00298.html" title="rocksdb::CompactionOptions\lUniversal" alt="" coords="567,710,756,757"/><area shape="rect" id="node63" href="../../d1/d67/a00310.html" title="rocksdb::CompressionOptions" alt="" coords="563,780,760,809"/><area shape="rect" id="node69" href="../../d0/d7d/a01419.html" title="rocksdb::SliceTransform" alt="" coords="580,833,743,863"/><area shape="rect" id="node71" href="../../db/d7b/a00296.html" title="rocksdb::CompactionFilter" alt="" coords="575,887,748,916"/><area shape="rect" id="node73" href="../../d0/d61/a00302.html" title="rocksdb::Comparator" alt="" coords="589,400,733,429"/><area shape="rect" id="node113" href="../../d7/d1b/a00864.html" title="rocksdb::VersionSet\l::Builder::LevelState" alt="" coords="2069,45,2208,91"/><area shape="rect" id="node117" title="STL class. " alt="" coords="1779,8,1877,37"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d82/a00243.html">BySmallestKey</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d1b/a00864.html">LevelState</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa2ea220025d3626d915fe6902ad4a106"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#aa2ea220025d3626d915fe6902ad4a106">Builder</a> (<a class="el" href="../../d1/d42/a01800.html">VersionSet</a> *vset, <a class="el" href="../../d4/dd1/a01797.html">Version</a> *<a class="el" href="../../dc/d40/a02767.html#a70ff0f6c026c3dd1ef6aaf504e7fddc3">base</a>)</td></tr>
<tr class="separator:aa2ea220025d3626d915fe6902ad4a106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e7547d321b9d9f9b9ed963146d67c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a52e7547d321b9d9f9b9ed963146d67c3">~Builder</a> ()</td></tr>
<tr class="separator:a52e7547d321b9d9f9b9ed963146d67c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c9fbc2ead82d8e2e4722161341eb49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a70c9fbc2ead82d8e2e4722161341eb49">CheckConsistency</a> (<a class="el" href="../../d4/dd1/a01797.html">Version</a> *v)</td></tr>
<tr class="separator:a70c9fbc2ead82d8e2e4722161341eb49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa80eab37c10d6aecd296315cd0e210de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#aa80eab37c10d6aecd296315cd0e210de">CheckConsistencyForDeletes</a> (<a class="el" href="../../d2/d86/a01798.html">VersionEdit</a> *edit, unsigned int number, int level)</td></tr>
<tr class="separator:aa80eab37c10d6aecd296315cd0e210de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ebf4c9e22b9adce7919b255dcb80393"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a2ebf4c9e22b9adce7919b255dcb80393">Apply</a> (<a class="el" href="../../d2/d86/a01798.html">VersionEdit</a> *edit)</td></tr>
<tr class="separator:a2ebf4c9e22b9adce7919b255dcb80393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61a3b1cccd9c3d386297a9cf999781d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a61a3b1cccd9c3d386297a9cf999781d6">SaveTo</a> (<a class="el" href="../../d4/dd1/a01797.html">Version</a> *v)</td></tr>
<tr class="separator:a61a3b1cccd9c3d386297a9cf999781d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f8d86429df9529e2d5e8dd2c6bc14f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a39f8d86429df9529e2d5e8dd2c6bc14f">MaybeAddFile</a> (<a class="el" href="../../d4/dd1/a01797.html">Version</a> *v, int level, <a class="el" href="../../d0/ddb/a00542.html">FileMetaData</a> *f)</td></tr>
<tr class="separator:a39f8d86429df9529e2d5e8dd2c6bc14f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:aa6c0a8d436be39da3f7577f46f7e2168"><td class="memItemLeft" align="right" valign="top">typedef std::set&lt; <a class="el" href="../../d0/ddb/a00542.html">FileMetaData</a> <br class="typebreak"/>
*, <a class="el" href="../../d6/d82/a00243.html">BySmallestKey</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#aa6c0a8d436be39da3f7577f46f7e2168">FileSet</a></td></tr>
<tr class="separator:aa6c0a8d436be39da3f7577f46f7e2168"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a89b1cd811e87f3f2f5e7e8e3a45ab87f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d42/a01800.html">VersionSet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a></td></tr>
<tr class="separator:a89b1cd811e87f3f2f5e7e8e3a45ab87f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c541f6f53a5ad5419b68c0586e10e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dd1/a01797.html">Version</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a></td></tr>
<tr class="separator:a29c541f6f53a5ad5419b68c0586e10e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a66711a2f57e99fe904f5bdcd71e87d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d1b/a00864.html">LevelState</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a></td></tr>
<tr class="separator:a2a66711a2f57e99fe904f5bdcd71e87d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00901">901</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aa6c0a8d436be39da3f7577f46f7e2168"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::set&lt;<a class="el" href="../../d0/ddb/a00542.html">FileMetaData</a>*, <a class="el" href="../../d6/d82/a00243.html">BySmallestKey</a>&gt; <a class="el" href="../../d0/d27/a00239.html#aa6c0a8d436be39da3f7577f46f7e2168">rocksdb::VersionSet::Builder::FileSet</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00918">918</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa2ea220025d3626d915fe6902ad4a106"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rocksdb::VersionSet::Builder::Builder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d42/a01800.html">VersionSet</a> *&#160;</td>
          <td class="paramname"><em>vset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/dd1/a01797.html">Version</a> *&#160;</td>
          <td class="paramname"><em>base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00930">930</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>References <a class="el" href="../../d6/dfc/a02612_source.html#l00921">rocksdb::VersionSet::Builder::LevelState::added_files</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00925">base_</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00475">rocksdb::VersionSet::icmp_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00905">rocksdb::VersionSet::Builder::BySmallestKey::internal_comparator</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00926">levels_</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00292">rocksdb::VersionSet::NumberLevels()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00591">rocksdb::Version::Ref()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00924">vset_</a>.</p>
<div class="fragment"><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      : <a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>(vset),</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a>(<a class="code" href="../../dc/d40/a02767.html#a70ff0f6c026c3dd1ef6aaf504e7fddc3">base</a>) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a>-&gt;<a class="code" href="../../d4/dd1/a01797.html#af720448137d10341732ca283eefe0bd2">Ref</a>();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a> = <span class="keyword">new</span> LevelState[<a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185">NumberLevels</a>()];</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    BySmallestKey cmp;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    cmp.internal_comparator = &amp;<a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#aa9f3871481ba903b57737941a72115c7">icmp_</a>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> level = 0; level &lt; <a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185">NumberLevels</a>(); level++) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].<a class="code" href="../../d7/d1b/a00864.html#a809ed1426874cdd824d9c08463fce177">added_files</a> = <span class="keyword">new</span> <a class="code" href="../../d0/d27/a00239.html#aa6c0a8d436be39da3f7577f46f7e2168">FileSet</a>(cmp);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_aa2ea220025d3626d915fe6902ad4a106_cgraph.png" border="0" usemap="#d0/d27/a00239_aa2ea220025d3626d915fe6902ad4a106_cgraph" alt=""/></div>
<map name="d0/d27/a00239_aa2ea220025d3626d915fe6902ad4a106_cgraph" id="d0/d27/a00239_aa2ea220025d3626d915fe6902ad4a106_cgraph">
<area shape="rect" id="node3" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185" title="rocksdb::VersionSet\l::NumberLevels" alt="" coords="200,5,339,51"/><area shape="rect" id="node5" href="../../d4/dd1/a01797.html#af720448137d10341732ca283eefe0bd2" title="rocksdb::Version::Ref" alt="" coords="195,75,344,104"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a52e7547d321b9d9f9b9ed963146d67c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rocksdb::VersionSet::Builder::~Builder </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00942">942</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>References <a class="el" href="../../d6/dfc/a02612_source.html#l00921">rocksdb::VersionSet::Builder::LevelState::added_files</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00925">base_</a>, <a class="el" href="../../d8/dde/a03178_source.html#l00226">ripple::f</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00926">levels_</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00292">rocksdb::VersionSet::NumberLevels()</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00021">rocksdb::FileMetaData::refs</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00595">rocksdb::Version::Unref()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00924">vset_</a>.</p>
<div class="fragment"><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;             {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> level = 0; level &lt; <a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185">NumberLevels</a>(); level++) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d0/d27/a00239.html#aa6c0a8d436be39da3f7577f46f7e2168">FileSet</a>* added = <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].<a class="code" href="../../d7/d1b/a00864.html#a809ed1426874cdd824d9c08463fce177">added_files</a>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      std::vector&lt;FileMetaData*&gt; to_unref;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      to_unref.reserve(added-&gt;size());</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">for</span> (FileSet::const_iterator it = added-&gt;begin();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;          it != added-&gt;end(); ++it) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        to_unref.push_back(*it);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keyword">delete</span> added;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> i = 0; i &lt; to_unref.size(); i++) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        FileMetaData* <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a> = to_unref[i];</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        f-&gt;refs--;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">if</span> (f-&gt;refs &lt;= 0) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;          <span class="keyword">delete</span> <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keyword">delete</span>[] <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <a class="code" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a>-&gt;<a class="code" href="../../d4/dd1/a01797.html#a54bd122a7534f61aeddf599ddf2dd45d">Unref</a>();</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a52e7547d321b9d9f9b9ed963146d67c3_cgraph.png" border="0" usemap="#d0/d27/a00239_a52e7547d321b9d9f9b9ed963146d67c3_cgraph" alt=""/></div>
<map name="d0/d27/a00239_a52e7547d321b9d9f9b9ed963146d67c3_cgraph" id="d0/d27/a00239_a52e7547d321b9d9f9b9ed963146d67c3_cgraph">
<area shape="rect" id="node3" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185" title="rocksdb::VersionSet\l::NumberLevels" alt="" coords="205,5,344,51"/><area shape="rect" id="node5" href="../../d4/dd1/a01797.html#a54bd122a7534f61aeddf599ddf2dd45d" title="rocksdb::Version::Unref" alt="" coords="195,75,355,104"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2ebf4c9e22b9adce7919b255dcb80393"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::VersionSet::Builder::Apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d86/a01798.html">VersionEdit</a> *&#160;</td>
          <td class="paramname"><em>edit</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l01033">1033</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>References <a class="el" href="../../d6/dfc/a02612_source.html#l00921">rocksdb::VersionSet::Builder::LevelState::added_files</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00022">rocksdb::FileMetaData::allowed_seeks</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00925">base_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00964">CheckConsistency()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00984">CheckConsistencyForDeletes()</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00491">rocksdb::VersionSet::compact_pointer_</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00123">rocksdb::VersionEdit::compact_pointers_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00920">rocksdb::VersionSet::Builder::LevelState::deleted_files</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00124">rocksdb::VersionEdit::deleted_files_</a>, <a class="el" href="../../d8/dde/a03178_source.html#l00226">ripple::f</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00024">rocksdb::FileMetaData::file_size</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00926">levels_</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00125">rocksdb::VersionEdit::new_files_</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00023">rocksdb::FileMetaData::number</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00021">rocksdb::FileMetaData::refs</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00924">vset_</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01539">rocksdb::VersionSet::DumpManifest()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01379">rocksdb::VersionSet::LogAndApplyHelper()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l01400">rocksdb::VersionSet::Recover()</a>.</p>
<div class="fragment"><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                                {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="../../d0/d27/a00239.html#a70c9fbc2ead82d8e2e4722161341eb49">CheckConsistency</a>(<a class="code" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// Update compaction pointers</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; edit-&gt;compact_pointers_.size(); i++) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> level = edit-&gt;compact_pointers_[i].first;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#a73592373481ef75a5aa62e5c51c398c7">compact_pointer_</a>[level] =</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;          edit-&gt;compact_pointers_[i].second.Encode().ToString();</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// Delete files</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/d86/a01798.html#a3d6c5b330c77322e86f452d021966578">VersionEdit::DeletedFileSet</a>&amp; del = edit-&gt;deleted_files_;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">for</span> (VersionEdit::DeletedFileSet::const_iterator iter = del.begin();</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;         iter != del.end();</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;         ++iter) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> level = iter-&gt;first;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../db/d86/a02663.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> number = iter-&gt;second;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].<a class="code" href="../../d7/d1b/a00864.html#ae5004a4fc0211f2b14034c00d4bd3dd7">deleted_files</a>.insert(number);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../d0/d27/a00239.html#aa80eab37c10d6aecd296315cd0e210de">CheckConsistencyForDeletes</a>(edit, number, level);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// Add new files</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; edit-&gt;new_files_.size(); i++) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> level = edit-&gt;new_files_[i].first;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      FileMetaData* <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a> = <span class="keyword">new</span> FileMetaData(edit-&gt;new_files_[i].second);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      f-&gt;refs = 1;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="comment">// We arrange to automatically compact this file after</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="comment">// a certain number of seeks.  Let&#39;s assume:</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="comment">//   (1) One seek costs 10ms</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="comment">//   (2) Writing or reading 1MB costs 10ms (100MB/s)</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="comment">//   (3) A compaction of 1MB does 25MB of IO:</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="comment">//         1MB read from this level</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="comment">//         10-12MB read from next level (boundaries may be misaligned)</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="comment">//         10-12MB written to next level</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="comment">// This implies that 25 seeks cost the same as the compaction</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="comment">// of 1MB of data.  I.e., one seek costs approximately the</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="comment">// same as the compaction of 40KB of data.  We are a little</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="comment">// conservative and allow approximately one seek for every 16KB</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="comment">// of data before triggering a compaction.</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      f-&gt;allowed_seeks = (f-&gt;file_size / 16384);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">if</span> (f-&gt;allowed_seeks &lt; 100) f-&gt;allowed_seeks = 100;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].<a class="code" href="../../d7/d1b/a00864.html#ae5004a4fc0211f2b14034c00d4bd3dd7">deleted_files</a>.erase(f-&gt;number);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].<a class="code" href="../../d7/d1b/a00864.html#a809ed1426874cdd824d9c08463fce177">added_files</a>-&gt;insert(f);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_cgraph.png" border="0" usemap="#d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_cgraph" alt=""/></div>
<map name="d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_cgraph" id="d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_cgraph">
<area shape="rect" id="node3" href="../../d0/d27/a00239.html#a70c9fbc2ead82d8e2e4722161341eb49" title="rocksdb::VersionSet\l::Builder::CheckConsistency" alt="" coords="195,203,384,250"/><area shape="rect" id="node41" href="../../d0/d27/a00239.html#aa80eab37c10d6aecd296315cd0e210de" title="rocksdb::VersionSet\l::Builder::CheckConsistency\lForDeletes" alt="" coords="195,273,384,337"/><area shape="rect" id="node5" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185" title="rocksdb::VersionSet\l::NumberLevels" alt="" coords="435,143,573,190"/><area shape="rect" id="node7" href="../../d0/d72/a00724.html#a5a44464365280d5c9649746930e1aee8" title="rocksdb::InternalKeyComparator\l::Compare" alt="" coords="624,170,835,217"/><area shape="rect" id="node25" href="../../de/de6/a00723.html#a1f29087f48fd168fe431e4b884f5aed1" title="rocksdb::InternalKey\l::DebugString" alt="" coords="433,330,575,377"/><area shape="rect" id="node9" href="../../d4/d87/a03436.html#aab29434ed2c251eae44fdb498e4d8dcc" title="rocksdb::BumpPerfCount" alt="" coords="909,5,1077,35"/><area shape="rect" id="node11" href="../../d0/d61/a00302.html#a9fe800fa52b86a61b626a58f46a38f81" title="rocksdb::Comparator\l::Compare" alt="" coords="921,58,1065,105"/><area shape="rect" id="node13" href="../../de/daf/a01417.html#abed770f35075076510897c3fbbc10923" title="rocksdb::Slice::data" alt="" coords="1167,179,1305,208"/><area shape="rect" id="node15" href="../../d4/d87/a03436.html#a0bb1082c7c473bb0c6614963a14fed62" title="rocksdb::DecodeFixed64" alt="" coords="911,232,1076,261"/><area shape="rect" id="node19" href="../../d4/d87/a03436.html#ae015f9b23bbadef7eb4e3796c2d4fb46" title="rocksdb::ExtractUserKey" alt="" coords="909,179,1077,208"/><area shape="rect" id="node22" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="1168,360,1304,389"/><area shape="rect" id="node17" href="../../d4/d87/a03436.html#a5eb46c01bbc65cc301b2648e655dbe15" title="rocksdb::DecodeFixed32" alt="" coords="1153,232,1319,261"/><area shape="rect" id="node27" href="../../d6/d80/a01076.html#a36870425cc00e160004d62bd6118a24d" title="rocksdb::ParsedInternalKey\l::DebugString" alt="" coords="639,470,820,517"/><area shape="rect" id="node31" href="../../d4/d87/a03436.html#a4bf89f1a48c96450ef0d88b5c9f0a1ec" title="rocksdb::EscapeString" alt="" coords="652,372,807,401"/><area shape="rect" id="node36" href="../../d4/d87/a03436.html#add1d5b59fe1243a2201201ab3a3fbdb2" title="rocksdb::ParseInternalKey" alt="" coords="641,296,817,325"/><area shape="rect" id="node29" href="../../de/daf/a01417.html#ac5faa24d39a613c0ce7965d2bd9cf958" title="rocksdb::Slice::ToString" alt="" coords="912,491,1075,520"/><area shape="rect" id="node33" href="../../d4/d87/a03436.html#abd1b2064e9379d3df8f49bcdd26d7de0" title="rocksdb::AppendEscapedStringTo" alt="" coords="884,437,1103,467"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_icgraph.png" border="0" usemap="#d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_icgraph" alt=""/></div>
<map name="d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_icgraph" id="d0/d27/a00239_a2ebf4c9e22b9adce7919b255dcb80393_icgraph">
<area shape="rect" id="node3" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="199,1509,337,1555"/><area shape="rect" id="node7" href="../../d1/d42/a01800.html#abfc3ec9be932533630087e672fce75b3" title="rocksdb::VersionSet\l::LogAndApplyHelper" alt="" coords="196,1578,340,1625"/><area shape="rect" id="node104" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="2525,1670,2664,1717"/><area shape="rect" id="node5" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="389,1509,611,1555"/><area shape="rect" id="node9" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="431,1578,569,1625"/><area shape="rect" id="node11" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="2772,1560,2951,1589"/><area shape="rect" id="node15" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="660,1479,857,1526"/><area shape="rect" id="node101" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="915,1611,1088,1658"/><area shape="rect" id="node13" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="3124,1560,3175,1589"/><area shape="rect" id="node17" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="907,1466,1096,1513"/><area shape="rect" id="node19" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="1440,1389,1637,1435"/><area shape="rect" id="node95" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1440,1491,1637,1538"/><area shape="rect" id="node98" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="1145,1397,1391,1427"/><area shape="rect" id="node21" href="../../dd/df5/a00386.html#af25ba1d8b183fb12968ebb12ae28de91" title="rocksdb::DBImpl::Background\lCallCompaction" alt="" coords="1685,1389,1883,1435"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#a0f92fd02fffbe404bbdffc1bd24195d7" title="rocksdb::DBImpl::BGWorkCompaction" alt="" coords="1931,1372,2179,1401"/><area shape="rect" id="node25" href="../../dd/df5/a00386.html#a6f3ccd58266e8fd7a1b513ebef01928a" title="rocksdb::DBImpl::MaybeSchedule\lFlushOrCompaction" alt="" coords="2227,1346,2448,1393"/><area shape="rect" id="node28" href="../../dd/df5/a00386.html#af70abfde15bcbcb869e36a51460def59" title="rocksdb::DBImpl::Background\lCallFlush" alt="" coords="2496,1491,2693,1538"/><area shape="rect" id="node34" href="../../dd/df5/a00386.html#afcef1eaa87f194ee6689e465e15801ed" title="rocksdb::DBImpl::GetImpl" alt="" coords="2508,1319,2681,1348"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#aa86eaccec6e3d9e5146c13ca31b2918f" title="rocksdb::DBImpl::MakeRoom\lForWrite" alt="" coords="2497,1422,2692,1469"/><area shape="rect" id="node44" href="../../dd/df5/a00386.html#a19d8fbac12db943503c6a28d35c44e44" title="rocksdb::DBImpl::MultiGet" alt="" coords="2507,324,2683,353"/><area shape="rect" id="node48" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="2528,696,2661,725"/><area shape="rect" id="node91" href="../../dd/df5/a00386.html#ae97e90f1166836da10d3f5d48be25f1e" title="rocksdb::DBImpl::TEST\l_CompactRange" alt="" coords="2513,1249,2676,1295"/><area shape="rect" id="node30" href="../../dd/df5/a00386.html#a7f35702e61b4f7ec3eb12e91432dca47" title="rocksdb::DBImpl::BGWorkFlush" alt="" coords="2756,1440,2967,1469"/><area shape="rect" id="node36" href="../../dd/df5/a00386.html#aa86e47e55cc16361ca8bfb166c659f9a" title="rocksdb::DBImpl::Get" alt="" coords="2787,1387,2936,1416"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#a15fbc3b2d454e4ace04cf01a4ed30124" title="rocksdb::DBImpl::KeyMayExist" alt="" coords="2759,1333,2964,1363"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#a036d197e1bf77abea19c23696305cf34" title="rocksdb::DBImpl::Write" alt="" coords="2783,1493,2940,1523"/><area shape="rect" id="node46" href="../../d4/d87/a03436.html#a7a06ad892e18be5b16dfd7843487c151" title="rocksdb::TEST" alt="" coords="2807,5,2916,35"/><area shape="rect" id="node50" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="2780,127,2943,174"/><area shape="rect" id="node52" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="2791,197,2932,243"/><area shape="rect" id="node54" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="2761,267,2961,296"/><area shape="rect" id="node56" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="2765,320,2957,349"/><area shape="rect" id="node58" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="2807,373,2916,403"/><area shape="rect" id="node61" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="2781,426,2941,473"/><area shape="rect" id="node63" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="2800,496,2923,525"/><area shape="rect" id="node65" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="2793,549,2929,595"/><area shape="rect" id="node67" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="2765,618,2957,665"/><area shape="rect" id="node69" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="2765,687,2957,734"/><area shape="rect" id="node71" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="2753,757,2969,787"/><area shape="rect" id="node73" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="2780,810,2943,857"/><area shape="rect" id="node75" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="2836,880,2887,909"/><area shape="rect" id="node77" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="2792,1002,2931,1049"/><area shape="rect" id="node79" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="2772,1071,2951,1118"/><area shape="rect" id="node81" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="2780,933,2943,979"/><area shape="rect" id="node85" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="2779,1141,2944,1171"/><area shape="rect" id="node87" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="2792,1194,2931,1241"/><area shape="rect" id="node89" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="2789,58,2933,105"/><area shape="rect" id="node83" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="3031,1641,3268,1687"/><area shape="rect" id="node93" href="../../dd/df5/a00386.html#aafef42f7b99bd9afdd50369bc5d37476" title="rocksdb::DBImpl::Compact\lRange" alt="" coords="2771,1263,2952,1310"/><area shape="rect" id="node108" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="2743,1667,2980,1714"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a70c9fbc2ead82d8e2e4722161341eb49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::VersionSet::Builder::CheckConsistency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dd1/a01797.html">Version</a> *&#160;</td>
          <td class="paramname"><em>v</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00964">964</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>References <a class="el" href="../../d2/ddf/a02573_source.html#l00056">rocksdb::InternalKeyComparator::Compare()</a>, <a class="el" href="../../d2/ddf/a02573_source.html#l00040">rocksdb::InternalKey::DebugString()</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00166">rocksdb::Version::files_</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00475">rocksdb::VersionSet::icmp_</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00292">rocksdb::VersionSet::NumberLevels()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00924">vset_</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01033">Apply()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l01082">SaveTo()</a>.</p>
<div class="fragment"><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                                    {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> level = 0; level &lt; <a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185">NumberLevels</a>(); level++) {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="comment">// Make sure there is no overlap in levels &gt; 0</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">if</span> (level &gt; 0) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/d86/a02663.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> i = 1; i &lt; v-&gt;files_[level].size(); i++) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;          <span class="keyword">const</span> InternalKey&amp; prev_end = v-&gt;files_[level][i-1]-&gt;largest;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;          <span class="keyword">const</span> InternalKey&amp; this_begin = v-&gt;files_[level][i]-&gt;smallest;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#aa9f3871481ba903b57737941a72115c7">icmp_</a>.<a class="code" href="../../d0/d72/a00724.html#a5a44464365280d5c9649746930e1aee8">Compare</a>(prev_end, this_begin) &gt;= 0) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;overlapping ranges in same level %s vs. %s\n&quot;</span>,</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                    prev_end.DebugString().c_str(),</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                    this_begin.DebugString().c_str());</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            abort();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;          }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="preprocessor"></span>  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_cgraph.png" border="0" usemap="#d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_cgraph" alt=""/></div>
<map name="d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_cgraph" id="d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_cgraph">
<area shape="rect" id="node3" href="../../d0/d72/a00724.html#a5a44464365280d5c9649746930e1aee8" title="rocksdb::InternalKeyComparator\l::Compare" alt="" coords="435,170,645,217"/><area shape="rect" id="node21" href="../../de/de6/a00723.html#a1f29087f48fd168fe431e4b884f5aed1" title="rocksdb::InternalKey\l::DebugString" alt="" coords="244,326,385,373"/><area shape="rect" id="node37" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185" title="rocksdb::VersionSet\l::NumberLevels" alt="" coords="245,395,384,442"/><area shape="rect" id="node5" href="../../d4/d87/a03436.html#aab29434ed2c251eae44fdb498e4d8dcc" title="rocksdb::BumpPerfCount" alt="" coords="720,5,888,35"/><area shape="rect" id="node7" href="../../d0/d61/a00302.html#a9fe800fa52b86a61b626a58f46a38f81" title="rocksdb::Comparator\l::Compare" alt="" coords="732,58,876,105"/><area shape="rect" id="node9" href="../../de/daf/a01417.html#abed770f35075076510897c3fbbc10923" title="rocksdb::Slice::data" alt="" coords="977,179,1116,208"/><area shape="rect" id="node11" href="../../d4/d87/a03436.html#a0bb1082c7c473bb0c6614963a14fed62" title="rocksdb::DecodeFixed64" alt="" coords="721,232,887,261"/><area shape="rect" id="node15" href="../../d4/d87/a03436.html#ae015f9b23bbadef7eb4e3796c2d4fb46" title="rocksdb::ExtractUserKey" alt="" coords="720,179,888,208"/><area shape="rect" id="node18" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="979,360,1115,389"/><area shape="rect" id="node13" href="../../d4/d87/a03436.html#a5eb46c01bbc65cc301b2648e655dbe15" title="rocksdb::DecodeFixed32" alt="" coords="964,232,1129,261"/><area shape="rect" id="node23" href="../../d6/d80/a01076.html#a36870425cc00e160004d62bd6118a24d" title="rocksdb::ParsedInternalKey\l::DebugString" alt="" coords="449,470,631,517"/><area shape="rect" id="node27" href="../../d4/d87/a03436.html#a4bf89f1a48c96450ef0d88b5c9f0a1ec" title="rocksdb::EscapeString" alt="" coords="463,372,617,401"/><area shape="rect" id="node32" href="../../d4/d87/a03436.html#add1d5b59fe1243a2201201ab3a3fbdb2" title="rocksdb::ParseInternalKey" alt="" coords="452,296,628,325"/><area shape="rect" id="node25" href="../../de/daf/a01417.html#ac5faa24d39a613c0ce7965d2bd9cf958" title="rocksdb::Slice::ToString" alt="" coords="723,491,885,520"/><area shape="rect" id="node29" href="../../d4/d87/a03436.html#abd1b2064e9379d3df8f49bcdd26d7de0" title="rocksdb::AppendEscapedStringTo" alt="" coords="695,437,913,467"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_icgraph.png" border="0" usemap="#d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_icgraph" alt=""/></div>
<map name="d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_icgraph" id="d0/d27/a00239_a70c9fbc2ead82d8e2e4722161341eb49_icgraph">
<area shape="rect" id="node3" href="../../d0/d27/a00239.html#a2ebf4c9e22b9adce7919b255dcb80393" title="rocksdb::VersionSet\l::Builder::Apply" alt="" coords="244,1354,383,1401"/><area shape="rect" id="node109" href="../../d0/d27/a00239.html#a61a3b1cccd9c3d386297a9cf999781d6" title="rocksdb::VersionSet\l::Builder::SaveTo" alt="" coords="436,1421,575,1467"/><area shape="rect" id="node5" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="628,1285,767,1331"/><area shape="rect" id="node9" href="../../d1/d42/a01800.html#abfc3ec9be932533630087e672fce75b3" title="rocksdb::VersionSet\l::LogAndApplyHelper" alt="" coords="433,1351,577,1398"/><area shape="rect" id="node102" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="2704,1499,2843,1546"/><area shape="rect" id="node7" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="816,1218,1037,1265"/><area shape="rect" id="node11" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="628,1354,767,1401"/><area shape="rect" id="node13" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="2951,1483,3129,1512"/><area shape="rect" id="node17" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="828,1338,1025,1385"/><area shape="rect" id="node99" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="1093,159,1267,206"/><area shape="rect" id="node15" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="3303,1473,3353,1503"/><area shape="rect" id="node19" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="1085,391,1275,438"/><area shape="rect" id="node21" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="1619,314,1816,361"/><area shape="rect" id="node93" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1619,417,1816,463"/><area shape="rect" id="node96" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="1324,323,1569,352"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#af25ba1d8b183fb12968ebb12ae28de91" title="rocksdb::DBImpl::Background\lCallCompaction" alt="" coords="1864,314,2061,361"/><area shape="rect" id="node25" href="../../dd/df5/a00386.html#a0f92fd02fffbe404bbdffc1bd24195d7" title="rocksdb::DBImpl::BGWorkCompaction" alt="" coords="2109,309,2357,339"/><area shape="rect" id="node27" href="../../dd/df5/a00386.html#a6f3ccd58266e8fd7a1b513ebef01928a" title="rocksdb::DBImpl::MaybeSchedule\lFlushOrCompaction" alt="" coords="2405,297,2627,343"/><area shape="rect" id="node30" href="../../dd/df5/a00386.html#af70abfde15bcbcb869e36a51460def59" title="rocksdb::DBImpl::Background\lCallFlush" alt="" coords="2675,417,2872,463"/><area shape="rect" id="node36" href="../../dd/df5/a00386.html#afcef1eaa87f194ee6689e465e15801ed" title="rocksdb::DBImpl::GetImpl" alt="" coords="2687,121,2860,151"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#aa86eaccec6e3d9e5146c13ca31b2918f" title="rocksdb::DBImpl::MakeRoom\lForWrite" alt="" coords="2676,174,2871,221"/><area shape="rect" id="node46" href="../../dd/df5/a00386.html#a19d8fbac12db943503c6a28d35c44e44" title="rocksdb::DBImpl::MultiGet" alt="" coords="2685,244,2861,273"/><area shape="rect" id="node50" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="2707,896,2840,925"/><area shape="rect" id="node91" href="../../dd/df5/a00386.html#ae97e90f1166836da10d3f5d48be25f1e" title="rocksdb::DBImpl::TEST\l_CompactRange" alt="" coords="2692,347,2855,394"/><area shape="rect" id="node32" href="../../dd/df5/a00386.html#a7f35702e61b4f7ec3eb12e91432dca47" title="rocksdb::DBImpl::BGWorkFlush" alt="" coords="2935,293,3145,323"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#aa86e47e55cc16361ca8bfb166c659f9a" title="rocksdb::DBImpl::Get" alt="" coords="2965,80,3115,109"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#a15fbc3b2d454e4ace04cf01a4ed30124" title="rocksdb::DBImpl::KeyMayExist" alt="" coords="2937,133,3143,163"/><area shape="rect" id="node44" href="../../dd/df5/a00386.html#a036d197e1bf77abea19c23696305cf34" title="rocksdb::DBImpl::Write" alt="" coords="2961,187,3119,216"/><area shape="rect" id="node48" href="../../d4/d87/a03436.html#a7a06ad892e18be5b16dfd7843487c151" title="rocksdb::TEST" alt="" coords="2985,240,3095,269"/><area shape="rect" id="node52" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="2959,853,3121,899"/><area shape="rect" id="node54" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="2969,922,3111,969"/><area shape="rect" id="node56" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="2940,992,3140,1021"/><area shape="rect" id="node58" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="2944,1045,3136,1075"/><area shape="rect" id="node60" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="2985,1099,3095,1128"/><area shape="rect" id="node63" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="2960,1151,3120,1198"/><area shape="rect" id="node65" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="2979,1221,3101,1251"/><area shape="rect" id="node67" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="2972,1274,3108,1321"/><area shape="rect" id="node69" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="2944,1343,3136,1390"/><area shape="rect" id="node71" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="2944,1413,3136,1459"/><area shape="rect" id="node73" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="2932,416,3148,445"/><area shape="rect" id="node75" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="2959,469,3121,515"/><area shape="rect" id="node77" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="3015,539,3065,568"/><area shape="rect" id="node79" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="2971,591,3109,638"/><area shape="rect" id="node81" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="2951,661,3129,707"/><area shape="rect" id="node83" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="2959,346,3121,393"/><area shape="rect" id="node87" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="2957,731,3123,760"/><area shape="rect" id="node89" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="2971,783,3109,830"/><area shape="rect" id="node85" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="3209,1526,3447,1573"/><area shape="rect" id="node106" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="2921,1586,3159,1633"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa80eab37c10d6aecd296315cd0e210de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::VersionSet::Builder::CheckConsistencyForDeletes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d86/a01798.html">VersionEdit</a> *&#160;</td>
          <td class="paramname"><em>edit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00984">984</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>References <a class="el" href="../../d6/dfc/a02612_source.html#l00921">rocksdb::VersionSet::Builder::LevelState::added_files</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00925">base_</a>, <a class="el" href="../../d8/dde/a03178_source.html#l00226">ripple::f</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00166">rocksdb::Version::files_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00926">levels_</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00023">rocksdb::FileMetaData::number</a>, and <a class="el" href="../../de/d3b/a02610_source.html#l00111">rocksdb::VersionEdit::number_levels_</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01033">Apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;               {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="preprocessor"></span>      <span class="comment">// a file to be deleted better exist in the previous version</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = 0; !found &amp;&amp; l &lt; edit-&gt;number_levels_; l++) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keyword">const</span> std::vector&lt;FileMetaData*&gt;&amp; base_files = <a class="code" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a>-&gt;<a class="code" href="../../d4/dd1/a01797.html#a35f53fab270908bca7d895f54c85bfe9">files_</a>[l];</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; base_files.size(); i++) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;          FileMetaData* <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a> = base_files[i];</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;          <span class="keywordflow">if</span> (f-&gt;number == number) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            found =  <span class="keyword">true</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;          }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <span class="comment">// if the file did not exist in the previous version, then it</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <span class="comment">// is possibly moved from lower level to higher level in current</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="comment">// version</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = level+1; !found &amp;&amp; l &lt; edit-&gt;number_levels_; l++) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d0/d27/a00239.html#aa6c0a8d436be39da3f7577f46f7e2168">FileSet</a>* added = <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[l].<a class="code" href="../../d7/d1b/a00864.html#a809ed1426874cdd824d9c08463fce177">added_files</a>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">for</span> (FileSet::const_iterator added_iter = added-&gt;begin();</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;             added_iter != added-&gt;end(); ++added_iter) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;          FileMetaData* <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a> = *added_iter;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;          <span class="keywordflow">if</span> (f-&gt;number == number) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;          }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="comment">// maybe this file was added in a previous edit that was Applied</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">if</span> (!found) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d0/d27/a00239.html#aa6c0a8d436be39da3f7577f46f7e2168">FileSet</a>* added = <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].<a class="code" href="../../d7/d1b/a00864.html#a809ed1426874cdd824d9c08463fce177">added_files</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keywordflow">for</span> (FileSet::const_iterator added_iter = added-&gt;begin();</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;             added_iter != added-&gt;end(); ++added_iter) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;          FileMetaData* <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a> = *added_iter;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;          <span class="keywordflow">if</span> (f-&gt;number == number) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;          }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      assert(found);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="preprocessor"></span>  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_aa80eab37c10d6aecd296315cd0e210de_icgraph.png" border="0" usemap="#d0/d27/a00239_aa80eab37c10d6aecd296315cd0e210de_icgraph" alt=""/></div>
<map name="d0/d27/a00239_aa80eab37c10d6aecd296315cd0e210de_icgraph" id="d0/d27/a00239_aa80eab37c10d6aecd296315cd0e210de_icgraph">
<area shape="rect" id="node3" href="../../d0/d27/a00239.html#a2ebf4c9e22b9adce7919b255dcb80393" title="rocksdb::VersionSet\l::Builder::Apply" alt="" coords="244,65,383,111"/><area shape="rect" id="node5" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="436,5,575,51"/><area shape="rect" id="node9" href="../../d1/d42/a01800.html#abfc3ec9be932533630087e672fce75b3" title="rocksdb::VersionSet\l::LogAndApplyHelper" alt="" coords="433,154,577,201"/><area shape="rect" id="node104" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="2763,65,2901,111"/><area shape="rect" id="node7" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="627,5,848,51"/><area shape="rect" id="node11" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="668,170,807,217"/><area shape="rect" id="node13" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="3009,185,3188,215"/><area shape="rect" id="node17" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="897,881,1095,927"/><area shape="rect" id="node101" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="1152,125,1325,171"/><area shape="rect" id="node15" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="3361,185,3412,215"/><area shape="rect" id="node19" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="1144,1493,1333,1539"/><area shape="rect" id="node21" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="1677,1493,1875,1539"/><area shape="rect" id="node95" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1677,1607,1875,1654"/><area shape="rect" id="node98" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="1383,1475,1628,1504"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#af25ba1d8b183fb12968ebb12ae28de91" title="rocksdb::DBImpl::Background\lCallCompaction" alt="" coords="1923,1523,2120,1570"/><area shape="rect" id="node25" href="../../dd/df5/a00386.html#a0f92fd02fffbe404bbdffc1bd24195d7" title="rocksdb::DBImpl::BGWorkCompaction" alt="" coords="2168,1524,2416,1553"/><area shape="rect" id="node27" href="../../dd/df5/a00386.html#a6f3ccd58266e8fd7a1b513ebef01928a" title="rocksdb::DBImpl::MaybeSchedule\lFlushOrCompaction" alt="" coords="2464,1515,2685,1562"/><area shape="rect" id="node30" href="../../dd/df5/a00386.html#af70abfde15bcbcb869e36a51460def59" title="rocksdb::DBImpl::Background\lCallFlush" alt="" coords="2733,1689,2931,1735"/><area shape="rect" id="node36" href="../../dd/df5/a00386.html#afcef1eaa87f194ee6689e465e15801ed" title="rocksdb::DBImpl::GetImpl" alt="" coords="2745,1463,2919,1492"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#aa86eaccec6e3d9e5146c13ca31b2918f" title="rocksdb::DBImpl::MakeRoom\lForWrite" alt="" coords="2735,1515,2929,1562"/><area shape="rect" id="node46" href="../../dd/df5/a00386.html#a19d8fbac12db943503c6a28d35c44e44" title="rocksdb::DBImpl::MultiGet" alt="" coords="2744,1585,2920,1615"/><area shape="rect" id="node50" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="2765,799,2899,828"/><area shape="rect" id="node93" href="../../dd/df5/a00386.html#ae97e90f1166836da10d3f5d48be25f1e" title="rocksdb::DBImpl::TEST\l_CompactRange" alt="" coords="2751,1393,2913,1439"/><area shape="rect" id="node32" href="../../dd/df5/a00386.html#a7f35702e61b4f7ec3eb12e91432dca47" title="rocksdb::DBImpl::BGWorkFlush" alt="" coords="2993,1677,3204,1707"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#aa86e47e55cc16361ca8bfb166c659f9a" title="rocksdb::DBImpl::Get" alt="" coords="3024,1497,3173,1527"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#a15fbc3b2d454e4ace04cf01a4ed30124" title="rocksdb::DBImpl::KeyMayExist" alt="" coords="2996,1444,3201,1473"/><area shape="rect" id="node44" href="../../dd/df5/a00386.html#a036d197e1bf77abea19c23696305cf34" title="rocksdb::DBImpl::Write" alt="" coords="3020,1551,3177,1580"/><area shape="rect" id="node48" href="../../d4/d87/a03436.html#a7a06ad892e18be5b16dfd7843487c151" title="rocksdb::TEST" alt="" coords="3044,1604,3153,1633"/><area shape="rect" id="node52" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="3017,1251,3180,1298"/><area shape="rect" id="node54" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="3028,1321,3169,1367"/><area shape="rect" id="node56" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="2999,1391,3199,1420"/><area shape="rect" id="node58" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="3003,308,3195,337"/><area shape="rect" id="node60" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="3044,361,3153,391"/><area shape="rect" id="node63" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="3019,414,3179,461"/><area shape="rect" id="node65" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="3037,484,3160,513"/><area shape="rect" id="node67" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="3031,537,3167,583"/><area shape="rect" id="node69" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="3003,606,3195,653"/><area shape="rect" id="node71" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="3003,675,3195,722"/><area shape="rect" id="node73" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="2991,745,3207,775"/><area shape="rect" id="node75" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="3017,1113,3180,1159"/><area shape="rect" id="node77" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="3073,799,3124,828"/><area shape="rect" id="node79" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="3029,851,3168,898"/><area shape="rect" id="node81" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="3009,921,3188,967"/><area shape="rect" id="node83" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="3017,238,3180,285"/><area shape="rect" id="node87" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="3016,991,3181,1020"/><area shape="rect" id="node89" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="3029,1043,3168,1090"/><area shape="rect" id="node91" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="3027,1182,3171,1229"/><area shape="rect" id="node85" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="3268,95,3505,142"/><area shape="rect" id="node108" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="2980,14,3217,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a39f8d86429df9529e2d5e8dd2c6bc14f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::VersionSet::Builder::MaybeAddFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dd1/a01797.html">Version</a> *&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/ddb/a00542.html">FileMetaData</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l01117">1117</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>References <a class="el" href="../../d2/ddf/a02573_source.html#l00056">rocksdb::InternalKeyComparator::Compare()</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00166">rocksdb::Version::files_</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00475">rocksdb::VersionSet::icmp_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00926">levels_</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00023">rocksdb::FileMetaData::number</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00021">rocksdb::FileMetaData::refs</a>, <a class="el" href="../../de/d3b/a02610_source.html#l00025">rocksdb::FileMetaData::smallest</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00924">vset_</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01082">SaveTo()</a>.</p>
<div class="fragment"><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                                                            {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].deleted_files.count(<a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a>-&gt;number) &gt; 0) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <span class="comment">// File is deleted: do nothing</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      std::vector&lt;FileMetaData*&gt;* files = &amp;v-&gt;files_[level];</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <span class="keywordflow">if</span> (level &gt; 0 &amp;&amp; !files-&gt;empty()) {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="comment">// Must not overlap</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        assert(<a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#aa9f3871481ba903b57737941a72115c7">icmp_</a>.<a class="code" href="../../d0/d72/a00724.html#a5a44464365280d5c9649746930e1aee8">Compare</a>((*files)[files-&gt;size()-1]-&gt;largest,</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                                    <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a>-&gt;smallest) &lt; 0);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a>-&gt;refs++;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      files-&gt;push_back(<a class="code" href="../../d9/d9d/a03417.html#aec7524f5afba4ac75d4fa5b9228c3bac">f</a>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_cgraph.png" border="0" usemap="#d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_cgraph" alt=""/></div>
<map name="d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_cgraph" id="d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_cgraph">
<area shape="rect" id="node3" href="../../d0/d72/a00724.html#a5a44464365280d5c9649746930e1aee8" title="rocksdb::InternalKeyComparator\l::Compare" alt="" coords="216,146,427,193"/><area shape="rect" id="node5" href="../../d4/d87/a03436.html#aab29434ed2c251eae44fdb498e4d8dcc" title="rocksdb::BumpPerfCount" alt="" coords="476,5,644,35"/><area shape="rect" id="node7" href="../../d0/d61/a00302.html#a9fe800fa52b86a61b626a58f46a38f81" title="rocksdb::Comparator\l::Compare" alt="" coords="488,58,632,105"/><area shape="rect" id="node9" href="../../de/daf/a01417.html#abed770f35075076510897c3fbbc10923" title="rocksdb::Slice::data" alt="" coords="708,195,847,224"/><area shape="rect" id="node11" href="../../d4/d87/a03436.html#a0bb1082c7c473bb0c6614963a14fed62" title="rocksdb::DecodeFixed64" alt="" coords="477,128,643,157"/><area shape="rect" id="node15" href="../../d4/d87/a03436.html#ae015f9b23bbadef7eb4e3796c2d4fb46" title="rocksdb::ExtractUserKey" alt="" coords="476,232,644,261"/><area shape="rect" id="node18" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="709,272,845,301"/><area shape="rect" id="node13" href="../../d4/d87/a03436.html#a5eb46c01bbc65cc301b2648e655dbe15" title="rocksdb::DecodeFixed32" alt="" coords="695,128,860,157"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_icgraph.png" border="0" usemap="#d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_icgraph" alt=""/></div>
<map name="d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_icgraph" id="d0/d27/a00239_a39f8d86429df9529e2d5e8dd2c6bc14f_icgraph">
<area shape="rect" id="node3" href="../../d0/d27/a00239.html#a61a3b1cccd9c3d386297a9cf999781d6" title="rocksdb::VersionSet\l::Builder::SaveTo" alt="" coords="217,1650,356,1697"/><area shape="rect" id="node5" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="407,1559,545,1606"/><area shape="rect" id="node100" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="2483,1650,2621,1697"/><area shape="rect" id="node107" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="407,1710,545,1757"/><area shape="rect" id="node7" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="2729,1547,2908,1576"/><area shape="rect" id="node11" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="607,1161,804,1207"/><area shape="rect" id="node97" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="872,1590,1045,1637"/><area shape="rect" id="node9" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="3081,1547,3132,1576"/><area shape="rect" id="node13" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="864,953,1053,999"/><area shape="rect" id="node15" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="1397,874,1595,921"/><area shape="rect" id="node91" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1397,978,1595,1025"/><area shape="rect" id="node94" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="1103,935,1348,964"/><area shape="rect" id="node17" href="../../dd/df5/a00386.html#af25ba1d8b183fb12968ebb12ae28de91" title="rocksdb::DBImpl::Background\lCallCompaction" alt="" coords="1643,874,1840,921"/><area shape="rect" id="node19" href="../../dd/df5/a00386.html#a0f92fd02fffbe404bbdffc1bd24195d7" title="rocksdb::DBImpl::BGWorkCompaction" alt="" coords="1888,904,2136,933"/><area shape="rect" id="node21" href="../../dd/df5/a00386.html#a6f3ccd58266e8fd7a1b513ebef01928a" title="rocksdb::DBImpl::MaybeSchedule\lFlushOrCompaction" alt="" coords="2184,811,2405,858"/><area shape="rect" id="node24" href="../../dd/df5/a00386.html#af70abfde15bcbcb869e36a51460def59" title="rocksdb::DBImpl::Background\lCallFlush" alt="" coords="2453,978,2651,1025"/><area shape="rect" id="node30" href="../../dd/df5/a00386.html#afcef1eaa87f194ee6689e465e15801ed" title="rocksdb::DBImpl::GetImpl" alt="" coords="2465,59,2639,88"/><area shape="rect" id="node36" href="../../dd/df5/a00386.html#aa86eaccec6e3d9e5146c13ca31b2918f" title="rocksdb::DBImpl::MakeRoom\lForWrite" alt="" coords="2455,181,2649,227"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#a19d8fbac12db943503c6a28d35c44e44" title="rocksdb::DBImpl::MultiGet" alt="" coords="2464,388,2640,417"/><area shape="rect" id="node44" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="2485,856,2619,885"/><area shape="rect" id="node87" href="../../dd/df5/a00386.html#ae97e90f1166836da10d3f5d48be25f1e" title="rocksdb::DBImpl::TEST\l_CompactRange" alt="" coords="2471,717,2633,763"/><area shape="rect" id="node26" href="../../dd/df5/a00386.html#a7f35702e61b4f7ec3eb12e91432dca47" title="rocksdb::DBImpl::BGWorkFlush" alt="" coords="2713,1493,2924,1523"/><area shape="rect" id="node32" href="../../dd/df5/a00386.html#aa86e47e55cc16361ca8bfb166c659f9a" title="rocksdb::DBImpl::Get" alt="" coords="2744,59,2893,88"/><area shape="rect" id="node34" href="../../dd/df5/a00386.html#a15fbc3b2d454e4ace04cf01a4ed30124" title="rocksdb::DBImpl::KeyMayExist" alt="" coords="2716,5,2921,35"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#a036d197e1bf77abea19c23696305cf34" title="rocksdb::DBImpl::Write" alt="" coords="2740,112,2897,141"/><area shape="rect" id="node42" href="../../d4/d87/a03436.html#a7a06ad892e18be5b16dfd7843487c151" title="rocksdb::TEST" alt="" coords="2764,165,2873,195"/><area shape="rect" id="node46" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="2737,549,2900,595"/><area shape="rect" id="node48" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="2748,618,2889,665"/><area shape="rect" id="node50" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="2719,688,2919,717"/><area shape="rect" id="node52" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="2723,741,2915,771"/><area shape="rect" id="node54" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="2764,795,2873,824"/><area shape="rect" id="node57" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="2739,847,2899,894"/><area shape="rect" id="node59" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="2757,917,2880,947"/><area shape="rect" id="node61" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="2751,970,2887,1017"/><area shape="rect" id="node63" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="2723,1039,2915,1086"/><area shape="rect" id="node65" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="2723,1109,2915,1155"/><area shape="rect" id="node67" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="2711,1179,2927,1208"/><area shape="rect" id="node69" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="2737,1231,2900,1278"/><area shape="rect" id="node71" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="2793,1301,2844,1331"/><area shape="rect" id="node73" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="2749,1354,2888,1401"/><area shape="rect" id="node75" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="2729,287,2908,334"/><area shape="rect" id="node77" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="2737,1423,2900,1470"/><area shape="rect" id="node81" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="2736,357,2901,387"/><area shape="rect" id="node83" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="2749,410,2888,457"/><area shape="rect" id="node85" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="2747,479,2891,526"/><area shape="rect" id="node79" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="2988,1625,3225,1671"/><area shape="rect" id="node89" href="../../dd/df5/a00386.html#aafef42f7b99bd9afdd50369bc5d37476" title="rocksdb::DBImpl::Compact\lRange" alt="" coords="2728,218,2909,265"/><area shape="rect" id="node104" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="2700,1650,2937,1697"/><area shape="rect" id="node109" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="595,1710,816,1757"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a61a3b1cccd9c3d386297a9cf999781d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rocksdb::VersionSet::Builder::SaveTo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dd1/a01797.html">Version</a> *&#160;</td>
          <td class="paramname"><em>v</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l01082">1082</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>References <a class="el" href="../../d6/dfc/a02612_source.html#l00921">rocksdb::VersionSet::Builder::LevelState::added_files</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00925">base_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00964">CheckConsistency()</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00166">rocksdb::Version::files_</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00475">rocksdb::VersionSet::icmp_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00905">rocksdb::VersionSet::Builder::BySmallestKey::internal_comparator</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00926">levels_</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01117">MaybeAddFile()</a>, <a class="el" href="../../db/d6a/a02613_source.html#l00292">rocksdb::VersionSet::NumberLevels()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00924">vset_</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01539">rocksdb::VersionSet::DumpManifest()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01211">rocksdb::VersionSet::LogAndApply()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l01400">rocksdb::VersionSet::Recover()</a>.</p>
<div class="fragment"><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                          {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <a class="code" href="../../d0/d27/a00239.html#a70c9fbc2ead82d8e2e4722161341eb49">CheckConsistency</a>(<a class="code" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a>);</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <a class="code" href="../../d0/d27/a00239.html#a70c9fbc2ead82d8e2e4722161341eb49">CheckConsistency</a>(v);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    BySmallestKey cmp;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    cmp.internal_comparator = &amp;<a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#aa9f3871481ba903b57737941a72115c7">icmp_</a>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> level = 0; level &lt; <a class="code" href="../../d0/d27/a00239.html#a89b1cd811e87f3f2f5e7e8e3a45ab87f">vset_</a>-&gt;<a class="code" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185">NumberLevels</a>(); level++) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="comment">// Merge the set of added files with the set of pre-existing files.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="comment">// Drop any deleted files.  Store the result in *v.</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keyword">const</span> std::vector&lt;FileMetaData*&gt;&amp; base_files = <a class="code" href="../../d0/d27/a00239.html#a29c541f6f53a5ad5419b68c0586e10e6">base_</a>-&gt;<a class="code" href="../../d4/dd1/a01797.html#a35f53fab270908bca7d895f54c85bfe9">files_</a>[level];</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      std::vector&lt;FileMetaData*&gt;::const_iterator base_iter = base_files.begin();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      std::vector&lt;FileMetaData*&gt;::const_iterator base_end = base_files.end();</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d0/d27/a00239.html#aa6c0a8d436be39da3f7577f46f7e2168">FileSet</a>* added = <a class="code" href="../../d0/d27/a00239.html#a2a66711a2f57e99fe904f5bdcd71e87d">levels_</a>[level].<a class="code" href="../../d7/d1b/a00864.html#a809ed1426874cdd824d9c08463fce177">added_files</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      v-&gt;files_[level].reserve(base_files.size() + added-&gt;size());</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">for</span> (FileSet::const_iterator added_iter = added-&gt;begin();</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;           added_iter != added-&gt;end();</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;           ++added_iter) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="comment">// Add all smaller files listed in base_</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;FileMetaData*&gt;::const_iterator bpos</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                 = std::upper_bound(base_iter, base_end, *added_iter, cmp);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;             base_iter != bpos;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;             ++base_iter) {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          <a class="code" href="../../d0/d27/a00239.html#a39f8d86429df9529e2d5e8dd2c6bc14f">MaybeAddFile</a>(v, level, *base_iter);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <a class="code" href="../../d0/d27/a00239.html#a39f8d86429df9529e2d5e8dd2c6bc14f">MaybeAddFile</a>(v, level, *added_iter);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="comment">// Add remaining base files</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">for</span> (; base_iter != base_end; ++base_iter) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <a class="code" href="../../d0/d27/a00239.html#a39f8d86429df9529e2d5e8dd2c6bc14f">MaybeAddFile</a>(v, level, *base_iter);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="../../d0/d27/a00239.html#a70c9fbc2ead82d8e2e4722161341eb49">CheckConsistency</a>(v);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_cgraph.png" border="0" usemap="#d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_cgraph" alt=""/></div>
<map name="d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_cgraph" id="d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_cgraph">
<area shape="rect" id="node3" href="../../d0/d27/a00239.html#a70c9fbc2ead82d8e2e4722161341eb49" title="rocksdb::VersionSet\l::Builder::CheckConsistency" alt="" coords="195,274,384,321"/><area shape="rect" id="node39" href="../../d1/d42/a01800.html#a6ae62b8394f58801a6340323b2c37185" title="rocksdb::VersionSet\l::NumberLevels" alt="" coords="468,343,607,390"/><area shape="rect" id="node41" href="../../d0/d27/a00239.html#a39f8d86429df9529e2d5e8dd2c6bc14f" title="rocksdb::VersionSet\l::Builder::MaybeAddFile" alt="" coords="209,197,369,243"/><area shape="rect" id="node5" href="../../d0/d72/a00724.html#a5a44464365280d5c9649746930e1aee8" title="rocksdb::InternalKeyComparator\l::Compare" alt="" coords="432,179,643,226"/><area shape="rect" id="node23" href="../../de/de6/a00723.html#a1f29087f48fd168fe431e4b884f5aed1" title="rocksdb::InternalKey\l::DebugString" alt="" coords="467,274,608,321"/><area shape="rect" id="node7" href="../../d4/d87/a03436.html#aab29434ed2c251eae44fdb498e4d8dcc" title="rocksdb::BumpPerfCount" alt="" coords="699,5,867,35"/><area shape="rect" id="node9" href="../../d0/d61/a00302.html#a9fe800fa52b86a61b626a58f46a38f81" title="rocksdb::Comparator\l::Compare" alt="" coords="711,109,855,155"/><area shape="rect" id="node11" href="../../de/daf/a01417.html#abed770f35075076510897c3fbbc10923" title="rocksdb::Slice::data" alt="" coords="964,231,1103,260"/><area shape="rect" id="node13" href="../../d4/d87/a03436.html#a0bb1082c7c473bb0c6614963a14fed62" title="rocksdb::DecodeFixed64" alt="" coords="951,335,1116,364"/><area shape="rect" id="node17" href="../../d4/d87/a03436.html#ae015f9b23bbadef7eb4e3796c2d4fb46" title="rocksdb::ExtractUserKey" alt="" coords="699,179,867,208"/><area shape="rect" id="node20" href="../../de/daf/a01417.html#aeb3a4a3ede98a163cc3796ef0d4a759d" title="rocksdb::Slice::size" alt="" coords="1208,231,1344,260"/><area shape="rect" id="node15" href="../../d4/d87/a03436.html#a5eb46c01bbc65cc301b2648e655dbe15" title="rocksdb::DecodeFixed32" alt="" coords="1193,335,1359,364"/><area shape="rect" id="node25" href="../../d6/d80/a01076.html#a36870425cc00e160004d62bd6118a24d" title="rocksdb::ParsedInternalKey\l::DebugString" alt="" coords="692,439,873,486"/><area shape="rect" id="node29" href="../../d4/d87/a03436.html#a4bf89f1a48c96450ef0d88b5c9f0a1ec" title="rocksdb::EscapeString" alt="" coords="705,387,860,416"/><area shape="rect" id="node34" href="../../d4/d87/a03436.html#add1d5b59fe1243a2201201ab3a3fbdb2" title="rocksdb::ParseInternalKey" alt="" coords="695,283,871,312"/><area shape="rect" id="node27" href="../../de/daf/a01417.html#ac5faa24d39a613c0ce7965d2bd9cf958" title="rocksdb::Slice::ToString" alt="" coords="952,448,1115,477"/><area shape="rect" id="node31" href="../../d4/d87/a03436.html#abd1b2064e9379d3df8f49bcdd26d7de0" title="rocksdb::AppendEscapedStringTo" alt="" coords="924,388,1143,417"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_icgraph.png" border="0" usemap="#d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_icgraph" alt=""/></div>
<map name="d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_icgraph" id="d0/d27/a00239_a61a3b1cccd9c3d386297a9cf999781d6_icgraph">
<area shape="rect" id="node3" href="../../d1/d42/a01800.html#a6a345ce36535de042e2e0d254ff66a5a" title="rocksdb::VersionSet\l::DumpManifest" alt="" coords="196,1485,335,1531"/><area shape="rect" id="node7" href="../../d1/d42/a01800.html#a8d4bdcc8a079afc6fcac4f19fbaf1d50" title="rocksdb::VersionSet\l::LogAndApply" alt="" coords="196,1583,335,1630"/><area shape="rect" id="node104" href="../../d1/d42/a01800.html#acf04defe0d794e6933785aad628ab9b6" title="rocksdb::VersionSet\l::Recover" alt="" coords="2272,1703,2411,1750"/><area shape="rect" id="node5" href="../../dd/d20/a00939.html#a0a4996198d709bec7b49eec50ba36567" title="rocksdb::ManifestDumpCommand\l::DoCommand" alt="" coords="384,1454,605,1501"/><area shape="rect" id="node9" href="../../d4/d87/a03436.html#a397a8fe5f365d028536a4f82449726b9" title="rocksdb::BM_LogAndApply" alt="" coords="2519,1600,2697,1629"/><area shape="rect" id="node13" href="../../d7/dd4/a00968.html#ac91fdc0526a34fee8369c19f92223514" title="rocksdb::MemTableList\l::InstallMemtableFlushResults" alt="" coords="396,1523,593,1570"/><area shape="rect" id="node101" href="../../d1/d42/a01800.html#a788a71e004c7a132a2fea2a82eedccd6" title="rocksdb::VersionSet\l::ReduceNumberOfLevels" alt="" coords="661,1643,835,1690"/><area shape="rect" id="node11" href="../../d9/de7/a02572.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="2871,1600,2921,1629"/><area shape="rect" id="node15" href="../../dd/df5/a00386.html#a3f1443d5437c4f0e98d7b0eb2839ef2e" title="rocksdb::DBImpl::FlushMem\lTableToOutputFile" alt="" coords="653,1035,843,1082"/><area shape="rect" id="node17" href="../../dd/df5/a00386.html#a5c7b18fec45d2a89a72902476d846566" title="rocksdb::DBImpl::Background\lCompaction" alt="" coords="1187,957,1384,1003"/><area shape="rect" id="node95" href="../../dd/df5/a00386.html#a497121b80918b7283fae65d8bfe01fc4" title="rocksdb::DBImpl::Background\lFlush" alt="" coords="1187,1061,1384,1107"/><area shape="rect" id="node98" href="../../dd/df5/a00386.html#a118052cb7b51c90604865d226452918b" title="rocksdb::DBImpl::DoCompactionWork" alt="" coords="892,1017,1137,1047"/><area shape="rect" id="node19" href="../../dd/df5/a00386.html#af25ba1d8b183fb12968ebb12ae28de91" title="rocksdb::DBImpl::Background\lCallCompaction" alt="" coords="1432,957,1629,1003"/><area shape="rect" id="node21" href="../../dd/df5/a00386.html#a0f92fd02fffbe404bbdffc1bd24195d7" title="rocksdb::DBImpl::BGWorkCompaction" alt="" coords="1677,987,1925,1016"/><area shape="rect" id="node23" href="../../dd/df5/a00386.html#a6f3ccd58266e8fd7a1b513ebef01928a" title="rocksdb::DBImpl::MaybeSchedule\lFlushOrCompaction" alt="" coords="1973,901,2195,947"/><area shape="rect" id="node26" href="../../dd/df5/a00386.html#af70abfde15bcbcb869e36a51460def59" title="rocksdb::DBImpl::Background\lCallFlush" alt="" coords="2243,1061,2440,1107"/><area shape="rect" id="node32" href="../../dd/df5/a00386.html#afcef1eaa87f194ee6689e465e15801ed" title="rocksdb::DBImpl::GetImpl" alt="" coords="2255,59,2428,88"/><area shape="rect" id="node38" href="../../dd/df5/a00386.html#aa86eaccec6e3d9e5146c13ca31b2918f" title="rocksdb::DBImpl::MakeRoom\lForWrite" alt="" coords="2244,122,2439,169"/><area shape="rect" id="node42" href="../../dd/df5/a00386.html#a19d8fbac12db943503c6a28d35c44e44" title="rocksdb::DBImpl::MultiGet" alt="" coords="2253,215,2429,244"/><area shape="rect" id="node46" href="../../d8/ddd/a00380.html#a898ece06bdc8a5ec59e5996a01f2650d" title="rocksdb::DB::Open" alt="" coords="2275,909,2408,939"/><area shape="rect" id="node89" href="../../dd/df5/a00386.html#ae97e90f1166836da10d3f5d48be25f1e" title="rocksdb::DBImpl::TEST\l_CompactRange" alt="" coords="2260,279,2423,326"/><area shape="rect" id="node28" href="../../dd/df5/a00386.html#a7f35702e61b4f7ec3eb12e91432dca47" title="rocksdb::DBImpl::BGWorkFlush" alt="" coords="2503,1547,2713,1576"/><area shape="rect" id="node34" href="../../dd/df5/a00386.html#aa86e47e55cc16361ca8bfb166c659f9a" title="rocksdb::DBImpl::Get" alt="" coords="2533,5,2683,35"/><area shape="rect" id="node36" href="../../dd/df5/a00386.html#a15fbc3b2d454e4ace04cf01a4ed30124" title="rocksdb::DBImpl::KeyMayExist" alt="" coords="2505,59,2711,88"/><area shape="rect" id="node40" href="../../dd/df5/a00386.html#a036d197e1bf77abea19c23696305cf34" title="rocksdb::DBImpl::Write" alt="" coords="2529,112,2687,141"/><area shape="rect" id="node44" href="../../d4/d87/a03436.html#a7a06ad892e18be5b16dfd7843487c151" title="rocksdb::TEST" alt="" coords="2553,165,2663,195"/><area shape="rect" id="node48" href="../../d9/d48/a00345.html#ad31d70372891633ef7d3ccafe5540d63" title="rocksdb::CorruptionTest\l::TryReopen" alt="" coords="2527,602,2689,649"/><area shape="rect" id="node50" href="../../d8/d64/a00181.html#ab8387daed213810058d1fc9541bdaacc" title="rocksdb::Benchmark\l::Open" alt="" coords="2537,671,2679,718"/><area shape="rect" id="node52" href="../../db/d95/a00391.html#a9f9969a19cf328935234d867f6f17b0b" title="rocksdb::DBTest::PureReopen" alt="" coords="2508,741,2708,771"/><area shape="rect" id="node54" href="../../db/d95/a00391.html#aec8d2ea7e19d5417cf47fa3565d3bd67" title="rocksdb::DBTest::TryReopen" alt="" coords="2512,795,2704,824"/><area shape="rect" id="node56" href="../../d4/d87/a03436.html#a8ba93bfa1ae44c10535930930b4e30b6" title="rocksdb::TEST" alt="" coords="2553,848,2663,877"/><area shape="rect" id="node59" href="../../de/de8/a00405.html#a7edc59b996abfcb8ca20815e17079e44" title="rocksdb::DeleteFileTest\l::ReopenDB" alt="" coords="2528,901,2688,947"/><area shape="rect" id="node61" href="../../d4/d87/a03436.html#ae1d0f9b5886776b75ab26edd57c52741" title="rocksdb::OpenDb" alt="" coords="2547,971,2669,1000"/><area shape="rect" id="node63" href="../../d0/d61/a01130.html#af98a7496147d77913015c51780f766bc" title="rocksdb::PrefixTest\l::OpenDb" alt="" coords="2540,1023,2676,1070"/><area shape="rect" id="node65" href="../../d0/dc7/a01402.html#a8f0e4e467e3e1df811a9583150902c9f" title="rocksdb::SimpleTableDBTest\l::PureReopen" alt="" coords="2512,1093,2704,1139"/><area shape="rect" id="node67" href="../../d0/dc7/a01402.html#a4b0084a45075e30aca7dca07fc7c5ab4" title="rocksdb::SimpleTableDBTest\l::TryReopen" alt="" coords="2512,1162,2704,1209"/><area shape="rect" id="node69" href="../../d4/d87/a03436.html#a0b1de5b83de45a9d933c398b7cde23a7" title="rocksdb::TableReaderBenchmark" alt="" coords="2500,1232,2716,1261"/><area shape="rect" id="node71" href="../../da/dee/a00383.html#aa25b54342133aea90459685d5f58ee2d" title="rocksdb::DBConstructor\l::NewDB" alt="" coords="2527,1285,2689,1331"/><area shape="rect" id="node73" href="../../d6/da8/a02693.html#a217dbf8b442f20279ea00b898af96f52" title="main" alt="" coords="2583,1355,2633,1384"/><area shape="rect" id="node75" href="../../d3/daa/a01577.html#abd8a7f61f0b14b85acd87a4d77a6e394" title="rocksdb::StressTest\l::Open" alt="" coords="2539,1407,2677,1454"/><area shape="rect" id="node77" href="../../d0/d88/a01231.html#a1cf658812203ec463aa4bd1a688434cb" title="rocksdb::ReduceLevelTest\l::OpenDB" alt="" coords="2519,341,2697,387"/><area shape="rect" id="node79" href="../../de/d9d/a00813.html#a1e30a763620671ecdcdb1abc079b0167" title="rocksdb::LDBCommand\l::OpenDB" alt="" coords="2527,1477,2689,1523"/><area shape="rect" id="node83" href="../../d4/d87/a03436.html#a6cef9e517390b068bbabfa5267621060" title="rocksdb::OpenNormalDb" alt="" coords="2525,411,2691,440"/><area shape="rect" id="node85" href="../../de/d16/a01228.html#a4602503c6a2659926aaa2dcf47e789df" title="Constructors. " alt="" coords="2539,463,2677,510"/><area shape="rect" id="node87" href="../../d4/d27/a00392.html#ac1f3d9d21c81bd7381627456ed8f06b4" title="rocksdb::DBWithTTL\l::DBWithTTL" alt="" coords="2536,533,2680,579"/><area shape="rect" id="node81" href="../../d0/d58/a01230.html#af2eb900c9cab82e8dffb16d90d070ae1" title="rocksdb::ReduceDBLevelsCommand\l::DoCommand" alt="" coords="2777,1674,3015,1721"/><area shape="rect" id="node91" href="../../dd/df5/a00386.html#aafef42f7b99bd9afdd50369bc5d37476" title="rocksdb::DBImpl::Compact\lRange" alt="" coords="2517,218,2699,265"/><area shape="rect" id="node93" href="../../d4/d87/a03436.html#a5ee0a2f05cc4953d8361455bcc51b827" title="rocksdb::TEST" alt="" coords="2553,288,2663,317"/><area shape="rect" id="node108" href="../../d0/d58/a01230.html#a769cf9f08028648f2cb824dbbf695de7" title="rocksdb::ReduceDBLevelsCommand\l::GetOldNumOfLevels" alt="" coords="2489,1754,2727,1801"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a29c541f6f53a5ad5419b68c0586e10e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dd1/a01797.html">Version</a>* rocksdb::VersionSet::Builder::base_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00925">925</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01033">Apply()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00930">Builder()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00984">CheckConsistencyForDeletes()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01082">SaveTo()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00942">~Builder()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a66711a2f57e99fe904f5bdcd71e87d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d1b/a00864.html">LevelState</a>* rocksdb::VersionSet::Builder::levels_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00926">926</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01033">Apply()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00930">Builder()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00984">CheckConsistencyForDeletes()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01117">MaybeAddFile()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01082">SaveTo()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00942">~Builder()</a>.</p>

</div>
</div>
<a class="anchor" id="a89b1cd811e87f3f2f5e7e8e3a45ab87f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d42/a01800.html">VersionSet</a>* rocksdb::VersionSet::Builder::vset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dfc/a02612_source.html#l00924">924</a> of file <a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dfc/a02612_source.html#l01033">Apply()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00930">Builder()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l00964">CheckConsistency()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01117">MaybeAddFile()</a>, <a class="el" href="../../d6/dfc/a02612_source.html#l01082">SaveTo()</a>, and <a class="el" href="../../d6/dfc/a02612_source.html#l00942">~Builder()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>rippled/src/ripple/rocksdb/rocksdb/db/<a class="el" href="../../d6/dfc/a02612_source.html">version_set.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d4/d87/a03436.html">rocksdb</a></li><li class="navelem"><a class="el" href="../../d1/d42/a01800.html">VersionSet</a></li><li class="navelem"><a class="el" href="../../d0/d27/a00239.html">Builder</a></li>
    <li class="footer">Generated on Fri May 2 2014 05:29:22 for rippled by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
